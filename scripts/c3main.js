// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let It=function(t){e=t},Ct=function(t){return t*r},Rt=function(t,e){return Math.abs(t-e)<=s*Math.max(1,Math.abs(t),Math.abs(e))},Pt=function(){var t=new e(4);return e!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},Et=function(t){var s=new e(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Ft=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},At=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ot=function(t,s,i,n){var r=new e(4);return r[0]=t,r[1]=s,r[2]=i,r[3]=n,r},Dt=function(t,s,e,i,n){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t},kt=function(t,s){if(t===s){var e=s[1];t[1]=s[2],t[2]=e}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},Lt=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e*r-n*i;return h?(h=1/h,t[0]=r*h,t[1]=-i*h,t[2]=-n*h,t[3]=e*h,t):null},Nt=function(t,s){var e=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=e,t},Bt=function(t){return t[0]*t[3]-t[2]*t[1]},Ut=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*o+r*a,t[1]=n*o+h*a,t[2]=i*l+r*u,t[3]=n*l+h*u,t},Vt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+r*o,t[1]=n*a+h*o,t[2]=i*-o+r*a,t[3]=n*-o+h*a,t},Wt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[0],a=e[1];return t[0]=i*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},zt=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=-e,t[3]=i,t},jt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Ht=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Jt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},$t=function(t,s,e,i){return t[2]=i[2]/i[0],e[0]=i[0],e[1]=i[1],e[3]=i[3]-t[2]*e[1],[t,s,e]},qt=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},Xt=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},Yt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Kt=function(t,e){var i=t[0],n=t[1],r=t[2],h=t[3],o=e[0],a=e[1],l=e[2],u=e[3];return Math.abs(i-o)<=s*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=s*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},Zt=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},Qt=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},ts=function(){var t=new e(6);return e!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},ss=function(t){var s=new e(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},is=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ns=function(t,s,i,n,r,h){var o=new e(6);return o[0]=t,o[1]=s,o[2]=i,o[3]=n,o[4]=r,o[5]=h,o},rs=function(t,s,e,i,n,r,h){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t},hs=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=e*r-i*n;return a?(a=1/a,t[0]=r*a,t[1]=-i*a,t[2]=-n*a,t[3]=e*a,t[4]=(n*o-r*h)*a,t[5]=(i*h-e*o)*a,t):null},os=function(t){return t[0]*t[3]-t[1]*t[2]},as=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],p=e[5];return t[0]=i*l+r*u,t[1]=n*l+h*u,t[2]=i*c+r*f,t[3]=n*c+h*f,t[4]=i*d+r*p+o,t[5]=n*d+h*p+a,t},ls=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(e),u=Math.cos(e);return t[0]=i*u+r*l,t[1]=n*u+h*l,t[2]=i*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},us=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1];return t[0]=i*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},cs=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=e[0],u=e[1];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=i*l+r*u+o,t[5]=n*l+h*u+a,t},fs=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=-e,t[3]=i,t[4]=0,t[5]=0,t},ds=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},ps=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},ms=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},gs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},ys=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t},Ss=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t},ws=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t},vs=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t},xs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},bs=function(t,e){var i=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],p=e[5];return Math.abs(i-l)<=s*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(n-u)<=s*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=s*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=s*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=s*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=s*Math.max(1,Math.abs(a),Math.abs(p))},Ms=function(){var t=new e(9);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ts=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Gs=function(t){var s=new e(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},_s=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Is=function(t,s,i,n,r,h,o,a,l){var u=new e(9);return u[0]=t,u[1]=s,u[2]=i,u[3]=n,u[4]=r,u[5]=h,u[6]=o,u[7]=a,u[8]=l,u},Cs=function(t,s,e,i,n,r,h,o,a,l){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},Rs=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ps=function(t,s){if(t===s){var e=s[1],i=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=e,t[5]=s[7],t[6]=i,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},Es=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=e*c+i*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*i+n*l)*p,t[2]=(o*i-n*h)*p,t[3]=f*p,t[4]=(u*e-n*a)*p,t[5]=(-o*e+n*r)*p,t[6]=d*p,t[7]=(-l*e+i*a)*p,t[8]=(h*e-i*r)*p,t):null},Fs=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-i*u,t[2]=i*o-n*h,t[3]=o*a-r*u,t[4]=e*u-n*a,t[5]=n*r-e*o,t[6]=r*l-h*a,t[7]=i*a-e*l,t[8]=e*h-i*r,t},As=function(t){var s=t[0],e=t[1],i=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+e*(-l*n+h*o)+i*(a*n-r*o)},Os=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=e[0],d=e[1],p=e[2],m=e[3],g=e[4],y=e[5],S=e[6],w=e[7],v=e[8];return t[0]=f*i+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*i+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=S*i+w*h+v*l,t[7]=S*n+w*o+v*u,t[8]=S*r+w*a+v*c,t},Ds=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=e[0],d=e[1];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*i+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},ks=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(e),d=Math.cos(e);return t[0]=d*i+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*i,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},Ls=function(t,s,e){var i=e[0],n=e[1];return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Ns=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Bs=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=0,t[3]=-e,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Us=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Vs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Ws=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e+e,o=i+i,a=n+n,l=e*h,u=i*h,c=i*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},zs=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-n*h,v=e*l-r*h,x=i*a-n*o,b=i*l-r*o,M=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,R=f*y-d*g,P=S*R-w*C+v*I+x*_-b*G+M*T;return P?(P=1/P,t[0]=(o*R-a*C+l*I)*P,t[1]=(a*_-h*R-l*G)*P,t[2]=(h*C-o*_+l*T)*P,t[3]=(n*C-i*R-r*I)*P,t[4]=(e*R-n*_+r*G)*P,t[5]=(i*_-e*C-r*T)*P,t[6]=(m*M-g*b+y*x)*P,t[7]=(g*v-p*M-y*w)*P,t[8]=(p*b-m*v+y*S)*P,t):null},js=function(t,s,e){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Hs=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Js=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},$s=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t},qs=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t},Xs=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t},Ys=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t},Ks=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Zs=function(t,e){var i=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=e[0],d=e[1],p=e[2],m=e[3],g=e[4],y=e[5],S=e[6],w=e[7],v=e[8];return Math.abs(i-f)<=s*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(n-d)<=s*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=s*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=s*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=s*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=s*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-S)<=s*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-w)<=s*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-v)<=s*Math.max(1,Math.abs(c),Math.abs(v))},Qs=function(){var t=new e(16);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},te=function(t){var s=new e(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},se=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ee=function(t,s,i,n,r,h,o,a,l,u,c,f,d,p,m,g){var y=new e(16);return y[0]=t,y[1]=s,y[2]=i,y[3]=n,y[4]=r,y[5]=h,y[6]=o,y[7]=a,y[8]=l,y[9]=u,y[10]=c,y[11]=f,y[12]=d,y[13]=p,y[14]=m,y[15]=g,y},ie=function(t,s,e,i,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},ne=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},re=function(t,s){if(t===s){var e=s[1],i=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=e,t[6]=s[9],t[7]=s[13],t[8]=i,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},he=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-n*h,v=e*l-r*h,x=i*a-n*o,b=i*l-r*o,M=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,R=f*y-d*g,P=S*R-w*C+v*I+x*_-b*G+M*T;return P?(P=1/P,t[0]=(o*R-a*C+l*I)*P,t[1]=(n*C-i*R-r*I)*P,t[2]=(m*M-g*b+y*x)*P,t[3]=(f*b-c*M-d*x)*P,t[4]=(a*_-h*R-l*G)*P,t[5]=(e*R-n*_+r*G)*P,t[6]=(g*v-p*M-y*w)*P,t[7]=(u*M-f*v+d*w)*P,t[8]=(h*C-o*_+l*T)*P,t[9]=(i*_-e*C-r*T)*P,t[10]=(p*b-m*v+y*S)*P,t[11]=(c*v-u*b-d*S)*P,t[12]=(o*G-h*I-a*T)*P,t[13]=(e*I-i*G+n*T)*P,t[14]=(m*w-p*x-g*S)*P,t[15]=(u*x-c*w+f*S)*P,t):null},oe=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=e*o-i*h,w=e*a-n*h,v=e*l-r*h,x=i*a-n*o,b=i*l-r*o,M=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,R=f*y-d*g;return t[0]=o*R-a*C+l*I,t[1]=n*C-i*R-r*I,t[2]=m*M-g*b+y*x,t[3]=f*b-c*M-d*x,t[4]=a*_-h*R-l*G,t[5]=e*R-n*_+r*G,t[6]=g*v-p*M-y*w,t[7]=u*M-f*v+d*w,t[8]=h*C-o*_+l*T,t[9]=i*_-e*C-r*T,t[10]=p*b-m*v+y*S,t[11]=c*v-u*b-d*S,t[12]=o*G-h*I-a*T,t[13]=e*I-i*G+n*T,t[14]=m*w-p*x-g*S,t[15]=u*x-c*w+f*S,t},ae=function(t){var s=t[0],e=t[1],i=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-e*r,y=s*o-i*r,S=e*o-i*h,w=l*p-u*d,v=l*m-c*d,x=u*m-c*p;return a*(s*x-e*v+i*w)-n*(r*x-h*v+o*w)+t[15]*(l*S-u*y+c*g)-f*(d*S-p*y+m*g)},le=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],S=s[15],w=e[0],v=e[1],x=e[2],b=e[3];return t[0]=w*i+v*o+x*c+b*m,t[1]=w*n+v*a+x*f+b*g,t[2]=w*r+v*l+x*d+b*y,t[3]=w*h+v*u+x*p+b*S,w=e[4],v=e[5],x=e[6],b=e[7],t[4]=w*i+v*o+x*c+b*m,t[5]=w*n+v*a+x*f+b*g,t[6]=w*r+v*l+x*d+b*y,t[7]=w*h+v*u+x*p+b*S,w=e[8],v=e[9],x=e[10],b=e[11],t[8]=w*i+v*o+x*c+b*m,t[9]=w*n+v*a+x*f+b*g,t[10]=w*r+v*l+x*d+b*y,t[11]=w*h+v*u+x*p+b*S,w=e[12],v=e[13],x=e[14],b=e[15],t[12]=w*i+v*o+x*c+b*m,t[13]=w*n+v*a+x*f+b*g,t[14]=w*r+v*l+x*d+b*y,t[15]=w*h+v*u+x*p+b*S,t},ue=function(t,s,e){var i,n,r,h,o,a,l,u,c,f,d,p,m=e[0],g=e[1],y=e[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},ce=function(t,s,e){var i=e[0],n=e[1],r=e[2];return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fe=function(t,e,i,n){var r,h,o,a,l,u,c,f,d,p,m,g,y,S,w,v,x,b,M,T,G,_,I,C,R=n[0],P=n[1],E=n[2],F=Math.hypot(R,P,E);return F<s?null:(R*=F=1/F,P*=F,E*=F,r=Math.sin(i),o=1-(h=Math.cos(i)),a=e[0],l=e[1],u=e[2],c=e[3],f=e[4],d=e[5],p=e[6],m=e[7],g=e[8],y=e[9],S=e[10],w=e[11],v=R*R*o+h,x=P*R*o+E*r,b=E*R*o-P*r,M=R*P*o-E*r,T=P*P*o+h,G=E*P*o+R*r,_=R*E*o+P*r,I=P*E*o-R*r,C=E*E*o+h,t[0]=a*v+f*x+g*b,t[1]=l*v+d*x+y*b,t[2]=u*v+p*x+S*b,t[3]=c*v+m*x+w*b,t[4]=a*M+f*T+g*G,t[5]=l*M+d*T+y*G,t[6]=u*M+p*T+S*G,t[7]=c*M+m*T+w*G,t[8]=a*_+f*I+g*C,t[9]=l*_+d*I+y*C,t[10]=u*_+p*I+S*C,t[11]=c*_+m*I+w*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},de=function(t,s,e){var i=Math.sin(e),n=Math.cos(e),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*i,t[5]=h*n+u*i,t[6]=o*n+c*i,t[7]=a*n+f*i,t[8]=l*n-r*i,t[9]=u*n-h*i,t[10]=c*n-o*i,t[11]=f*n-a*i,t},pe=function(t,s,e){var i=Math.sin(e),n=Math.cos(e),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*i,t[1]=h*n-u*i,t[2]=o*n-c*i,t[3]=a*n-f*i,t[8]=r*i+l*n,t[9]=h*i+u*n,t[10]=o*i+c*n,t[11]=a*i+f*n,t},me=function(t,s,e){var i=Math.sin(e),n=Math.cos(e),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*i,t[1]=h*n+u*i,t[2]=o*n+c*i,t[3]=a*n+f*i,t[4]=l*n-r*i,t[5]=u*n-h*i,t[6]=c*n-o*i,t[7]=f*n-a*i,t},ge=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ye=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Se=function(t,e,i){var n,r,h,o=i[0],a=i[1],l=i[2],u=Math.hypot(o,a,l);return u<s?null:(o*=u=1/u,a*=u,l*=u,n=Math.sin(e),h=1-(r=Math.cos(e)),t[0]=o*o*h+r,t[1]=a*o*h+l*n,t[2]=l*o*h-a*n,t[3]=0,t[4]=o*a*h-l*n,t[5]=a*a*h+r,t[6]=l*a*h+o*n,t[7]=0,t[8]=o*l*h+a*n,t[9]=a*l*h-o*n,t[10]=l*l*h+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},we=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ve=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xe=function(t,s){var e=Math.sin(s),i=Math.cos(s);return t[0]=i,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},be=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=i+i,a=n+n,l=r+r,u=i*o,c=i*a,f=i*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,S=h*l;return t[0]=1-(d+m),t[1]=c+S,t[2]=f-y,t[3]=0,t[4]=c-S,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},Me=function(t,s){var i=new e(3),n=-s[0],r=-s[1],h=-s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7],f=n*n+r*r+h*h+o*o;return f>0?(i[0]=2*(a*o+c*n+l*h-u*r)/f,i[1]=2*(l*o+c*r+u*n-a*h)/f,i[2]=2*(u*o+c*h+a*r-l*n)/f):(i[0]=2*(a*o+c*n+l*h-u*r),i[1]=2*(l*o+c*r+u*n-a*h),i[2]=2*(u*o+c*h+a*r-l*n)),be(t,s,i),t},Te=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},Ge=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(e,i,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},_e=function(t,s){var i=new e(3);Ge(i,s);var n=1/i[0],r=1/i[1],h=1/i[2],o=s[0]*n,a=s[1]*r,l=s[2]*h,u=s[4]*n,c=s[5]*r,f=s[6]*h,d=s[8]*n,p=s[9]*r,m=s[10]*h,g=o+c+m,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(f-p)/y,t[1]=(d-l)/y,t[2]=(a-u)/y):o>c&&o>m?(y=2*Math.sqrt(1+o-c-m),t[3]=(f-p)/y,t[0]=.25*y,t[1]=(a+u)/y,t[2]=(d+l)/y):c>m?(y=2*Math.sqrt(1+c-o-m),t[3]=(d-l)/y,t[0]=(a+u)/y,t[1]=.25*y,t[2]=(f+p)/y):(y=2*Math.sqrt(1+m-o-c),t[3]=(a-u)/y,t[0]=(d+l)/y,t[1]=(f+p)/y,t[2]=.25*y),t},Ie=function(t,s,e,i){s[0]=i[12],s[1]=i[13],s[2]=i[14];var n=i[0],r=i[1],h=i[2],o=i[4],a=i[5],l=i[6],u=i[8],c=i[9],f=i[10];e[0]=Math.hypot(n,r,h),e[1]=Math.hypot(o,a,l),e[2]=Math.hypot(u,c,f);var d=1/e[0],p=1/e[1],m=1/e[2],g=n*d,y=r*p,S=h*m,w=o*d,v=a*p,x=l*m,b=u*d,M=c*p,T=f*m,G=g+v+T,_=0;return G>0?(_=2*Math.sqrt(G+1),t[3]=.25*_,t[0]=(x-M)/_,t[1]=(b-S)/_,t[2]=(y-w)/_):g>v&&g>T?(_=2*Math.sqrt(1+g-v-T),t[3]=(x-M)/_,t[0]=.25*_,t[1]=(y+w)/_,t[2]=(b+S)/_):v>T?(_=2*Math.sqrt(1+v-g-T),t[3]=(b-S)/_,t[0]=(y+w)/_,t[1]=.25*_,t[2]=(x+M)/_):(_=2*Math.sqrt(1+T-g-v),t[3]=(y-w)/_,t[0]=(b+S)/_,t[1]=(x+M)/_,t[2]=.25*_),t},Ce=function(t,s,e,i){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,S=o*l,w=o*u,v=i[0],x=i[1],b=i[2];return t[0]=(1-(p+g))*v,t[1]=(f+w)*v,t[2]=(d-S)*v,t[3]=0,t[4]=(f-w)*x,t[5]=(1-(c+g))*x,t[6]=(m+y)*x,t[7]=0,t[8]=(d+S)*b,t[9]=(m-y)*b,t[10]=(1-(c+p))*b,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},Re=function(t,s,e,i,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,S=a*l,w=a*u,v=a*c,x=i[0],b=i[1],M=i[2],T=n[0],G=n[1],_=n[2],I=(1-(m+y))*x,C=(d+v)*x,R=(p-w)*x,P=(d-v)*b,E=(1-(f+y))*b,F=(g+S)*b,A=(p+w)*M,O=(g-S)*M,D=(1-(f+m))*M;return t[0]=I,t[1]=C,t[2]=R,t[3]=0,t[4]=P,t[5]=E,t[6]=F,t[7]=0,t[8]=A,t[9]=O,t[10]=D,t[11]=0,t[12]=e[0]+T-(I*T+P*G+A*_),t[13]=e[1]+G-(C*T+E*G+O*_),t[14]=e[2]+_-(R*T+F*G+D*_),t[15]=1,t},Pe=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e+e,o=i+i,a=n+n,l=e*h,u=i*h,c=i*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ee=function(t,s,e,i,n,r,h){var o=1/(e-s),a=1/(n-i),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(e+s)*o,t[9]=(n+i)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},Fe=function(t,s,e,i,n){var r=1/Math.tan(s/2);if(t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(i-n);t[10]=(n+i)*h,t[14]=2*n*i*h}else t[10]=-1,t[14]=-2*i;return t},Ae=function(t,s,e,i,n){var r=1/Math.tan(s/2);if(t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(i-n);t[10]=n*h,t[14]=n*i*h}else t[10]=-1,t[14]=-i;return t},Oe=function(t,s,e,i){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=i/(e-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*e/(e-i),t[15]=0,t},De=function(t,s,e,i,n,r,h){var o=1/(s-e),a=1/(i-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+e)*o,t[13]=(n+i)*a,t[14]=(h+r)*l,t[15]=1,t},ke=function(t,s,e,i,n,r,h){var o=1/(s-e),a=1/(i-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+e)*o,t[13]=(n+i)*a,t[14]=r*l,t[15]=1,t},Le=function(t,e,i,n){var r,h,o,a,l,u,c,f,d,p,m=e[0],g=e[1],y=e[2],S=n[0],w=n[1],v=n[2],x=i[0],b=i[1],M=i[2];return Math.abs(m-x)<s&&Math.abs(g-b)<s&&Math.abs(y-M)<s?ne(t):(c=m-x,f=g-b,d=y-M,r=w*(d*=p=1/Math.hypot(c,f,d))-v*(f*=p),h=v*(c*=p)-S*d,o=S*f-w*c,(p=Math.hypot(r,h,o))?(r*=p=1/p,h*=p,o*=p):(r=0,h=0,o=0),a=f*o-d*h,l=d*r-c*o,u=c*h-f*r,(p=Math.hypot(a,l,u))?(a*=p=1/p,l*=p,u*=p):(a=0,l=0,u=0),t[0]=r,t[1]=a,t[2]=c,t[3]=0,t[4]=h,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(r*m+h*g+o*y),t[13]=-(a*m+l*g+u*y),t[14]=-(c*m+f*g+d*y),t[15]=1,t)},Ne=function(t,s,e,i){var n=s[0],r=s[1],h=s[2],o=i[0],a=i[1],l=i[2],u=n-e[0],c=r-e[1],f=h-e[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Be=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ue=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ve=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t[9]=s[9]+e[9],t[10]=s[10]+e[10],t[11]=s[11]+e[11],t[12]=s[12]+e[12],t[13]=s[13]+e[13],t[14]=s[14]+e[14],t[15]=s[15]+e[15],t},We=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t[9]=s[9]-e[9],t[10]=s[10]-e[10],t[11]=s[11]-e[11],t[12]=s[12]-e[12],t[13]=s[13]-e[13],t[14]=s[14]-e[14],t[15]=s[15]-e[15],t},ze=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t[9]=s[9]*e,t[10]=s[10]*e,t[11]=s[11]*e,t[12]=s[12]*e,t[13]=s[13]*e,t[14]=s[14]*e,t[15]=s[15]*e,t},je=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t[9]=s[9]+e[9]*i,t[10]=s[10]+e[10]*i,t[11]=s[11]+e[11]*i,t[12]=s[12]+e[12]*i,t[13]=s[13]+e[13]*i,t[14]=s[14]+e[14]*i,t[15]=s[15]+e[15]*i,t},He=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Je=function(t,e){var i=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],y=t[14],S=t[15],w=e[0],v=e[1],x=e[2],b=e[3],M=e[4],T=e[5],G=e[6],_=e[7],I=e[8],C=e[9],R=e[10],P=e[11],E=e[12],F=e[13],A=e[14],O=e[15];return Math.abs(i-w)<=s*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(n-v)<=s*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-x)<=s*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(h-b)<=s*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(o-M)<=s*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-T)<=s*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-G)<=s*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-_)<=s*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-I)<=s*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-C)<=s*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-R)<=s*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(p-P)<=s*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-E)<=s*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-F)<=s*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(y-A)<=s*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(S-O)<=s*Math.max(1,Math.abs(S),Math.abs(O))},$e=function(){var t=new e(3);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},qe=function(t){var s=new e(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Xe=function(t){var s=t[0],e=t[1],i=t[2];return Math.hypot(s,e,i)},Ye=function(t,s,i){var n=new e(3);return n[0]=t,n[1]=s,n[2]=i,n},Ke=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Ze=function(t,s,e,i){return t[0]=s,t[1]=e,t[2]=i,t},Qe=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t},ti=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t},si=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t},ei=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t},ii=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},ni=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},ri=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t},hi=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t},oi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ai=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t},li=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t},ui=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2];return Math.hypot(e,i,n)},ci=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2];return e*e+i*i+n*n},fi=function(t){var s=t[0],e=t[1],i=t[2];return s*s+e*e+i*i},di=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},pi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},mi=function(t,s){var e=s[0],i=s[1],n=s[2],r=e*e+i*i+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},gi=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},yi=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=e[0],o=e[1],a=e[2];return t[0]=n*a-r*o,t[1]=r*h-i*a,t[2]=i*o-n*h,t},Si=function(t,s,e,i){var n=s[0],r=s[1],h=s[2];return t[0]=n+i*(e[0]-n),t[1]=r+i*(e[1]-r),t[2]=h+i*(e[2]-h),t},wi=function(t,s,e,i){var n=Math.acos(Math.min(Math.max(gi(s,e),-1),1)),r=Math.sin(n),h=Math.sin((1-i)*n)/r,o=Math.sin(i*n)/r;return t[0]=h*s[0]+o*e[0],t[1]=h*s[1]+o*e[1],t[2]=h*s[2]+o*e[2],t},vi=function(t,s,e,i,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+e[0]*a+i[0]*l+n[0]*u,t[1]=s[1]*o+e[1]*a+i[1]*l+n[1]*u,t[2]=s[2]*o+e[2]*a+i[2]*l+n[2]*u,t},xi=function(t,s,e,i,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+e[0]*u+i[0]*c+n[0]*f,t[1]=s[1]*l+e[1]*u+i[1]*c+n[1]*f,t[2]=s[2]*l+e[2]*u+i[2]*c+n[2]*f,t},bi=function(t,s){s=s||1;var e=2*i()*Math.PI,n=2*i()-1,r=Math.sqrt(1-n*n)*s;return t[0]=Math.cos(e)*r,t[1]=Math.sin(e)*r,t[2]=n*s,t},Mi=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=e[3]*i+e[7]*n+e[11]*r+e[15];return h=h||1,t[0]=(e[0]*i+e[4]*n+e[8]*r+e[12])/h,t[1]=(e[1]*i+e[5]*n+e[9]*r+e[13])/h,t[2]=(e[2]*i+e[6]*n+e[10]*r+e[14])/h,t},Ti=function(t,s,e){var i=s[0],n=s[1],r=s[2];return t[0]=i*e[0]+n*e[3]+r*e[6],t[1]=i*e[1]+n*e[4]+r*e[7],t[2]=i*e[2]+n*e[5]+r*e[8],t},Gi=function(t,s,e){var i=e[0],n=e[1],r=e[2],h=e[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-i*l,f=i*a-n*o,d=n*f-r*c,p=r*u-i*f,m=i*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},_i=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[0],r[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),r[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},Ii=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),r[1]=n[1],r[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},Ci=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),r[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),r[2]=n[2],t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},Ri=function(t,s){var e=t[0],i=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((e*e+i*i+n*n)*(r*r+h*h+o*o)),l=a&&gi(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},Pi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Ei=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Fi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Ai=function(t,e){var i=t[0],n=t[1],r=t[2],h=e[0],o=e[1],a=e[2];return Math.abs(i-h)<=s*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(n-o)<=s*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))},Oi=function(){var t=new e(4);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Di=function(t){var s=new e(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},ki=function(t,s,i,n){var r=new e(4);return r[0]=t,r[1]=s,r[2]=i,r[3]=n,r},Li=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ni=function(t,s,e,i,n){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t},Bi=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},Ui=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},Vi=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t[3]=s[3]*e[3],t},Wi=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t[3]=s[3]/e[3],t},zi=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},ji=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Hi=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t[3]=Math.min(s[3],e[3]),t},Ji=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t[3]=Math.max(s[3],e[3]),t},$i=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},qi=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},Xi=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},Yi=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(e,i,n,r)},Ki=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return e*e+i*i+n*n+r*r},Zi=function(t){var s=t[0],e=t[1],i=t[2],n=t[3];return Math.hypot(s,e,i,n)},Qi=function(t){var s=t[0],e=t[1],i=t[2],n=t[3];return s*s+e*e+i*i+n*n},tn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},sn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},en=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e*e+i*i+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=e*h,t[1]=i*h,t[2]=n*h,t[3]=r*h,t},nn=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},rn=function(t,s,e,i){var n=e[0]*i[1]-e[1]*i[0],r=e[0]*i[2]-e[2]*i[0],h=e[0]*i[3]-e[3]*i[0],o=e[1]*i[2]-e[2]*i[1],a=e[1]*i[3]-e[3]*i[1],l=e[2]*i[3]-e[3]*i[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},hn=function(t,s,e,i){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+i*(e[0]-n),t[1]=r+i*(e[1]-r),t[2]=h+i*(e[2]-h),t[3]=o+i*(e[3]-o),t},on=function(t,s){var e,n,r,h,o,a;s=s||1;do{o=(e=2*i()-1)*e+(n=2*i()-1)*n}while(o>=1);do{a=(r=2*i()-1)*r+(h=2*i()-1)*h}while(a>=1);var l=Math.sqrt((1-o)/a);return t[0]=s*e,t[1]=s*n,t[2]=s*r*l,t[3]=s*h*l,t},an=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3];return t[0]=e[0]*i+e[4]*n+e[8]*r+e[12]*h,t[1]=e[1]*i+e[5]*n+e[9]*r+e[13]*h,t[2]=e[2]*i+e[6]*n+e[10]*r+e[14]*h,t[3]=e[3]*i+e[7]*n+e[11]*r+e[15]*h,t},ln=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=e[0],o=e[1],a=e[2],l=e[3],u=l*i+o*r-a*n,c=l*n+a*i-h*r,f=l*r+h*n-o*i,d=-h*i-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},un=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},cn=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},fn=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},dn=function(t,e){var i=t[0],n=t[1],r=t[2],h=t[3],o=e[0],a=e[1],l=e[2],u=e[3];return Math.abs(i-o)<=s*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=s*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},pn=function(){var t=new e(4);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},mn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},gn=function(t,s,e){e*=.5;var i=Math.sin(e);return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=Math.cos(e),t},yn=function(t,e){var i=2*Math.acos(e[3]),n=Math.sin(i/2);return n>s?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i},Sn=function(t,s){var e=J(t,s);return Math.acos(2*e*e-1)},wn=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-i*l,t[2]=r*u+h*l+i*a-n*o,t[3]=h*u-i*o-n*a-r*l,t},vn=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-i*o,t},xn=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a-r*o,t[1]=n*a+h*o,t[2]=r*a+i*o,t[3]=h*a-n*o,t},bn=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(e),a=Math.cos(e);return t[0]=i*a+n*o,t[1]=n*a-i*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},Mn=function(t,s){var e=s[0],i=s[1],n=s[2];return t[0]=e,t[1]=i,t[2]=n,t[3]=Math.sqrt(Math.abs(1-e*e-i*i-n*n)),t},Tn=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=Math.sqrt(e*e+i*i+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=e*a,t[1]=i*a,t[2]=n*a,t[3]=o*Math.cos(h),t},Gn=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=Math.sqrt(e*e+i*i+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=e*o,t[1]=i*o,t[2]=n*o,t[3]=.5*Math.log(e*e+i*i+n*n+r*r),t},_n=function(t,s,e){return Gn(t,s),H(t,t,e),Tn(t,t),t},In=function(t,e,i,n){var r,h,o,a,l,u=e[0],c=e[1],f=e[2],d=e[3],p=i[0],m=i[1],g=i[2],y=i[3];return(h=u*p+c*m+f*g+d*y)<0&&(h=-h,p=-p,m=-m,g=-g,y=-y),1-h>s?(r=Math.acos(h),o=Math.sin(r),a=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(a=1-n,l=n),t[0]=a*u+l*p,t[1]=a*c+l*m,t[2]=a*f+l*g,t[3]=a*d+l*y,t},Cn=function(t){var s=i(),e=i(),n=i(),r=Math.sqrt(1-s),h=Math.sqrt(s);return t[0]=r*Math.sin(2*Math.PI*e),t[1]=r*Math.cos(2*Math.PI*e),t[2]=h*Math.sin(2*Math.PI*n),t[3]=h*Math.cos(2*Math.PI*n),t},Rn=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=e*e+i*i+n*n+r*r,o=h?1/h:0;return t[0]=-e*o,t[1]=-i*o,t[2]=-n*o,t[3]=r*o,t},Pn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},En=function(t,s){var e,i=s[0]+s[4]+s[8];if(i>0)e=Math.sqrt(i+1),t[3]=.5*e,e=.5/e,t[0]=(s[5]-s[7])*e,t[1]=(s[6]-s[2])*e,t[2]=(s[1]-s[3])*e;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;e=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*e,e=.5/e,t[3]=(s[3*r+h]-s[3*h+r])*e,t[r]=(s[3*r+n]+s[3*n+r])*e,t[h]=(s[3*h+n]+s[3*n+h])*e}return t},Fn=function(t,s,e,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n,h=Math.PI/360;s*=h,i*=h,e*=h;var o=Math.sin(s),a=Math.cos(s),l=Math.sin(e),u=Math.cos(e),c=Math.sin(i),f=Math.cos(i);switch(r){case"xyz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"xzy":t[0]=o*u*f-a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f+o*l*c;break;case"yxz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;case"yzx":t[0]=o*u*f+a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f-o*l*c;break;case"zxy":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"zyx":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;default:throw new Error("Unknown angle order "+r)}return t},An=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},On=function(t,e){return Math.abs(nn(t,e))>=1-s},Dn=function(){var t=new e(8);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},kn=function(t){var s=new e(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Ln=function(t,s,i,n,r,h,o,a){var l=new e(8);return l[0]=t,l[1]=s,l[2]=i,l[3]=n,l[4]=r,l[5]=h,l[6]=o,l[7]=a,l},Nn=function(t,s,i,n,r,h,o){var a=new e(8);a[0]=t,a[1]=s,a[2]=i,a[3]=n;var l=.5*r,u=.5*h,c=.5*o;return a[4]=l*n+u*i-c*s,a[5]=u*n+c*t-l*i,a[6]=c*n+l*s-u*t,a[7]=-l*t-u*s-c*i,a},Bn=function(t,s,e){var i=.5*e[0],n=.5*e[1],r=.5*e[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=i*l+n*a-r*o,t[5]=n*l+r*h-i*a,t[6]=r*l+i*o-n*h,t[7]=-i*h-n*o-r*a,t},Un=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Vn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Wn=function(t,s){var i=pn();_e(i,s);var n=new e(3);return Te(n,s),Bn(t,i,n),t},zn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},jn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Hn=function(t,s,e,i,n,r,h,o,a){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Jn=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},$n=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},qn=function(t,s){var e=s[4],i=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(e*l+r*h+i*a-n*o),t[1]=2*(i*l+r*o+n*h-e*a),t[2]=2*(n*l+r*a+e*o-i*h),t},Xn=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=.5*e[0],a=.5*e[1],l=.5*e[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-i*l+c,t[6]=h*l+i*a-n*o+f,t[7]=-i*o-n*a-r*l+d,t},Yn=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*r-l*n,f=a*h+u*n+l*i-o*r,d=l*h+u*r+o*n-a*i,p=u*h-o*i-a*n-l*r;return vn(t,s,e),i=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*i+f*r-d*n,t[5]=f*h+p*n+d*i-c*r,t[6]=d*h+p*r+c*n-f*i,t[7]=p*h-c*i-f*n-d*r,t},Kn=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*r-l*n,f=a*h+u*n+l*i-o*r,d=l*h+u*r+o*n-a*i,p=u*h-o*i-a*n-l*r;return xn(t,s,e),i=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*i+f*r-d*n,t[5]=f*h+p*n+d*i-c*r,t[6]=d*h+p*r+c*n-f*i,t[7]=p*h-c*i-f*n-d*r,t},Zn=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*i+a*r-l*n,f=a*h+u*n+l*i-o*r,d=l*h+u*r+o*n-a*i,p=u*h-o*i-a*n-l*r;return bn(t,s,e),i=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*i+f*r-d*n,t[5]=f*h+p*n+d*i-c*r,t[6]=d*h+p*r+c*n-f*i,t[7]=p*h-c*i-f*n-d*r,t},Qn=function(t,s,e){var i=e[0],n=e[1],r=e[2],h=e[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*i+a*r-l*n,t[1]=a*h+u*n+l*i-o*r,t[2]=l*h+u*r+o*n-a*i,t[3]=u*h-o*i-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*i+a*r-l*n,t[5]=a*h+u*n+l*i-o*r,t[6]=l*h+u*r+o*n-a*i,t[7]=u*h-o*i-a*n-l*r,t},tr=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[0],a=e[1],l=e[2],u=e[3];return t[0]=i*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-i*l,t[2]=r*u+h*l+i*a-n*o,t[3]=h*u-i*o-n*a-r*l,o=e[4],a=e[5],l=e[6],u=e[7],t[4]=i*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-i*l,t[6]=r*u+h*l+i*a-n*o,t[7]=h*u-i*o-n*a-r*l,t},sr=function(t,e,i,n){if(Math.abs(n)<s)return zn(t,e);var r=Math.hypot(i[0],i[1],i[2]);n*=.5;var h=Math.sin(n),o=h*i[0]/r,a=h*i[1]/r,l=h*i[2]/r,u=Math.cos(n),c=e[0],f=e[1],d=e[2],p=e[3];t[0]=c*u+p*o+f*l-d*a,t[1]=f*u+p*a+d*o-c*l,t[2]=d*u+p*l+c*a-f*o,t[3]=p*u-c*o-f*a-d*l;var m=e[4],g=e[5],y=e[6],S=e[7];return t[4]=m*u+S*o+g*l-y*a,t[5]=g*u+S*a+y*o-m*l,t[6]=y*u+S*l+m*a-g*o,t[7]=S*u-m*o-g*a-y*l,t},er=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t},ir=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[4],a=e[5],l=e[6],u=e[7],c=s[4],f=s[5],d=s[6],p=s[7],m=e[0],g=e[1],y=e[2],S=e[3];return t[0]=i*S+h*m+n*y-r*g,t[1]=n*S+h*g+r*m-i*y,t[2]=r*S+h*y+i*g-n*m,t[3]=h*S-i*m-n*g-r*y,t[4]=i*u+h*o+n*l-r*a+c*S+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-i*l+f*S+p*g+d*m-c*y,t[6]=r*u+h*l+i*a-n*o+d*S+p*y+c*g-f*m,t[7]=h*u-i*o-n*a-r*l+p*S-c*m-f*g-d*y,t},nr=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t},rr=function(t,s,e,i){var n=1-i;return ot(s,e)<0&&(i=-i),t[0]=s[0]*n+e[0]*i,t[1]=s[1]*n+e[1]*i,t[2]=s[2]*n+e[2]*i,t[3]=s[3]*n+e[3]*i,t[4]=s[4]*n+e[4]*i,t[5]=s[5]*n+e[5]*i,t[6]=s[6]*n+e[6]*i,t[7]=s[7]*n+e[7]*i,t},hr=function(t,s){var e=ut(s);return t[0]=-s[0]/e,t[1]=-s[1]/e,t[2]=-s[2]/e,t[3]=s[3]/e,t[4]=-s[4]/e,t[5]=-s[5]/e,t[6]=-s[6]/e,t[7]=s[7]/e,t},or=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},ar=function(t,s){var e=ut(s);if(e>0){e=Math.sqrt(e);var i=s[0]/e,n=s[1]/e,r=s[2]/e,h=s[3]/e,o=s[4],a=s[5],l=s[6],u=s[7],c=i*o+n*a+r*l+h*u;t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-i*c)/e,t[5]=(a-n*c)/e,t[6]=(l-r*c)/e,t[7]=(u-h*c)/e}return t},lr=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ur=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},cr=function(t,e){var i=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=e[0],f=e[1],d=e[2],p=e[3],m=e[4],g=e[5],y=e[6],S=e[7];return Math.abs(i-c)<=s*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-f)<=s*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=s*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=s*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=s*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=s*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=s*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(u-S)<=s*Math.max(1,Math.abs(u),Math.abs(S))},fr=function(){var t=new e(2);return e!=Float32Array&&(t[0]=0,t[1]=0),t},dr=function(t){var s=new e(2);return s[0]=t[0],s[1]=t[1],s},pr=function(t,s){var i=new e(2);return i[0]=t,i[1]=s,i},mr=function(t,s){return t[0]=s[0],t[1]=s[1],t},gr=function(t,s,e){return t[0]=s,t[1]=e,t},yr=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t},Sr=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t},wr=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t},vr=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t},xr=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},br=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Mr=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t},Tr=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t},Gr=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},_r=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t},Ir=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t},Cr=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return Math.hypot(e,i)},Rr=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i},Pr=function(t){var s=t[0],e=t[1];return Math.hypot(s,e)},Er=function(t){var s=t[0],e=t[1];return s*s+e*e},Fr=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},Ar=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Or=function(t,s){var e=s[0],i=s[1],n=e*e+i*i;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Dr=function(t,s){return t[0]*s[0]+t[1]*s[1]},kr=function(t,s,e){var i=s[0]*e[1]-s[1]*e[0];return t[0]=t[1]=0,t[2]=i,t},Lr=function(t,s,e,i){var n=s[0],r=s[1];return t[0]=n+i*(e[0]-n),t[1]=r+i*(e[1]-r),t},Nr=function(t,s){s=s||1;var e=2*i()*Math.PI;return t[0]=Math.cos(e)*s,t[1]=Math.sin(e)*s,t},Br=function(t,s,e){var i=s[0],n=s[1];return t[0]=e[0]*i+e[2]*n,t[1]=e[1]*i+e[3]*n,t},Ur=function(t,s,e){var i=s[0],n=s[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t},Vr=function(t,s,e){var i=s[0],n=s[1];return t[0]=e[0]*i+e[3]*n+e[6],t[1]=e[1]*i+e[4]*n+e[7],t},Wr=function(t,s,e){var i=s[0],n=s[1];return t[0]=e[0]*i+e[4]*n+e[12],t[1]=e[1]*i+e[5]*n+e[13],t},zr=function(t,s,e,i){var n=s[0]-e[0],r=s[1]-e[1],h=Math.sin(i),o=Math.cos(i);return t[0]=n*o-r*h+e[0],t[1]=n*h+r*o+e[1],t},jr=function(t,s){var e=t[0],i=t[1],n=s[0],r=s[1],h=Math.sqrt((e*e+i*i)*(n*n+r*r)),o=h&&(e*n+i*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Hr=function(t){return t[0]=0,t[1]=0,t},Jr=function(t){return"vec2("+t[0]+", "+t[1]+")"},$r=function(t,s){return t[0]===s[0]&&t[1]===s[1]},qr=function(t,e){var i=t[0],n=t[1],r=e[0],h=e[1];return Math.abs(i-r)<=s*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(n-h)<=s*Math.max(1,Math.abs(n),Math.abs(h))};s=1e-6,e="undefined"!=typeof Float32Array?Float32Array:Array,i=Math.random,n="zyx",r=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),h={__proto__:null,EPSILON:s,get i(){return e},h:i,o:n,l:It,u:Ct,equals:Rt},o=Ut,a=Xt,l=Object.freeze({__proto__:null,create:Pt,clone:Et,m:Ft,identity:At,S:Ot,set:Dt,v:kt,M:Lt,T:Nt,G:Bt,multiply:Ut,rotate:Vt,scale:Wt,_:zt,I:jt,C:Ht,R:Jt,P:$t,add:qt,F:Xt,A:Yt,equals:Kt,O:Zt,D:Qt,mul:o,sub:a}),u=as,c=Ss,f=Object.freeze({__proto__:null,create:ts,clone:ss,m:es,identity:is,S:ns,set:rs,M:hs,G:os,multiply:as,rotate:ls,scale:us,translate:cs,_:fs,I:ds,L:ps,C:ms,R:gs,add:ys,F:Ss,O:ws,D:vs,A:xs,equals:bs,mul:u,sub:c}),d=Os,p=qs,m=Object.freeze({__proto__:null,create:Ms,N:Ts,clone:Gs,m:_s,S:Is,set:Cs,identity:Rs,v:Ps,M:Es,T:Fs,G:As,multiply:Os,translate:Ds,rotate:ks,scale:Ls,L:Ns,_:Bs,I:Us,B:Vs,U:Ws,V:zs,W:js,C:Hs,R:Js,add:$s,F:qs,O:Xs,D:Ys,A:Ks,equals:Zs,mul:d,sub:p}),g=Fe,y=De,S=le,w=We,v=Object.freeze({__proto__:null,create:Qs,clone:te,m:se,S:ee,set:ie,identity:ne,v:re,M:he,T:oe,G:ae,multiply:le,translate:ue,scale:ce,rotate:fe,j:de,H:pe,J:me,L:ge,I:ye,_:Se,$:we,X:ve,Y:xe,K:be,Z:Me,tt:Te,st:Ge,et:_e,it:Ie,nt:Ce,rt:Re,U:Pe,ht:Ee,ot:Fe,perspective:g,lt:Ae,ut:Oe,ct:De,ft:y,dt:ke,gt:Le,yt:Ne,C:Be,R:Ue,add:Ve,F:We,O:ze,D:je,A:He,equals:Je,mul:S,sub:w}),x=ti,b=si,M=ei,T=ui,G=ci,_=Xe,I=fi,t=$e(),C=function(s,e,i,n,r,h){var o,a;for(e||(e=3),i||(i=0),a=n?Math.min(n*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},R=Object.freeze({__proto__:null,create:$e,clone:qe,length:Xe,S:Ye,m:Ke,set:Ze,add:Qe,F:ti,multiply:si,St:ei,ceil:ii,floor:ni,min:ri,max:hi,round:oi,scale:ai,wt:li,vt:ui,xt:ci,bt:fi,Mt:di,inverse:pi,normalize:mi,Tt:gi,Gt:yi,_t:Si,It:wi,Ct:vi,Rt:xi,random:bi,Pt:Mi,Et:Ti,Ft:Gi,j:_i,H:Ii,J:Ci,angle:Ri,At:Pi,C:Ei,A:Fi,equals:Ai,sub:x,mul:b,div:M,Ot:T,Dt:G,kt:_,Lt:I,forEach:C}),P=Ui,E=Vi,F=Wi,A=Yi,O=Ki,D=Zi,k=Qi,L=function(){var t=Oi();return function(s,e,i,n,r,h){var o,a;for(e||(e=4),i||(i=0),a=n?Math.min(n*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),N=Object.freeze({__proto__:null,create:Oi,clone:Di,S:ki,m:Li,set:Ni,add:Bi,F:Ui,multiply:Vi,St:Wi,ceil:zi,floor:ji,min:Hi,max:Ji,round:$i,scale:qi,wt:Xi,vt:Yi,xt:Ki,length:Zi,bt:Qi,Mt:tn,inverse:sn,normalize:en,Tt:nn,Gt:rn,_t:hn,random:on,Pt:an,Ft:ln,At:un,C:cn,A:fn,equals:dn,sub:P,mul:E,div:F,Ot:A,Dt:O,kt:D,Lt:k,forEach:L}),B=Di,U=ki,V=Li,W=Ni,z=Bi,j=wn,H=qi,J=nn,$=hn,X=q=Zi,K=Y=Qi,Z=en,Q=fn,tt=function(){var t=$e(),s=Ye(1,0,0),e=Ye(0,1,0);return function(i,n,r){var h=gi(n,r);return h<-.999999?(yi(t,s,n),_(t)<1e-6&&yi(t,e,n),mi(t,t),gn(i,t,Math.PI),i):h>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(yi(t,n,r),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+h,Z(i,i))}}(),st=function(){var t=pn(),s=pn();return function(e,i,n,r,h,o){return In(t,i,h,o),In(s,n,r,o),In(e,t,s,2*o*(1-o)),e}}(),et=function(){var t=Ms();return function(s,e,i,n){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],Z(s,En(s,t))}}(),it=Object.freeze({__proto__:null,create:pn,identity:mn,Nt:gn,Bt:yn,Ut:Sn,multiply:wn,j:vn,H:xn,J:bn,Vt:Mn,exp:Tn,Wt:Gn,pow:_n,It:In,random:Cn,M:Rn,zt:Pn,jt:En,Ht:Fn,C:An,clone:B,S:U,m:V,set:W,add:z,mul:j,scale:H,Tt:J,_t:$,length:q,kt:X,bt:Y,Lt:K,normalize:Z,A:Q,equals:On,Jt:tt,$t:st,qt:et}),nt=V,rt=V,ht=ir,ot=J,lt=at=q,ct=ut=Y,ft=Object.freeze({__proto__:null,create:Dn,clone:kn,S:Ln,Xt:Nn,K:Bn,L:Un,_:Vn,N:Wn,m:zn,identity:jn,set:Hn,Yt:nt,Kt:Jn,Zt:rt,Qt:$n,tt:qn,translate:Xn,j:Yn,H:Kn,J:Zn,ts:Qn,ss:tr,es:sr,add:er,multiply:ir,mul:ht,scale:nr,Tt:ot,_t:rr,M:hr,zt:or,length:at,kt:lt,bt:ut,Lt:ct,normalize:ar,C:lr,A:ur,equals:cr}),dt=Pr,pt=Sr,mt=wr,gt=vr,yt=Cr,St=Rr,wt=Er,vt=function(){var t=fr();return function(s,e,i,n,r,h){var o,a;for(e||(e=2),i||(i=0),a=n?Math.min(n*e+i,s.length):s.length,o=i;o<a;o+=e)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),xt=Object.freeze({__proto__:null,create:fr,clone:dr,S:pr,m:mr,set:gr,add:yr,F:Sr,multiply:wr,St:vr,ceil:xr,floor:br,min:Mr,max:Tr,round:Gr,scale:_r,wt:Ir,vt:Cr,xt:Rr,length:Pr,bt:Er,Mt:Fr,inverse:Ar,normalize:Or,Tt:Dr,Gt:kr,_t:Lr,random:Nr,ns:Br,rs:Ur,Et:Vr,Pt:Wr,rotate:zr,angle:jr,At:Hr,C:Jr,A:$r,equals:qr,kt:dt,sub:pt,mul:mt,div:gt,Ot:yt,Dt:St,Lt:wt,forEach:vt}),globalThis.hs=h,globalThis.hs.ls=l,globalThis.hs.us=f,globalThis.hs.cs=m,globalThis.hs.fs=v,globalThis.hs.ds=it,globalThis.hs.ps=ft,globalThis.hs.gs=xt,globalThis.hs.ys=R,globalThis.hs.Ss=N}var t,s,e,i,n,r,h,o,a,l,u,c,f,d,p,m,g,y,S,w,v,x,b,M,T,G,_,I,C,R,P,E,F,A,O,D,k,L,N,B,U,V,W,z,j,H,J,$,q,X,Y,K,Z,Q,tt,st,et,it,nt,rt,ht,ot,at,lt,ut,ct,ft,dt,pt,mt,gt,yt,St,wt,vt,xt,bt,Mt,Tt,Gt;{let Xr=function(t,s,e){e=e||0;var i,n,r,h,o,a,l,u=[0,0];return i=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=i*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],xh(l=i*o-h*n,0,e)||(u[0]=(o*r-n*a)/l,u[1]=(i*a-h*r)/l),u},Yr=function(t,s,e,i){var n=s[0]-t[0],r=s[1]-t[1],h=i[0]-e[0],o=i[1]-e[1];if(h*r-o*n===0)return!1;var a=(n*(e[1]-t[1])+r*(t[0]-e[0]))/(h*r-o*n),l=(h*(t[1]-e[1])+o*(e[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Kr=function(t,s,e){return(s[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(s[1]-t[1])},Zr=function(t,s,e){return Kr(t,s,e)>0},Qr=function(t,s,e){return Kr(t,s,e)>=0},th=function(t,s,e){return Kr(t,s,e)<0},sh=function(t,s,e){return Kr(t,s,e)<=0},eh=function(t,s,e,i){if(i){var n=bt,r=Mt;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=e[0]-s[0],r[1]=e[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<i}return 0===Kr(t,s,e)},ih=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i},nh=function(t,s){var e=t.length;return t[s<0?s%e+e:s%e]},rh=function(t){t.length=0},hh=function(t,s,e,i){for(var n=e;n<i;n++)t.push(s[n])},oh=function(t){for(var s=0,e=t,i=1;i<t.length;++i)(e[i][1]<e[s][1]||e[i][1]===e[s][1]&&e[i][0]>e[s][0])&&(s=i);return!Zr(nh(t,s-1),nh(t,s),nh(t,s+1))&&(ah(t),!0)},ah=function(t){for(var s=[],e=t.length,i=0;i!==e;i++)s.push(t.pop());for(i=0;i!==e;i++)t[i]=s[i]},lh=function(t,s){return th(nh(t,s-1),nh(t,s),nh(t,s+1))},uh=function(t,s,e){var i,n,r=Tt,h=Gt;if(Qr(nh(t,s+1),nh(t,s),nh(t,e))&&sh(nh(t,s-1),nh(t,s),nh(t,e)))return!1;n=ih(nh(t,s),nh(t,e));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Qr(nh(t,s),nh(t,e),nh(t,o+1))&&sh(nh(t,s),nh(t,e),nh(t,o))&&(r[0]=nh(t,s),r[1]=nh(t,e),h[0]=nh(t,o),h[1]=nh(t,o+1),i=Xr(r,h),ih(nh(t,s),i)<n))return!1;return!0},ch=function(t,s,e){for(var i=0;i!==t.length;++i)if(i!==s&&i!==e&&(i+1)%t.length!==s&&(i+1)%t.length!==e&&Yr(nh(t,s),nh(t,e),nh(t,i),nh(t,i+1)))return!1;return!0},fh=function(t,s,e,i){var n=i||[];if(rh(n),s<e)for(var r=s;r<=e;r++)n.push(t[r]);else{for(r=0;r<=e;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},dh=function(t){for(var s=[],e=[],i=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(lh(t,h))for(var o=0;o<t.length;++o)if(uh(t,h,o)){e=dh(fh(t,h,o,n)),i=dh(fh(t,o,h,n));for(var a=0;a<i.length;a++)e.push(i[a]);e.length<r&&(s=e,r=e.length,s.push([nh(t,h),nh(t,o)]))}return s},ph=function(t){var s=dh(t);return s.length>0?mh(t,s):[t]},mh=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var e=[t],i=0;i<s.length;i++)for(var n=s[i],r=0;r<e.length;r++){var h=mh(e[r],n);if(h){e.splice(r,1),e.push(h[0],h[1]);break}}return e}return n=s,i=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==i&&-1!==r&&[fh(t,i,r),fh(t,r,i)]},gh=function(t){var s,e=t;for(s=0;s<e.length-1;s++)for(var i=0;i<s-1;i++)if(Yr(e[s],e[s+1],e[i],e[i+1]))return!1;for(s=1;s<e.length-2;s++)if(Yr(e[0],e[e.length-1],e[s],e[s+1]))return!1;return!0},yh=function(t,s,e,i,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=i[1]-e[1],l=e[0]-i[0],u=a*e[0]+l*e[1],c=r*l-a*h;return xh(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},Sh=function(t,s,e,i,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],e=e||[],i=i||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,v=t;if(v.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var x=0;x<t.length;++x)if(lh(w,x)){e.push(w[x]),u=c=Number.MAX_VALUE;for(var b=0;b<t.length;++b)Zr(nh(w,x-1),nh(w,x),nh(w,b))&&sh(nh(w,x-1),nh(w,x),nh(w,b-1))&&(l=yh(nh(w,x-1),nh(w,x),nh(w,b),nh(w,b-1)),th(nh(w,x+1),nh(w,x),l)&&(f=ih(w[x],l))<c&&(c=f,a=l,m=b)),Zr(nh(w,x+1),nh(w,x),nh(w,b+1))&&sh(nh(w,x+1),nh(w,x),nh(w,b))&&(l=yh(nh(w,x+1),nh(w,x),nh(w,b),nh(w,b+1)),Zr(nh(w,x-1),nh(w,x),l)&&(f=ih(w[x],l))<u&&(u=f,o=l,p=b));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,i.push(l),x<p?(hh(y,w,x,p+1),y.push(l),S.push(l),0!==m&&hh(S,w,m,w.length),hh(S,w,0,x+1)):(0!==x&&hh(y,w,x,w.length),hh(y,w,0,p+1),y.push(l),S.push(l),hh(S,w,m,x+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)Qr(nh(w,x-1),nh(w,x),nh(w,b))&&sh(nh(w,x+1),nh(w,x),nh(w,b))&&(f=ih(nh(w,x),nh(w,b)))<d&&ch(w,x,b)&&(d=f,g=b%t.length);x<g?(hh(y,w,x,g+1),0!==g&&hh(S,w,g,v.length),hh(S,w,0,x+1)):(0!==x&&hh(y,w,x,v.length),hh(y,w,0,g+1),hh(S,w,g,x+1))}return y.length<S.length?(Sh(y,s,e,i,n,r,h),Sh(S,s,e,i,n,r,h)):(Sh(S,s,e,i,n,r,h),Sh(y,s,e,i,n,r,h)),s}return s.push(t),s},wh=function(t,s){for(var e=0,i=t.length-1;t.length>3&&i>=0;--i)eh(nh(t,i-1),nh(t,i),nh(t,i+1),s)&&(t.splice(i%t.length,1),e++);return e},vh=function(t,s){for(var e=t.length-1;e>=1;--e)for(var i=t[e],n=e-1;n>=0;--n)bh(i,t[n],s)&&t.splice(e,1)},xh=function(t,s,e){return e=e||0,Math.abs(t-s)<=e},bh=function(t,s,e){return xh(t[0],s[0],e)&&xh(t[1],s[1],e)};bt=[],Mt=[],Tt=[],Gt=[],self.ws={vs:ph,xs:Sh,bs:gh,Ms:wh,Ts:vh,Gs:oh}}{let Mh=!1,Th=!1,Gh="dev";const _h=Symbol("Construct internal API token");let Ih=16;const Ch=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Is(){if(Ih<=0)throw new Error("cannot obtain internal API token");return--Ih,_h}static Cs(){Mh=!0}static Rs(){return Mh}static Ps(){Th=!0}static Es(){return Th}static Fs(t){Gh=t}static As(){return Gh}static Os(){return"final"===Gh}};Ch.Ds=!1,Ch.ks=!1,Ch.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ls={}}{const Rh=self._s;Rh.Ns=class{constructor(t){this.Bs=t,this.Us=new Map,this.Vs()}Vs(){let t=this.Bs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Ws(t)}Ws(t){if(!t)return;if(!t.includes("="))return void this.Us.set(t,null);const s=t.indexOf("="),e=decodeURIComponent(t.substring(0,s)),i=decodeURIComponent(t.substring(s+1));this.Us.set(e,i)}zs(){for(const t of this.Us)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}js(t){return this.Us.has(t)}Hs(t){const s=this.Us.get(t);return void 0===s?null:s}Js(){history.replaceState("",document.title,location.pathname+location.search)}$s(t){this.Bs=t,this.Us.clear(),this.Vs()}},Rh.qs=new Rh.Ns(location.search),Rh.Xs=new Rh.Ns(location.hash),Rh.qs.js("perf")&&(Rh.Ys=!0),"dev"!==Rh.qs.Hs("mode")&&Rh.Fs("final")}{let Ph=function(t){const s=parseFloat(t);return Ah.get(s)||(s>=13?"11":"NT "+t)};0;const Eh=self._s,Fh="(unknown)";Eh.Ks={Zs:Fh,Qs:Fh,te:Fh,se:Fh,ee:NaN,ie:Fh,ne:"browser",re:!0,he:!1,oe:!1,ae:!1,le:async()=>{}};const Ah=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Oh=navigator.userAgent,Dh=navigator.userAgentData;if(Dh&&Dh.brands.length>0){let kh=function(t){let s="",e="",i="",n="";for(const r of t){const t=Lh.get(r.brand);!s&&t&&(s=t,e=r.version);const h=Nh.get(r.brand);!i&&h&&(i=h,n=r.version)}s||"Chromium"!==i||(Eh.Ks.te="Chromium",Eh.Ks.se=n),Eh.Ks.te=s||Fh,Eh.Ks.se=e||Fh,Eh.Ks.ie=i||Fh};Eh.Ks.Zs=Dh.platform,Eh.Ks.he=Dh.mobile,Eh.Ks.re=!Eh.Ks.he;const Lh=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Nh=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);kh(Dh.brands);let Bh=!1;Eh.Ks.le=async()=>{if(!Bh)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);kh(t.fullVersionList),"Windows"===Eh.Ks.Zs?Eh.Ks.Qs=Ph(t.platformVersion):Eh.Ks.Qs=t.platformVersion,Bh=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Uh=function(t,s){const e=Array.isArray(t)?t:[t];for(const t of e){const e=t.exec(Oh);if(e){s(e);break}}};Uh(/windows\s+nt\s+([\d\.]+)/i,t=>{Eh.Ks.Zs="Windows";const s=t[1];Eh.Ks.Qs=Ph(s)}),Uh(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{Eh.Ks.Zs="macOS",Eh.Ks.Qs=t[1].replace(/_/g,".")}),Uh(/CrOS/,()=>{Eh.Ks.Zs="Chrome OS"}),Uh(/linux|openbsd|freebsd|netbsd/i,()=>{Eh.Ks.Zs="Linux"}),Uh(/android/i,()=>{Eh.Ks.Zs="Android"}),Uh(/android\s+([\d\.]+)/i,t=>{Eh.Ks.Zs="Android",Eh.Ks.Qs=t[1]}),Eh.Ks.Zs===Fh&&(Uh(/(iphone|ipod|ipad)/i,t=>{Eh.Ks.Zs="iOS"}),Uh([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{Eh.Ks.Zs="iOS",Eh.Ks.Qs=t[1].replace(/_/g,".")}));const Vh=/chrome\//i.test(Oh),Wh=/chromium\//i.test(Oh),zh=/edg\//i.test(Oh),jh=/OPR\//.test(Oh),Hh=/nwjs/i.test(Oh),Jh=/safari\//i.test(Oh),$h=/webkit/i.test(Oh);zh||jh||Uh(/chrome\/([\d\.]+)/i,t=>{Eh.Ks.te="Chrome",Eh.Ks.se=t[1],Eh.Ks.ie="Chromium"}),Uh(/edg\/([\d\.]+)/i,t=>{Eh.Ks.te="Edge",Eh.Ks.se=t[1],Eh.Ks.ie="Chromium"}),Uh(/OPR\/([\d\.]+)/,t=>{Eh.Ks.te="Opera",Eh.Ks.se=t[1],Eh.Ks.ie="Chromium"}),Uh(/chromium\/([\d\.]+)/i,t=>{Eh.Ks.te="Chromium",Eh.Ks.se=t[1],Eh.Ks.ie="Chromium"}),Uh(/nwjs\/[0-9.]+/i,t=>{Eh.Ks.te="NW.js",Eh.Ks.se=t[1],Eh.Ks.ie="Chromium",Eh.Ks.ne="nwjs"}),Uh(/firefox\/([\d\.]+)/i,t=>{Eh.Ks.te="Firefox",Eh.Ks.se=t[1],Eh.Ks.ie="Gecko"}),!Jh||Vh||Wh||zh||jh||Hh||(Eh.Ks.te="Safari",Eh.Ks.ie="WebKit",Uh(/version\/([\d\.]+)/i,t=>{Eh.Ks.se=t[1]}),Uh(/crios\/([\d\.]+)/i,t=>{Eh.Ks.te="Chrome for iOS",Eh.Ks.se=t[1]}),Uh(/fxios\/([\d\.]+)/i,t=>{Eh.Ks.te="Firefox for iOS",Eh.Ks.se=t[1]}),Uh(/edgios\/([\d\.]+)/i,t=>{Eh.Ks.te="Edge for iOS",Eh.Ks.se=t[1]})),Eh.Ks.ie===Fh&&$h&&(Eh.Ks.ie="WebKit"),"Android"===Eh.Ks.Zs&&"Safari"===Eh.Ks.te&&(Eh.Ks.te="Stock");const qh=new Set(["Windows","macOS","Linux","Chrome OS"]).has(Eh.Ks.Zs)||"nwjs"===Eh.Ks.ne;Eh.Ks.re=qh,Eh.Ks.he=!qh}"Chrome"===Eh.Ks.te&&"browser"===Eh.Ks.ne&&/wv\)/.test(Oh)&&(Eh.Ks.ne="webview"),"nwjs"!==Eh.Ks.ne&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(Eh.Ks.ne="webapp"),Eh.Ks.ee=parseFloat(Eh.Ks.se);"macOS"===Eh.Ks.Zs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(Eh.Ks.Zs="iOS",Eh.Ks.Qs=Eh.Ks.se,Eh.Ks.re=!1,Eh.Ks.he=!0,Eh.Ks.ae=!0),Eh.Ks.oe="macOS"===Eh.Ks.Zs||"iOS"===Eh.Ks.Zs}{let Xh=function(t){return new Promise((s,e)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>e(t.error)})},Yh=function(t){return new Promise((s,e)=>{t.oncomplete=()=>s(),t.onerror=()=>e(t.error),t.onabort=()=>e(t.error)})},Kh=function(t,s){return oo(t,s)},Zh=function(t,s){return oo(t,s,!0)},Qh=function(t){to(t);let s=no.get(t);return s instanceof Promise||(s=ao(t),no.set(t,s),s.catch(s=>no.delete(t))),s},to=function(t){if("string"!=typeof t)throw new TypeError("expected string")},so=function(t,s){const e=t.objectStore(io).openCursor();return new Promise(t=>{const i=[];e.onsuccess=e=>{const n=e.target.result;if(n){switch(s){case"entries":i.push([n.key,n.value]);break;case"keys":i.push(n.key);break;case"values":i.push(n.value)}n.continue()}else t(i)}})};0;const eo=2,io="keyvaluepairs",no=new Map,ro="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,ho="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function oo(t,s,e=!1,i=!0){const n=await Qh(t);try{return s(n.transaction([io],e?"readwrite":"readonly"))}catch(n){if(i&&"InvalidStateError"===n.name)return no.delete(t),oo(t,s,e,!1);throw n}}async function ao(t){to(t);const s=indexedDB.open(t,eo);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(io)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Xh(s)}class lo{constructor(t){to(t),this.name=t}async ready(){await Qh(this.name)}set(t,s){return to(t),Zh(this.name,async e=>{const i=Xh(e.objectStore(io).put(s,t)),n=Yh(e);await Promise.all([n,i])})}get(t){return to(t),Kh(this.name,async s=>{const e=Xh(s.objectStore(io).get(t)),i=Yh(s),[n,r]=await Promise.all([i,e]);return r})}delete(t){return to(t),Zh(this.name,async s=>{const e=Xh(s.objectStore(io).delete(t)),i=Yh(s);await Promise.all([i,e])})}clear(){return Zh(this.name,async t=>{const s=Xh(t.objectStore(io).clear()),e=Yh(t);await Promise.all([e,s])})}keys(){return Kh(this.name,async t=>{let s;s=ho?Xh(t.objectStore(io).getAllKeys()):so(t,"keys");const e=Yh(t),[i,n]=await Promise.all([e,s]);return n})}values(){return Kh(this.name,async t=>{let s;s=ro?Xh(t.objectStore(io).getAll()):so(t,"values");const e=Yh(t),[i,n]=await Promise.all([e,s]);return n})}entries(){return Kh(this.name,async t=>{const s=so(t,"entries"),e=Yh(t),[i,n]=await Promise.all([e,s]);return n})}}self.ue=lo}{let uo=function(t){throw new Error(`"${t}" is not implemented`)},co=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},fo=function(t){return"object"==typeof t?new Promise(s=>{const{port1:e,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),e.postMessage(t)}):Promise.resolve(t)};0;const po=self.ue,mo=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class go{constructor(t){this.ce=t,this.fe=!this.ce,this.fe||"undefined"!=typeof indexedDB||(this.fe=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.de=new Map}pe(t){if(!this.fe)for(const s of mo)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.fe=!0;break}}async me(t){const s=this.de.get(t),e=await fo(s);return void 0===e?null:e}async ge(t,s){s=await fo(s),this.de.set(t,s)}ye(t){this.de.delete(t)}Se(){this.de.clear()}we(){return Array.from(this.de.keys())}ve(){return this.fe}xe(){return this.de}be(t){this.de=t}async getItem(t,s){if(co(s),this.fe)return await this.me(t);let e;try{e=await this.ce.get(t)}catch(s){return this.pe(s),this.fe?await this.me(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===e?null:e}async setItem(t,s,e){if(co(e),void 0===s&&(s=null),this.fe)await this.ge(t,s);else try{await this.ce.set(t,s)}catch(e){if(this.pe(e),!this.fe)throw e;await this.ge(t,s)}}async removeItem(t,s){if(co(s),this.fe)this.ye(t);else try{await this.ce.delete(t)}catch(s){this.pe(s),this.fe?this.ye(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(co(t),this.fe)this.Se();else try{await this.ce.clear()}catch(t){this.pe(t),this.fe?this.Se():console.error("Error clearing storage: ",t)}}async keys(t){if(co(t),this.fe)return this.we();let s=[];try{s=await this.ce.keys()}catch(t){if(this.pe(t),this.fe)return this.we();console.error("Error getting storage keys: ",t)}return s}ready(t){return co(t),this.fe?Promise.resolve(!0):this.ce.ready()}Me(t){if(t.Te)return new go(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const e=new po(s);return new go(e)}}length(t){uo("localforage.length()")}key(t,s){uo("localforage.key()")}iterate(t,s){uo("localforage.iterate()")}Ge(t){uo("localforage.setDriver()")}config(t){uo("localforage.config()")}_e(t){uo("localforage.defineDriver()")}Ie(){uo("localforage.driver()")}supports(t){uo("localforage.supports()")}dropInstance(){uo("localforage.dropInstance()")}}self.localforage=new go(new po("localforage"))}{const yo=self._s;if(yo.Ce={},yo.Ce.Re=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),yo.Ce.Pe="undefined"!=typeof HTMLDialogElement,yo.Ce.Ee=!!self.requestIdleCallback,yo.Ce.ImageBitmap=!!self.createImageBitmap,yo.Ce.ImageBitmapOptions=!1,yo.Ce.Fe=!1,yo.Ce.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{yo.Ce.ImageBitmapOptions=!0}).catch(()=>{yo.Ce.ImageBitmapOptions=!1})}catch(So){yo.Ce.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{yo.Ce.Fe=10===t.width&&10===t.height}).catch(()=>{yo.Ce.Fe=!1})}catch(wo){yo.Ce.Fe=!1}}if(yo.Ce.Ae=!(!navigator.clipboard||!navigator.clipboard.readText),yo.Ce.Oe=!(!navigator.permissions||!navigator.permissions.query),yo.Ce.De=!1,yo.Ce.Oe){const vo={name:"clipboard-read"};navigator.permissions.query(vo).then(()=>{yo.Ce.De=!0}).catch(()=>{yo.Ce.De=!1})}yo.Ce.ke=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),yo.Ce.Le="undefined"!=typeof Proxy,yo.Ce.Ne="undefined"!=typeof document&&void 0!==document.createElement("a").download,yo.Ce.Be="function"==typeof fetch,yo.Ce.Ue=!!(self.isSecureContext&&"Opera"!==yo.Ks.te&&navigator.storage&&navigator.storage.persist),yo.Ce.Ve=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),yo.Ce.We=(()=>{if("undefined"==typeof document)return!1;if("iOS"===yo.Ks.Zs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),yo.Ce.ImageDecoder=void 0!==self.ImageDecoder,yo.Ce.ze=!!self.VideoEncoder,yo.Ce.je=!!self.showOpenFilePicker,yo.Ce.He=!!self.queryLocalFonts,yo.Ce.UserActivation=!!navigator.userActivation,yo.Ce.Je=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let e=null;try{t.convertToBlob?e=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(e=await new Promise(s=>t.toBlob(s,"image/webp",1))),yo.Ce.Je=e&&"image/webp"===e.type}catch(t){yo.Ce.Je=!1}})()}{const xo=self._s;String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(xo.$e(t),"g"),s)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,e)=>t({usage:s,quota:e}),s))})}{let bo=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+Mo.qe();console.error(s)};0;const Mo=self._s;self.assert=function(t,s){t||bo(s)}}{const To=self._s,Go=self.Ls;To.Xe=function(t){return"number"==typeof t},To.Ye=function(t){return To.Xe(t)&&isFinite(t)},To.Ke=function(t){if(!To.Xe(t))throw new TypeError("expected number")},To.Ze=function(t){To.Qe(t)},To.ti=function(t,s,e){if(!To.Xe(t)||isNaN(t)||s>t||e<t)throw new RangeError("number outside of range")},To.si=function(...t){for(let s of t);},To.ei=function(t){if(!To.Ye(t))throw new TypeError("expected finite number")},To.ii=function(t){To.Qe(t)},To.ni=function(...t){for(let s of t);},To.ri=function(t){return"string"==typeof t},To.hi=function(t){if(!To.ri(t))throw new TypeError("expected string")},To.oi=function(t){To.Qe(t)},To.ai=function(...t){for(let s of t);},To.li=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},To.ci=function(t){if(!To.li(t))throw new TypeError("expected simple object")},To.fi=function(t){if(!To.Qe(t)&&!To.li(t))throw new TypeError("expected simple object")},To.di=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},To.pi=function(t){if(!To.di(t))throw new TypeError("expected object")},To.mi=function(t){To.Qe(t)},To.gi=function(...t){for(let s of t);},To.yi=function(t){return To.Si(t,Blob)&&"string"==typeof t.name},To.wi=function(t){if(!To.yi(t))throw new TypeError("expected file")},To.xi=function(t){To.Qe(t)},To.bi=function(t){return Array.isArray(t)},To.Mi=function(t){if(!To.bi(t))throw new TypeError("expected array")},To.Ti=function(t){To.Qe(t)},To.Gi=function(...t){for(let s of t);},To._i=function(t){return!(!To.bi(t)||t.length&&!To.bi(t[0]))},To.Ii=function(t){if(!To._i(t))throw new TypeError("expected 2d array");for(let s of t)if(!To.bi(s))throw new TypeError("expected 2d array")},To.Ci=function(t){To.Qe(t)},To.Ri=function(t){return"function"==typeof t},To.Pi=function(t,s){if(!To.Ri(t))throw new TypeError("expected function");if(!To.Qe(s)&&t!==s)throw new TypeError("expected same function reference")},To.Ei=function(t){To.Qe(t)},To.Fi=function(...t){for(let s of t);},To.Ai=function(t,...s){if(!To.Ri(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let e of s)if(!To.Qe(e)&&t===e)return;throw new TypeError("expected same function reference")},To.Oi=function(...t){if(!To.Qe(t))for(let s of t);},To.Di=function(t,s){return t instanceof s},To.ki=function(t,...s){for(let e of s)if(To.Di(t,e))return!0;return!1},To.Li=function(t,s){if(!To.Di(t,s))throw new TypeError("unexpected type")},To.Ni=function(t,s){To.Qe(t)},To.Bi=function(t,...s){for(let t of s);},To.Ui=function(t,...s){if(!To.ki(t,...s))throw new TypeError("unexpected type")},To.Vi=function(t,...s){if(!To.Qe(t)&&!To.ki(t,...s))throw new TypeError("unexpected type")},To.Wi=function(t,s){for(let e of t)if(!To.Di(e,s))return!1;return!0},To.zi=function(t){for(let s of t)if(!To.Ye(s))return!1;return!0},To.ji=function(t,s){for(let s of t);},To.Hi=function(t,s){if(!To.Qe(t))for(let s of t);},To.Ji=function(t,s){if(!To.Qe(t))for(let s of t);},To.$i=function(t,...s){for(let s of t);},To.Xi=function(t,...s){if(!To.Qe(t))for(let s of t);},To.Yi=function(t,s){return!(To.Qe(t)||!To.ri(t.nodeName))&&(!s||To.Ki(t.nodeName,s))},To.Zi=function(t,s){if(To.Qe(t)||!To.ri(t.nodeName))throw new TypeError("expected DOM node");if(s&&!To.Ki(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},To.Qi=function(t,s){To.Qe(t)},To.tn=function(t,s){return!(To.Qe(t)||!To.ri(t.tagName))&&(!s||To.Ki(t.tagName,s))},To.sn=function(t,s){if(To.Qe(t)||!To.ri(t.tagName))throw new TypeError("expected HTML element");if(s&&!To.Ki(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},To.en=function(t,s){To.Qe(t)},To.nn=function(t){return To.tn(t,"img")||To.tn(t,"canvas")||To.tn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},To.rn=function(t){if(!To.nn(t))throw new TypeError("expected drawable")},To.hn=function(t){To.Qe(t)},To.an=function(t){return t instanceof ImageData||To.nn(t)},To.ln=function(t){if(!To.an(t))throw new TypeError("expected drawable or image data")},To.un=function(t){if(!To.Qe(t)&&!To.an(t))throw new TypeError("expected drawable or image data")},To.cn=function(t){return"string"==typeof t||To.fn&&t instanceof To.fn||t instanceof To.dn},To.pn=function(t){if(!To.cn(t))throw new TypeError("expected string-like")},To.mn=function(t){To.Qe(t)},To.gn=function(...t){for(let s of t);},To.yn=function(){throw new Error("must be overridden")},To.Sn=function(){throw new Error("not yet implemented")},To.wn=function(t){return t.constructor===function*(){}.constructor},To.vn=function(t){if(!To.wn(t))throw new Error("expected generator function")},To.xn=function(t){return"function"===t[Symbol.iterator]},To.bn=function(t){if(!To.xn(t))throw new Error("expected iterable")},To.Mn=function(t){return!To.Qe(t)},To.Qe=function(t){return null==t},To.Tn=function(t){let s=t[0].constructor;for(let e of t)if(e.constructor!==s)return!1;return s},To.Gn=function(t,s){for(let e of t)if(!(e instanceof s))return!1;return!0};const _o=Object.getPrototypeOf(Uint8Array);To._n=function(t){return To.Di(t,_o)},To.In=function(t){},To.Cn=function(t){To.Rn(t,_o)},To.Pn=function(t,...s){if(!To.En(t,...s))throw new TypeError("unexpected type")},To.En=function(t,...s){for(const e of s)if(To.Si(t,e))return!0;return!1},To.Rn=function(t,s){if(!To.Si(t,s))throw new TypeError("unexpected type")},To.Si=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},Go.Ke=To.Ke,Go.Ze=To.Ze,Go.ei=To.ei,Go.ii=To.ii,Go.hi=To.hi,Go.oi=To.oi,Go.pi=To.pi,Go.mi=To.mi,Go.Mi=To.Mi,Go.Ti=To.Ti,Go.Pi=To.Pi,Go.Ei=To.Ei,Go.Li=To.Li,Go.Ni=To.Ni,Go.Qe=To.Qe}{let Io=function(t,s){let e=Fo.getType(t),i=Fo.getType(s);return"null"===e||"null"===i||"undefined"!==e&&"undefined"!==i&&e===i},Co=function(t){console.warn("[Defence] "+t+" @",Fo.qe())},Ro=function(){if(Uo=-1,Do.size>0||ko.size>0){let t=[...new Set([...Do.keys()].map(t=>Fo.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Do.clear(),ko.clear()}},Po=function(t){let s=new Set;for(let e in t)s.add(e);return s},Eo=function(t,s){let e=Po(s),i=Vo.get(t);if(i){let s=[];for(let t of i.values())e.has(t)?e.delete(t):s.push(t);Fo.Fn(s,[...e]),s.length&&console.warn(`[Defence] '${Fo.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Vo.set(t,e)};0;const Fo=self._s,Ao=new Map;let Oo;Fo.An=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},Fo.On=function(t,...s){Ao.has(t)||Ao.set(t,-1),-1===Ao.get(t)&&Ao.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),Ao.set(t,-1)}))},Fo.Dn=function(t){performance.mark(t),Oo||(Oo=new Map),Oo.has(t)||Oo.set(t,{kn:0,total:0,Ln:0,Nn:1,toString:function(){return`${t} :: current => ${this.kn.toPrecision(3)} :: average => ${this.Ln.toPrecision(3)} :: calls => ${this.Nn}`}})},Fo.Bn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],e=Oo.get(t);e.kn=s.duration,e.total+=e.kn,e.Ln=e.total/e.Nn,console.log(e.toString()),e.Nn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},Fo.qe=function(){return(new Error).stack},Fo.Un=function(){},Fo.cast=function(t,s){return t&&t instanceof s?t:null},Fo.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":Fo.Xe(t)?"<number>":Fo.ri(t)?"<string>":Fo.bi(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":Fo.Ri(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},Fo.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},Fo.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let e=t-1;e>=s;e--)yield e;else for(let e=t;e<s;e++)yield e};let Do=new Map,ko=new Map,Lo=new WeakMap,No=new WeakMap;Fo.Vn={};const Bo=new Set(["then","splice"]);Fo.Vn.get=function(t,s){return s in t||"symbol"==typeof s||Bo.has(s)||Co(`Accessed missing property '${s}' from defended object '${Fo.getName(t)}', returning undefined`),No.has(t)&&"symbol"!=typeof s&&!Bo.has(s)&&Co(`Accessed property '${s}' on a released object '${Fo.getName(t)}'\nObject was originally released at: ${No.get(t)})\nCall stack at access: `),t[s]},Fo.Vn.set=function(t,s,e){return s in t||Do.has(t)||Co(`Set non-existent property '${s}' to '${e}' on defended object '${Fo.getName(t)}'`),Io(t[s],e)||Do.has(t)||Co(`Set '${Fo.getType(t[s])}' property '${s}' to type '${Fo.getType(e)}' on defended object '${Fo.getName(t)}'`),No.has(t)&&Co(`Set property '${s}' on a released object '${Fo.getName(t)}'\nObject was originally released at: ${No.get(t)})\nCall stack at access: `),t[s]=e,!0},Fo.Vn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${Fo.getName(t)}'`)},Fo.Vn.defineProperty=function(t,s,e){throw new ReferenceError(`Cannot define property '${s}' on defended object '${Fo.getName(t)}'`)},Fo.Vn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${Fo.getName(t)}'`)};let Uo=-1;Fo.Wn=class{constructor(){if(!Fo.ks||!Fo.Ce.Le)return;let t=new.target,s=Object.create(t.prototype),e=new Proxy(s,Fo.Vn);return Do.set(s,e),ko.set(e,s),Lo.set(e,s),-1===Uo&&(Uo=requestAnimationFrame(Ro)),e}},Fo.zn=function(t){if(Fo.ks&&Fo.Ce.Le&&t instanceof Fo.Wn){if(!ko.has(t))return t;let s=ko.get(t);return ko.delete(t),Do.delete(s),t}return Fo.Ds?Object.seal(t):t},Fo.jn=function(t,...s){let e;try{e=new t(...s)}catch(t){throw ko.clear(),Do.clear(),t}return Fo.ks&&Eo(t,e),Fo.zn(e)},Fo.Hn=function(t){let s=Lo.get(t);s&&No.set(s,Fo.qe())},Fo.Jn=function(t){let s=Lo.get(t);return!!s&&!!No.get(s)};let Vo=new Map;Fo.$n=class{constructor(t){this.qn="",t&&this.start(t)}start(t){Fo.Ys&&(this.qn=t,performance.mark(this.qn+"-Start"))}end(){Fo.Ys&&(performance.mark(this.qn+"-End"),performance.measure(this.qn,this.qn+"-Start",this.qn+"-End"))}next(t){Fo.Ys&&(this.end(),this.qn=t,performance.mark(this.qn+"-Start"))}}}{let Wo=function(t){return 0===t&&1/t<0};0;const zo=self._s,jo=2*Math.PI,Ho=Math.PI/180,Jo=180/Math.PI;zo.wrap=function(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=(e=Math.floor(e))-s;if(0===i)return e;if(t<s){const n=e-(s-t)%i;return n===e?0:n}return s+(t-s)%i},zo.Xn=function(t,s,e,i,n){const r=e-s;return 0===r&&0===i?t:(t-s)*(n-i)/r+i},zo.normalize=function(t,s,e){return s-e===0?1:(t-s)/(e-s)},zo.Yn=function(t,s,e){return t<s?s:t>e?e:t},zo.Kn=function(t){return(t%=jo)<0&&(t+=jo),t},zo.Zn=function(t){return t*Ho},zo.Qn=function(t){return t*Jo},zo.tr=function(t,s){return Math.sqrt(t*t+s*s)},zo.sr=function(t,s,e){return Math.sqrt(t*t+s*s+e*e)},zo.er=function(t,s,e,i){return zo.tr(e-t,i-s)},zo.ir=function(t,s,e,i){const n=e-t,r=i-s;return n*n+r*r},zo.nr=function(t,s,e,i){return Math.atan2(i-s,e-t)},zo.rr=function(t,s){if(t===s)return 0;let e=Math.sin(t),i=Math.cos(t),n=e*Math.sin(s)+i*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},zo.hr=function(t,s,e){let i=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(i*r+n*h)>e?n*r-i*h>0?zo.Kn(t+e):zo.Kn(t-e):zo.Kn(s)},zo.ar=function(t,s){let e=Math.sin(t);return Math.cos(t)*Math.sin(s)-e*Math.cos(s)<=0},zo.lr=function(t,s,e,i=0){let n=zo.rr(t,s);const r=jo*i;return zo.ar(s,t)?zo.Kn(t+(n+r)*e):zo.Kn(t-(n+r)*e)},zo.ur=function(t,s,e,i=0){const n=zo.rr(t,s),r=jo*i;return zo.ar(s,t)?zo.Kn(t+(n+r)*e):zo.Kn(t+(jo-n+r)*e)},zo.cr=function(t,s,e,i=0){const n=zo.rr(t,s),r=jo*i;return zo.ar(s,t)?zo.Kn(t-(-jo+n-r)*e):zo.Kn(t-(n+r)*e)},zo.dr=function(t,s){const e=zo.rr(t,s);return zo.ar(t,s)?zo.Kn(s-e):zo.Kn(s+e)},zo._t=function(t,s,e){return t+e*(s-t)},zo.pr=function(t,s,e){return t===s?0:(e-t)/(s-t)},zo.mr=function(t,s,e,i,n){return zo._t(i,n,zo.pr(t,s,e))},zo.gr=function(t,s,e,i){return zo._t(zo._t(t,s,i),zo._t(s,e,i),i)},zo.yr=function(t,s,e,i,n){return zo._t(zo.gr(t,s,e,n),zo.gr(s,e,i,n),n)},zo.Sr=function(t,s,e){return(t+s+(t-s)*Math.cos(e*Math.PI))/2},zo.wr=function(t){return t>0&&!(t-1&t)},zo.vr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},zo.br=function(t,s){return Math.round(t*s)/s},zo.Mr=function(t,s){return Math.floor(t*s)/s},zo.Tr=function(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round(t*e)/e},zo.Gr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},zo.toFixed=function(t,s){let e=t.toFixed(s),i=e.length-1;for(;i>=0&&"0"===e.charAt(i);--i);return i>=0&&"."===e.charAt(i)&&--i,i<0?e:e.substr(0,i+1)},zo._r=function(t,s,e){return zo.Yn(t,0,255)|zo.Yn(s,0,255)<<8|zo.Yn(e,0,255)<<16};zo.Ir=function(t,s,e,i){return(t=zo.Yn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=zo.Yn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(e=zo.Yn(Math.floor(1024*e),-8192,8191))<0&&(e+=16384),-(16384*t*16384*1024+16384*s*1024+1024*e+(i=zo.Yn(Math.floor(1023*i),0,1023)))},zo.Cr=function(t,s,e){return zo.Ir(t,s,e,1)},zo.Rr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},zo.Pr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},zo.Er=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},zo.Fr=function(t){return Wo(t)?0:t>=0?1:Math.floor(-t%1024)/1023},zo.Ar=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let e=s;s=t%s,t=e}return t};const $o=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];zo.Or=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let e of $o){let i=t/e[0]*e[1];if(Math.abs(s-i)<1)return e.slice(0);if(i=t/e[1]*e[0],Math.abs(s-i)<1)return[e[1],e[0]]}let e=zo.Ar(t,s);return[t/e,s/e]},zo.Dr=function(t,s,e,i,n,r,h,o){const a=Math.min(t,e),l=Math.max(t,e),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,i),d=Math.max(s,i),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-e,y=r-s+o-i,S=e-t,w=i-s,v=h-n,x=o-r,b=Math.abs(w*v-x*S),M=v*y-x*g;if(Math.abs(M)>b)return!1;const T=S*y-w*g;return Math.abs(T)<=b},zo.kr=function(t,s,e,i,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-e,y=l-s+c-i,S=e-t,w=i-s,v=u-a,x=c-l,b=Math.abs(w*v-x*S),M=v*y-x*g;if(Math.abs(M)>b)return!1;const T=S*y-w*g;return Math.abs(T)<=b},zo.Lr=function(t,s,e,i,n){const r=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i),l=n.Nr(),u=n.Br(),c=n.Ur(),f=n.Vr(),d=n.Wr(),p=n.zr(),m=n.jr(),g=n.Hr();return zo.kr(t,s,e,i,r,h,o,a,l,u,c,f)||zo.kr(t,s,e,i,r,h,o,a,c,f,d,p)||zo.kr(t,s,e,i,r,h,o,a,d,p,m,g)||zo.kr(t,s,e,i,r,h,o,a,m,g,l,u)},zo.Jr=function(t,s,e,i,n){const r=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i);let l=0;for(let u=n.length-4;l<=u;l+=2)if(zo.kr(t,s,e,i,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return zo.kr(t,s,e,i,r,h,o,a,n[l],n[l+1],n[0],n[1])};zo.$r=function(t,s,e,i,n,r,h,o){const a=e-t,l=o-r,u=a*l-(i-s)*(h-n);if(0===u)return 2;const c=((s-i)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},zo.qr=function(t,s,e,i,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return zo.$r(t,s,e,i,n-l,r-u,h+l,o+u)},zo.Xr=function(t,s,e,i,n,r,h,o){const a=n-e,l=r-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),v=(y*g-m*S)*w,x=(p*S-m*g)*w;return v>=0&&x>=0&&v+x<=1},zo.Yr=function(t,s,e,i,n,r,h,o){const a=n-e,l=r-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,v=(g*y-m*S)/w,x=(p*S-m*y)/w;return[1-v-x,v,x]},zo.Kr=function(t,s,e,i,n,r,h,o,a,l,u,c){return[t*i+s*h+e*l,t*n+s*o+e*u,t*r+s*a+e*c]}}{const qo=self._s;let Xo=null,Yo="";if("undefined"!=typeof document){Xo=document;const ea=document.querySelector("base");Yo=ea&&ea.hasAttribute("href")?ea.getAttribute("href"):"",Yo&&(Yo.startsWith("/")&&(Yo=Yo.substr(1)),Yo.endsWith("/")||(Yo+="/"))}qo.Zr=function(){return Yo},qo.Qr=function(){if(!Xo)return"";const t=Xo.location;return qo.th(t.origin+t.pathname)+Yo},qo.th=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},qo.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},qo.eh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},qo.ih=function(t,s){const e=t.lastIndexOf(".");return-1===e?t+"."+s:t.substr(0,e+1)+s},qo.nh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},qo.rh=function(t){return t.replace(/\\/g,"/")},qo.hh=function(t,s){return s===(t?qo.eh(t).slice(1):"")},qo.oh=function(t,s){let e,i;return qo.yi(t)&&(e=qo.nh(t.name)),qo.ri(t)&&(e=qo.nh(t)),qo.yi(s)&&(i=qo.nh(s.name)),qo.ri(s)&&(i=qo.nh(s)),e===i},qo.ah=function(t){t=qo.rh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const e=t.lastIndexOf("/")+1;let i,n="",r=t,h="";e>0&&(n=t.slice(0,e),r=t.slice(e)),i=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),i=r.slice(0,-h.length)),{dir:n,uh:r,name:i,root:s,ext:h,fh:s+n+r}},qo.dh=function(t,s){return new Promise((e,i)=>{self.setTimeout(e,t,s)})},qo.ph=function(t){try{t()}catch(t){qo.Ds&&console.warn("Swallowed exception: ",t)}},qo.mh=function(){},qo.Ki=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},qo.gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},qo.yh=function(t,s,e){t[e++]=s[0],t[e++]=s[1],t[e++]=s[2],t[e++]=s[3],t[e++]=s[4],t[e++]=s[5],t[e++]=s[6],t[e++]=s[7],t[e++]=s[8],t[e++]=s[9],t[e++]=s[10],t[e++]=s[11],t[e++]=s[12],t[e++]=s[13],t[e++]=s[14],t[e]=s[15]},qo.Sh=function(t,s){t.length=s},qo.wh=function(t){t&&0!==t.length&&qo.Sh(t,0)},qo.xh=function(t){if(t){for(let s=0;s<t.length;s++){let e=t[s];qo.Sh(e,0)}qo.Sh(t,0)}},qo.bh=function(t,s,e){s|=0;const i=t.length;if(!(s<=i))for(let n=i;n<s;++n)t.push(e)},qo.Mh=function(t,s,e){s|=0;const i=t.length;s<i?qo.Sh(t,s):s>i&&qo.bh(t,s,e)},qo.Th=function(t,s){qo.wh(t),qo.Fn(t,s)},qo.Fn=function(t,s){if(s.length<1e4)t.push(...s);else for(let e=0,i=s.length;e<i;++e)t.push(s[e])},qo.Gh=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let e=t.length-1;for(let i=s;i<e;++i)t[i]=t[i+1];qo.Sh(t,e)},qo._h=function(t,s){let e=t.indexOf(s);e>=0&&t.splice(e,1)},qo.Ih=function(t,s){let e=t.length;if(s.length!==e)return!1;for(let i=0;i<e;++i)if(t[i]!==s[i])return!1;return!0},qo.Ch=function(t,s){let e=[],i=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?e.push(r):(t[i]=r,++i)}return qo.Sh(t,i),e},qo.Rh=function(t,s){const e=t.length;let i=0;for(let e=0,n=t.length;e<n;++e){let n=t[e];s.has(n)||(t[i++]=n)}return qo.Sh(t,i),e-i},qo.Ph=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},qo.Eh=function(t,s){if(!qo.Ph(t,s))throw new RangeError("array index out of bounds")},qo.Fh=function(t){return t.slice()},qo.Ah=function(t,s){let e=[];for(let i of t)if(qo.di(i)){let t=s(i);if(!t)throw new Error("missing clone");if(t.constructor!==i.constructor)throw new Error("object is not a clone");e.push(t)}else qo.bi(i)?e.push(qo.Ah(i,s)):e.push(i);return e},qo.Oh=function(t){let s=[];for(let e of t)s.push(e.slice());return s},qo.Dh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},qo.kh=function(t,s,e){const i=new Set;for(const n of t.values())s(n)&&(e?i.add(e(n)):i.add(n));return i},qo.Lh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},qo.Nh=function(t,s){for(const e of s)t.add(e);return t},qo.Bh=function(t){for(let s of t)return s;return null},qo.xor=function(t,s){return!t!=!s},qo.compare=function(t,s,e){switch(s){case 0:return t===e;case 1:return t!==e;case 2:return t<e;case 3:return t<=e;case 4:return t>e;case 5:return t>=e;default:return!1}},qo.Uh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},qo.Vh=function(t,s){return t.length?new Promise((e,i)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then(i=>{h||(n[o]=i,++r,r===t.length?e(n):s(r,t.length))}).catch(t=>{h=!0,i(t)})}):Promise.resolve([])};let Ko=[];qo.Wh=function(t){Ko.push(t)},qo.zh=function(){let t=0;for(let s of Ko)t+=s();return Math.floor(t)};let Zo=1;const Qo=new Map,ta=new MessageChannel;ta.port2.onmessage=function(t){const s=t.data,e=Qo.get(s);Qo.delete(s),e&&e(performance.now())},qo.jh=function(t){const s=Zo++;return Qo.set(s,t),ta.port1.postMessage(s),s},qo.Hh=function(t){Qo.delete(t)},qo.Jh=qo.jh,qo.$h=function(){return new Promise(t=>qo.Jh(t))};const sa=new Set;qo.qh=function(t){const s=self.requestAnimationFrame(async e=>{await qo.$h(),sa.has(s)&&(sa.delete(s),t(e))});return sa.add(s),s},qo.Xh=function(t){sa.has(t)&&(self.cancelAnimationFrame(t),sa.delete(t))}}{const ia=self._s;ia.Yh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},ia.Kh=function(t){return!ia.Yh(t)},ia.Zh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},ia.Qh=function(t,s){return fetch(t,s).then(t=>(ia.Zh(t),t))},ia.so=function(t){return ia.Qh(t).then(t=>t.text())},ia.eo=function(t){return ia.Qh(t).then(t=>t.json())},ia.io=function(t){return ia.Qh(t).then(t=>t.blob())},ia.no=function(t){return ia.Qh(t).then(t=>t.arrayBuffer())},ia.ro=function(t){return new Promise((s,e)=>{const i=new Image;i.onload=()=>s(i),i.onerror=t=>e(t),i.src=t})},ia.ho=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,e)=>{const i=new FileReader;i.onload=()=>s(i.result),i.onerror=()=>e(i.error),i.readAsArrayBuffer(t)})},ia.oo=function(t){return"function"==typeof t.text?t.text():new Promise((s,e)=>{const i=new FileReader;i.onload=()=>s(i.result),i.onerror=()=>e(i.error),i.readAsText(t)})},ia.ao=function(t){return ia.oo(t).then(t=>JSON.parse(t))},ia.lo=async function(t,s){let e=URL.createObjectURL(t);try{const t=await ia.ro(e);return URL.revokeObjectURL(e),e="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{e&&URL.revokeObjectURL(e)}},ia.uo=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const e=document.createElement("canvas");return e.width=t,e.height=s,e}return new OffscreenCanvas(t,s)},ia.co=function(t,s,e){if("number"!=typeof e&&(e=1),s=s||"image/png",e=ia.Yn(e,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:e});if(t.toBlob)return new Promise(i=>t.toBlob(i,s,e));throw new Error("could not convert canvas to blob")},ia.fo=function(t,s,e){const i=ia.uo(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),ia.co(i,s,e)},ia.do=function(t,s,e){if(ia.Ce.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>ia.fo(t,s,e));if(ia.Ce.ImageBitmap)return createImageBitmap(t).then(t=>ia.fo(t,s,e));{const i=ia.uo(t.width,t.height);return i.getContext("2d").putImageData(t,0,0),ia.co(i,s,e)}},ia.po=function(t,s){t.clear();for(const e of s)t.add(e)},ia.mo=function(t){const s=Object.create(null);for(const[e,i]of t.entries())s[e]=i;return s},ia.yo=function(t,s){s.clear();for(const[e,i]of Object.entries(t))s.set(e,i)},ia.So=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const e=Object.create(null);for(const[i,n]of Object.entries(s))e[i]=t(n);return e}}return s},ia.wo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const e=Object.create(null);for(const[i,n]of Object.entries(s))e[i]=t(n);return e}}return s},ia.vo=function(t){if(t.startsWith("--"))return t;let s="",e=!1,i=0;for(const n of t)"-"===n?i>0&&(e=!0):e?(s+=n.toUpperCase(),e=!1):s+=n,++i;return s},ia.xo=function(t){return"object"==typeof t&&"function"==typeof t.next},ia.bo=function(t,s){const e=[];if("function"==typeof s)for(let i=0;i<t;++i)e.push(s());else for(let i=0;i<t;++i)e.push(s);return e}}{let na=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},ra=function(t,s,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(s-t)*e:e<.5?s:e<2/3?t+(s-t)*(2/3-e)*6:t};0;const ha=self._s,oa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,aa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;ha.Mo=class{constructor(t,s,e,i){this.To=NaN,this.Go=NaN,this._o=NaN,this.Io=NaN,this.To=0,this.Go=0,this._o=0,this.Io=0,t instanceof ha.Mo?this.set(t):this.Co(t||0,s||0,e||0,i||0)}Ro(t,s,e){return this.To=+t,this.Go=+s,this._o=+e,this.Yn(),this}Co(t,s,e,i){return this.To=+t,this.Go=+s,this._o=+e,this.Io=+i,this.Yn(),this}set(t){return this.To=t.To,this.Go=t.Go,this._o=t._o,this.Io=t.Io,this}m(t){return this.set(t)}add(t){this.To+=t.To,this.Go+=t.Go,this._o+=t._o,this.Io+=t.Io,this.Yn()}Po(t,s,e,i=0){this.To+=+t,this.Go+=+s,this._o+=+e,this.Io+=+i,this.Yn()}Eo(t){this.Fo(Math.max(this.To,t.To)-Math.min(this.To,t.To)),this.Ao(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Oo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Do(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Yn()}ko(t){this.To=t.To,this.Go=t.Go,this._o=t._o}Fo(t){this.To=ha.Yn(+t,0,1)}Lo(){return this.To}Ao(t){this.Go=ha.Yn(+t,0,1)}No(){return this.Go}Oo(t){this._o=ha.Yn(+t,0,1)}Bo(){return this._o}Do(t){this.Io=ha.Yn(+t,0,1)}Uo(){return this.Io}clone(){return ha.jn(ha.Mo,this.To,this.Go,this._o,this.Io)}toArray(){return[this.To,this.Go,this._o,this.Io]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.To,t[s++]=this.Go,t[s++]=this._o,t[s]=this.Io}zo(t,s){const e=this.To,i=this.Go,n=this._o,r=this.Io;for(let h=0;h<4;++h)t[s++]=e,t[s++]=i,t[s++]=n,t[s++]=r}jo(t,s){t[s++]=this.To,t[s++]=this.Go,t[s]=this._o}equals(t){return this.To===t.To&&this.Go===t.Go&&this._o===t._o&&this.Io===t.Io}Ho(t){return this.To===t.To&&this.Go===t.Go&&this._o===t._o}Jo(t,s,e){return this.To===t&&this.Go===s&&this._o===e}$o(t,s,e,i){return this.To===t&&this.Go===s&&this._o===e&&this.Io===i}qo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Io)}Xo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this._o)}multiply(t){this.To*=t.To,this.Go*=t.Go,this._o*=t._o,this.Io*=t.Io}Yo(t){this.To*=t,this.Go*=t,this._o*=t,this.Io*=t}Ko(){return this.To*=this.Io,this.Go*=this.Io,this._o*=this.Io,this}Zo(){return this.To/=this.Io,this.Go/=this.Io,this._o/=this.Io,this}Yn(){return this.To=ha.Yn(this.To,0,1),this.Go=ha.Yn(this.Go,0,1),this._o=ha.Yn(this._o,0,1),this.Io=ha.Yn(this.Io,0,1),this}Qo(t){this.To=ha.Rr(t),this.Go=ha.Pr(t),this._o=ha.Er(t),this.Io=ha.Fr(t)}ta(t,s,e){return`rgb(${100*(ha.Ye(t)?t:this.Lo())}%, ${100*(ha.Ye(s)?s:this.No())}%, ${100*(ha.Ye(e)?e:this.Bo())}%)`}sa(t,s,e,i){return`rgba(${100*(ha.Ye(t)?t:this.Lo())}%, ${100*(ha.Ye(s)?s:this.No())}%, ${100*(ha.Ye(e)?e:this.Bo())}%, ${ha.Ye(i)?i:this.Uo()})`}ea(){const t=Math.round(255*this.Lo()),s=Math.round(255*this.No()),e=Math.round(255*this.Bo());return"#"+na(t.toString(16))+na(s.toString(16))+na(e.toString(16))}ia(t){if("string"!=typeof t)return!1;let s,e,i;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,e=parseInt(t[1],16)/15,i=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,e=parseInt(t.substr(2,2),16)/255,i=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Fo(s),isFinite(e)&&this.Ao(e),isFinite(i)&&this.Oo(i),this.Do(1),!0}na(){return`${Math.round(255*this.Lo())}, ${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}`}ra(){return[Math.round(255*this.Lo()),Math.round(255*this.No()),Math.round(255*this.Bo())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(e)&&this.Fo(e),isFinite(i)&&this.Ao(i),isFinite(n)&&this.Oo(n),this.Do(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(e)&&this.Fo(e),isFinite(i)&&this.Ao(i),isFinite(n)&&this.Oo(n),this.Do(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(e)&&this.Fo(e),isFinite(i)&&this.Ao(i),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Do(r),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(e)&&this.Fo(e),isFinite(i)&&this.Ao(i),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Do(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ia(t)}toJSON(){return[this.To,this.Go,this._o,this.Io]}fa(t,s,e,i){let n,r,h;if(t%=360,s=ha.Yn(s,0,100),e=ha.Yn(e,0,100),i=ha.Yn(i,0,1),t/=360,e/=100,0==(s/=100))n=r=h=e;else{const i=e<.5?e*(1+s):e+s-e*s,o=2*e-i;n=ra(o,i,t+1/3),r=ra(o,i,t),h=ra(o,i,t-1/3)}return this.Fo(n),this.Ao(r),this.Oo(h),this.Do(i),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),e=oa.exec(s),i=aa.exec(s);return e&&4===e.length?(this.fa(+e[1],+e[2],+e[3],1),!0):!(!i||5!==i.length||(this.fa(+e[1],+e[2],+e[3],+e[4]),0))}da(){const t=this.To,s=this.Go,e=this._o,i=this.Io;return`hsla(${ha.Mo.pa(t,s,e)}, ${ha.Mo.ma(t,s,e)}%, ${ha.Mo.ga(t,s,e)}%, ${i})`}ya(){const t=this.To,s=this.Go,e=this._o;return[ha.Mo.pa(t,s,e),ha.Mo.ma(t,s,e),ha.Mo.ga(t,s,e),this.Io]}Sa(t){Array.isArray(t)&&(t.length<3||(this.To=t[0],this.Go=t[1],this._o=t[2],t.length>=4?this.Io=t[3]:this.Io=1))}set r(t){this.Fo(t)}get r(){return this.Lo()}set g(t){this.Ao(t)}get g(){return this.No()}set b(t){this.Oo(t)}get b(){return this.Bo()}set a(t){this.Do(t)}get a(){return this.Uo()}wa(t,s){switch(t){case 0:this.Fo(s);break;case 1:this.Ao(s);break;case 2:this.Oo(s);break;case 3:this.Do(s);break;default:throw new RangeError("invalid color index")}}va(t){switch(t){case 0:return this.Lo();case 1:return this.No();case 2:return this.Bo();case 3:return this.Uo();default:throw new RangeError("invalid color index")}}static xa(t,s){let e,i;if(Array.isArray(t))e=new ha.Mo,e.Sa(t);else{if(!(t instanceof ha.Mo))throw new Error("unexpected type");e=t}if(Array.isArray(s))i=new ha.Mo,i.Sa(s);else{if(!(s instanceof ha.Mo))throw new Error("unexpected type");i=s}return e.equals(i)}static ba(t,s){return ha.Yn(Math.max(t,s)-Math.min(t,s),0,1)}static Ma(t,s){const e=new ha.Mo;return e.Fo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),e.Ao(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),e.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),e.Do(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),e}static Ta(t,s){const e=new ha.Mo(0,0,0,1);return e.Fo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),e.Ao(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),e.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),e}static pa(t,s,e){const i=Math.max(t,s,e),n=Math.min(t,s,e);if(i===n)return 0;let r=0;switch(i){case t:r=(s-e)/(i-n)+(s<e?6:0);break;case s:r=(e-t)/(i-n)+2;break;case e:r=(t-s)/(i-n)+4}return Math.round(r/6*360)}static ma(t,s,e){const i=Math.max(t,s,e),n=Math.min(t,s,e);if(i===n)return 0;const r=i-n,h=(i+n)/2>.5?r/(2-i-n):r/(i+n);return Math.round(100*h)}static ga(t,s,e){const i=Math.max(t,s,e),n=(i+Math.min(t,s,e))/2;return i?Math.round(100*n):0}},ha.Mo.Ga=Object.freeze(ha.jn(ha.Mo,1,1,1,1)),ha.Mo._a=Object.freeze(ha.jn(ha.Mo,0,0,0,1)),ha.Mo.Ia=Object.freeze(ha.jn(ha.Mo,0,0,0,0))}{const la=self._s;la.Ca=class{constructor(t,s){this.Ra=0,this.Pa=0,t instanceof la.Ca?this.m(t):this.set(t||0,s||0)}set(t,s){this.Ra=+t,this.Pa=+s}m(t){this.Ra=t.Ra,this.Pa=t.Pa}equals(t){return this.Ra===t.Ra&&this.Pa===t.Pa}Ea(t,s){return this.Ra===t&&this.Pa===s}qo(t,s){return t[s]===Math.fround(this.Ra)&&t[s+1]===Math.fround(this.Pa)}Fa(t){this.Ra=+t}Aa(){return this.Ra}Oa(t){this.Pa=+t}Da(){return this.Pa}toArray(){return[this.Ra,this.Pa]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.Ra,t[s]=this.Pa}offset(t,s){this.Ra+=+t,this.Pa+=+s}scale(t,s){this.Ra*=t,this.Pa*=s}St(t,s){this.Ra/=t,this.Pa/=s}round(){this.Ra=Math.round(this.Ra),this.Pa=Math.round(this.Pa)}floor(){this.Ra=Math.floor(this.Ra),this.Pa=Math.floor(this.Pa)}ceil(){this.Ra=Math.ceil(this.Ra),this.Pa=Math.ceil(this.Pa)}angle(){return la.nr(0,0,this.Ra,this.Pa)}ka(){return this.Ra*this.Ra+this.Pa*this.Pa}length(){return la.tr(this.Ra,this.Pa)}La(t,s){const e=this.Ra*s-this.Pa*t;this.Pa=this.Pa*s+this.Ra*t,this.Ra=e}rotate(t){0!==t&&this.La(Math.sin(t),Math.cos(t))}Na(t,s,e){0===t||s===this.Ra&&e===this.Pa||(this.Ra-=s,this.Pa-=e,this.La(Math.sin(t),Math.cos(t)),this.Ra+=+s,this.Pa+=+e)}move(t,s){0!==s&&(this.Ra+=Math.cos(t)*s,this.Pa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ra/=t,this.Pa/=t)}Yn(t,s){this.Ra=la.Yn(this.Ra,t,s),this.Pa=la.Yn(this.Pa,t,s)}Tt(t){return this.Ra*t.Ra+this.Pa*t.Pa}reverse(){this.Ra=-this.Ra,this.Pa=-this.Pa}Ba(){let t=this.Ra;return this.Ra=this.Pa,this.Pa=-t,this}}}{const ua=self._s;ua.Rect=class{constructor(t,s,e,i){this.Ua=NaN,this.Va=NaN,this.Wa=NaN,this.za=NaN,this.Ua=0,this.Va=0,this.Wa=0,this.za=0,t instanceof ua.Rect?this.m(t):this.set(t||0,s||0,e||0,i||0)}set(t,s,e,i){this.Ua=+t,this.Va=+s,this.Wa=+e,this.za=+i}ja(t,s,e,i){t=+t,s=+s,this.Ua=t,this.Va=s,this.Wa=t+ +e,this.za=s+ +i}m(t){this.Ua=+t.Ua,this.Va=+t.Va,this.Wa=+t.Wa,this.za=+t.za}clone(){return new ua.Rect(this.Ua,this.Va,this.Wa,this.za)}static Ha(t,s){const e=new ua.Rect;return e.Ja(Math.min(t.Ua,s.Ua)),e.$a(Math.min(t.Va,s.Va)),e.qa(Math.max(t.Wa,s.Wa)),e.Xa(Math.max(t.za,s.za)),e}static Ya(t){return new ua.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Ua===t.Ua&&this.Va===t.Va&&this.Wa===t.Wa&&this.za===t.za}Ka(t,s,e,i){return this.Ua===t&&this.Va===s&&this.width()===e&&this.height()===i}qo(t,s){return t[s]===Math.fround(this.Ua)&&t[s+1]===Math.fround(this.Va)&&t[s+2]===Math.fround(this.Wa)&&t[s+3]===Math.fround(this.za)}Ja(t){this.Ua=+t}Za(){return this.Ua}$a(t){this.Va=+t}Qa(){return this.Va}qa(t){this.Wa=+t}tl(){return this.Wa}Xa(t){this.za=+t}sl(){return this.za}toArray(){return[this.Ua,this.Va,this.Wa,this.za]}Vo(){return new Float64Array(this.toArray())}el(){return new DOMRect(this.Ua,this.Va,this.width(),this.height())}static il(t){return ua.jn(ua.Rect,t.left,t.top,t.right,t.bottom)}Wo(t,s){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=this.Wa,t[s]=this.za}nl(t,s){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=this.za,t[s++]=this.Ua,t[s]=this.za}rl(t,s,e){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=e,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=e,t[s++]=this.Wa,t[s++]=this.za,t[s++]=e,t[s++]=this.Ua,t[s++]=this.za,t[s]=e}width(){return this.Wa-this.Ua}height(){return this.za-this.Va}hl(){return(this.Ua+this.Wa)/2}ol(){return(this.Va+this.za)/2}offset(t,s){t=+t,s=+s,this.Ua+=t,this.Va+=s,this.Wa+=t,this.za+=s}offsetLeft(t){this.Ua+=+t}offsetTop(t){this.Va+=+t}al(t){this.Wa+=+t}ll(t){this.za+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Va<this.za?this.Ua<this.Wa?this.za=this.Va+this.width():this.za=this.Va-this.width():this.Ua<this.Wa?this.za=this.Va-this.width():this.za=this.Va+this.width()}cl(t,s){t=+t,s=+s,this.Ua-=t,this.Va-=s,this.Wa+=t,this.za+=s}fl(t,s){t=+t,s=+s,this.Ua+=t,this.Va+=s,this.Wa-=t,this.za-=s}multiply(t,s){this.Ua*=t,this.Va*=s,this.Wa*=t,this.za*=s}St(t,s){this.Ua/=t,this.Va/=s,this.Wa/=t,this.za/=s}dl(t){this.Ua=+t-this.Ua,this.Wa=+t-this.Wa}pl(t){this.Va=+t-this.Va,this.za=+t-this.za}ml(t,s){const e=this.width(),i=this.height(),n=this.Za()+e*t,r=this.Qa()+i*s;this.ja(n-i*s,r-e*t,i,e)}gl(){const t=this.Ua;this.Ua=this.Wa,this.Wa=t}yl(){const t=this.Va;this.Va=this.za,this.za=t}Sl(t){const s=this.Va;this.Va=+t-this.za,this.za=+t-s}round(){this.Ua=Math.round(this.Ua),this.Va=Math.round(this.Va),this.Wa=Math.round(this.Wa),this.za=Math.round(this.za)}wl(){this.Ua=Math.ceil(this.Ua),this.Va=Math.ceil(this.Va),this.Wa=Math.floor(this.Wa),this.za=Math.floor(this.za)}vl(){this.Ua=Math.floor(this.Ua),this.Va=Math.floor(this.Va),this.Wa=Math.ceil(this.Wa),this.za=Math.ceil(this.za)}floor(){this.Ua=Math.floor(this.Ua),this.Va=Math.floor(this.Va),this.Wa=Math.floor(this.Wa),this.za=Math.floor(this.za)}ceil(){this.Ua=Math.ceil(this.Ua),this.Va=Math.ceil(this.Va),this.Wa=Math.ceil(this.Wa),this.za=Math.ceil(this.za)}Yn(t,s,e,i){this.Ua=Math.max(this.Ua,+t),this.Va=Math.max(this.Va,+s),this.Wa=Math.min(this.Wa,+e),this.za=Math.min(this.za,+i)}xl(t,s,e,i){t=+t,s=+s,e=+e,i=+i,this.Ua=ua.Yn(this.Ua,t,e),this.Va=ua.Yn(this.Va,s,i),this.Wa=ua.Yn(this.Wa,t,e),this.za=ua.Yn(this.za,s,i)}normalize(){this.Ua>this.Wa&&this.gl(),this.Va>this.za&&this.yl()}bl(t){return!(t.Wa<this.Ua||t.za<this.Va||t.Ua>this.Wa||t.Va>this.za)}Ml(t,s,e){return!(t.Wa+s<this.Ua||t.za+e<this.Va||t.Ua+s>this.Wa||t.Va+e>this.za)}Tl(t,s){return t>=this.Ua&&t<=this.Wa&&s>=this.Va&&s<=this.za}Gl(t){return t.Ua>=this.Ua&&t.Va>=this.Va&&t.Wa<=this.Wa&&t.za<=this.za}_l(t){t.Ua<this.Ua&&(this.Ua=+t.Ua),t.Va<this.Va&&(this.Va=+t.Va),t.Wa>this.Wa&&(this.Wa=+t.Wa),t.za>this.za&&(this.za=+t.za)}Il(t){this.Ua=ua._t(t.Ua,t.Wa,this.Ua),this.Va=ua._t(t.Va,t.za,this.Va),this.Wa=ua._t(t.Ua,t.Wa,this.Wa),this.za=ua._t(t.Va,t.za,this.za)}}}{const ca=self._s;ca.Cl=class{constructor(t,s,e,i,n,r,h,o){this.Rl=NaN,this.Pl=NaN,this.El=NaN,this.Fl=NaN,this.Al=NaN,this.Ol=NaN,this.Dl=NaN,this.kl=NaN,this.Rl=0,this.Pl=0,this.El=0,this.Fl=0,this.Al=0,this.Ol=0,this.Dl=0,this.kl=0,t instanceof ca.Cl?this.m(t):this.set(t||0,s||0,e||0,i||0,n||0,r||0,h||0,o||0)}set(t,s,e,i,n,r,h,o){this.Rl=+t,this.Pl=+s,this.El=+e,this.Fl=+i,this.Al=+n,this.Ol=+r,this.Dl=+h,this.kl=+o}Ll(t,s,e,i){this.set(t,s,e,s,e,i,t,i)}m(t){this.Rl=t.Rl,this.Pl=t.Pl,this.El=t.El,this.Fl=t.Fl,this.Al=t.Al,this.Ol=t.Ol,this.Dl=t.Dl,this.kl=t.kl}equals(t){return this.Rl===t.Rl&&this.Pl===t.Pl&&this.El===t.El&&this.Fl===t.Fl&&this.Al===t.Al&&this.Ol===t.Ol&&this.Dl===t.Dl&&this.kl===t.kl}Nl(t){this.Rl=+t}Nr(){return this.Rl}Bl(t){this.Pl=+t}Br(){return this.Pl}Ul(t){this.El=+t}Ur(){return this.El}Vl(t){this.Fl=+t}Vr(){return this.Fl}Wl(t){this.Al=+t}Wr(){return this.Al}zl(t){this.Ol=+t}zr(){return this.Ol}jl(t){this.Dl=+t}jr(){return this.Dl}Hl(t){this.kl=+t}Hr(){return this.kl}Jl(){return new DOMQuad(new DOMPoint(this.Rl,this.Pl),new DOMPoint(this.El,this.Fl),new DOMPoint(this.Al,this.Ol),new DOMPoint(this.Dl,this.kl))}static $l(t){return ca.jn(ca.Cl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Rl,this.Pl,this.El,this.Fl,this.Al,this.Ol,this.Dl,this.kl]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.Rl,t[s++]=this.Pl,t[s++]=this.El,t[s++]=this.Fl,t[s++]=this.Al,t[s++]=this.Ol,t[s++]=this.Dl,t[s]=this.kl}ql(t,s,e){t[s++]=this.Rl,t[s++]=this.Pl,t[s++]=e,t[s++]=this.El,t[s++]=this.Fl,t[s++]=e,t[s++]=this.Al,t[s++]=this.Ol,t[s++]=e,t[s++]=this.Dl,t[s++]=this.kl,t[s]=e}offset(t,s){t=+t,s=+s,this.Rl+=t,this.Pl+=s,this.El+=t,this.Fl+=s,this.Al+=t,this.Ol+=s,this.Dl+=t,this.kl+=s}round(){this.Rl=Math.round(this.Rl),this.Pl=Math.round(this.Pl),this.El=Math.round(this.El),this.Fl=Math.round(this.Fl),this.Al=Math.round(this.Al),this.Ol=Math.round(this.Ol),this.Dl=Math.round(this.Dl),this.kl=Math.round(this.kl)}floor(){this.Rl=Math.floor(this.Rl),this.Pl=Math.floor(this.Pl),this.El=Math.floor(this.El),this.Fl=Math.floor(this.Fl),this.Al=Math.floor(this.Al),this.Ol=Math.floor(this.Ol),this.Dl=Math.floor(this.Dl),this.kl=Math.floor(this.kl)}ceil(){this.Rl=Math.ceil(this.Rl),this.Pl=Math.ceil(this.Pl),this.El=Math.ceil(this.El),this.Fl=Math.ceil(this.Fl),this.Al=Math.ceil(this.Al),this.Ol=Math.ceil(this.Ol),this.Dl=Math.ceil(this.Dl),this.kl=Math.ceil(this.kl)}Xl(t){this.Rl=t.Ua,this.Pl=t.Va,this.El=t.Wa,this.Fl=t.Va,this.Al=t.Wa,this.Ol=t.za,this.Dl=t.Ua,this.kl=t.za}Yl(t,s){0===s?this.Xl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,e){const i=t.Ua*s,n=t.Va*s,r=t.Wa*s,h=t.za*s,o=t.Ua*e,a=t.Va*e,l=t.Wa*e,u=t.za*e;this.Rl=o-n,this.Pl=a+i,this.El=l-n,this.Fl=a+r,this.Al=l-h,this.Ol=u+r,this.Dl=o-h,this.kl=u+i}Zl(t){t.set(Math.min(this.Rl,this.El,this.Al,this.Dl),Math.min(this.Pl,this.Fl,this.Ol,this.kl),Math.max(this.Rl,this.El,this.Al,this.Dl),Math.max(this.Pl,this.Fl,this.Ol,this.kl))}Tl(t,s){let e=this.El-this.Rl,i=this.Fl-this.Pl;const n=this.Al-this.Rl,r=this.Ol-this.Pl,h=t-this.Rl,o=s-this.Pl;let a=e*e+i*i,l=e*n+i*r,u=e*h+i*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(e=this.Dl-this.Rl,i=this.kl-this.Pl,a=e*e+i*i,l=e*n+i*r,u=e*h+i*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this.Rl+this.El+this.Al+this.Dl)/4}ol(){return(this.Pl+this.Fl+this.Ol+this.kl)/4}Ql(t,s,e,i){return!(!this.Tl(t,s)&&!this.Tl(e,i))||ca.Lr(t,s,e,i,this)}tu(t){let s=t.hl(),e=t.ol();if(this.Tl(s,e))return!0;if(s=this.hl(),e=this.ol(),t.Tl(s,e))return!0;const i=this.Rl,n=this.Pl,r=this.El,h=this.Fl,o=this.Al,a=this.Ol,l=this.Dl,u=this.kl;return ca.Lr(i,n,r,h,t)||ca.Lr(r,h,o,a,t)||ca.Lr(o,a,l,u,t)||ca.Lr(l,u,i,n,t)}su(){const t=this.Rl,s=this.Pl;this.Rl=this.El,this.Pl=this.Fl,this.El=this.Al,this.Fl=this.Ol,this.Al=this.Dl,this.Ol=this.kl,this.Dl=t,this.kl=s}eu(){this.iu(0,2),this.iu(1,3),this.iu(6,4),this.iu(7,5)}nu(){this.iu(0,6),this.iu(1,7),this.iu(2,4),this.iu(3,5)}ru(){this.iu(2,6),this.iu(3,7)}iu(t,s){const e=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,e)}hu(t){switch(t){case 0:return this.Rl;case 1:return this.Pl;case 2:return this.El;case 3:return this.Fl;case 4:return this.Al;case 5:return this.Ol;case 6:return this.Dl;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.Rl=s;break;case 1:this.Pl=s;break;case 2:this.El=s;break;case 3:this.Fl=s;break;case 4:this.Al=s;break;case 5:this.Ol=s;break;case 6:this.Dl=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}St(t,s){this.Rl/=t,this.Pl/=s,this.El/=t,this.Fl/=s,this.Al/=t,this.Ol/=s,this.Dl/=t,this.kl/=s}}}{const fa=self._s,da=(self.assert,[0,0,1,0,1,1,0,1]),pa=fa.jn(fa.Cl);fa.au=class extends fa.Wn{constructor(t,s=!0){super(),t||(t=da),this.lu=Float64Array.from(t),this.uu=new fa.Rect,this.cu=!0,this.fu=s}Hn(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(da)}m(t){this.mu(t.lu)}yu(){this.cu=!0}Su(){if(!this.cu)return;const t=this.lu;let s=t[0],e=t[1],i=s,n=e;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>i&&(i=h),o<e&&(e=o),o>n&&(n=o)}this.uu.set(s,e,i,n),this.cu=!1}Xl(t,s,e){let i=this.lu;8!==i.length&&(i=new Float64Array(8),this.lu=i),i[0]=t.Za()-s,i[1]=t.Qa()-e,i[2]=t.tl()-s,i[3]=t.Qa()-e,i[4]=t.tl()-s,i[5]=t.sl()-e,i[6]=t.Za()-s,i[7]=t.sl()-e,this.uu.m(t),0===s&&0===e||this.uu.offset(-s,-e),this.cu=!1}wu(t,s,e){pa.m(t),pa.offset(s,e),this.mu(pa.toArray()),this.cu=!0}transform(t,s,e){let i=0,n=1;0!==e&&(i=Math.sin(e),n=Math.cos(e)),this.vu(t,s,i,n)}vu(t,s,e,i){const n=this.lu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*i-a*e,n[h]=a*i+o*e}this.cu=!0}offset(t,s){const e=this.lu;for(let i=0,n=e.length;i<n;i+=2)e[i]+=t,e[i+1]+=s}Tl(t,s){const e=this.lu;if(t===e[0]&&s===e[1])return!0;this.Su();const i=this.uu,n=i.Za()-110,r=i.Qa()-101,h=i.tl()+131,o=i.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let i=0,S=e.length;i<S;i+=2){const w=(i+2)%S,v=e[i],x=e[i+1],b=e[w],M=e[w+1];fa.kr(n,r,t,s,a,u,l,c,v,x,b,M)&&++g,fa.kr(h,o,t,s,f,p,d,m,v,x,b,M)&&++y}return g%2==1||y%2==1}xu(t,s,e){const i=t.lu,n=this.lu;if(this.Tl(i[0]+s,i[1]+e))return!0;if(t.Tl(n[0]-s,n[1]-e))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=i.length;t<n;t+=2){const r=(t+2)%n,h=i[t]+s,m=i[t+1]+e,g=i[r]+s,y=i[r+1]+e;if(fa.kr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}Ql(t,s,e,i,n,r){if(this.Tl(e-t,i-s))return!0;if(this.Tl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;e<n?(h=e,a=n):(h=n,a=e),i<r?(o=i,l=r):(o=r,l=i);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(fa.kr(e,i,n,r,h,a,o,l,p,m,g,y))return!0}return!1}eu(t){const s=this.lu;for(let e=0,i=s.length;e<i;e+=2)s[e]=2*t-s[e];this.cu=!0}nu(t){const s=this.lu;for(let e=0,i=s.length;e<i;e+=2){const i=e+1;s[i]=2*t-s[i]}this.cu=!0}ru(){const t=this.lu;for(let s=0,e=t.length;s<e;s+=2){const e=s+1,i=t[s];t[s]=t[e],t[e]=i}this.cu=!0}bu(){const t=this.lu;let s=0;for(let e=0,i=t.length;e<i;e+=2)s+=t[e];return s/this.pu()}Mu(){const t=this.lu;let s=0;for(let e=0,i=t.length;e<i;e+=2)s+=t[e+1];return s/this.pu()}Tu(){return this.lu}Gu(){return this.pu()}_u(){return this.fu}}}{const ma=self._s;ma.Iu=class extends ma.Wn{constructor(t){if(super(),this.Cu=new Map,t)for(const[s,e,i]of t)this.Set(s,e,i)}Hn(){this.Ru(),this.Cu=null}Pu(){return 0===this.Cu.size}Ru(){const t=this.Cu;for(const s of t.values())s.clear();t.clear()}Set(t,s,e){const i=this.Cu;let n=i.get(t);n||(n=new Map,i.set(t,n)),n.set(s,e)}Hs(t,s){const e=this.Cu.get(t);return e?e.get(s):e}js(t,s){const e=this.Cu.get(t);return!!e&&e.has(s)}Eu(t,s){const e=this.Cu,i=e.get(t);if(!i)return!1;const n=i.delete(s);return n&&0===i.size&&e.delete(t),n}Fu(t){const s=this.Cu,e=s.get(t);e&&(e.clear(),s.delete(t));for(const[e,i]of s.entries())i.delete(t)&&0===i.size&&s.delete(e)}Au(){let t=0;for(const s of this.Cu.values())t+=s.size;return t}*values(){for(const t of this.Cu.values())yield*t.values()}*Ou(){for(const[t,s]of this.Cu.entries())for(const e of s.keys())yield[t,e]}*entries(){for(const[t,s]of this.Cu.entries())for(const[e,i]of s.entries())yield[t,e,i]}}}{const ga=self._s;ga.Du=class extends ga.Wn{constructor(){super(),this.ku=new Set,this.Lu=[],this.Nu=!1}Hn(){this.Ru()}Ru(){this.ku.clear(),ga.wh(this.Lu),this.Nu=!1}Bu(t){this.ku.has(t)||(this.ku.add(t),this.Nu||this.Lu.push(t))}js(t){return this.ku.has(t)}Eu(t){this.ku.delete(t)&&(this.Nu=!0)}Au(){return this.ku.size}Pu(){return 0===this.ku.size}Uu(){return this.Nu&&(this.Vu(),this.Nu=!1),this.Lu}Vu(){const t=this.Lu;ga.wh(t);for(const s of this.ku)t.push(s)}}}{const ya=self._s,Sa=new Map,wa=new Map,va=new Map,xa=new Map,ba=new Map,Ma=new Map,Ta=new Map,Ga=new Map,_a=new Map;_a.set("linear","noease"),_a.set("default","noease");const Ia=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Ca=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Ra=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Wu=class t{constructor(){}static zu(){return"default"}static ju(){return"noease"}static Hu(t){return Ra.get(t)}static Ju(s,...e){let i,n;this.$u(),s?(va.has(s)||va.set(s,new Map),i=va.get(s),n=[...i.keys()].filter(e=>!t.qu(e,s)||t.qu(e,s).transition.Xu())):(i=ba,n=[...i.keys()]);const r=n.sort();return[...wa.keys()].concat(r).filter(t=>!e.includes(t))}static Yu(){this.$u();const t=[...ba.keys()];return t.sort(),[...wa.keys()].concat(t)}static Ku(){this.$u();const t=[...ba.keys()];return t.sort(),t}static Zu(t){for(const s of Ia)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Ca)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.$u(),[...wa.keys()].includes(t)}static tc(s){const e=_a.get(s);return e?Sa.get(e):t.Qu(s)?Sa.get(s):Ta.has(s)?Ta.get(s):void 0}static sc(t){return this.$u(),Ga.get(t)}static ec(s,e){this.$u();const i=t.tc(s);if(i)return i;if(!e)throw new Error("missing ease function");return va.get(e).get(s)}static qu(t,s){this.$u();const e=xa.get(s);if(e)return e.get(t)}static nc(s,e){return this.$u(),!!t.tc(s)||!!va.get(e).get(s)}static rc(s){this.$u();return t.tc(s)||ba.get(s)}static hc(t){return this.$u(),Ma.get(t)}static oc(t){return this.$u(),this.Yu()[t]}static ac(t,s){return this.$u(),this.Ju(s).indexOf(t)}static lc(t){return this.ac(t)}static $u(){0===Sa.size&&(this.uc("default",()=>{}),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,e,i=!1){if("function"==typeof e)t.mc(s,e,"predefined");else{if(!ya.bi(e))throw new Error("unexpected arguments");if(self.yc){const n=ya.jn(self.yc,s,i);n.Sc(e),t.mc(s,(t,s,e,i)=>n.wc(t,s,e,i),"predefined"),Ga.set(s,n)}else{const n=ya.jn(ya.vc,[s,e.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.xc(i),t.mc(s,(t,s,e,i)=>n.wc(t,s,e,i),"predefined")}}}static cc(s,e){t.mc(s,e,"private")}static bc(s,e,i,n){this.$u(),t.mc(s,e,"custom",i,n)}static Mc(t,s){if(this.Qu(t))return;if([...Ta.keys()].includes(t))return;const e=va.get(s);e&&e.delete(t);const i=xa.get(s);i&&i.delete(t)}static mc(t,s,e,i,n){switch(e){case"predefined":Sa.set(t,s),wa.set(t,s);break;case"custom":i?(va.has(i)||va.set(i,new Map),xa.has(i)||xa.set(i,new Map),va.get(i).set(t,s),xa.get(i).set(t,n)):(ba.set(t,s),Ma.set(t,n));break;case"private":Sa.set(t,s),Ta.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Tc(t,s,e,i){return 0===i?s:e*t/i+s}static fc(t,s,e,i,n){return s+3*t*(e-s)+3*t**2*(s+i-2*e)+t**3*(n-s+3*e-3*i)}static dc(t,s,e,i,n,r,h,o,a,l){if(i===n&&r===h)return t;const u=La(t,s,i,r,o,l),c=Fa(e,n,h,a),f=Aa(e,n,h,a),d=Oa(e,n,h,a);return Da(u,c,f,d)}static Gc(t,s,e,i){const n=[],r=Fa(t,s,e,i),h=Aa(t,s,e,i),o=Oa(t,s,e,i);for(let t=0;t<Pa;++t){const s=Da(t*Ea,r,h,o);n.push(s)}return n}};const Pa=11,Ea=1/(Pa-1),Fa=(t,s,e,i)=>i-3*e+3*s-t,Aa=(t,s,e,i)=>3*e-6*s+3*t,Oa=(t,s,e,i)=>3*(s-t),Da=(t,s,e,i)=>((s*t+e)*t+i)*t,ka=(t,s,e,i)=>3*s*t*t+2*e*t+i,La=(t,s,e,i,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=Pa-1;for(r[Pa-1];o!=l&&a<=t;)o++,a=r[o],h+=Ea;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Ea;const c=Fa(s,e,i,n),f=Aa(s,e,i,n),d=Oa(s,e,i,n),p=ka(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Da(u,c,f,d)-t)/ka(u,c,f,d);return u}{let s,e,i=h,n=h+Ea,r=0;do{u=i+(n-i)/2;let h=Da(u,c,f,d)-t;h>0?n=u:i=u,s=Math.abs(h)>1e-7,e=++r<10}while(s&&e);return u}}}{let Na=function(t){Ba.ri(t)};0;const Ba=self._s;Ba._c=class{constructor(t){this.Ic=[],this.qn=t||"",this.Cc=0}Hn(){this.Ru(),this.Ic=null}Rc(){return this.qn}Ru(){Ba.xh(this.Ic),this.Cc=0}Pc(){return this.Cc}Ec(t=Math.random()*this.Pc()){let s=0;for(const[e,i]of this.Ic)if(s+=e,t<s)return i;return 0}Fc(){return!!this.Ic.length}Ac(t,s){Na(s),this.Cc+=t,this.Ic.push([t,s])}Oc(t,s){Na(s);const e=0===t;for(let i=0;i<this.Ic.length;i++){const n=this.Ic[i],r=e||n[0]===t,h=n[1]===s;if(r&&h){this.Ic.splice(i,1),this.Cc-=n[0];break}}}Dc(){return JSON.stringify(this.Ic)}static kc(t,s){const e=new Ba._c(s),i=JSON.parse(t);for(const t of i){const s=t[0],i=t[1];e.Ac(s,i)}return e}}}{const Ua=self._s;let Va=0;Ua.Lc=class{constructor(t,s){this.Nc=t,this.Bc=s,this.Uc=Va++,this.Nc.Vc("runtime","screen-reader-text",{type:"create",id:this.Uc,text:this.Bc})}Hn(){this.Nc.Vc("runtime","screen-reader-text",{type:"release",id:this.Uc}),this.Nc=null,this.Bc="",this.Uc=-1}Wc(t){this.Bc!==t&&(this.Bc=t,this.Nc.Vc("runtime","screen-reader-text",{type:"update",id:this.Uc,text:this.Bc}))}}}self._s.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.zc=!1,this.jc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.jc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.zc=!0}};{const Wa=self._s;self.assert;Wa.Event.Hc=class extends Wa.Wn{constructor(t){super(),this.Jc=t,this.$c=[],this.qc=new Set,this.Xc=[],this.Yc=new Set,this.Kc=0,this.Zc=[]}Hn(){this.Kc>0||(Wa.wh(this.$c),this.qc.clear(),Wa.wh(this.Xc),this.Yc.clear(),Wa.wh(this.Zc),Wa.Hn(this))}Qc(t,s){if(this.tf())this.Zc.push({sf:"add",ef:t,capture:s});else if(s){if(this.qc.has(t))return;this.$c.push(t),this.qc.add(t)}else{if(this.Yc.has(t))return;this.Xc.push(t),this.Yc.add(t)}}if(t,s){this.tf()?this.Zc.push({sf:"remove",ef:t,capture:s}):s?this.qc.has(t)&&(this.qc.delete(t),Wa._h(this.$c,t)):this.Yc.has(t)&&(this.Yc.delete(t),Wa._h(this.Xc,t))}nf(){return!this.$c.length&&!this.Xc.length}tf(){return this.Kc>0}rf(){const t=new Set,s=new Set;for(const e of this.Zc)if("add"===e.sf)this.Qc(e.ef,e.capture),e.capture?s.delete(e.ef):t.delete(e.ef);else{if("remove"!==e.sf)throw new Error("invalid op");e.capture?(this.qc.delete(e.ef),s.add(e.ef)):(this.Yc.delete(e.ef),t.add(e.ef))}Wa.Rh(this.Xc,t),Wa.Rh(this.$c,s),Wa.wh(this.Zc)}hf(t){this.af();let s=!1;for(let e=0,i=this.$c.length;e<i;++e)if(this.$c[e](t),t.zc){s=!0;break}if(!s)for(let s=0,e=this.Xc.length;s<e&&(this.Xc[s](t),!t.zc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,e=this.$c.length;s<e;++s)this.$c[s](t);for(let s=0,e=this.Xc.length;s<e;++s)this.Xc[s](t);return this.lf(),!0}af(){this.Kc++}lf(){this.Kc--,0===this.Kc&&this.Zc.length>0&&this.rf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let e=0,i=this.$c.length;e<i;++e){let i=this.$c[e];s.push(Wa.df(()=>i(t)))}for(let e=0,i=this.Xc.length;e<i;++e){let i=this.Xc[e];s.push(Wa.df(()=>i(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}pf(t){const s=[];this.af();for(let e=0,i=this.$c.length;e<i;++e){const i=this.$c[e](t);i instanceof Promise&&s.push(i)}for(let e=0,i=this.Xc.length;e<i;++e){const i=this.Xc[e](t);i instanceof Promise&&s.push(i)}return this.lf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,e=this.$c.length;s<e;++s){const e=this.$c[s](t);e instanceof Promise&&await e}for(let s=0,e=this.Xc.length;s<e;++s){const e=this.Xc[s](t);e instanceof Promise&&await e}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,e=this.$c.length;s<e;++s){const e=this.$c[s](t);Wa.xo(e)&&(yield*e)}for(let s=0,e=this.Xc.length;s<e;++s){const e=this.Xc[s](t);Wa.xo(e)&&(yield*e)}this.lf()}}}{const za=self._s;za.Event.Sf=class extends za.Wn{constructor(){super(),this.wf=new Map,this.vf=!1}Hn(){if(this.vf)throw new Error("already released");this.xf(),this.vf=!0,za.Hn(this)}Jn(){return this.vf}xf(){if(this.wf){for(let t of this.wf.values())t.Hn();this.wf.clear()}}bf(t,s){let e=this.wf.get(t);return e||(s?(e=za.jn(za.Event.Hc,t),this.wf.set(t,e),e):null)}Mf(t){return this.wf.has(t)}addEventListener(t,s,e){this.bf(t,!0).Qc(s,!!e)}removeEventListener(t,s,e){let i=this.bf(t,!1);i&&(i.if(s,!!e),i.nf()&&this.wf.delete(t))}dispatchEvent(t){const s=this.bf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}Tf(t){const s=this.bf(t.type,!1);return s?(t.jc=!0,s.ff(t)):Promise.resolve(!0)}async Gf(t){const s=this.bf(t.type,!1);if(!s)return!0;this.wf.delete(t.type),t.jc=!0;const e=await s.ff(t);return s.Hn(),e}async _f(t){const s=this.bf(t.type,!1);return!s||await s.mf(t)}If(t){const s=this.bf(t.type,!1);return!s||s.pf(t)}async Cf(t){const s=this.bf(t.type,!1);return!s||await s.gf(t)}Rf(t){const s=this.bf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.wf.values())s.cf(t)}}}{let ja=function(t){Ya=qa&&0===Ka?requestIdleCallback(Ha,{timeout:35}):setTimeout(Ha,Ka>0?1:t)},Ha=function(t){if(Ya=-1,!Xa.length)return;let s=performance.now(),e=s,i=0,n=0;do{Ja(Xa.shift()),e=performance.now(),++i,n=(e-s)/i*1.1}while(Xa.length&&(qa&&0===Ka&&void 0!==t?n<t.timeRemaining():e-s+n<12));if(-1===Ya&&Xa.length){let t=e-s;ja(Math.max(16-t,4))}},Ja=function(t){let s;try{s=t.ef()}catch(s){return void t.reject(s)}t.resolve(s)};0;const $a=self._s,qa="undefined"!=typeof requestIdleCallback;let Xa=[],Ya=-1,Ka=0,Za=$a.qs.js("disable-asyncify");Za&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),$a.df=function(t){let s=null;return $a.Ds&&(s=$a.qe()),new Promise((e,i)=>{Xa.push({ef:t,resolve:e,reject:i,stack:s}),Za?Ja(Xa.pop()):-1===Ya&&ja(16)})},$a.df.Pf=function(t){if(t)++Ka;else if(--Ka,Ka<0)throw new Error("already turned off high throughput mode")}}{let Qa=function(){el=-1},tl=function(){il=-1,nl=-1;let t=Date.now();for(let s of rl)if(s.Ef(t)){let t=s.Ff();(-1===nl||t<nl)&&(nl=t)}else rl.delete(s);if(-1!==nl){let s=Math.max(nl-t+100,1e3);il=self.setTimeout(tl,s)}};0;const sl=self._s;let el=-1;sl.Af=function(){return-1===el&&(el=Date.now(),self.setTimeout(Qa,16)),el};let il=-1,nl=-1,rl=new Set;sl.Of=class{constructor(t,s){this.Df=t,this.kf=1e3*s,this.Lf=0,this.Nf=!1}Bf(){let t=sl.Af();this.Lf=t+this.kf,this.Nf||(rl.add(this),this.Nf=!0),-1===il?(nl=this.Lf,il=self.setTimeout(tl,this.kf+100)):this.Lf<nl&&nl>t+1e3&&(self.clearTimeout(il),nl=this.Lf,il=self.setTimeout(tl,this.kf+100))}Ef(t){return!(t>=this.Lf&&(this.Df()?(this.Lf=t+this.kf,0):(this.Nf=!1,1)))}Ff(){return this.Lf}Uf(){this.Nf&&(rl.delete(this),this.Nf=!1,0===rl.size&&-1!==il&&(self.clearTimeout(il),il=-1,nl=-1))}Hn(){this.Uf(),this.Df=null}}}{const hl=self._s;hl.Vf=class t{constructor(t){this.Wf=!1,this.zf=t}jf(){this.Wf||(this.Wf=!0,this.zf&&(this.zf(),this.zf=null))}Hf(){return this.Wf}Hn(){this.jf()}static Hn(s){return new t(()=>s.Hn())}static Jf(t,s,e,i,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==i)i=!1;else if("boolean"!=typeof i&&"object"!=typeof i)throw new TypeError("invalid event listener options");if(n&&(e=e.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new hl.$f;for(const r of s)t.addEventListener(r,e,i),n.Bu(hl.jn(hl.Vf,()=>t.removeEventListener(r,e,i)));return n}return t.addEventListener(s,e,i),hl.jn(hl.Vf,()=>t.removeEventListener(s,e,i))}},hl.qf=class extends hl.Vf{Xf(t){this.zf=t}},hl.$f=class extends hl.Vf{constructor(...t){super(),this.Yf=new Set;for(let s of t)this.Bu(s)}Bu(...t){if(this.Wf)throw new Error("already disposed");for(let s of t)this.Yf.add(s)}Kf(t){if(this.Wf)throw new Error("already disposed");this.Yf.delete(t)}Zf(){if(this.Wf)throw new Error("already disposed");if(this.Yf){for(let t of this.Yf)t.jf();this.Yf.clear()}}Hf(){return this.Wf}jf(){if(this.Wf)throw new Error("already disposed");this.Wf=!0;for(let t of this.Yf)t.jf();this.Yf.clear(),this.Yf=null}Hn(){this.jf()}}}{const ol=self._s;ol.Qf=class extends ol.Wn{constructor(){super(),this.td=0,this.Pa=0,this.sd=0,this.ed=0}Bu(t){t=+t,this.Pa=t-this.td,this.sd=this.ed+this.Pa,this.td=this.sd-this.ed-this.Pa,this.ed=this.sd}nd(t){this.ed-=+t}Hs(){return this.ed}Bf(){this.td=0,this.Pa=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Pa=0,this.sd=0,this.ed=+t}rd(t){this.td=t.td,this.Pa=t.Pa,this.sd=t.sd,this.ed=t.ed}Hn(){}}}{const al=self._s,ll={},ul=!0;ll.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},ll.ld=function(t){this.size=0,this.ad=new ll.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},ll.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},ll.ld.prototype.clone=function(){var t=new ll.ld(this.compare);return t.fd(this),t},ll.ld.prototype.clear=function(){this.size=0,this.ad=new ll.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},ll.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ll.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ll.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new ll.hd(this);s.key=t;for(var e=this.ad,i=this.root;i!=this.ad;)e=i,i=this.compare(s.key,i.key)<0?i.left:i.right;s.parent=e,e==this.ad?this.root=s:this.compare(s.key,e.key)<0?e.left=s:e.right=s,s.left=this.ad,s.right=this.ad,s.color=ul,this.yd(s),this.size++}},ll.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==ul;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==ul?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ul,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=ul,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==ul?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ul,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=ul,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},ll.ld.prototype.Sd=function(t){var s,e;(e=(s=t.left==this.ad||t.right==this.ad?t:this.wd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=e:s==s.parent.left?s.parent.left=e:s.parent.right=e,s!=t&&(t.key=s.key),0==s.color&&this.vd(e),this.size--},ll.ld.prototype.vd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==ul&&(s.color=!1,t.parent.color=ul,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=ul,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=ul,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==ul&&(s.color=!1,t.parent.color=ul,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=ul,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=ul,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},ll.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var e=s.key;return this.Sd(s),e}return null},ll.ld.prototype.xd=function(t,s){this.remove(s)},ll.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},ll.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},ll.ld.prototype.wd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},ll.ld.prototype.bd=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},ll.ld.prototype.Md=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var e=s.parent;e!=this.ad&&s==e.right;)s=e,e=e.parent;return e!=this.ad?e.key:null}return null},ll.ld.prototype.Td=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var e=s.parent;e!=this.ad&&s==e.left;)s=e,e=e.parent;return e!=this.ad?e.key:null}return null},ll.ld.prototype.Gd=function(){return this.min(this.root).key},ll.ld.prototype._d=function(){return this.max(this.root).key},ll.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ll.ld.prototype.contains=function(t){return null!=this.gd(t).key},ll.ld.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},ll.ld.prototype.fd=function(t){if("array"==ll.Id(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==ll.Id(t.forEach))t.forEach(this.md,this);else if("function"==ll.Id(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)this.md(e[s])}else if("object"==ll.Id(t))for(var i in t)this.md(t[i])},ll.ld.prototype.Cd=function(t){if("array"==ll.Id(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ll.Id(t.forEach))t.forEach(this.xd,this);else if("function"==ll.Id(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)this.remove(e[s])}else if("object"==ll.Id(t))for(var i in t)this.remove(t[i])},ll.ld.prototype.Rd=function(t){if("array"==ll.Id(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ll.Id(t.forEach))return t.every(this.contains,this);if("function"==ll.Id(t.getValues)){var e=t.getValues();for(s=0;s<e.length;s++)if(!this.contains(e[s]))return!1;return!0}if("object"==ll.Id(t)){for(var i in t)if(!this.contains(t[i]))return!1;return!0}},ll.ld.prototype.range=function(t,s){var e=[];return this.Pd(function(t){e.push(t)},t,s),e},ll.ld.prototype.Ed=function(t,s){if(!this.Fd())for(var e=this.min(this.root);e!=this.ad;){if(t.call(s,e.key,this))return;e=this.wd(e)}},ll.ld.prototype.Ad=function(t,s,e){if(!this.Fd())for(var i=this.gd(s);i!=this.ad;){if(t.call(e,i.key,this))return;i=this.wd(i)}},ll.ld.prototype.traverseTo=function(t,s,e){if(!this.Fd())for(var i=this.min(this.root),n=this.gd(s);i!=n;){if(t.call(e,i.key,this))return;i=this.wd(i)}},ll.ld.prototype.Pd=function(t,s,e,i){if(!this.Fd())for(var n=this.gd(s),r=this.gd(e);n!=r;){if(t.call(i,n.key,this))return;n=this.wd(n)}},ll.ld.prototype.Od=function(t,s){if(!this.Fd())for(var e=this.max(this.root);e!=this.ad;){if(t.call(s,e.key,this))return;e=this.bd(e)}},ll.ld.prototype.forEach=function(t,s){if(!this.Fd())for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))t.call(s,e.key,e.key,this)},ll.ld.prototype.some=function(t,s){if(this.Fd())return!1;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))if(t.call(s,e.key,e.key,this))return!0;return!1},ll.ld.prototype.every=function(t,s){if(this.Fd())return!1;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))if(!t.call(s,e.key,e.key,this))return!1;return!0},ll.ld.prototype.map=function(t,s){var e=[];if(this.Fd())return e;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))e.push(t.call(s,i.key,i.key,this));return e},ll.ld.prototype.filter=function(t,s){var e=[];if(this.Fd())return e;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))t.call(s,i.key,i.key,this)&&e.push(i.key);return e},ll.ld.prototype.Dd=function(){return this.size},ll.ld.prototype.Fd=function(){return 0==this.size},ll.ld.prototype.isSubsetOf=function(t){var s=ll.Dd(t);if(this.Dd()>s)return!1;var e=0;if(this.Fd())return!0;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))ll.contains.call(t,t,i.key)&&e++;return e==this.Dd()},ll.ld.prototype.intersection=function(t){var s=new ll.ld(this.compare);if(this.Fd())return s;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))t.contains.call(t,e.key,e.key,this)&&s.md(e.key);return s},al.ld=class extends al.Wn{constructor(t){super(),this.kd=new ll.ld(t),this.Ld=!1,this.Nd=new Set,this.Bd=new Set}Bu(t){this.Ld?this.kd.contains(t)?this.Bd.delete(t):this.Nd.add(t):this.kd.md(t)}Kf(t){this.Ld?this.kd.contains(t)?this.Bd.add(t):this.Nd.delete(t):this.kd.remove(t)}js(t){return this.Ld?!!this.Nd.has(t)||!this.Bd.has(t)&&this.kd.contains(t):this.kd.contains(t)}Ru(){this.kd.clear(),this.Nd.clear(),this.Bd.clear()}toArray(){if(this.Ld)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Au(){return this.kd.Dd()+this.Nd.size-this.Bd.size}Pu(){return 0===this.Au()}Ud(){if(this.Pu())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}Vd(){if(this.Pu())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.Ud();return this.Kf(t),t}Wd(t){if(t=!!t,this.Ld!==t&&(this.Ld=t,!t)){for(const t of this.Bd)this.kd.remove(t);this.Bd.clear();for(const t of this.Nd)this.kd.md(t);this.Nd.clear()}}zd(t){this.kd.forEach(t)}*values(){if(this.Pu())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ad;s=t.wd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const cl=self._s;cl.jd=class{constructor(t=cl.hardwareConcurrency){this.Hd=t,this.Jd=[],this.$d=0}Bu(t,s){return new Promise((e,i)=>{const n={ef:t,resolve:e,reject:i,qd:s};s?.signal&&s.signal.aborted?i(new Error("abort")):(s?.signal&&(n.onabort=()=>{const t=this.Jd.indexOf(n);-1!==t&&(this.Jd.splice(t,1),i(new Error("abort")))},s.signal.addEventListener("abort",n.onabort)),this.Jd.push(n),this.Xd())})}Yd(t){for(let s=0,e=this.Jd.length;s<e;++s)if(this.Jd[s].ef===t)return s;return-1}Kd(t,s){const e=this.Yd(t);if(-1===e)throw new Error("cannot find promise to resolve");this.Jd[e].resolve(s),this.Jd.splice(e,1)}Zd(t,s){const e=this.Yd(t);if(-1===e)throw new Error("cannot find promise to reject");this.Jd[e].reject(s),this.Jd.splice(e,1)}async Xd(){if(!this.Jd.length)return;if(this.$d>=this.Hd)return;this.$d++;const t=this.Jd.shift();t.qd?.signal&&t.onabort&&t.qd.signal.removeEventListener("abort",t.onabort);try{const s=await t.ef();t.resolve(s)}catch(s){t.reject(s)}this.$d--,this.Xd()}}}{const fl=self._s;fl.Qd=class{constructor(t,s,e){this.Df=t,this.tp=s,this.sp=e||2*s,this.ep=-1,this.ip=-1/0,this.np=()=>this.rp(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==fl.cp&&fl.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ep)return;this.ap=t;let s=fl.Af(),e=s-this.ip,i=this.up();e>=i&&this.op?(this.ip=s,this.mp()):this.ep=self.setTimeout(this.np,Math.max(i-e,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Df(...t):this.Df(),this.hp=!1}Bf(){this.hp||(this.gp(),this.ap=null,this.ip=fl.Af())}rp(){this.ep=-1,this.ip=fl.Af(),this.mp()}gp(){-1!==this.ep&&(self.clearTimeout(this.ep),this.ep=-1)}Hn(){this.gp(),this.Df=null,this.ap=null,this.np=null}}}{const dl=self._s;dl.yp=class{constructor(){this.Sp=new Map,this.wp=!1,this.vp=null,this.xp=null,this.bp=null,this.Mp=null}Tp(t){this.wp=!!t}Gp(){return this.wp}_p(t){this.vp=t}Ip(t){if(!this.vp)throw new Error("no get base size callback set");return this.vp(t)}Cp(t){this.xp=t}Rp(t,s,e,i,n,r){if(!this.xp)throw new Error("no raster at size callback set");return this.xp(t,s,e,i,n,r)}Pp(t){this.bp=t}Ep(t){if(!this.bp)throw new Error("no release result callback set");this.bp(t)}Fp(t){this.Mp=t}Ap(){if(!this.Mp)throw new Error("no redraw callback set");this.Mp()}Op(t){let s=this.Sp.get(t);return s||(s=dl.jn(dl.Dp,this,t),this.Sp.set(t,s)),s.kp(),s}Lp(t){this.Sp.delete(t.Np())}Bp(){for(const t of this.Sp.values())t.Up(),t.Vp()}}}{const pl=self._s;pl.Dp=class{constructor(t,s){this.Wp=t,this.zp=s,this.jp=0,this.Hp=0,this.Jp=0,this.$p=this.Wp.Ip(s).then(t=>{this.Wp&&(this.Hp=t[0],this.Jp=t[1],this.Wp.Ap())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.qp=!0,this.Wp&&this.Wp.Ap()}),this.Xp=0,this.Yp=0,this.Kp=0,this.Zp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.qp=!1}Hn(){if(this.jp<=0)throw new Error("already released");this.jp--,0===this.jp&&this.im()}Up(){this.tm&&(this.Wp.Ep(this.tm),this.tm=null)}im(){this.Up(),this.Wp.Lp(this),this.Wp=null}Np(){return this.zp}kp(){this.jp++}nm(){return this.jp>0}rm(){return this.tm}Vp(){this.sm=!0}async hm(t,s,e){if(0===s||0===e||this.qp)return;if(this.Qp)return;let i=pl.vr(Math.ceil(s)),n=pl.vr(Math.ceil(e));const r=Math.max(i,n);if(r>4096){const t=4096/r;s*=t,e*=t,i=Math.min(Math.ceil(i*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<i&&e<n){const t=s/e;i/n>t?(s=n*t,e=n):(s=i,e=i/t)}if(this.Wp.Gp()&&(i=Math.ceil(s),n=Math.ceil(e)),i<=this.Xp&&n<=this.Yp&&!this.sm)return;this.Qp=!0,this.Xp=i,this.Yp=n;const h=await this.Wp.Rp(this.zp,t,this.Xp,this.Yp,s,e);this.Wp&&(this.Up(),this.tm=h,this.Kp=s,this.Zp=e,this.Qp=!1,this.sm=!1,this.Wp.Ap())}om(){return this.$p}am(){return this.Hp}lm(){return this.Jp}um(){return this.Kp}fm(){return this.Zp}dm(){return this.qp}}}{let ml=function(t){return xl.get(t)};0;const gl=self._s;gl.pm="\ufeff";const yl=new Set("0123456789");gl.gm=function(t){return yl.has(t)};const Sl=new Set(" \t\n\r\u2028\u2029");gl.ym=function(t){return Sl.has(t)},gl.Sm=function(t){return[...t].filter(t=>!gl.ym(t)).join("")},gl.wm=function(t){for(const s of t)if(!gl.ym(s))return!1;return!0},gl.vm=function(t){for(const s of t)if(!gl.ym(s))return!1;return!0},gl.xm=function(t){return 1===t.length&&t.charCodeAt(0)<32},gl.bm=function(t){return[...t].filter(t=>!gl.xm(t)).join("")};let wl=null;try{wl=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}gl.Mm=function(t){return!gl.ym(t)&&wl&&wl.test(t)};const vl=new Set("0123456789.+-e");gl.Tm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!yl.has(s))return!1;for(let s of t)if(!vl.has(s))return!1;return!0},gl.Gm=function(t){let s=t.length;for(;s>0;){let e=t.charAt(s-1);if(!gl.gm(e))break;--s}return t.substr(0,s)},gl._m=function(t){let s=gl.Gm(t),e=t.substr(s.length);return e=e?(parseInt(e,10)+1).toString():"2",s+e};const xl=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),bl=/[&<>"']/g;gl.Im=function(t){return t.replace(bl,ml)},gl.Cm=function(t){let s=gl.Rm(t,"\\","\\\\");return s=gl.Rm(s,'"','\\"'),s=gl.Rm(s,"\t","\\t"),s=gl.Rm(s,"\r",""),gl.Rm(s,"\n","\\n")},gl.Pm=function(t){let s=gl.Rm(t,"&","&amp;");return s=gl.Rm(s,"<","&lt;"),s=gl.Rm(s,">","&gt;"),gl.Rm(s,'"',"&quot;")};const Ml=/[-[\]{}()*+?.,\\^$|#\s]/g;gl.$e=function(t){return t.replace(Ml,"\\$&")},gl.Em=function(t,s){let e=0;for(const i of t)i===s&&++e;return e},gl.Fm=function(t,s){let e=0,i=0;for(;e<s;){if(e=t.indexOf("\n",e),-1===e)return i;i++,e++}return i},gl.Am=function(t,s,e=!1){if(!s)return[];e||(t=t.toLowerCase(),s=s.toLowerCase());const i=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+i;return h},gl.Rm=function(t,s,e){return t.replaceAll(s,()=>e)},gl.Om=function(t,s,e){return t.replace(new RegExp(gl.$e(s),"gi"),()=>e)},gl.Dm=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.Lm(),s instanceof gl.dn&&s.Nm(t))},gl.Bm=function(t,s){return t instanceof gl.fn||t instanceof gl.dn?t.equals(s):s instanceof gl.fn||s instanceof gl.dn?s.equals(t):t===s},gl.Um=function(t,...s){let e=t;for(let i=0,n=s.length;i<n;++i){const n=`{${i}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);e=e.replace(n,s[i].toString())}return e},gl.Vm=function(t,...s){let e=t,i=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,e=e.replace(h,s[r].toString())):-1===i&&(i=r)}if(i>=0&&n>=0&&i<n)throw new Error(`missing placeholder '${i}' in string substitution`);return e},gl.Wm=function(t,s){let e=t;for(let[t,i]of Object.entries(s))e=e.replaceAll(t,i.toString());return e},gl.zm=function(t,s){return t>s?1:t<s?-1:0},gl.jm=function(t,s){let e=t.toLowerCase(),i=s.toLowerCase();return e>i?1:e<i?-1:0};const Tl=new self.Intl.Segmenter;gl.Hm=function(t){if(1===t.length)return[t];const s=[];for(const e of Tl.segment(t))s.push(e.segment);return s},gl.Jm=function*(t){for(const s of Tl.segment(t))yield s.segment},gl.$m=function(t){let s=0;for(const e of Tl.segment(t))++s;return s};const Gl=1073741824,_l=1099511627776;gl.qm=function(t,s){let e="common."+(s?"dataRates":"dataSizes")+".";const i=self.Xm;if(t<1024)return i(e+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"kilobytes",s)}if(t<Gl){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"megabytes",s)}if(t<_l){let s=t/Gl;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"gigabytes",s)}{let s=t/_l;return s=s<10?Math.round(10*s)/10:Math.round(s),i(e+"terabytes",s)}};const Il={Ym:!1,Km:!0,Zm:!0,Qm:!0,tg:!0};gl.sg=function(t,s){s=Object.assign({},Il,s),gl.ig.eg("common.time");const e=[],i=self.lang,n=self.ng;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,e.push(n(".days",null,s)))}if(s.Zm){const s=Math.floor(t/3600);(s>0||e.length)&&(t-=3600*s,e.push(n(".hours",null,s)))}if(s.Qm){const i=Math.floor(t/60);(i>0||e.length||!s.tg)&&(t-=60*i,e.push(n(".minutes",null,i)))}if(s.tg){const s=Math.floor(t%60);e.push(n(".seconds",null,s))}const r=(s.Ym?i(".approx-prefix"):"")+e.join(i(".separator"));return gl.ig.rg(),r},gl.hg=function(t,s){let e=t<0?"-":"",i=(t=Math.abs(t)).toString(),n=s-i.length;for(let t=0;t<n;++t)e+="0";return e+i},gl.og=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},gl.ag=function(t,s){let e=t.split(".").map(t=>t.trim()),i=s.split(".").map(t=>t.trim());gl.Mh(e,4,"0"),gl.Mh(i,4,"0"),e=e.map(t=>parseInt(t,10)),i=i.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=e[t]-i[t];if(0!==s)return s<0?-1:1}return 0},gl.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},gl.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let e=0;for(let i=0,n=t.length;i<n;++i)t.charAt(i)!==s.charAt(i)&&++e;return e},gl.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let e,i,n,r,h,o;for(t.length>s.length&&(e=t,t=s,s=e),o=Array(t.length+1),i=0;i<=t.length;i++)o[i]=i;for(i=1;i<=s.length;i++){for(r=i,n=1;n<=t.length;n++)h=s[i-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]},gl.fg=function(t){return(new TextEncoder).encode(t).length}}{let Cl=function(t,s,e){const i=Pl.get(e);if(!i)return"class"===e?s?"</span>":`<span class="bbclass${kl++}">`:t;if("string"==typeof i){if("a"===i&&0===Ol.length||"abbr"===i&&0===Dl.length)return t;if("a"!==i||s){if("abbr"!==i||s)return"<"+s+i+">";{const t=parseInt(e.substring(3),10)-1;if(t<0||t>=Dl.length)throw new Error("invalid bbcode tip substitution");const s=Dl[t];let i="";if("string"==typeof s?i=s:"function"==typeof s&&(i=s()),"string"!=typeof i)throw new TypeError("invalid bbcode tip");return`<abbr title="${Rl.Rm(i,'"',"&quot;")}">`}}{const t=parseInt(e.substring(1),10)-1;if(t<0||t>=Ol.length)throw new Error("invalid bbcode link substitution");const s=Ol[t];if("string"==typeof s)return`<a href="${Ol[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(i)){let t=i[0],e=i[1];return s?"</"+t+">":`<${t} class="${e}">`}};0;const Rl=self._s,Pl=(self.assert,new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]])),El=new Set(["icon"]),Fl=/\[(\/?)([a-zA-Z0-9]+)\]/g,Al=/\[(\/?)([^\[\n]*?)\]/g;let Ol=null,Dl=null,kl=0;const Ll=/\n/g;Rl.dn=class{constructor(t,s){if(this.dg=s&&s.pg?t:Rl.Im(t),this.mg="",this.gg=!1,this.yg=[],this.Sg=[],s){if(this.gg=!!s.wg,s.links){if(s.links.length>9)throw new Error("too many links");this.yg=s.links}if(s.vg){if(s.vg.length>9)throw new Error("too many tips");this.Sg=s.vg}}this.xg=this.dg.includes("["),this.bg=this.gg&&this.dg.includes("\n"),this.Mg=!this.xg&&!this.bg&&!this.dg.includes("&"),this.Tg=!1,this.Gg=[]}toString(){return this.dg}valueOf(){return this.dg}km(){return this.Mg}_g(){return this.xg?this.dg.replace(Fl,""):this.dg}Lm(){if(this.Mg)return this.dg;if(!this.mg&&this.dg){let t=this.dg;this.xg&&(kl=0,Ol=this.yg,Dl=this.Sg,t=t.replace(Fl,Cl),Ol=null,Dl=null),this.bg&&(t=t.replace(Ll,"<br>")),this.mg=t}return this.mg}Nm(t){if(this.yg.length)for(let s=0,e=this.yg.length;s<e;++s){const e=this.yg[s];if("function"!=typeof e)continue;const i=t.querySelector(".bblink"+s);if(!i)throw new Error("unable to attach BBString link handler");i.onclick=e}}equals(t){return t instanceof Rl.fn?this.Lm()===t.Lm():t instanceof Rl.dn?this.dg===t.dg:this.dg===t}Ig(){if(this.Tg)return this.Gg;const t=[],s=this.dg,e=[];Al.lastIndex=0;let i=0,n=null;for(;null!==(n=Al.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(i,r);if(i=r+h.length,l&&t.push({text:l,Cg:e.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=e.length-1;s>=0;--s)if(e[s].tag===t){e.splice(s,1);break}}else{let s=a,i=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),i=a.substring(n+1)):s=s.toLowerCase(),El.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:i,Cg:e.slice(0)})}else e.push({tag:s,Rg:i})}}i<s.length&&t.push({text:s.substring(i),Cg:e.slice(0)});for(const s of t)s.text&&(s.text=this.Pg(s.text));return this.Gg=t.map(t=>t.icon?Rl.jn(Rl.Eg,{icon:t.icon,Cg:t.Cg}):Rl.jn(Rl.Fg,{Ag:Rl.Hm(t.text),Cg:t.Cg})),this.Tg=!0,this.Gg}Pg(t){return t=Rl.Rm(t,"\\[","["),Rl.Rm(t,"\\\\","\\")}static Og(t){return Rl.jn(Rl.dn,t,{pg:!0})._g()}static Dg(t){return t.replace(Al,"")}}}{let Nl=function(t){return""!==t&&""!==t&&zl.ym(t)},Bl=function(t){return jl.has(t)},Ul=function(t){return zl.Mm(t)&&!Bl(t)},Vl=function(t){for(;t.length>0&&Nl(t.at(-1));)t.pop()},Wl=function(t){return"\n"===t||"\r\n"===t};0;const zl=self._s,jl=new Set("");class Hl{constructor(){this.kg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.Lg=0,this.Ng=!1}static Bg(t,s,e,i,n,r){const h=new Hl;return h.kg.push(t),h.width=s,h.height=e,h.fontBoundingBoxAscent=i,h.fontBoundingBoxDescent=n,h.Lg=r,h}rd(t){this.kg=t.kg.map(t=>t.Ug()),this.width=t.width,this.height=t.height,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent,this.Lg=t.Lg,this.Ng=t.Ng}Bf(){this.kg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.Lg=0,this.Ng=!1}Vg(t,s){s||(this.width=t.width),this.height=t.height||0,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent||0,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent||0,this.Lg=t.Lg||0,this.Ng=!0}Wg(t){const s=this.kg.length?this.kg.at(-1):null;let e=0;s&&s.zg()&&t[0].zg()&&t[0].jg()===s.jg()&&(s.Hg(t[0].Jg()),e=1);for(let s=t.length;e<s;++e){const s=t[e];this.kg.push(s.Ug())}this.Ng=!1}}zl.$g=class{constructor(){this.qg=[],this.Xg=null,this.Yg=new Hl,this.Kg=new Hl,this.Zg=!1}Qg(){return this.qg}ty(){return this.qg.length}sy(t){this.Xg=t}$g(t,s,e,i,n){if("string"==typeof t&&(t=[zl.jn(zl.Fg,{Ag:zl.Hm(t)})]),zl.wh(this.qg),!t.length||1===t.length&&t[0].zg()&&t[0].Pu()||e<2)return;if(1===t.length){const i=t[0];if(i.zg()&&i.ey()<=100&&!i.iy()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,Lg:a}=s(i);if(t+=n,i.ny(t),i.hy(r),i.oy(h||0),i.ly(o||0),i.uy(a||0),t<=e)return void this.py(Hl.Bg(i,t,r,h,o,a))}}let r,h=4;"word"===i?r=this.my(t):"cjk"===i?(r=this.gy(t),h=8):(r=this.yy(t),h=8),this.Sy(r,s,e,h,n)}my(t){const s=[];let e=[],i=!1;for(const n of t){const t=n.jg();if(n.wy())e.length>0&&s.push(e),s.push([n]),e=[];else for(const r of n.Jg())if(Wl(r))e.length>0&&s.push(e),s.push([zl.jn(zl.Fg,{Ag:["\n"],Cg:t})]),e=[];else if(0===e.length)e.push(zl.jn(zl.Fg,{Ag:[r],Cg:t})),i=Nl(r);else{const n=Nl(r);if(n===i){const s=e.at(-1);s.jg()===t?s.vy(r):e.push(zl.jn(zl.Fg,{Ag:[r],Cg:t}))}else s.push(e),e=[zl.jn(zl.Fg,{Ag:[r],Cg:t})],i=n}}return e.length>0&&s.push(e),s}gy(t){const s=[];let e=[],i=!1;for(const n of t){const t=n.jg();if(n.wy())e.length>0&&s.push(e),s.push([n]),e=[];else for(const r of n.Jg())if(Wl(r))e.length>0&&s.push(e),s.push([zl.jn(zl.Fg,{Ag:["\n"],Cg:t})]),e=[];else if(0===e.length)e.push(zl.jn(zl.Fg,{Ag:[r],Cg:t})),i=Bl(r);else if(i||Ul(r)){const s=e.at(-1);s.jg()===t?s.vy(r):e.push(zl.jn(zl.Fg,{Ag:[r],Cg:t})),i=Bl(r)}else s.push(e),e=[zl.jn(zl.Fg,{Ag:[r],Cg:t})],i=Bl(r)}return e.length>0&&s.push(e),s}yy(t){const s=[];for(const e of t)if(e.zg()){const t=e.Jg();zl.Fn(s,t.map(t=>[zl.jn(zl.Fg,{Ag:[t],Cg:e.jg()})]))}else s.push([e]);return s}xy(t,s){let e=0,i=0,n=0,r=0,h=0;for(const o of t){if(-1===o.by()){const t=s(o);o.hy(t.height),o.oy(t.fontBoundingBoxAscent||0),o.ly(t.fontBoundingBoxDescent||0),o.uy(t.Lg||0),o.zg()?o.ny(t.width):o.wy()&&o.My(this.Xg)}e+=o.by(),i=Math.max(i,o.Ty()),n=Math.max(n,o.Gy()),r=Math.max(r,o._y()),h=Math.max(h,o.Iy())}return{width:e,height:i,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,Lg:h}}Cy(){this.Yg.Bf(),this.Kg.Bf()}py(t){this.qg.push(new zl.$g.Ry(t)),this.Cy()}Py(t){return 1===t.length&&t[0].zg()&&1===t[0].ey()&&Wl(t[0].Jg()[0])}Ey(t){return t[0].zg()&&zl.vm(t[0].Jg())}Sy(t,s,e,i,n){let r=0;for(;r<t.length;)r=this.Fy(t,r,s,e,i);if(this.Kg.kg.length>0){if(!this.Kg.Ng){const t=this.xy(this.Kg.kg,s);this.Kg.Vg(t)}this.py(this.Kg)}this.Ay(s,n),this.Cy(),this.Zg=!1}Fy(t,s,e,i,n){const r=this.Yg,h=this.Kg,o=t[s];if(this.Py(o)){if(!h.Ng){const t=e(zl.jn(zl.Fg,{Ag:[" "],Cg:o[0].jg()}));h.Vg(t,!0)}return this.py(h),s+1}const a=this.Oy(t,s,n),l=this.xy(h.kg,e);return h.Vg(l),l.width>=i?this.Dy(t,s,e,i):(r.rd(h),this.Zg&&this.py(r),a+1)}Oy(t,s,e){const i=this.Kg;this.Zg=!1;let n=s,r=0;for(let s=t.length;n<s;++n){const s=t[n];if(this.Py(s)){this.Zg=!0;break}if(i.Wg(s),!this.Ey(s)&&(++r,r===e))break}return n}Dy(t,s,e,i){const n=this.Yg,r=this.Kg;r.rd(n);let h=s;for(let s=t.length;h<s;++h){const o=t[h];if(this.Py(o))return this.py(n),h+1;if(r.Wg(o),!this.Ey(o)||0===n.kg.length){const o=this.xy(r.kg,e);if(r.Vg(o),o.width>=i){let e;return n.kg.length>0?e=n:(e=r,++h,h<s&&this.Ey(t[h])&&++h),this.py(e),h}n.rd(r)}}return h}Ay(t,s){for(const e of this.qg){const i=e.ky();if(!i.length)continue;let n=i.at(-1);if(n.zg()){const r=n.Jg(),h=r.slice(0);if(Vl(h),0===h.length)e.Ly(-n.by()),i.pop();else if(h.length<r.length){n.Ny(h);const s=t(n).width,i=n.by()-s;n.ny(s),e.Ly(-i)}0!==s&&i.length>0&&(n=i.at(-1),n.Ly(s),e.Ly(s))}}}Ru(){zl.wh(this.qg)}By(){return this.qg.reduce((t,s)=>Math.max(t,s.by()),0)}Uy(){return this.qg.reduce((t,s)=>t+s.Ty(),0)}}}self._s.$g.Ry=class{constructor(t){this.Gg=t.kg,this.Vy=t.width,this.Wy=t.height,this.zy=t.fontBoundingBoxAscent,this.jy=t.fontBoundingBoxDescent,this.Hy=t.Lg,this.Jy=0,this.$y=0}kg(){return this.Gg.values()}*qy(){const t=this.Gg;for(let s=t.length-1;s>=0;--s)yield t[s]}ky(){return this.Gg}Ly(t){this.Vy+=t}by(){return this.Vy}Ty(){return this.Wy}Xy(){return this.zy}_y(){return this.jy}Iy(){return this.Hy}Yy(t){this.Jy=t}Ky(){return this.Jy}Zy(t){this.$y=t}Qy(){return this.$y}};self._s.tS=class{constructor(t){this.sS=t.Cg||[],this.Vy=t.width||-1,this.Wy=t.height||-1,this.zy=t.fontBoundingBoxAscent||-1,this.jy=t.fontBoundingBoxDescent||-1,this.Hy=t.Lg||-1,this.Jy=0,this.$y=0}zg(){return!1}wy(){return!1}jg(){return this.sS}eS(t){const s=this.sS;for(let e=s.length-1;e>=0;--e){const i=s[e];if(i.tag===t)return i}return null}iS(t){return!!this.eS(t)}nS(){const t=new Map;for(const s of this.sS)t.set(s.tag,s.Rg);return t}Ly(t){this.Vy+=t}ny(t){this.Vy=t}by(){return this.Vy}hy(t){this.Wy=t}Ty(){return this.Wy}oy(t){this.zy=t}Gy(){return this.zy}ly(t){this.jy=t}_y(){return this.jy}uy(t){this.Hy=t}Iy(){return this.Hy}Yy(t){this.Jy=t}Ky(){return this.Jy}Zy(t){this.$y=t}Qy(){return this.$y}};{const Jl=self._s;Jl.Fg=class extends Jl.tS{constructor(t){super(t),this.rS=t.Ag}zg(){return!0}Hg(t){Jl.Fn(this.rS,t),this.Vy=-1,this.Wy=-1,this.zy=-1,this.jy=-1,this.Hy=-1}vy(t){this.rS.push(t)}Ug(){return Jl.jn(Jl.Fg,{Ag:this.rS.slice(0),Cg:this.sS,width:this.Vy,height:this.Wy,fontBoundingBoxAscent:this.zy,fontBoundingBoxDescent:this.jy,Lg:this.Hy})}Jg(){return this.rS}Ny(t){this.rS=t}ey(){return this.rS.length}Pu(){return 0===this.rS.length}iy(){return this.rS.includes("\n")}}}{const $l=self._s;$l.Eg=class extends $l.tS{constructor(t){super(t),this.hS=t.icon}wy(){return!0}oS(){return this.hS}Ug(){return $l.jn($l.Eg,{icon:this.hS,Cg:this.sS,width:this.Vy,height:this.Wy,fontBoundingBoxAscent:this.zy,fontBoundingBoxDescent:this.jy,Lg:this.Hy})}aS(t){if(!t)return null;let s=Number(this.hS);return String(s)===this.hS?(s=Math.floor(s),t.lS(s)):t.uS(this.hS)}My(t){const s=this.aS(t);this.Vy=s?this.Wy*s.by()/s.Ty():0}cS(t){const s=this.aS(t);return s?s.cS():null}ey(){return 1}}}{const ql=self._s;ql.fS=class{constructor(t){this.dS=new Map,this.pS=t.mS,this.gS=t.yS}Hn(){for(const t of this.dS.values())t.Hn();this.dS.clear()}SS(t){let s=this.dS.get(t);if(s)return s;const e=this.pS(t);return s=ql.jn(ql.wS,this,{source:t,vS:e}),this.dS.set(t,s),s}xS(t){return this.dS.has(t)}bS(t){const s=this.dS.get(t);s&&s.Hn(),this.dS.delete(t)}async MS(t){return await this.gS(t)}}}{const Xl=self._s;Xl.wS=class{constructor(t,s){this.TS=t,this.GS=s.source,this._S=[],this.IS=new Map,this.CS=!1,this.RS=!1,this.PS=null;const e=s.vS.ES;for(let t=0,s=e.length;t<s;++t){const s=e[t],i=Xl.jn(Xl.FS,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this._S.push(i),s.tag&&this.IS.set(s.tag.toLowerCase(),i)}}Hn(){for(const t of this._S)t.Hn();Xl.wh(this._S),this.IS.clear(),this.TS=null,this.GS=null}AS(){return this.CS}OS(){return this.RS}DS(){return this.PS||(this.PS=this.kS()),this.PS}async kS(){if(this.CS)return;this.CS=!0,this.RS=!0;const t=await this.TS.MS(this.GS);if(!this.TS)return;const s=t.ES;for(let t=0,e=Math.min(s.length,this._S.length);t<e;++t){const e=s[t].LS;this._S[t].NS(e)}this.RS=!1}lS(t){return(t=Math.floor(t))<0||t>=this._S.length?null:this._S[t]}uS(t){return this.IS.get(t.toLowerCase())||null}}}self._s.FS=class{constructor(t,s){this.BS=t,this.GS=s.source||null,this.US=s.index,this.VS=s.tag,this.Vy=s.width,this.Wy=s.height,this.WS=null}Hn(){this.Vy=0,this.Wy=0,this.BS=null}zS(){return this.GS}by(){return this.Vy}Ty(){return this.Wy}NS(t){this.WS=t}cS(){return this.WS}};{let Yl=function(t,s,e,i){const n=hu;su.F(nu,e,s),su.F(ru,t,s),su.Gt(n,nu,ru),su.normalize(n,n),i.set(n[0],n[1],n[2],su.Tt(t,n))},Kl=function(t,s,e,i,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.jS,f=h.HS,d=h.JS,p=1-c,m=1-f,g=1-d;return o*t*c+o*i*p+a*s*f+a*n*m+l*e*d+l*r*g>=u||o*i*c+o*t*p+a*n*f+a*s*m+l*r*d+l*e*g>u},Zl=function(t,s,e,i){return i.x*t+i.y*s+i.z*e>=i.w};0;const Ql=self._s,tu=self.hs,su=tu.ys,eu=tu.Ss,iu=tu.fs,nu=su.create(),ru=su.create(),hu=su.create(),ou=eu.create(),au=iu.create(),lu=su.create(),uu=su.create(),cu=su.create(),fu=su.create(),du=su.create(),pu=su.create(),mu=su.create(),gu=su.create(),yu=eu.S(0,0,1,1);Ql.$S={qS(t,s,e,i,n,r,h){const o=i[0]*t+i[4]*s+i[8]*e+i[12],a=i[1]*t+i[5]*s+i[9]*e+i[13],l=i[2]*t+i[6]*s+i[10]*e+i[14],u=i[3]*t+i[7]*s+i[11]*e+i[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},XS(t,s,e,i,n,r,h){const o=au,a=ou;return iu.multiply(o,n,i),null!==iu.M(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*e-1,a[3]=1,eu.Pt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},YS(t,s,e,i,n,r,h){const o=nu,a=ru;if(!Ql.$S.XS(t,s,0,i,n,r,o))return!1;if(!Ql.$S.XS(t,s,1,i,n,r,a))return!1;const l=ru;su.F(l,a,o);const u=hu;su.set(u,0,0,1);const c=-e,f=su.Tt(u,l);let d=0;if(0===f){if(0!==su.Tt(u,o)+c)return!1}else if(d=-(su.Tt(o,u)+c)/f,d<0)return!1;return su.wt(h,o,l,d),!0}};class Su{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.jS=NaN,this.HS=NaN,this.JS=NaN}set(t,s,e,i){this.x=t,this.y=s,this.z=e,this.w=i,this.jS=t>0?1:0,this.HS=s>0?1:0,this.JS=e>0?1:0}}Ql.$S.KS=class{constructor(){this.ZS=new Su,this.QS=new Su,this.tw=new Su,this.sw=new Su,this.ew=new Su,this.iw=new Su}rw(t,s){const e=yu;Ql.$S.XS(0,1,0,t,s,e,lu),Ql.$S.XS(1,1,0,t,s,e,uu),Ql.$S.XS(0,0,0,t,s,e,cu),Ql.$S.XS(1,0,0,t,s,e,fu),Ql.$S.XS(0,1,1,t,s,e,du),Ql.$S.XS(1,1,1,t,s,e,pu),Ql.$S.XS(0,0,1,t,s,e,mu),Ql.$S.XS(1,0,1,t,s,e,gu),Yl(cu,lu,du,this.ZS),Yl(lu,uu,pu,this.QS),Yl(uu,fu,gu,this.tw),Yl(fu,cu,mu,this.sw),Yl(mu,du,pu,this.iw),Yl(fu,uu,lu,this.ew)}hw(t,s,e,i,n,r){return Kl(t,s,e,i,n,r,this.ZS)&&Kl(t,s,e,i,n,r,this.QS)&&Kl(t,s,e,i,n,r,this.tw)&&Kl(t,s,e,i,n,r,this.sw)&&Kl(t,s,e,i,n,r,this.ew)&&Kl(t,s,e,i,n,r,this.iw)}ow(t,s,e){return!Zl(t,s,e,this.ew)}}}{const wu=self._s,vu=self.hs,xu=vu.ys,bu=vu.Ss,Mu=vu.fs,Tu=Mu.create(),Gu=xu.S(0,0,0),_u=xu.S(0,0,0),Iu=xu.S(0,0,0),Cu=xu.S(0,1,0),Ru=(bu.S(0,0,0,0),new wu.Cl),Pu=new wu.Rect,Eu=new wu.Cl(0,0,1,0,1,1,0,1),Fu={aw:1,lw:1e4},Au=Mu.S(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);wu.$S.uw=class{constructor(t){t=Object.assign({},Fu,t),this.Vy=0,this.Wy=0,this.cw=wu.Zn(45),this.fw=Math.tan(this.cw/2),this.dw=Mu.create(),this.pw=Mu.create(),this.mw=!1,this.gw=t.aw,this.yw=t.lw,this.Sw=[],this.ww=new Map,this.xw=null,this.bw=null,this.Mw=null,this.Tw=null,this.Gw=null,this._w=null,this.Iw=null,this.Cw=null,this.Rw=null,this.Pw=null,this.Ew=null,this.Fw=null,this.Aw=new Map,this.Ow=null,this.Dw=[],this.kw=new Map,this.Lw=0,this.Nw=0,this.Bw=1,this.Uw=[this.Bw],this.Vw=1,this.Ww=[this.Vw],this.zw=.5,this.jw=[this.zw],this.Hw=0,this.Jw=!0,this.$w=!1}qw(){this.Lw=0,this.Nw=0,this.xw=null,this.bw=null,this.Mw=null,this.Tw=null,this.Gw=null,this._w=null,this.Iw=null,this.Cw=null,this.Rw=null,this.Pw=null,this.Ew=null,this.Fw=null,this.Xw()}Yw(){this.qw(),this.Ow=null}Kw(){for(const t of this.Sw)t.Hn();this.qw()}by(){return this.Vy}Ty(){return this.Wy}Zw(t){return this.Qw()?100:t/(2*this.tv())}sv(t){return this.Qw()?t/(2*this.tv())/this.Zw(t):1}ev(t){this.gw=t}nv(){return this.gw}rv(t){this.yw=t}hv(){return this.yw}ov(t){this.cw=t,this.fw=Math.tan(this.cw/2)}av(){return this.cw}tv(){return this.fw}lv(){this.mw=!1}uv(){this.mw=!0}Qw(){return!this.mw}cv(){return this.mw}fv(t,s,e=.5,i=.5){const n=this.nv(),r=this.hv(),h=this.av();if(.5===e&&.5===i)this.dv()?Mu.lt(t,h,s,n,r):Mu.perspective(t,h,s,n,r);else{const h=2*(e=1-e)-2,o=2*e,a=2*i-2,l=2*i,u=this.tv()*n,c=u*s;Mu.ht(t,h*c,o*c,a*u,l*u,n,r),this.dv()&&Mu.mul(t,Au,t)}}pv(t,s,e,i=1){const n=self.devicePixelRatio,r=2*this.Zw(e)*n*this.tv()/e,h=s*r/(2*n*i),o=e*r/(2*n*i),a=-h,l=h,u=-o,c=o;this.dv()?Mu.dt(t,a,l,u,c,this.nv(),this.hv()):Mu.ft(t,a,l,u,c,this.nv(),this.hv())}mv(t,s,e,i,n,r=1){let h=1;this.Qw()&&(h=200*this.tv()/n);const o=Iu;xu.set(o,h,-h,1);const a=Gu,l=_u;xu.multiply(a,s,o),xu.multiply(l,e,o),Mu.gt(t,a,l,i||Cu),o[2]=r,Mu.scale(t,t,o)}gv(t,s,e,i,n,r,h,o){return xu.set(Gu,t,s,e),xu.set(_u,i,n,r),this.mv(Tu,Gu,_u,Cu,h,o),Tu}yv(t){this.Sw.push(t),this.ww.set(t.Rc(),t)}Sv(t){const s=this.Sw.indexOf(t);-1!==s&&this.Sw.splice(s,1),this.ww.delete(t.Rc())}Xw(){wu.wh(this.Sw),this.ww.clear()}wv(t){return this.ww.get(t)||null}vv(){return this.xw}xv(){this.bv(this.xw)}Mv(){return this.bw}Tv(){this.bv(this.bw)}Gv(){this.bv(this.Mw)}_v(){this.bv(this.Tw)}Iv(){this.bv(this.Gw)}Cv(){this.bv(this._w)}Rv(){this.bv(this.Iw)}Pv(){this.bv(this.Cw)}Ev(){this.bv(this.Rw)}Fv(){this.bv(this.Pw)}Av(){this.bv(this.Ew)}Ov(){this.bv(this.Fw)}Dv(t){this.Ow=t}kv(){return this.Ow}Lv(t,s,e,i,n,r){const h=wu.$S.Bv.Nv(t,s,e,i,n,r);let o=this.Aw.get(h);return o||(o=wu.jn(wu.$S.Bv,this,t,s,e,i,n,r),this.Aw.set(h,o)),o.Uv(),o}Vv(t){t.Wv(),0===t.zv()&&(this.Ow===t&&(this.Ow=null),this.Aw.delete(t.jv()),t.Hn())}Hv(t){wu.wh(this.Dw),this.kw.clear();let s=0;for(const e of t){const t=e[0],i=e[1],n=e[2];this.Dw.push([i,n]),this.kw.set(t,{number:s,Jv:i,$v:n}),s++}}qv(t){return this.Dw[t]}Xv(t){return this.qv(t)[0]}Yv(t){return this.qv(t)[1]}Kv(t){const s=this.kw.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Zv(t){const s=this.kw.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Qv(t){this.Lw=t}tx(){return this.Lw}sx(t){this.Nw=t,this.Ow=null}ix(){return this.Nw}Ry(t,s,e,i){const n=wu.nr(t,s,e,i),r=Math.sin(n),h=Math.cos(n),o=.5*this.Bw,a=r*o,l=h*o,u=this.Vw;2===u?this.nx(t,s,0,e,i,0,a,l):1===u?this.hx(t,s,0,e,i,0,a,l):this.ox(t,s,0,e,i,0,a,l)}lx(t,s,e,i,n,r){const h=wu.nr(t,s,i,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.Bw,u=o*l,c=a*l,f=this.Vw;2===f?this.nx(t,s,e,i,n,r,u,c):1===f?this.hx(t,s,e,i,n,r,u,c):this.ox(t,s,e,i,n,r,u,c)}nx(t,s,e,i,n,r,h,o){const a=this.zw,l=t+a-o,u=s+a-h,c=i+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,S=u+o+p,w=c+h,v=f-o,x=c-h-d,b=f+o-p;this.ux(m,g,e,w,v,r,x,b,r,y,S,e,Eu)}hx(t,s,e,i,n,r,h,o){const a=this.zw,l=t+a-o,u=s+a-h,c=i+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,v=f+o;this.ux(d,p,e,y,S,r,w,v,r,m,g,e,Eu)}ox(t,s,e,i,n,r,h,o){const a=this.zw,l=t+a,u=s+a,c=i+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,v=f+o;this.ux(d,p,e,y,S,r,w,v,r,m,g,e,Eu)}mx(t,s,e,i,n,r){const h=wu.nr(t,s,e,i),o=Math.sin(h),a=Math.cos(h),l=.5*this.Bw,u=o*l,c=a*l,f=this.Vw;2===f?this.gx(t,s,e,i,u,c,n,r):1===f?this.yx(t,s,e,i,u,c,n,r):this.Sx(t,s,e,i,u,c,n,r)}gx(t,s,e,i,n,r,h,o){const a=this.zw,l=t+a-r,u=s+a-n,c=e+a+r,f=i+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,S=u+r+p,w=c+n,v=f-r,x=c-n-d,b=f+r-p;Ru.set(m,g,w,v,x,b,y,S),Pu.set(h,0,o,0),this.wx(Ru,Pu)}yx(t,s,e,i,n,r,h,o){const a=this.zw,l=t+a-r,u=s+a-n,c=e+a+r,f=i+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,S=f-r,w=c-n,v=f+r;Ru.set(d,p,y,S,w,v,m,g),Pu.set(h,0,o,0),this.wx(Ru,Pu)}Sx(t,s,e,i,n,r,h,o){const a=this.zw,l=t+a,u=s+a,c=e+a,f=i+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,S=f-r,w=c-n,v=f+r;Ru.set(d,p,y,S,w,v,m,g),Pu.set(h,0,o,0),this.wx(Ru,Pu)}vx(t,s,e,i){const n=.5*this.Bw,r=this.Vw;2===r?this.xx(t,s,e,i,n):1===r?this.bx(t,s,e,i,n):this.Mx(t,s,e,i,n)}xx(t,s,e,i,n){this.nx(t,s,0,e,s,0,0,n),this.nx(e,s,0,e,i,0,n,0),this.nx(e,i,0,t,i,0,0,-n),this.nx(t,i,0,t,s,0,-n,0)}bx(t,s,e,i,n){this.hx(t,s,0,e,s,0,0,n),this.hx(e,s,0,e,i,0,n,0),this.hx(e,i,0,t,i,0,0,-n),this.hx(t,i,0,t,s,0,-n,0)}Mx(t,s,e,i,n){this.ox(t,s,0,e,s,0,0,n),this.ox(e,s,0,e,i,0,n,0),this.ox(e,i,0,t,i,0,0,-n),this.ox(t,i,0,t,s,0,-n,0)}Tx(t){this.vx(t.Za(),t.Qa(),t.tl(),t.sl())}Gx(t){const s=wu.nr(t.Nr(),t.Br(),t.Ur(),t.Vr()),e=Math.sin(s),i=Math.cos(s),n=.5*this.Bw,r=e*n,h=i*n,o=this.Vw;2===o?this._x(t,r,h):1===o?this.Ix(t,r,h):this.Cx(t,r,h)}_x(t,s,e){this.nx(t.Nr(),t.Br(),0,t.Ur(),t.Vr(),0,s,e),this.nx(t.Ur(),t.Vr(),0,t.Wr(),t.zr(),0,e,-s),this.nx(t.Wr(),t.zr(),0,t.jr(),t.Hr(),0,-s,-e),this.nx(t.jr(),t.Hr(),0,t.Nr(),t.Br(),0,-e,s)}Ix(t,s,e){this.hx(t.Nr(),t.Br(),0,t.Ur(),t.Vr(),0,s,e),this.hx(t.Ur(),t.Vr(),0,t.Wr(),t.zr(),0,e,-s),this.hx(t.Wr(),t.zr(),0,t.jr(),t.Hr(),0,-s,-e),this.hx(t.jr(),t.Hr(),0,t.Nr(),t.Br(),0,-e,s)}Cx(t,s,e){this.ox(t.Nr(),t.Br(),0,t.Ur(),t.Vr(),0,s,e),this.ox(t.Ur(),t.Vr(),0,t.Wr(),t.zr(),0,e,-s),this.ox(t.Wr(),t.zr(),0,t.jr(),t.Hr(),0,-s,-e),this.ox(t.jr(),t.Hr(),0,t.Nr(),t.Br(),0,-e,s)}Rx(t){this.Bw=t,this.Uw[this.Uw.length-1]=t}Px(){return this.Bw}Ex(t){if(this.Uw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Uw.push(t),this.Bw=t}Fx(){if(this.Uw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Uw.pop(),this.Bw=this.Uw.at(-1)}Ax(){this.Vw=0,this.Ww[this.Ww.length-1]=0}Ox(){this.Vw=1,this.Ww[this.Ww.length-1]=0}Dx(){this.Vw=2,this.Ww[this.Ww.length-1]=0}kx(t){if("butt"===t)this.Lx();else if("square"===t)this.Nx();else{if("zag"!==t)throw new Error("invalid line cap");this.Bx()}}Lx(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(0),this.Vw=0}Nx(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(1),this.Vw=1}Bx(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(2),this.Vw=2}Ux(){if(this.Ww.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Ww.pop(),this.Vw=this.Ww.at(-1)}Vx(t){this.zw=t,this.jw[this.jw.length-1]=t}Wx(){return this.zw}zx(t){if(this.jw.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.jw.push(t),this.zw=t}jx(){if(this.jw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.jw.pop(),this.zw=this.jw.at(-1)}Hx(){this.Jx(0),this.$x(0)}qx(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const e=s-2,i=e-1,n=t[0],r=t[1];for(let s=0;s<e;s+=2){const e=2*s,h=t[e+2],o=t[e+3],a=t[e+4],l=t[e+5];if(s===i)this.Xx(n,r,h,o,a,l,a,l);else{const s=t[e+6],i=t[e+7];this.Xx(n,r,h,o,a,l,s,i)}}}Yx(){this.Kx(!0),this.Hw++}Zx(){return this.Hw}Qx(){this.Hw++}tb(t){this.Jw=!!t}sb(){return this.Jw}eb(t){this.$w=!!t}ib(){return this.$w}nb(){return!1}dv(){return!1}rb(){}hb(){}ob(){}ab(){return this.rb()+this.hb()+this.ob()}lb(){return wu.jn(wu.$S.ub,this)}}}self._s.$S.cb=class{constructor(t,s){this.qn=s.name,this.fb=t,this.pb=s.mb||0,this.gb=s.yb||0,this.Sb=!!s.wb,this.xb=!!s.bb,this.Mb=!!s.Tb,this.Gb=!!s._b,this.Ib=!!s.animated,this.Cb=!!s.Rb,this.Pb=!!s.Eb,this.Fb=!1,this.Ab=this.Sb||this.Cb||0!==this.pb||0!==this.gb}Hn(){this.fb=null}Ob(){return this.fb}Rc(){return this.qn}Db(){return 0!==this.pb||0!==this.gb}kb(){return this.pb}Lb(){return this.gb}Nb(){return this.Sb}Bb(){return this.xb}Ub(){return this.Mb}Vb(){return this.Gb}Wb(){return this.Ib}zb(){return this.Cb}jb(){return this.Pb}Hb(){return this.Fb}Jb(){return this.Ab}$b(){return!1}};{const Ou=self._s;Ou.$S.Bv=class{constructor(t,s,e,i,n,r,h){this.fb=t,this.jp=0,this.qb=null,this.Xb="",this.Yb=e,this.Kb=Ou.jn(Ou.Mo),this.Kb.set(i),this.Zb=n,this.Qb=r,this.tM=h,"string"==typeof s?this.Xb=s:(this.qb=s,this.Xb=this.qb.Rc())}Hn(){if(this.jp>0)throw new Error("releasing state group still in use");this.fb=null,this.qb=null,this.Xb=""}sM(){const t=this.fb;t.bv(this.qb),t.eM(this.Yb),t.iM(this.Kb),t.sx(this.Zb),t.Jx(this.Qb),t.$x(this.tM),t.Dv(this)}jv(){return Ou.$S.Bv.Nv(this.Xb,this.Yb,this.Kb,this.Zb,this.Qb,this.tM)}Uv(){++this.jp}Wv(){--this.jp}zv(){return this.jp}nM(){this.qb=null}rM(t){if(this.qb=t.wv(this.Xb),!this.qb)throw new Error("failed to restore shader program")}static Nv(t,s,e,i,n,r){return("string"==typeof t?t:t.Rc())+","+s+","+e.Lo()+","+e.No()+","+e.Bo()+","+e.Uo()+","+i+","+n+","+r}}}{let Du=function(t,s,e){const i=e.Nr(),n=e.Br(),r=e.Ur()-i,h=e.Vr()-n;return[i+r*t+(e.jr()-i)*s,n+h*t+(e.Hr()-n)*s]};0;const ku=globalThis._s;globalThis.assert;ku.$S.hM=class{constructor(t,s,e){this.oM=t,this.aM=s,this.lM=e,this.Ra=NaN,this.Pa=NaN,this.Zb=NaN,this.uM=NaN,this.cM=NaN,this.Ra=0,this.Pa=0,this.Zb=0,this.uM=0,this.cM=0}fM(t,s,e,i){this.Ra=t,this.Pa=s,this.uM=e,this.cM=i}dM(){return this.Ra}pM(t){this.Ra!==t&&(this.Ra=t,this.oM.mM())}gM(){return this.Pa}yM(t){this.Pa!==t&&(this.Pa=t,this.oM.mM())}SM(){return this.Zb}wM(t){this.Zb!==t&&(this.Zb=Math.max(t,0),this.oM.mM())}vM(){return this.uM}xM(t){this.uM=t}bM(){return this.cM}MM(t){this.cM=t}TM(t,s,e){[this.Ra,this.Pa]=Du(t.Ra,t.Pa,s),this.Zb=t.Zb,this.uM=ku._t(e.Za(),e.tl(),t.uM),this.cM=ku._t(e.Qa(),e.sl(),t.cM)}GM(t,s,e){[this.Ra,this.Pa]=Du(t.Ra,t.Pa,s),this.Zb=t.Zb,[this.uM,this.cM]=Du(t.uM,t.cM,e)}_M(){return{x:this.dM(),y:this.gM(),z:this.SM(),u:this.vM(),v:this.bM()}}IM(t){this.pM(t.x),this.yM(t.y),t.hasOwnProperty("z")&&this.wM(t.z),this.xM(t.u),this.MM(t.v)}CM(){return this.oM}RM(){return this.aM}PM(){return this.lM}},ku.$S.EM=class{constructor(t,s,e){if(t<2||s<2)throw new Error("invalid mesh size");this.FM=t,this.AM=s,this.OM=e||null,this.DM=[],this.kM=0,this.LM=0,this.NM=1,this.BM=1,this.UM=0,this.VM=!1,this.WM=[],this.zM=0,this.jM=!0;const i=t-1,n=s-1;for(let e=0;e<s;++e){const s=[];for(let r=0;r<t;++r){const t=ku.jn(ku.$S.hM,this,r,e),h=r/i,o=e/n;t.fM(h,o,h,o),s.push(t)}this.DM.push(s)}}Hn(){ku.wh(this.DM),ku.wh(this.WM)}HM(){return this.FM}JM(){return this.AM}$M(){return this.OM}qM(){return this.DM}mM(){this.VM=!0,this.jM=!0}XM(){if(!this.VM)return;let t=1/0,s=1/0,e=-1/0,i=-1/0,n=0;for(const r of this.DM)for(const h of r){const r=h.dM(),o=h.gM();t=Math.min(t,r),s=Math.min(s,o),e=Math.max(e,r),i=Math.max(i,o),n=Math.max(n,h.SM())}this.kM=t,this.LM=s,this.NM=e,this.BM=i,this.UM=n,this.VM=!1}YM(){return this.XM(),this.kM}KM(){return this.XM(),this.LM}ZM(){return this.XM(),this.NM}QM(){return this.XM(),this.BM}tT(){return this.XM(),this.UM}sT(){return this.tT()>0}eT(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.FM||s<0||s>=this.AM?null:this.DM[s][t]}iT(t,s,e){const i=e instanceof ku.Rect;if(t.HM()!==this.HM()||t.JM()!==this.JM())throw new Error("source mesh wrong size");const n=t.DM,r=this.DM;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];i?r.TM(n,s,e):r.GM(n,s,e)}}this.jM=!0}nT(t){if(!this.jM&&this.zM===t)return;const s=this.FM,e=this.AM,i=this.WM,n=Math.floor(65535/s)-1;if(n<=0)throw new Error("mesh too large");const r=Math.ceil((e-1)/n);r<i.length&&(i.length=r);let h=0;for(let o=0;o<r;++o){const r=Math.min(n,e-h-1),a=(r+1)*s,l=3*a,u=2*a,c=(s-1)*r*6;if(o===i.length)i.push({rT:new Float32Array(l),hT:new Float32Array(u),oT:new Uint16Array(c)});else{const t=i[o];t.rT.length!==l&&(t.rT=new Float32Array(l)),t.hT.length!==u&&(t.hT=new Float32Array(u)),t.oT.length!==c&&(t.oT=new Uint16Array(c))}const{rT:f,hT:d,oT:p}=i[o];this.aT(h,r,t,f,d,p),h+=n}this.zM=t,this.jM=!1}aT(t,s,e,i,n,r){const h=this.DM,o=this.FM;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(i[a++]=o.dM(),i[a++]=o.gM(),i[a++]=o.SM()+e,n[l++]=o.vM(),n[l++]=o.bM(),c<h&&d<f){const s=t+m,e=c+m,i=c+g,n=t+g;r[u++]=s,r[u++]=e,r[u++]=i,r[u++]=s,r[u++]=i,r[u++]=n}}}}lT(t,s){this.nT(s);for(const{rT:s,hT:e,oT:i}of this.WM)t.uT(s,e,i)}cT(t,s){s||(s=(t,s,e)=>[t,s,e]);const e=this.DM;let i=e[0];for(let n=1,r=e.length;n<r;++n){const h=e[n];let o=i[0],a=h[0];for(let e=1,l=h.length;e<l;++e){const u=i[e],c=h[e],[f,d,p]=s(o.dM(),o.gM(),o.SM()),[m,g,y]=s(u.dM(),u.gM(),u.SM()),[S,w,v]=s(c.dM(),c.gM(),c.SM()),[x,b,M]=s(a.dM(),a.gM(),a.SM());t.lx(f,d,p,m,g,y),t.lx(f,d,p,S,w,v),t.lx(f,d,p,x,b,M),e===l-1&&t.lx(m,g,y,S,w,v),n===r-1&&t.lx(x,b,M,S,w,v),o=u,a=c}i=h}}fT(t){const s=.001,e=.99999999,i=t.du(),n=[],r=this.HM()-1,h=this.JM()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=i[0],f=i[1],d=ku.Yn(Math.floor(c*r),0,l),p=ku.Yn(Math.floor(f*h),0,u),m=!0,g=0,y=0,S=0,w=-1;const v=()=>{c=ku.Yn(ku._t(c,g,S),0,1),f=ku.Yn(ku._t(f,y,S),0,1),n.push(c,f)};for(let t=0,x=i.length;t<x;t+=2){c=i[t],f=i[t+1],n.push(c,f),d=ku.Yn(Math.floor(c*r),0,l),p=ku.Yn(Math.floor(f*h),0,u);const b=(t+2)%x;for(g=i[b],y=i[b+1],w=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,i=p*a,r=(d+1)*o,h=(p+1)*a;if(m=ku.Xr(c,f,t,i,r,i,r,h),0!==w&&(S=ku.qr(c,f,g,y,t,i,r,h,-.001),S>=0&&S<=e))v(),m=!m,w=0;else if(p>0&&2!==w&&(S=ku.qr(c,f,g,y,t,i,r,i,s),S>=0&&S<=e))v(),p--,m=!1,w=4;else if(d<l&&3!==w&&(S=ku.qr(c,f,g,y,r,i,r,h,s),S>=0&&S<=e))v(),d++,m=!1,w=1;else if(d>0&&1!==w&&(S=ku.qr(c,f,g,y,t,i,t,h,s),S>=0&&S<=e))v(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&(S=ku.qr(c,f,g,y,t,h,r,h,s),S>=0&&S<=e)))break;v(),p++,m=!0,w=2}}}return ku.jn(ku.au,n)}dT(t,s){const e=this.pT(t);this.mT(e),s.mu(e)}pT(t){const s=[],e=t.du();for(let t=0,i=e.length;t<i;t+=2){const i=e[t],n=e[t+1],[r,h]=this.gT(i,n);s.push(r,h)}return s}gT(t,s){const e=this.HM()-1,i=this.JM()-1,n=1/e,r=1/i,h=ku.Yn(Math.floor(t*e),0,e-1),o=ku.Yn(Math.floor(s*i),0,i-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.eT(h,o),d=this.eT(h+1,o+1),p=ku.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.eT(h+(p?1:0),o+(p?0:1)),[S,w,v]=ku.Yr(t,s,a,l,m,g,u,c);return ku.Kr(S,w,v,f.dM(),f.gM(),f.SM(),y.dM(),y.gM(),y.SM(),d.dM(),d.gM(),d.SM())}mT(t){const s=[],e=1e-7;let i=t[0],n=t[1],r=i-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-i,d=c-n,p=Math.abs(f)<e&&Math.abs(r)<e&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<e&&Math.abs(h)<e&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(i,n),i=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&ku.Th(t,s)}_M(){return{cols:this.HM(),rows:this.JM(),points:this.DM.map(t=>t.map(t=>t._M()))}}IM(t){const s=this.HM(),e=this.JM();if(t.cols!==s||t.rows!==e)throw new Error("mesh data wrong size");const i=t.points;for(let t=0;t<e;++t){const e=i[t];for(let i=0;i<s;++i)this.eT(i,t).IM(e[i])}}}}{let Lu=function(t,s){let e,i,n,r;switch(t){case"rgba8":e=s.RGBA8,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":e=s.RGB8,i=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":e=s.RGBA4,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":e=s.RGB5_A1,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":e=s.RGB565,i=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{yT:e,ST:i,format:n,type:r}};0;const Nu=self._s,Bu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),Uu=new Set(["nearest","bilinear","trilinear"]),Vu=new Set(["default","low","high"]),Wu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),zu={wT:"clamp-to-edge",vT:"clamp-to-edge",xT:"trilinear",bT:0,MT:"rgba8",TT:!0,GT:"default",_T:!0,IT:!1,width:-1,height:-1},ju={_T:!0,flipY:!1},Hu=new Set;Nu.$S.CT=class{constructor(t){this.fb=t,this.RT=null,this.Vy=0,this.Wy=0,this.PT=!0,this.ET="clamp-to-edge",this.FT="clamp-to-edge",this.AT="trilinear",this.OT=0,this.DT="rgba8",this.kT=!1,this.LT="default",this.jp=0}NT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},zu,s),this.RT)throw new Error("already created texture");if(this.ET=s.wT,this.FT=s.vT,this.AT=s.xT,this.OT=s.bT,this.DT=s.MT,this.kT=!!s.TT&&this.fb.sb(),this.LT=s.GT,!Wu.has(this.ET)||!Wu.has(this.FT))throw new Error("invalid wrap mode");if(!Uu.has(this.AT))throw new Error("invalid sampling");if(!Bu.has(this.DT))throw new Error("invalid pixel format");if(!Vu.has(this.LT))throw new Error("invalid mipmap quality");if(this.PT=!0,t instanceof ArrayBuffer||null===t||s.IT){if(this.Vy=s.width,this.Wy=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Vy*this.Wy*4)throw new Error("ArrayBuffer wrong size")}else this.Vy=t.width,this.Wy=t.height;if(this.Vy<=0||this.Wy<=0)throw new Error("invalid texture data size");if(s.IT){const s=Nu.uo(this.Vy,this.Wy);s.getContext("2d").drawImage(t,0,0,this.Vy,this.Wy),t=s}const e=Nu.wr(this.Vy)&&Nu.wr(this.Wy),i=this.fb.BT();if(this.Vy>i||this.Wy>i)throw new Error("texture data exceeds maximum texture size");const n=this.fb.UT(),r=this.fb.VT();this.RT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.RT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s._T),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=Lu(this.DT,n);if(this.fb.WT()||e||!this.zT())if(r>=2){let s;s=this.kT?Math.floor(Math.log2(Math.max(this.Vy,this.Wy))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.yT,this.Vy,this.Wy),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Vy,this.Wy,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.ST,this.Vy,this.Wy,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.ST,this.Vy,this.Wy,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.ST,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Vy,this.Wy)),t instanceof ImageData){const s=Nu.uo(this.Vy,this.Wy);s.getContext("2d").putImageData(t,0,0),t=s}const s=Nu.uo(Nu.vr(this.Vy),Nu.vr(this.Wy)),e=s.getContext("2d");e.imageSmoothingEnabled="nearest"!==this.AT,e.drawImage(t,0,0,this.Vy,this.Wy,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.ST,h.format,h.type,s)}null!==t&&this.jT(n),n.bindTexture(n.TEXTURE_2D,null),this.fb.HT(),this.jp=1,Hu.add(this)}JT(t,s,e){if(e=Object.assign({},zu,e),this.RT)throw new Error("already created texture");if(this.ET=e.wT,this.FT=e.vT,this.AT=e.xT,this.DT=e.MT,this.kT=!!e.TT&&this.fb.sb(),this.LT=e.GT,!Wu.has(this.ET)||!Wu.has(this.FT))throw new Error("invalid wrap mode");if(!Uu.has(this.AT))throw new Error("invalid sampling");if(!Bu.has(this.DT))throw new Error("invalid pixel format");if(!Vu.has(this.LT))throw new Error("invalid mipmap quality");this.PT=!1,this.Vy=Math.floor(t),this.Wy=Math.floor(s);const i=Nu.wr(this.Vy)&&Nu.wr(this.Wy),n=this.fb.BT();if(this.Vy<=0||this.Wy<=0)throw new Error("invalid texture size");if(this.Vy>n||this.Wy>n)throw new Error("texture exceeds maximum texture size");if(!this.fb.WT()&&this.zT()&&!i)throw new Error("non-power-of-two tiled textures not supported");const r=this.fb.UT(),h=this.fb.VT();this.RT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.RT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e._T),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=Lu(this.DT,r),a=h>=2?o.yT:o.ST;r.texImage2D(r.TEXTURE_2D,0,a,this.Vy,this.Wy,0,o.format,o.type,null),this.jT(r),r.bindTexture(r.TEXTURE_2D,null),this.fb.HT(),this.jp=1,Hu.add(this)}$T(t){if("default"===this.LT)return this.PT?t.NICEST:t.FASTEST;if("low"===this.LT)return t.FASTEST;if("high"===this.LT)return t.NICEST;throw new Error("invalid mipmap quality")}zT(){return"clamp-to-edge"!==this.ET||"clamp-to-edge"!==this.FT}qT(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}jT(t){const s=Nu.wr(this.Vy)&&Nu.wr(this.Wy);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.qT(t,this.ET)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.qT(t,this.FT)),"nearest"===this.AT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.kT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.fb.WT())&&this.kT){t.hint(t.GENERATE_MIPMAP_HINT,this.$T(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.AT&&!this.fb.ib();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.kT=!1;const e=this.fb.XT();e&&this.OT>0&&"nearest"!==this.AT&&t.texParameterf(t.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.OT,this.fb.YT()))}KT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.RT||this.jp<=0)throw new Error("texture not created");if(this.PT)throw new Error("cannot update static texture");s=Object.assign({},ju,s);const e=t.width||t.videoWidth,i=t.height||t.videoHeight,n=this.fb.VT(),r=this.fb.UT();r.bindTexture(r.TEXTURE_2D,this.RT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s._T),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=Lu(this.DT,r),o=n>=2?h.yT:h.ST;try{if(this.Vy===e&&this.Wy===i){const s=Nu.wr(this.Vy)&&Nu.wr(this.Wy);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.fb.WT())&&this.kT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.$T(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Vy=e,this.Wy=i;const s=Nu.wr(this.Vy)&&Nu.wr(this.Wy);if(!this.fb.WT()&&this.zT()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.fb.WT())&&this.kT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.$T(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.fb.HT()}ZT(){if(this.jp>0)throw new Error("texture still has references");if(!this.RT)throw new Error("already deleted texture");Hu.delete(this),this.fb.UT().deleteTexture(this.RT),this.RT=null}QT(){return!!this.RT}tG(){return this.RT}Ob(){return this.fb}sG(){this.jp++}eG(){if(this.jp<=0)throw new Error("no more references");this.jp--}iG(){return this.jp}by(){return this.Vy}Ty(){return this.Wy}nG(){return this.PT}rG(){let t=this.Vy*this.Wy;switch(this.DT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.kT&&(t+=Math.floor(t/3)),t}static nM(){Hu.clear()}static hG(){return Hu.values()}}}{const Ju=self._s,$u=(self.assert,self.hs),qu=($u.ys,$u.fs),Xu=new Set(["nearest","bilinear","trilinear"]),Yu={xT:"trilinear",alpha:!0,depth:!1,oG:!0,aG:!0,lG:0},Ku=new Set;Ju.$S.uG=class{constructor(t){this.fb=t,this.cG=null,this.fG=null,this.RT=null,this.dG=null,this.Vy=0,this.Wy=0,this.pG=!0,this.AT="trilinear",this.mG=!0,this.gG=!1,this.yG=!0,this.SG=0,this.wG=qu.create(),this.vG=0,this.xG=0,this.bG=0}MG(t,s,e){e=Object.assign({},Yu,e);const i=this.fb.VT();if(this.RT||this.dG)throw new Error("already created render target");if(this.AT=e.xT,this.mG=!!e.alpha,this.gG=!!e.depth,this.yG=!!e.oG,this.pG=!!e.aG,this.SG=e.lG,!Xu.has(this.AT))throw new Error("invalid sampling");if(this.SG>0&&(i<2||this.yG))throw new Error("invalid use of multisampling");if(i<2&&(this.yG=!0),this.Vy=t,this.Wy=s,this.Vy<=0||this.Wy<=0)throw new Error("invalid render target size");this.TG();const n=this.fb.UT();if(this.cG=n.createFramebuffer(),this.gG&&(this.fG=n.createFramebuffer()),this.yG){this.RT=this.fb.GG(this.Vy,this.Wy,{xT:this.AT,MT:this.mG?"rgba8":"rgb8",TT:!1});const t=this.RT.tG();n.bindFramebuffer(n.FRAMEBUFFER,this.cG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.gG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.fG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.dG=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.dG);const t=this.mG?n.RGBA8:n.RGB8;if(this.SG>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.SG>t&&(this.SG=t)}else this.SG=0}0===this.SG?n.renderbufferStorage(n.RENDERBUFFER,t,this.Vy,this.Wy):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.SG,t,this.Vy,this.Wy),n.bindFramebuffer(n.FRAMEBUFFER,this.cG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.dG),this.gG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.fG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.dG)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.fb._G();this.gG&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.cG),this.fb.IG()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),Ku.add(this)}CG(t,s){if(this.Vy===t&&this.Wy===s)return;this.Vy=t,this.Wy=s,this.TG();const e=this.fb.UT();e.bindFramebuffer(e.FRAMEBUFFER,this.cG),this.RT?this.RT.KT(new ImageData(this.Vy,this.Wy)):(e.bindRenderbuffer(e.RENDERBUFFER,this.dG),e.renderbufferStorage(e.RENDERBUFFER,this.mG?e.RGBA8:e.RGB8,this.Vy,this.Wy),e.bindRenderbuffer(e.RENDERBUFFER,null));const i=this.fb._G();this.gG&&i&&(this.fb.IG()?e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0):e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i)),e.bindFramebuffer(e.FRAMEBUFFER,null)}ZT(){if(!this.RT&&!this.dG)throw new Error("already deleted render target");Ku.delete(this);const t=this.fb.UT();this.RT?(t.bindFramebuffer(t.FRAMEBUFFER,this.cG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.gG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.fG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.fb.PG(this.RT),this.RT=null):this.dG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.cG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.gG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.fG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.dG),this.dG=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.fb.VT()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.cG),this.gG&&t.deleteFramebuffer(this.fG);const s=this.fb.EG();s.FG=null,s.AG=null,this.cG=null}TG(){this.fb.fv(this.wG,this.Vy/this.Wy),this.vG=this.fb.av(),this.xG=this.fb.nv(),this.bG=this.fb.hv()}OG(){return this.cG}DG(){return this.fG}Ob(){return this.fb}kG(){return this.RT}LG(){return this.fb.av()===this.vG&&this.fb.nv()===this.xG&&this.fb.hv()===this.bG||this.TG(),this.wG}NG(){return"nearest"!==this.AT}BG(){return this.mG}UG(){return this.yG}VG(){return this.gG}by(){return this.Vy}Ty(){return this.Wy}WG(){return this.pG}zG(){return this.SG}jG(){const t={xT:this.AT,alpha:this.mG,oG:this.yG};return this.pG||(t.width=this.Vy,t.height=this.Wy),t}HG(t){return"nearest"!==(t=Object.assign({},Yu,t)).xT===this.NG()&&!!t.alpha===this.BG()&&!!t.depth===this.VG()&&!(this.fb.VT()>=2&&!!t.oG!==this.UG())&&("number"==typeof t.width||"number"==typeof t.height?!this.WG()&&this.by()===Math.floor(t.width)&&this.Ty()===Math.floor(t.height):this.WG())}JG(){return this.RT?this.RT.tG():null}rG(){return this.RT?this.RT.rG():this.Vy*this.Wy*(this.mG?4:3)}static async $G(t,s){const e=await t.qG(s,!0);return await Ju.do(e)}static nM(){Ku.clear()}static XG(){return Ku.values()}static YG(t,s){for(const e of Ku)e.WG()&&e.CG(t,s)}}}{const Zu=self._s,Qu=self.hs,tc=(Qu.ys,Qu.fs,new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]));Zu.$S.KG=class extends Zu.$S.cb{static async ZG(t,s){const e=t.UT(),i=s.src,n=s.QG,r=s.name,h=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(h,i),e.compileShader(h);const o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,n),e.compileShader(o);const a=e.createProgram();e.attachShader(a,h),e.attachShader(a,o),e.bindAttribLocation(a,0,"aPos"),e.bindAttribLocation(a,1,"aTex"),e.bindAttribLocation(a,2,"aColor"),e.bindAttribLocation(a,3,"aPoints"),e.linkProgram(a);const l=t.t_();if(l?await t.s_(()=>e.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await Zu.dh(5),!e.getShaderParameter(h,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(h);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!e.getShaderParameter(o,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(o);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!e.getProgramParameter(a,e.LINK_STATUS)){const t=e.getProgramInfoLog(a);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=Zu.bm(e.getProgramInfoLog(a)||"").trim();return u&&!Zu.wm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),e.deleteShader(h),e.deleteShader(o),a}static async e_(t,s){const e=await Zu.$S.KG.ZG(t,s);return new Zu.$S.KG(t,e,s)}constructor(t,s,e){super(t,e);const i=t.UT(),n=t.EG();t.Kx(),i.useProgram(s),this.i_=i,this.qb=s,this.n_="<default-device-transform>"===e.name;const r=i.getAttribLocation(s,"aPos"),h=i.getAttribLocation(s,"aTex"),o=i.getAttribLocation(s,"aColor");this.r_=i.getAttribLocation(s,"aPoints"),-1!==r&&(i.bindBuffer(i.ARRAY_BUFFER,t.h_),i.vertexAttribPointer(r,3,i.FLOAT,!1,0,0),i.enableVertexAttribArray(r)),-1!==h&&(i.bindBuffer(i.ARRAY_BUFFER,t.o_),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h)),-1!==o&&(i.bindBuffer(i.ARRAY_BUFFER,t.a_),i.vertexAttribPointer(o,4,t.l_()?i.HALF_FLOAT:i.FLOAT,!1,0,0),i.enableVertexAttribArray(o)),-1!==this.r_&&(i.bindBuffer(i.ARRAY_BUFFER,t.u_),i.vertexAttribPointer(this.r_,4,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.r_)),i.bindBuffer(i.ARRAY_BUFFER,null),this.c_=new Zu.$S.f_(this,"matP","mat4"),this.d_=new Zu.$S.f_(this,"matMV","mat4"),this.p_=new Zu.$S.f_(this,"color","vec4"),this.m_=new Zu.$S.f_(this,"samplerFront","sampler"),this.g_=new Zu.$S.f_(this,"pointTexStart","vec2"),this.y_=new Zu.$S.f_(this,"pointTexEnd","vec2"),this.S_=new Zu.$S.f_(this,"zElevation","float"),this.w_=new Zu.$S.f_(this,"tileSize","vec2"),this.v_=new Zu.$S.f_(this,"tileSpacing","vec2"),this.x_=new Zu.$S.f_(this,"color2_","vec4"),this.b_=new Zu.$S.f_(this,"outlineThickness","float"),this.M_=new Zu.$S.f_(this,"samplerBack","sampler"),this.T_=new Zu.$S.f_(this,"samplerDepth","sampler"),this.G_=new Zu.$S.f_(this,"destStart","vec2"),this.__=new Zu.$S.f_(this,"destEnd","vec2"),this.I_=new Zu.$S.f_(this,"srcStart","vec2"),this.C_=new Zu.$S.f_(this,"srcEnd","vec2"),this.R_=new Zu.$S.f_(this,"srcOriginStart","vec2"),this.P_=new Zu.$S.f_(this,"srcOriginEnd","vec2"),this.E_=new Zu.$S.f_(this,"pixelSize","vec2"),this.F_=new Zu.$S.f_(this,"seconds","float"),this.A_=new Zu.$S.f_(this,"devicePixelRatio","float"),this.O_=new Zu.$S.f_(this,"layerScale","float"),this.D_=new Zu.$S.f_(this,"layerAngle","float"),this.k_=new Zu.$S.f_(this,"layoutStart","vec2"),this.L_=new Zu.$S.f_(this,"layoutEnd","vec2"),this.N_=new Zu.$S.f_(this,"zNear","float"),this.B_=new Zu.$S.f_(this,"zFar","float"),this.U_=!!(this.E_.V_()||this.F_.V_()||this.M_.V_()||this.G_.V_()||this.__.V_()||this.I_.V_()||this.C_.V_()||this.R_.V_()||this.P_.V_()||this.A_.V_()||this.O_.V_()||this.D_.V_()||this.k_.V_()||this.L_.V_());const a=e.parameters||[];this.W_=[],this.Fb=this.E_.V_()||this.I_.V_()||this.C_.V_()||this.R_.V_()||this.P_.V_(),this.z_=!1,this.j_=!1,this.p_.H_(1,1,1,1),this.x_.H_(1,1,1,1),this.m_.J_(0),this.M_.J_(1),this.T_.J_(2),this.g_.q_(0,0),this.y_.q_(1,1),this.S_.X_(0),this.w_.q_(0,0),this.v_.q_(0,0),this.G_.q_(0,0),this.__.q_(1,1),this.I_.q_(0,0),this.C_.q_(0,0),this.R_.q_(0,0),this.P_.q_(0,0),this.E_.q_(0,0),this.A_.X_(1),this.N_.X_(t.nv()),this.B_.X_(t.hv()),this.O_.X_(1),this.D_.X_(0),this.F_.X_(0),this.k_.q_(0,0),this.L_.q_(0,0),this.b_.X_(1);for(const t of a){const s=t[0],e=t[2],i=new Zu.$S.f_(this,s,e);"color"===e?i.Y_(0,0,0):i.X_(0),this.W_.push(i)}this.n_?this.K_(n.Z_):(this.Q_(n.Z_,!0),this.tI(n.sI,!0));const l=n.eI;i.useProgram(l?l.qb:null)}Hn(){this.i_.deleteProgram(this.qb),this.qb=null,this.fb.Sv(this),this.i_=null,super.Hn()}iI(){return this.i_}nI(){return this.qb}rI(){return this.W_.length}hI(t){return t<0||t>=this.W_.length?null:this.W_[t].oI()}aI(t){for(let s=0,e=t.length;s<e;++s)if(!this.W_[s].lI(t[s]))return!1;return!0}uI(t){for(let s=0,e=t.length;s<e;++s)this.W_[s].cI(t[s])}fI(t,s,e,i,n,r,h,o,a,l){return!(this.M_.V_()||this.E_.V_()&&!this.E_.dI(n,r)||this.G_.V_()&&!this.G_.dI(t.Za(),t.Qa())||this.__.V_()&&!this.__.dI(t.tl(),t.sl())||this.A_.V_()&&!this.A_.pI(h)||this.O_.V_()&&!this.O_.pI(o)||this.D_.V_()&&!this.D_.pI(a)||this.I_.V_()&&!this.I_.dI(s.Za(),s.Qa())||this.C_.V_()&&!this.C_.dI(s.tl(),s.sl())||this.R_.V_()&&!this.R_.dI(e.Za(),e.Qa())||this.P_.V_()&&!this.P_.dI(e.tl(),e.sl())||this.k_.V_()&&!this.k_.dI(i.Za(),i.Qa())||this.L_.V_()&&!this.L_.dI(i.Qa(),i.sl())||this.F_.V_()&&!this.F_.pI(l))}mI(t,s,e,i,n,r,h,o,a,l){this.M_.V_()||(this.E_.V_()&&this.E_.gI(n,r),this.G_.V_()&&this.G_.gI(t.Za(),t.Qa()),this.__.V_()&&this.__.gI(t.tl(),t.sl()),this.A_.V_()&&this.A_.yI(h),this.O_.V_()&&this.O_.yI(o),this.D_.V_()&&this.D_.yI(a),this.I_.V_()&&this.I_.gI(s.Za(),s.Qa()),this.C_.V_()&&this.C_.gI(s.tl(),s.sl()),this.R_.V_()&&this.R_.gI(e.Za(),e.Qa()),this.P_.V_()&&this.P_.gI(e.tl(),e.sl()),this.k_.V_()&&this.k_.gI(i.Za(),i.Qa()),this.L_.V_()&&this.L_.gI(i.Qa(),i.sl()),this.F_.V_()&&this.F_.yI(l))}Q_(t,s){this.z_&&!s||this.n_||(this.c_.V_()&&this.c_.SI(t),this.z_=!0)}wI(){this.z_=!1}tI(t,s){this.j_&&!s||this.n_||(this.d_.V_()&&this.d_.SI(t),this.j_=!0)}vI(){this.j_=!1}K_(t){if(!this.n_)throw new Error("not device transform shader");this.c_.SI(t);const s=this.fb,e=s.by()/2,i=s.Ty()/2,n=s.gv(e,i,s.Zw(s.Ty()),e,i,0,s.Ty());this.d_.SI(n)}xI(t){this.p_.V_()&&this.p_.bI(t[0],t[1],t[2],t[3])}static MI(){return tc}static TI(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static GI(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static _I(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static II(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static CI(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static RI(t){return["#version 300 es",Zu.$S.KG.TI(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static EI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static FI(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static AI(t){return["#version 300 es",Zu.$S.KG.TI(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static OI(t,s,e,i){let n="";return t>=2?n="#version 300 es\n"+Zu.$S.KG.TI(i):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),e&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&e?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!e?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||e?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||e?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static DI(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static kI(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static LI(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static NI(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static BI(t){return["#version 300 es",Zu.$S.KG.TI(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static UI(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static VI(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static WI(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static zI(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static jI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static HI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static JI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static $I(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const sc=self._s,ec=self.hs.fs,ic=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);sc.$S.f_=class{constructor(t,s,e){if(!ic.has(e))throw new Error("invalid uniform type");this.OM=t,this.i_=this.OM.iI(),this.qn=s,this.Jc=e,this.qI="color"===this.Jc,this.XI=this.i_.getUniformLocation(this.OM.nI(),s),this.YI=!!this.XI;const i=ic.get(e);this.KI=new Float32Array(i),this.ZI=new Float32Array(i)}Hn(){this.OM=null,this.i_=null,this.XI=null}V_(){return this.YI}oI(){return this.Jc}QI(){return this.qI}X_(t){this.V_()&&(this.KI[0]=t,this.ZI.set(this.KI),this.i_.uniform1f(this.XI,t))}J_(t){this.V_()&&(this.KI[0]=t,this.ZI.set(this.KI),this.i_.uniform1i(this.XI,t))}q_(t,s){this.V_()&&(this.KI[0]=t,this.KI[1]=s,this.ZI.set(this.KI),this.i_.uniform2f(this.XI,t,s))}Y_(t,s,e){this.V_()&&(this.KI[0]=t,this.KI[1]=s,this.KI[2]=e,this.ZI.set(this.KI),this.i_.uniform3f(this.XI,t,s,e))}H_(t,s,e,i){this.V_()&&(this.KI[0]=t,this.KI[1]=s,this.KI[2]=e,this.KI[3]=i,this.ZI.set(this.KI),this.i_.uniform4f(this.XI,t,s,e,i))}tC(t){t=Math.fround(t);const s=this.KI;s[0]!==t&&(s[0]=t,this.i_.uniform1f(this.XI,t))}sC(t){const s=this.KI;s[0]!==t&&(s[0]=t,this.i_.uniform1i(this.XI,t))}eC(t,s){t=Math.fround(t),s=Math.fround(s);const e=this.KI;e[0]===t&&e[1]===s||(e[0]=t,e[1]=s,this.i_.uniform2f(this.XI,t,s))}iC(t,s,e){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e);const i=this.KI;i[0]===t&&i[1]===s&&i[2]===e||(i[0]=t,i[1]=s,i[2]=e,this.i_.uniform3f(this.XI,t,s,e))}bI(t,s,e,i){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e),i=Math.fround(i);const n=this.KI;n[0]===t&&n[1]===s&&n[2]===e&&n[3]===i||(n[0]=t,n[1]=s,n[2]=e,n[3]=i,this.i_.uniform4f(this.XI,t,s,e,i))}SI(t){const s=this.KI;ec.A(s,t)||(sc.yh(s,t,0),this.i_.uniformMatrix4fv(this.XI,!1,t))}lI(t){const s=this.ZI;return this.QI()?s[0]===Math.fround(t.Lo())&&s[1]===Math.fround(t.No())&&s[2]===Math.fround(t.Bo()):s[0]===Math.fround(t)}cI(t){const s=this.ZI;this.QI()?(s[0]=t.Lo(),s[1]=t.No(),s[2]=t.Bo()):s[0]=t}pI(t){return this.ZI[0]===Math.fround(t)}dI(t,s){const e=this.ZI;return e[0]===Math.fround(t)&&e[1]===Math.fround(s)}yI(t){this.ZI[0]=t}gI(t,s){const e=this.ZI;e[0]=t,e[1]=s}}}{const nc=self._s,rc=self.hs,hc=(rc.Ss,rc.fs);nc.$S.nC=class{constructor(t){this.rC=t,this.sI=hc.create(),this.Z_=hc.create(),this.FG=null,this.AG=null,this.hC=!1,this.eI=null,this.oC=new nc.Rect,this.clearColor=nc.jn(nc.Mo,0,0,0,0)}},nc.$S.aC=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.lC=t,this.i_=t.rC.UT(),this.uC=0,this.cC=0,this.fC=null,this.dC=new Float32Array(s,0,16),this.pC=new Float32Array(s,64,4),this.mC=new Float32Array(s,80,4),this.gC=[]}yC(t,s){this.Jc=1,this.uC=t,this.cC=s}SC(){const t=this.i_;t.drawElements(t.TRIANGLES,this.cC,t.UNSIGNED_SHORT,this.uC)}wC(t){this.Jc=2,this.fC=t}vC(){const t=this.i_,s=this.fC;t.bindTexture(t.TEXTURE_2D,s?s.tG():null)}xC(t){this.Jc=20,t.Wo(this.pC,0)}bC(){const t=this.pC,s=this.lC.eI;s.x_.V_()&&s.x_.bI(t[0],t[1],t[2],t[3])}MC(t,s){this.Jc=3,this.uC=t,this.cC=s}TC(){this.i_.blendFunc(this.uC,this.cC)}GC(t,s,e,i){this.Jc=4;const n=this.pC;n[0]=t,n[1]=s,n[2]=e,n[3]=i}_C(){const t=this.pC;this.i_.viewport(t[0],t[1],t[2],t[3])}IC(t){this.Jc=5,hc.m(this.dC,t)}CC(){const t=this.lC,s=t.rC.Sw,e=t.eI,i=this.dC;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===e?n.Q_(i,!0):n.wI()}hc.m(t.Z_,i)}RC(t){this.Jc=6,hc.m(this.dC,t)}PC(){const t=this.lC,s=t.rC.Sw,e=t.eI,i=this.dC;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===e?n.tI(i,!0):n.vI()}hc.m(t.sI,i)}EC(t){this.Jc=7,this.fC=t}FC(){const t=this.i_,s=this.fC,e=this.lC;s?(e.FG=s.OG(),e.AG=s.DG(),e.hC&&e.AG?t.bindFramebuffer(t.FRAMEBUFFER,e.AG):t.bindFramebuffer(t.FRAMEBUFFER,e.FG)):(e.FG=null,e.AG=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}AC(t){this.Jc=8,t.Wo(this.dC,0)}OC(t,s,e,i){this.Jc=8;const n=this.dC;n[0]=t,n[1]=s,n[2]=e,n[3]=i}DC(){const t=this.i_,s=this.dC,e=this.lC.clearColor,i=s[0],n=s[1],r=s[2],h=s[3];e.$o(i,n,r,h)||(t.clearColor(i,n,r,h),e.Co(i,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}kC(t){this.Jc=14,t.Wo(this.dC,0)}LC(){const t=this.dC;this.lC.oC.set(t[0],t[1],t[2],t[3])}NC(t,s,e){this.Jc=9,this.uC=t,this.cC=1,this.dC[0]=s,e.Wo(this.pC,0)}BC(){const t=this.i_,s=this.lC,e=s.rC.bw;t.useProgram(e.qb),e.Q_(s.Z_,!1),e.tI(s.sI,!1);const i=s.oC;e.g_.V_()&&e.g_.eC(i.Za(),i.Qa()),e.y_.V_()&&e.y_.eC(i.tl(),i.sl());const n=this.dC[0];if(e.S_.V_()&&e.S_.tC(n),e.p_.V_()){const t=this.pC;e.p_.bI(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.uC/4,this.cC),t.useProgram(s.eI.qb)}UC(t){this.Jc=10,this.fC=t}VC(){const t=this.i_,s=this.lC,e=this.fC;s.eI=e,t.useProgram(e.qb),e.Q_(s.Z_,!1),e.tI(s.sI,!1)}WC(){this.Jc=11}zC(){const t=this.lC.eI,s=this.i_,e=this.dC,i=this.pC,n=this.mC;if(t.M_.V_()){const t=this.lC.rC,e=this.fC;t.jC!==e&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,e?e.tG():null),t.jC=e,s.activeTexture(s.TEXTURE0))}t.E_.V_()&&t.E_.eC(e[0],e[1]),t.G_.V_()&&t.G_.eC(e[2],e[3]),t.__.V_()&&t.__.eC(e[4],e[5]),t.A_.V_()&&t.A_.tC(this.cC),t.O_.V_()&&t.O_.tC(e[6]),t.D_.V_()&&t.D_.tC(e[7]),t.I_.V_()&&t.I_.eC(e[12],e[13]),t.C_.V_()&&t.C_.eC(e[14],e[15]),t.R_.V_()&&t.R_.eC(n[0],n[1]),t.P_.V_()&&t.P_.eC(n[2],n[3]),t.k_.V_()&&t.k_.eC(i[0],i[1]),t.L_.V_()&&t.L_.eC(i[2],i[3]),t.F_.V_()&&t.F_.tC(this.uC)}HC(){this.Jc=12}JC(){const t=this.lC.eI.W_,s=this.gC;for(let e=0,i=t.length;e<i;++e){const i=t[e],n=s[e];i.QI()?i.iC(n.Lo(),n.No(),n.Bo()):i.tC(n)}}$C(t){this.Jc=13,this.fC=t}qC(){const t=this.i_,s=this.fC,e=this.lC.FG;s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,e)}XC(t,s,e){this.Jc=16;const i=this.dC,n=this.lC.rC;i[0]=t.by(),i[1]=t.Ty(),i[2]=s?s.by():n.by(),i[3]=s?s.Ty():n.Ty(),i[4]=t.NG()?1:0,i[5]="stretch"===e;const r=this.gC;nc.wh(r),r.push(t.OG()),r.push(s?s.OG():null)}YC(){const t=this.dC,s=this.gC,e=this.i_,i=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(e.bindFramebuffer(e.READ_FRAMEBUFFER,l),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,u),a)e.blitFramebuffer(0,0,i,n,0,0,r,h,e.COLOR_BUFFER_BIT,o?e.LINEAR:e.NEAREST);else{const t=Math.min(i,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);e.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,e.COLOR_BUFFER_BIT,e.NEAREST)}}KC(t){this.Jc=17,this.fC=t}ZC(){this.fC.QC(),this.fC=null}tR(t){this.Jc=18,this.fC=t}sR(){this.fC.eR(),this.fC=null}iR(t,s,e){this.Jc=19;const i=this.dC;i[0]=t,i[1]=s,i[2]=e}nR(){const t=this.lC.eI,s=this.dC;t.E_.V_()&&t.E_.eC(s[0],s[1]),t.b_.V_()&&t.b_.tC(s[2])}rR(t,s,e,i,n,r,h){this.Jc=15;const o=this.dC;t.Wo(o,0),o[4]=1/s,o[5]=1/e,o[6]=i/s,o[7]=n/e,o[8]=r/s,o[9]=h/e}hR(){const t=this.lC.eI,s=this.dC;t.I_.V_()&&t.I_.eC(s[0],s[1]),t.E_.V_()&&t.E_.eC(s[4],s[5]),t.w_.V_()&&t.w_.eC(s[6],s[7]),t.v_.V_()&&t.v_.eC(s[8],s[9])}oR(t,s,e,i,n,r,h){this.Jc=28;const o=this.dC;o[0]=1/t,o[1]=1/s,o[2]=e,o[3]=i,o[4]=n,o[5]=r,o[6]=h}aR(){const t=this.lC.eI,s=this.dC;t.E_.V_()&&t.E_.eC(s[0],s[1]),t.w_.V_()&&t.w_.eC(s[2],s[3]),t.b_.V_()&&t.b_.tC(s[4]),t.v_.V_()&&t.v_.eC(s[5],s[6])}lR(t){this.Jc=21,this.uC=t?1:0}uR(){const t=this.i_,s=0!==this.uC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}cR(t){this.Jc=22,this.uC=t?1:0}fR(){const t=this.i_;0===this.uC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}dR(t){this.Jc=23,this.uC=t?1:0}pR(){const t=this.i_,s=this.lC,e=s.rC,i=0!==this.uC;s.hC=i,t.activeTexture(t.TEXTURE2),i?(s.AG&&t.bindFramebuffer(t.FRAMEBUFFER,s.AG),t.bindTexture(t.TEXTURE_2D,e._G())):(t.bindTexture(t.TEXTURE_2D,null),s.AG&&t.bindFramebuffer(t.FRAMEBUFFER,s.FG)),t.activeTexture(t.TEXTURE0)}mR(){this.Jc=24}gR(){const t=this.i_;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}yR(){this.Jc=25}SR(){const t=this.i_;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}wR(){this.Jc=26}vR(){const t=this.i_;t.disable(t.STENCIL_TEST)}xR(t,s,e,i,n){this.Jc=27,this.uC=t?1:0;const r=this.dC;r[0]=s,r[1]=e,r[2]=i,r[3]=n}bR(){const t=this.i_,s=this.dC;1===this.uC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}MR(t){this.Jc=29,this.uC=t}TR(){const t=this.i_,s=this.uC;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}GR(t){this.Jc=30,this.uC=t}_R(){const t=this.i_;t.frontFace(0===this.uC?t.CW:t.CCW)}IR(){switch(this.Jc){case 1:return void this.SC();case 2:return void this.vC();case 3:return void this.TC();case 4:return void this._C();case 5:return void this.CC();case 6:return void this.PC();case 7:return void this.FC();case 8:return void this.DC();case 9:return void this.BC();case 10:return void this.VC();case 11:return void this.zC();case 12:return void this.JC();case 13:return void this.qC();case 14:return void this.LC();case 15:return void this.hR();case 16:return void this.YC();case 17:return void this.ZC();case 18:return void this.sR();case 19:return void this.nR();case 20:return void this.bC();case 21:return void this.uR();case 22:return void this.fR();case 23:return void this.pR();case 24:return void this.gR();case 25:return void this.SR();case 26:return void this.vR();case 27:return void this.bR();case 28:return void this.aR();case 29:return void this.TR();case 30:return void this._R()}}}}{let oc=function(t,s,e,i,n,r){s?t.strokeRect(e,i,n,r):t.fillRect(e,i,n,r)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const e=parseFloat(t);return isFinite(e)?t.endsWith("%")?s*e/100:e:0};0;const uc=self._s,cc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),fc={timeout:60},dc=new uc.Mo(0,0,0,1),pc=new Set(["left","center","right"]),mc=new Set(["top","center","bottom"]),gc=new Set(["word","cjk","character"]),yc=new Set(["ltr","rtl"]),Sc=new Set;uc.CR&&uc.CR.addEventListener("fontload",t=>{const s=t.font.Rc();for(const t of Sc)(t.RR()||uc.Ki(t.PR(),s))&&(t.ER(),t.FR())});let wc=!1,vc=!1;uc.$S.ub=class{constructor(t,s){s=Object.assign({},fc,s),this.fb=t,this.AR="Arial",this.OR=16,this.DR=1,this.kR=0,this.LR=!1,this.NR=!1,this.BR="black",this.UR=!1,this.Xg=null,this.VR=!0,this.WR=null,this.zR=new Set,this.jR="left",this.HR="top",this.Bc="",this.JR=null,this.$R=uc.jn(uc.$g),this.qR="word",this.XR="ltr",this.YR=!1,this.KR=!1,this.ZR=!1,this.QR=!1,this.tP=-1,this.sP=0,this.eP=0,this.iP=0,this.Vy=0,this.Wy=0,this.nP=1,this.rP=null,this.hP=null,this.oP=null,this.aP=null,this.lP=-1,this.uP=-1,this.cP="",this.fP="",this.dP="",this.pP=1,this.mP=1,this.gP=t=>this.yP(t),this.SP=new Map,this.wP=new uc.Of(()=>this.FR(!0),2),this.RT=null,this.vP=!0,this.xP=new uc.Rect,this.bP=1,this.MP=new uc.Of(()=>{this.TP(),this.GP(8,8),this._P()},s.timeout),this.IP=null,this.CP=!1,Sc.add(this)}Hn(){this.WR=null,this.zR.clear(),this.Xg=null,this.JR=null,this.rP=null,this.hP=null,this.oP=null,this.aP=null,this.gP=null,this.FR(),this.wP.Hn(),this.MP.Hn(),this.IP=null,this.TP(),this.$R.Ru(),this.$R=null,this.fb=null,this.CP=!0,Sc.delete(this)}_P(){this.ZR=!0}RP(){this._P(),this.KR=!0}ER(){this.RP(),this.YR=!0}PP(t){if(t=!!t,this.UR===t)return;this.UR=t;const s=this.UR?"alphabetic":"top";this.hP&&(this.hP.textBaseline=s),this.oP&&(this.oP.textBaseline=s),this.FR(),this.ER()}RR(){return this.UR}sy(t){this.Xg!==t&&(this.Xg=t,this.$R.sy(t),this.Xg&&this.Xg.OS()&&this.Xg.DS().then(()=>this._P()),this.ER())}EP(t){t=!!t,this.VR!==t&&(this.VR=t,this._P())}FP(t){t||(t="serif"),this.AR!==t&&(this.AR=t,this.FR(),this.ER())}PR(){return this.AR}AP(t){t<.1&&(t=.1),this.OR!==t&&(this.OR=t,this.FR(),this.ER())}OP(){return this.OR}DP(t){this.DR!==t&&(this.DR=t,this.FR(),this.ER())}kP(t){this.kR!==t&&(this.kR=t,this.RP())}LP(){return this.kR}NP(t){t=!!t,this.LR!==t&&(this.LR=t,this.FR(),this.ER())}BP(){return this.LR}UP(t){t=!!t,this.NR!==t&&(this.NR=t,this.FR(),this.ER())}VP(){return this.NR}WP(t){t=Math.floor(t),this.tP!==t&&(this.tP=t,this._P())}zP(){return this.tP}jP(t,s){let e=[];(this.LR||s.iS("b"))&&e.push("bold"),(this.NR||s.iS("i"))&&e.push("italic");const i=s.eS("size"),n=(i?parseFloat(i.Rg):this.OR)*this.DR;t?e.push(n+"pt"):e.push(n*this.HP()+"pt");let r=this.AR;const h=s.eS("font");return h&&h.Rg&&(r=h.Rg,this.WR&&!this.zR.has(r)&&(this.WR(r),this.zR.add(r))),r&&(cc.has(r)?e.push(r):e.push('"'+r+'"')),e.join(" ")}iM(t){t instanceof uc.Mo&&(t=t.ta()),this.BR!==t&&(this.BR=t,this._P())}JP(t,s,e){dc.Ro(t,s,e),this.iM(dc)}$P(t){if(!pc.has(t))throw new Error("invalid horizontal alignment");this.jR!==t&&(this.jR=t,this.RP())}qP(){return this.jR}XP(t){if(!mc.has(t))throw new Error("invalid vertical alignment");this.HR!==t&&(this.HR=t,this.RP())}YP(){return this.HR}KP(t){if(!gc.has(t))throw new Error("invalid word wrap mode");this.qR!==t&&(this.qR=t,this.FR(),this.ER())}ZP(){return this.qR}QP(t){if(!yc.has(t))throw new Error("invalid text direction");this.XR!==t&&(this.XR=t,this.hP&&(this.hP.direction=this.XR),this.oP&&(this.oP.direction=this.XR),this.FR(),this.ER())}tE(){return this.XR}Wc(t){this.Bc!==t&&(this.Bc=t,this.FR(),this.ER())}sE(){return this.Bc}HP(){return this.bP*this.nP*self.devicePixelRatio}eE(t){t=!!t,this.vP!==t&&(this.vP=t,this.QR=!0)}iE(){return this.vP}nE(t,s,e){if(void 0===e&&(e=1),t<=0||t<=0)return;if(this.eP===t&&this.iP===s&&this.nP===e)return;const i=this.eP;this.eP=t,this.iP=s,this.nP=e;const n=self.devicePixelRatio;this.Vy=this.eP*this.nP*n,this.Wy=this.iP*this.nP*n;const r=Math.max(this.Vy,this.Wy),h=Math.min(this.fb.BT(),4096);let o=1;r>h&&(o=h/r,this.Vy=Math.min(this.Vy*o,h),this.Wy=Math.min(this.Wy*o,h)),this.bP=o,this.eP!==i?this.ER():this.RP()}by(){return this.Vy}Ty(){return this.Wy}rE(){return this.nP}hE(){return this.oE(),this.$R.By()}aE(){return this.oE(),this.$R.Uy()+this.$R.ty()*(this.kR+4)-this.kR}lE(){this.oE();let t=0;for(const s of this.$R.Qg())for(const e of s.kg())t+=e.ey();return t}kG(){return this.MP.Bf(),this.uE(),this.RT}cE(t,s){this.oE();const e=this.HP(),i=this.$R.Qg();for(const n of i){const i=n._y()*e;if(s>=n.Qy()-n.Ty()*e+i&&s<n.Qy()+i)for(const s of n.kg())if(t>=s.Ky()&&t<s.Ky()+s.by()*e)return s}return null}*fE(t){this.oE();const s=this.$R.Qg();for(const e of s)for(const s of e.kg()){const e=s.eS("tag");e&&uc.Ki(e.Rg,t)&&(yield s)}}dE(t,s){for(const e of this.fE(t)){if(0===s)return e;--s}return null}pE(t){let s=0;for(const e of this.fE(t))++s;return s}uE(){(!this.RT||this.ZR||this.KR||this.YR||this.QR)&&(this.CP||this.Vy<=0||this.Wy<=0||this.mE())}mE(){this.CP||(this.oE(),this.GP(Math.max(uc.vr(Math.ceil(this.Vy)),128),Math.max(uc.vr(Math.ceil(this.Wy)),64)),this.gE(),this.yE(),this.MP.Bf())}GP(t,s){this.rP||(this.rP=uc.uo(16,16));let e=!1;this.lP===t&&this.uP===s||(this.lP=t,this.uP=s,this.rP.width=t,this.rP.height=s,e=!0),this.hP||(this.hP=this.rP.getContext("2d"),e=!0),e?(this.hP.textBaseline=this.UR?"alphabetic":"top",this.hP.direction=this.XR,this.hP.font=this.cP,this.hP.fillStyle=this.dP,this.hP.strokeStyle=this.dP,this.hP.globalAlpha=this.pP,this.hP.lineWidth=this.mP):this.hP.clearRect(0,0,t,s)}SE(){this.oP||(this.oP=uc.uo(16,16).getContext("2d"),this.aP=uc.uo(16,16).getContext("2d"),this.oP.textBaseline=this.UR?"alphabetic":"top",this.aP.textBaseline="top",this.oP.direction=this.XR,this.aP.direction=this.XR)}wE(t){this.fP!==t&&(this.fP=t,this.oP.font=t,this.aP.font=t)}vE(){if(!wc){wc=!0,this.SE();const t=this.oP.measureText("test");vc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return vc}oE(){this.xE(),this.bE()}xE(){this.YR&&(this.SE(),!this.UR||this.JR&&this.JR.toString()===this.Bc||(this.JR=new uc.dn(this.Bc,{pg:!0})),this.wP.Bf(),this.$R.$g(this.UR?this.JR.Ig():this.Bc,this.gP,this.eP,this.qR,0),this.YR=!1)}bE(){this.KR&&(this.ME(),this.KR=!1)}FR(t){this.SP.clear(),t||this.wP.Uf()}TE(t,s){const e=this.SP;if(e.set(t,s),e.size>1e3){let t=0;for(const s of e.keys())if(e.delete(s),t++,t>=10)break}}yP(t){const s=t.zg()?t.Jg().join(""):" ",e=this.jP(!0,t),i=e+"|"+s,n=this.SP;let r=n.get(i);if(r)return n.delete(i),n.set(i,r),r;this.wE(e);const h=this.oP.measureText(s);let o=0;if(this.UR&&this.vE()){const t=this.aP.measureText(s);o=h.fontBoundingBoxAscent-t.fontBoundingBoxAscent}const a=t.eS("size"),l=(a?parseFloat(a.Rg):this.OR)*this.DR;return r={width:h.width,height:ac(l),fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Lg:o},this.TE(i,r),r}GE(t){this.cP!==t&&(this.cP=t,this.hP.font=t)}_E(t){this.dP!==t&&(this.dP=t,this.hP.fillStyle=t,this.hP.strokeStyle=t)}IE(t){this.pP!==t&&(this.pP=t,this.hP.globalAlpha=t)}CE(t){this.mP!==t&&(this.mP=t,this.hP.lineWidth=t)}ME(){const t=this.HP(),s=(4+this.kR)*t;let e=0;const i=this.$R.Qg();if(0===i.length)return;for(const t of i){t.Yy(NaN),t.Zy(NaN);for(const s of t.kg())s.Yy(NaN),s.Zy(NaN)}const n=this.UR&&this.vE();let r=i[0].Ty()*t;if("center"===this.HR){const h=i.reduce((e,i)=>e+i.Ty()*t+s,0)-s;e=Math.max(this.Wy/2-h/2,0),n&&(r=i[0].Iy()*t)}else if("bottom"===this.HR){const r=i.reduce((e,i)=>e+i.Ty()*t+s,0)-this.kR*t,h=n?i.at(-1)._y()*t:0;e=this.Wy-r-h-2}for(let n=0,h=i.length;n<h;++n){const h=i[n],o=h.Ty()*t,a=e;if(this.UR){if(e+=0===n?r:o,n>0&&e>this.Wy-4*t)break}else if(n>0&&e>=this.Wy-o)break;a>=0&&this.RE(h,e,t),this.UR||(e+=o),e+=s}}RE(t,s,e){let i=0;"center"===this.jR?i=Math.floor((this.Vy-t.by()*e)/2):"right"===this.jR&&(i=this.Vy-t.by()*e),t.Yy(i),t.Zy(s);for(const n of"ltr"===this.XR?t.kg():t.qy())this.PE(n,i,s,e),i+=n.by()*e}PE(t,s,e,i){const n=t.eS("offsetx");s+=n?lc(n.Rg,t.Ty())*i:0;const r=t.eS("offsety");if(e+=r?lc(r.Rg,t.Ty())*i:0,t.wy()){const s=t.eS("iconoffsety");e+=s?lc(s.Rg,t.Ty())*i:.2*t.Ty()*i}t.Yy(s),t.Zy(e)}gE(){if(!this.ZR)return;this.hP.imageSmoothingEnabled=this.VR,this.hP.imageSmoothingQuality="high",this.sP=0;const t=this.HP(),s=this.$R.Qg();for(const e of s)this.EE(e,t);this.ZR=!1}EE(t,s){const e=t.Ky(),i=t.Qy();if(Number.isFinite(e)&&Number.isFinite(i))for(const e of"ltr"===this.XR?t.kg():t.qy())this.FE(e,s,t.Ty())}FE(t,s,e){const i=this.hP,n=t.Ky(),r=t.Qy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=e/16;let o=t.by()*s;const a=t.Ty()*s,l=t.Ty()/16,u=(4+this.kR)*s;let c=t.zg()?t.Jg():null;if(-1!==this.tP){if(this.sP>=this.tP)return;t.zg()&&this.sP+c.length>this.tP&&(c=c.slice(0,this.tP-this.sP),o=this.yP(t).width*s),this.sP+=t.ey()}const f=t.eS("background"),d=t.iS("u"),p=t.iS("s");if(t.zg()&&uc.vm(c)&&!f&&!d&&!p||t.iS("hide"))return;const m=t.eS("color"),g=t.eS("opacity");this.IE(g?parseFloat(g.Rg)/100:1),f&&(this._E(f.Rg),i.fillRect(n,r-a,o,a+u));const y=t.eS("linethickness"),S=y?parseFloat(y.Rg):1,w=t.iS("stroke");if(w&&this.CE(.5*l*S*this.HP()),t.zg()){const s=c.join("");if(this.GE(this.jP(!1,t)),!w){this.CE(.5*l*S*this.HP());const e=t.eS("outlineback");e&&(this._E(e.Rg),this.AE(!0,s,n,r,o))}if(this._E(m?m.Rg:this.BR),this.AE(w,s,n,r,o),!w){this.CE(.5*l*S*this.HP());const e=t.eS("outline");e&&(this._E(e.Rg),this.AE(!0,s,n,r,o))}}else if(t.wy()&&t.by()>0){const s=t.cS(this.Xg);s&&i.drawImage(s,n,r-a,o,a)}if(this._E(m?m.Rg:this.BR),d&&oc(i,w,n,r+s*h,o,s*h*S),p){const t=s*l,e=r-a/4+t/2;i.fillRect(n,e-t*S/2,o,t*S)}}AE(t,s,e,i,n){"rtl"===this.XR&&(e+=n),t?"Gecko"===uc.Ks.ie?this.hP.strokeText(s,e,i,n):this.hP.strokeText(s,e,i):"Gecko"===uc.Ks.ie?this.hP.fillText(s,e,i,n):this.hP.fillText(s,e,i)}yE(){this.fb.OE()||(this.RT&&!this.QR||(this.TP(),this.RT=this.fb.GG(this.rP.width,this.rP.height,{TT:this.vP,GT:"high"}),this.QR=!1),this.fb.DE(this.rP,this.RT),this.xP.set(0,0,this.Vy/this.RT.by(),this.Wy/this.RT.Ty()),this.IP&&this.IP())}kE(){return this.xP}TP(){this.RT&&(this.fb.OE()||this.fb.PG(this.RT),this.RT=null)}static nM(){for(const t of Sc)t.TP()}static LE(){return Sc.values()}}}{const xc=self._s;class bc{constructor(t){this.i_=t.UT(),this.NE=t.VT(),this.BE=t.UE(),this.VE=null,this.Nf=!1,this.WE=!1,this.zE=0,1===this.NE?this.VE=this.BE.createQueryEXT():this.VE=this.i_.createQuery()}Hn(){this.jE(),this.i_=null,this.BE=null,this.WE=!1}jE(){this.VE&&(1===this.NE?this.BE.deleteQueryEXT(this.VE):this.i_.deleteQuery(this.VE),this.VE=null)}QC(){if(this.Nf)throw new Error("query already active");1===this.NE?this.BE.beginQueryEXT(this.BE.TIME_ELAPSED_EXT,this.VE):this.i_.beginQuery(this.BE.TIME_ELAPSED_EXT,this.VE),this.Nf=!0}eR(){if(!this.Nf)throw new Error("query not active");1===this.NE?this.BE.endQueryEXT(this.BE.TIME_ELAPSED_EXT):this.i_.endQuery(this.BE.TIME_ELAPSED_EXT),this.Nf=!1}HE(){if(!this.VE||this.WE||this.Nf)return;let t=!1;t=1===this.NE?this.BE.getQueryObjectEXT(this.VE,this.BE.QUERY_RESULT_AVAILABLE_EXT):this.i_.getQueryParameter(this.VE,this.i_.QUERY_RESULT_AVAILABLE);const s=this.i_.getParameter(this.BE.GPU_DISJOINT_EXT);t&&!s&&(1===this.NE?this.zE=this.BE.getQueryObjectEXT(this.VE,this.BE.QUERY_RESULT_EXT):this.zE=this.i_.getQueryParameter(this.VE,this.i_.QUERY_RESULT),this.zE/=1e9,this.WE=!0),(t||s)&&this.jE()}JE(){return this.WE}$E(){if(!this.WE)throw new Error("no result available");return this.zE}}xc.$S.qE=class{constructor(t){this.fb=t,this.Hw=t.Zx(),this.Nf=!1,this.XE=null,this.YE=!1,this.KE=null,this.ZE=[]}Hn(){for(const t of this.ZE)t instanceof bc&&t.Hn();xc.wh(this.ZE),this.XE=null,this.KE=null,this.fb=null}QC(){if(this.Nf)throw new Error("query already active");const t=this.fb.QE();t.length>0?(this.YE=!0,this.XE=t.at(-1),this.XE.tF(),this.XE.ZE.push(this)):(this.YE=!1,this.XE=null),this.Nf=!0,t.push(this),this.sF()}eR(){if(!this.Nf)throw new Error("query not active");if(this.fb.QE().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.tF(),this.XE&&(this.XE.sF(),this.XE=null)}sF(){this.KE=xc.jn(bc,this.fb),this.ZE.push(this.KE),this.KE.QC()}tF(){this.KE.eR(),this.KE=null}HE(){for(const t of this.ZE)t.HE()}eF(){return this.YE}JE(){return this.ZE.every(t=>t.JE())}$E(){return this.ZE.reduce((t,s)=>t+s.$E(),0)}Zx(){return this.Hw}}}{const Mc=self._s;Mc.$S.iF=class{constructor(t,s=1e3){this.fb=t,this.nF=s,this.rF=[],this.fb.hF(this)}Hn(){this.Ru(),this.fb.oF(this),this.fb=null}Ru(){for(const t of this.rF)t.Hn();Mc.wh(this.rF)}aF(){const t=new Mc.$S.qE(this.fb);return this.rF.push(t),this.rF.length>this.nF&&this.rF.shift().Hn(),t}lF(t){for(const s of this.rF){if(s.Zx()>=t)return;if(s.eF())return;s.HE()}}uF(t,s){if(s<=t)return NaN;let e=0;for(const i of this.rF){if(i.Zx()>=s)break;if(!(i.Zx()<t)){if(!i.JE())return NaN;e+=i.$E()}}return e}cF(t){for(let s=0,e=this.rF.length;s<e;++s){const e=this.rF[s];if(!(e.Zx()<t))return void(s>0&&this.rF.splice(0,s));e.Hn()}}}}{let Tc=function(){Nc=-1;for(const t of Lc)t.fF()&&(t.resolve(),Lc.delete(t));Lc.size>0&&(Nc=self.requestAnimationFrame(Tc))};0;const Gc=self._s,_c=(self.assert,self.hs),Ic=(_c.ys,_c.Ss),Cc=_c.fs,Rc={powerPreference:"default",dF:!0,alpha:!1,depth:!1,pF:!1,mF:2,failIfMajorPerformanceCaveat:!1},Pc=new Set(["default","low-power","high-performance"]),Ec=new Gc.Cl(0,0,1,0,1,1,0,1),Fc=Cc.create(),Ac=Cc.create(),Oc=new Gc.Cl,Dc=new Gc.Rect;let kc=null;Gc.Ds&&(self.gF=function(){kc?kc.loseContext():console.warn("WEBGL_lose_context not supported")},self.yF=function(){kc?kc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Lc=new Set;let Nc=-1;Gc.$S.SF=class extends Gc.$S.uw{constructor(t,s){if(super(s),s=Object.assign({},Rc,s),!Pc.has(s.powerPreference))throw new Error("invalid power preference");const e={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let i=null,n=0;if(s.mF>=2&&(i=t.getContext("webgl2",e),n=2),i||(i=t.getContext("webgl",e),n=1),!i)throw new Error("renderer-unavailable (could not get WebGL context)");this.i_=i,this.wF=i.getContextAttributes(),this.vF=i.getParameter(i.VERSION),this.NE=n,this.xF=Ic.create(),this.bF=!1,this.MF=Cc.create(),this.TF=!!s.depth,this.GF=!(!s.depth||!s.pF),this._F=this.TF,this.IF=!1,this.CF=null,this.RF=!0,this.PF=0,this.EF=0,this.h_=null,this.o_=null,this.a_=null,this.FF=null,this.u_=null,this.AF=this.NE>=2&&void 0!==globalThis.Float16Array,this.OF=new Float32Array(196605),this.DF=new Uint16Array(393210),this.kF=new Float32Array(131070),this.LF=this.AF?new globalThis.Float16Array(262140):new Float32Array(262140),this.NF=new Float32Array(32e3),this.BF=0,this.UF=0,this.VF=0,this.WF=null,this.zF=null,this.jF=[],this.HF=0,this.JF=0,this.$F=null,this.qF=0,this.lC=Gc.jn(Gc.$S.nC,this),this.XF=Gc.jn(Gc.Mo,1,1,1,1),this.YF=null,this.jC=null,this.KF=0,this.ZF=0,this.QF=new Gc.Rect,this.tA=Gc.jn(Gc.Rect,0,0,-1,-1),this.sA=0,this.eA=0,this.iA=0,this.nA=-1,this.rA=0,this.hA=0,this.oA="(unavailable)",this.aA="(unavailable)",this.lA=[],this.uA=!1,this.cA=null,this.fA=null,this.dA=null,this.pA=null,this.mA=null,this.gA=null,this.yA=null,this.SA=0,this.wA=!!s.dF,this.BE=null,this.vA=new Set,this.xA=[]}nb(){return!0}async Yw(){super.Yw();const t=this.i_;this.XF.Co(1,1,1,1),this.YF=null,this.jC=null,this.BF=0,this.UF=0,this.VF=0,Gc.wh(this.jF),this.HF=0,this.JF=0,this.WF=null,this.$F=null,this.QF.set(0,0,1,1),this.qF=0;const s=this.lC;s.eI=null,s.FG=null,s.AG=null,s.clearColor.Co(0,0,0,0),s.oC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.KF=t.ONE,this.ZF=t.ONE_MINUS_SRC_ALPHA,this.bA(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.eA=0,t.frontFace(t.CW),this.iA=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.TF?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this._F=this.TF,this.IF=!1,this.u_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.u_),t.bufferData(t.ARRAY_BUFFER,this.NF.byteLength,t.DYNAMIC_DRAW),this.h_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.h_),t.bufferData(t.ARRAY_BUFFER,this.OF.byteLength,t.DYNAMIC_DRAW),this.o_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.o_),t.bufferData(t.ARRAY_BUFFER,this.kF.byteLength,t.DYNAMIC_DRAW),this.a_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.a_),t.bufferData(t.ARRAY_BUFFER,this.LF.byteLength,t.DYNAMIC_DRAW),this.FF=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.FF),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.DF.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.nA=t.getParameter(t.MAX_TEXTURE_SIZE);const e=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.rA=e[0],this.hA=e[1],this.hA>2048&&(this.hA=2048),this.lA=t.getSupportedExtensions();const i=t.getExtension("WEBGL_debug_renderer_info");if(i&&(this.oA=t.getParameter(i.UNMASKED_VENDOR_WEBGL),this.aA=t.getParameter(i.UNMASKED_RENDERER_WEBGL)),this.cA=t.getExtension("KHR_parallel_shader_compile"),this.NE>=2&&("Chromium"!==Gc.Ks.ie||Gc.Ks.ee>=135)&&(this.dA=t.getExtension("EXT_conservative_depth")),Gc.Ds&&(kc=t.getExtension("WEBGL_lose_context")),this.wA&&(1===this.VT()?this.BE=t.getExtension("EXT_disjoint_timer_query"):this.BE=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.fA=t.getExtension("EXT_texture_filter_anisotropic"),this.fA?this.SA=t.getParameter(this.fA.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.SA=0,this.VT()<2&&this.TF&&this.GF&&(this.pA=t.getExtension("WEBGL_depth_texture"),!this.pA))throw new Error("no depth texture support");this.VT()<2&&(this.mA=t.getExtension("EXT_frag_depth"),this.gA=t.getExtension("OES_standard_derivatives"),this.yA=t.getExtension("EXT_shader_texture_lod"));const n=Gc.$S.KG,r=n.GI(!1);let h=n.II(),o=r,a=n.LI(),l=n.DI(),u=n.EI(),c=n.GI(!0),f=!1;this.TF&&(this.VT()<2?this.mA&&(h=n.CI(),a=n.NI(),u=n.FI(),f=!0):(o=n._I(),h=n.RI(this.MA()),a=n.BI(this.MA()),l=n.kI(),u=n.AI(this.MA()),c=n._I(!0)));const d=n.OI(this.VT(),f,this.gA&&this.yA,this.MA()),p=this.VT()>=2?n._I():r,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[n.UI(),r,"<fill>"],[n.VI(),r,"<lineargradient>"],[n.WI(),r,"<penumbra>"],[n.jI(),r,"<hardellipse>"],[n.HI(),r,"<hardellipseoutline>"],[n.JI(),r,"<smoothellipse>"],[n.$I(),r,"<smoothellipseoutline>"],[n.zI(),r,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.TA({src:t[0],QG:t[1],name:t[2]})));this.xw=g[0],this.zF=g[1],this.bw=g[2],this.Gw=g[3],this._w=g[4],this.Iw=g[5],this.Cw=g[6],this.Rw=g[7],this.Pw=g[8],this.Ew=g[9],this.Fw=g[10],this.Mw=g[11],this.Tw=g[12],this.xv()}async TA(t){const s=await Gc.$S.KG.e_(this,t);return this.yv(s),s}GA(){this.WF=null}nE(t,s,e){if(this.Vy===t&&this.Wy===s&&!e)return;this.Kx();const i=this.i_,n=this.lC;this.Vy=t,this.Wy=s,this._A(0,0,t,s),this.fv(this.MF,t/s),this.IA(this.MF),this.zF&&(i.useProgram(this.zF.nI()),this.zF.K_(this.dw),this.WF=this.zF,this.lC.eI=this.zF),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.YF=null,this.jC=null,this.TF&&this.RF&&this.CA(this.Vy,this.Wy),this.$F&&this.$F.CG(this.Vy,this.Wy),i.bindFramebuffer(i.FRAMEBUFFER,null),this.$F=null,n.FG=null,n.AG=null}CA(t,s){const e=this.i_;this.CF&&this.PF===t&&this.EF===s||(this.GF?(this.CF&&e.deleteTexture(this.CF),this.CF=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.CF),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.VT()>=2?e.texImage2D(e.TEXTURE_2D,0,e.DEPTH24_STENCIL8,t,s,0,e.DEPTH_STENCIL,e.UNSIGNED_INT_24_8,null):this.pA&&e.texImage2D(e.TEXTURE_2D,0,e.DEPTH_STENCIL,t,s,0,e.DEPTH_STENCIL,this.pA.UNSIGNED_INT_24_8_WEBGL,null),e.bindTexture(e.TEXTURE_2D,null)):(this.CF&&e.deleteRenderbuffer(this.CF),this.CF=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.CF),e.renderbufferStorage(e.RENDERBUFFER,this.NE>=2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t,s),e.bindRenderbuffer(e.RENDERBUFFER,null)),this.PF=t,this.EF=s)}RA(t,s){this.TF&&(this.RF=!1,this.CA(t,s))}PA(){this.TF&&(this.RF=!0,this.CA(this.Vy,this.Wy))}_A(t,s,e,i){const n=this.xF;n[0]===t&&n[1]===s&&n[2]===e&&n[3]===i||(this.EA().GC(t,s,e,i),Ic.set(n,t,s,e,i),this.JF=0)}ov(t){super.ov(t),this.fv(this.MF,this.Vy/this.Wy)}ev(t){super.ev(t),this.fv(this.MF,this.Vy/this.Wy)}rv(t){super.rv(t),this.fv(this.MF,this.Vy/this.Wy)}IA(t){Cc.A(this.dw,t)||(this.EA().IC(t),Cc.m(this.dw,t),this.JF=0,this.bF=!0)}FA(){let t,s,e;const i=this.$F;null===i?(t=this.MF,s=this.by(),e=this.Ty()):(t=i.LG(),s=i.by(),e=i.Ty()),this.IA(t),this._A(0,0,s,e)}AA(t){Cc.A(this.pw,t)||(this.EA().RC(t),Cc.m(this.pw,t),this.JF=0,this.bF=!0)}OA(){this.bF=!1}DA(){return this.bF}EG(){return this.lC}EA(){const t=this.jF;return this.HF===t.length&&t.push(new Gc.$S.aC(this.lC)),t[this.HF++]}Kx(){0!==this.HF&&(this.OE()||(this.kA(),this.LA(),this.HF=0,this.BF=0,this.UF=0,this.VF=0,this.JF=0))}kA(){const t=this.i_;this.BF>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.h_),t.bufferSubData(t.ARRAY_BUFFER,0,this.OF.subarray(0,3*this.BF)),t.bindBuffer(t.ARRAY_BUFFER,this.o_),t.bufferSubData(t.ARRAY_BUFFER,0,this.kF.subarray(0,2*this.BF)),t.bindBuffer(t.ARRAY_BUFFER,this.a_),t.bufferSubData(t.ARRAY_BUFFER,0,this.LF.subarray(0,4*this.BF))),this.UF>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.FF),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.DF.subarray(0,this.UF))),this.VF>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.u_),t.bufferSubData(t.ARRAY_BUFFER,0,this.NF.subarray(0,this.VF)))}LA(){const t=this.jF;for(let s=0,e=this.HF;s<e;++s)t[s].IR()}NA(){return this.XF.Uo()}BA(t,s,e,i){const n=this.XF;n.$o(t,s,e,i)||(n.Co(t,s,e,i),this.Ow=null,2===this.JF&&(this.JF=0))}UA(t){const s=this.XF;s.Uo()!==t&&(s.Do(t),this.Ow=null,2===this.JF&&(this.JF=0))}iM(t){const s=this.XF;s.equals(t)||(s.set(t),this.Ow=null,2===this.JF&&(this.JF=0))}VA(){this.BA(1,1,1,1)}WA(){return this.XF}zA(t){t!==this.YF&&(this.EA().wC(t),this.YF=t,this.JF=0)}HT(){this.YF=null}eM(t){const s=this.qv(t);this.jA(s[0],s[1])}HA(t){const s=this.Kv(t);this.jA(s.Jv,s.$v)}jA(t,s){t===this.KF&&s===this.ZF||(this.EA().MC(t,s),this.KF=t,this.ZF=s,this.JF=0,this.Ow=null)}JA(){return this.KF===this.i_.ONE&&this.ZF===this.i_.ONE_MINUS_SRC_ALPHA}$A(){this.jA(this.i_.ONE,this.i_.ONE_MINUS_SRC_ALPHA)}qA(){this.jA(this.i_.SRC_ALPHA,this.i_.ONE_MINUS_SRC_ALPHA)}Jx(t){this.eA!==t&&(this.EA().MR(t),this.eA=t,this.JF=0,this.Ow=null)}XA(){return this.eA}$x(t){this.iA!==t&&(this.EA().GR(t),this.iA=t,this.JF=0,this.Ow=null)}YA(){return this.iA}KA(){this.jA(this.i_.ONE,this.i_.ZERO)}Rect(t){this.ZA(t.Za(),t.Qa(),t.tl(),t.sl())}ZA(t,s,e,i){this.Xx(t,s,e,s,e,i,t,i)}QA(t,s){(this.BF+t>65535||this.UF+s>393210)&&this.Kx(),1===this.JF?this.jF[this.HF-1].cC+=s:(this.EA().yC(2*this.UF,s),this.JF=1)}tO(){const t=this.BF;let s=this.UF;this.UF+=6;const e=this.DF;e[s++]=t,e[s++]=t+1,e[s++]=t+2,e[s++]=t,e[s++]=t+2,e[s]=t+3}Cl(t){this.sO(t,Ec)}Xx(t,s,e,i,n,r,h,o){this.QA(4,6),this.tO();const a=this.OF,l=this.BF;this.BF+=4;let u=3*l;const c=this.Lw+this.Nw;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=e,a[u++]=i,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Ec.Wo(this.kF,2*l),this.XF.zo(this.LF,4*l)}wx(t,s){this.QA(4,6),this.tO();const e=this.BF;this.BF+=4,t.ql(this.OF,3*e,this.Lw+this.Nw),s.nl(this.kF,2*e),this.XF.zo(this.LF,4*e)}sO(t,s){this.QA(4,6),this.tO();const e=this.BF;this.BF+=4,t.ql(this.OF,3*e,this.Lw+this.Nw),s.Wo(this.kF,2*e),this.XF.zo(this.LF,4*e)}eO(t,s,e){this.QA(4,6),this.tO();const i=this.BF;this.BF+=4,t.ql(this.OF,3*i,this.Lw+this.Nw),s.Wo(this.kF,2*i),this.LF.set(e,4*i)}iO(t,s,e,i,n,r,h,o,a,l,u,c,f){this.QA(4,6),this.tO();const d=this.OF,p=this.BF;this.BF+=4;let m=3*p;const g=this.Lw+this.Nw;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.kF,2*p),this.XF.zo(this.LF,4*p)}ux(t,s,e,i,n,r,h,o,a,l,u,c,f){this.QA(4,6),this.tO();const d=this.OF,p=this.BF;this.BF+=4;let m=3*p;const g=this.Lw+this.Nw;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Wo(this.kF,2*p),this.XF.zo(this.LF,4*p)}nO(t,s,e,i,n,r,h,o,a,l,u,c,f,d){this.QA(4,6),this.tO();const p=this.OF,m=this.BF;this.BF+=4;let g=3*m;const y=this.Lw+this.Nw;p[g++]=t,p[g++]=s,p[g++]=y+e,p[g++]=i,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Wo(this.kF,2*m),this.LF.set(d,4*m)}uT(t,s,e,i){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(e.length%3!=0)throw new Error("index buffer length not multiple of 3");if(e.length>393210)throw new Error(`too many indices (${e.length}, limit 393210)`);this.QA(t.length,e.length);const n=this.BF;this.OF.set(t,3*n),this.kF.set(s,2*n);const r=this.DF;if(0===n)r.set(e,this.UF);else{let t=this.UF;for(let s=0,i=e.length;s<i;++s)r[t++]=e[s]+n}const h=this.LF;if(null!=i)h.set(i,4*n);else{const s=this.XF,e=s.Lo(),i=s.No(),r=s.Bo(),o=s.Uo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=e,h[a++]=i,h[a++]=r,h[a++]=o}this.BF+=t.length/3,this.UF+=e.length}rO(t,s){this.sx(0),Cc.m(Fc,this.dw),Cc.m(Ac,this.pw),this.FA();const[e,i]=this.hO(this.$F),n=this.gv(0,0,this.Zw(i),0,0,0,i);if(this.AA(n),"crop"===t&&this.$F&&s){const t=this.Vy/2,e=this.Wy/2,i=s.by(),n=s.Ty(),r=this.$F.by(),h=this.$F.Ty(),o=Math.min(r,i),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Dc.set(-t,e-u,-t+o,e-a-u),Oc.Xl(Dc),Dc.set(0,l,o,a+l),Dc.St(i,n),this.wx(Oc,Dc)}else{const t=e/2,s=i/2;this.ZA(-t,s,t,-s)}this.IA(Fc),this.AA(Ac)}oO(t){this.QF.equals(t)||(this.QF.m(t),this.EA().kC(t),this.JF=0)}aO(){}lO(t,s,e,i){this.VF>=7996&&this.Kx();let n=this.VF;const r=this.Lw+this.Nw;2===this.JF&&this.qF===r?this.jF[this.HF-1].cC++:(this.EA().NC(n,r,this.XF),this.JF=2,this.qF=r);const h=this.NF;h[n++]=t,h[n++]=s,h[n++]=e,h[n++]=i,this.VF=n}bv(t){this.WF!==t&&(this.EA().UC(t),this.WF=t,this.JF=0,this.Ow=null)}uO(){return this.WF}cO(){this.bv(this.zF)}fO(t){this.EA().xC(t),this.JF=0}dO(t,s,e=1){this.EA().iR(t,s,e),this.JF=0}pO(t,s,e,i,n,r,h){if(this.WF!==this.Mw)throw new Error("must set tilemap fill mode first");this.EA().rR(t,s,e,i,n,r,h),this.JF=0}mO(t,s,e,i,n,r,h){if(this.WF!==this.Tw)throw new Error("must set tile randomization mode first");this.EA().oR(t,s,e,i,n,r,h),this.JF=0}gO(t,s,e,i,n,r,h,o,a,l,u){const c=this.WF;if(u%=10800,!c.U_||c.fI(s,e,i,n,r,h,o,a,l,u))return;const f=this.EA();f.WC(),c.mI(s,e,i,n,r,h,o,a,l,u);const d=f.dC;d[0]=r,d[1]=h,s.Wo(d,2),d[6]=a,d[7]=l,e.Wo(d,12);const p=f.pC;n.Wo(p,0);const m=p[1];p[1]=p[3],p[3]=m,i.Wo(f.mC,0),f.uC=u,f.cC=o,c.M_.V_()?f.fC=t?t.kG():null:f.fC=null,this.JF=0}yO(t){const s=this.WF;if(0===t.length||s.aI(t))return;const e=this.EA();e.HC(),s.uI(t),Gc.Th(e.gC,t),this.JF=0}SO(t,s,e,i){this.EA().OC(t,s,e,i),this.JF=0}Ru(t){this.EA().AC(t),this.JF=0}wO(){}Yx(){super.Yx(),this.i_.flush()}vO(){this.TF&&this.$F&&this.$F.VG()&&(this.EA().lR(this._F),this.JF=0)}xO(t){t=!!t,this._F!==t&&this.TF&&(this._F=t,this.EA().cR(t),this.JF=0)}bO(){return this._F}_G(){return this.CF}IG(){return this.GF}MO(t){if(t=!!t,this.GF&&this.IF!==t){if(t&&this.bO())throw new Error("depth still enabled");this.IF=t,this.EA().dR(t),this.JF=0}}TO(t,s,e,i,n=0){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),i=Math.floor(i),this.tA.Ka(t,s,e,i)||(this.tA.ja(t,s,e,i),s=(n||this.hO(this.GO())[1])-s-i,this.EA().xR(!0,t,s,e,i),this.JF=0)}_O(){-1!==this.tA.tl()&&(this.tA.set(0,0,-1,-1),this.EA().xR(!1,0,0,0,0),this.JF=0)}IO(){for(const t of this.vA)t.lF(this.Hw)}OE(){return!this.i_||this.i_.isContextLost()||this.uA}nM(){super.Kw(),Gc.$S.CT.nM(),Gc.$S.uG.nM(),Gc.$S.ub.nM();for(const t of this.vA)t.Ru();this.lA=[],this.BE=null,this.cA=null,this.dA=null,this.fA=null,this.pA=null,this.mA=null,this.gA=null,this.yA=null,this.SA=0,this.oA="(unavailable)",this.aA="(unavailable)",this.WF=null,this.zF=null,this.CF=null;for(const t of this.Aw.values())t.nM()}async rM(){this.uA=!0,await this.Yw(),this.uA=!1;for(const t of this.Aw.values())t.rM(this);this.nE(this.Vy,this.Wy,!0)}CO(t,s){if(this.OE())throw new Error("context lost");this.Kx();const e=Gc.jn(Gc.$S.CT,this);return e.NT(t,s),e}async RO(t,s){if(this.OE())throw new Error("context lost");if(s=Object.assign({},s),Gc.Ce.ImageBitmapOptions){let e=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const i=s.wT&&"clamp-to-edge"!==s.wT||s.vT&&"clamp-to-edge"!==s.vT,n=Gc.wr(e.width)&&Gc.wr(e.height);return this.WT()||n||!i?s._T=!1:Gc.Ce.Fe?(e=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Gc.vr(e.width),resizeHeight:Gc.vr(e.height)}),s._T=!1):e=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Gc.df(()=>this.CO(e,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Gc.lo(t);t=s}return await Gc.df(()=>this.CO(t,s))}GG(t,s,e){this.Kx();const i=Gc.jn(Gc.$S.CT,this);return i.JT(t,s,e),i}DE(t,s,e){this.Kx(),s.KT(t,e)}PG(t){t&&(t.eG(),t.iG()>0||(this.Kx(),t===this.YF&&(this.i_.bindTexture(this.i_.TEXTURE_2D,null),this.YF=null),t===this.jC&&(this.i_.activeTexture(this.i_.TEXTURE1),this.i_.bindTexture(this.i_.TEXTURE_2D,null),this.i_.activeTexture(this.i_.TEXTURE0),this.jC=null),t.ZT()))}PO(t){let s=this.Vy,e=this.Wy,i=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),i=!1),"number"==typeof t.height&&(e=Math.floor(t.height),i=!1)),s<=0||e<=0)throw new Error("invalid size");this.Kx();const n=Gc.jn(Gc.$S.uG,this);return n.MG(s,e,Object.assign({aG:i},t)),this.$F=null,this.lC.FG=null,this.lC.AG=null,n}EO(t,s=!0){t!==this.$F&&(t&&t.WG()&&t.CG(this.Vy,this.Wy),this.EA().EC(t),this.$F=t,this.JF=0,s&&this.FA())}GO(){return this.$F}hO(t){return t?[t.by(),t.Ty()]:[this.Vy,this.Wy]}FO(t,s="stretch"){this.NE<2||this.$F&&this.$F.zG()>0?(this.KA(),this.VA(),this.AO(t,s)):(this.EA().XC(t,this.$F,s),this.JF=0)}AO(t,s="stretch"){const e=t.kG();if(!e)throw new Error("not a texture-backed render target");this.zA(e),this.rO(s,e)}OO(t){this.NE<2||(this.EA().$C(t.OG()),this.JF=0)}DO(t){this.EO(null),this.Kx();const s=t.kG();s===this.YF&&(this.i_.bindTexture(this.i_.TEXTURE_2D,null),this.YF=null),s===this.jC&&(this.i_.activeTexture(this.i_.TEXTURE1),this.i_.bindTexture(this.i_.TEXTURE_2D,null),this.i_.activeTexture(this.i_.TEXTURE0),this.jC=null),t.ZT()}async qG(t,s,e){this.Kx();const i=this.$F;let n,r,h;t?(n=t.by(),r=t.Ty(),h=t.OG()):(n=this.by(),r=this.Ty(),h=null);let o=0,a=0,l=n,u=r;if(e){o=Gc.Yn(Math.floor(e.Za()),0,n-1),a=Gc.Yn(Math.floor(e.Qa()),0,r-1);let t=e.width();t=0===t?n-o:Gc.Yn(Math.floor(t),0,n-o);let s=e.height();s=0===s?r-a:Gc.Yn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.i_;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.$F=null,this.lC.FG=null,this.lC.AG=null,this.EO(i)};let d;if(!s&&this.VT()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,e=c.PIXEL_PACK_BUFFER;c.bindBuffer(e,t),c.bufferData(e,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(e,null),f();const i=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.s_(()=>c.getSyncParameter(i,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(i),d=new ImageData(l,u),c.bindBuffer(e,t),c.getBufferSubData(e,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(e,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}kO(){this.xO(!0),this.EA().mR(),this.JF=0,this.sA=1}LO(t=!1){this.xO(t),this.EA().yR(),this.JF=0,this.sA=2}NO(){return 2===this.sA}BO(t=!0){this.xO(t),this.EA().wR(),this.JF=0,this.sA=0}UO(t){this.VO()&&(this.EA().KC(t),this.JF=0)}WO(t){this.VO()&&(this.EA().tR(t),this.JF=0)}s_(t){const s=new Promise(s=>Lc.add({resolve:s,fF:t}));return-1===Nc&&(Nc=self.requestAnimationFrame(Tc)),s}rb(){return this.Vy*this.Wy*(this.wF.alpha?4:3)}hb(){let t=0;for(const s of Gc.$S.uG.XG())s.kG()||(t+=s.rG());return t}ob(){let t=0;for(const s of Gc.$S.CT.hG())t+=s.rG();return t}zO(){return this.vF}VT(){return this.NE}l_(){return this.AF}jO(){return"webgl"+this.VT()}WT(){return this.VT()>=2}BT(){return this.nA}HO(){return this.rA}JO(){return this.hA}$O(){return this.oA}qO(){return this.aA}XO(){if(this.VT()>=2)return"webgl2";{const t=[];return this.mA&&t.push("EXT_frag_depth"),this.gA&&t.push("OES_standard_derivatives"),this.yA&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}YO(){return this.lA}VO(){return!!this.BE}UE(){return this.BE}t_(){return this.cA}MA(){return!!this.dA}XT(){return this.fA}YT(){return this.SA}hF(t){this.vA.add(t)}oF(t){this.vA.delete(t)}QE(){return this.xA}UT(){return this.i_}bA(t){this.Hv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}KO(){return this.lb()}}}{const Bc=self._s,Uc=self.hs,Vc=(Uc.ys,Uc.fs),Wc=(self.assert,self.GPUBufferUsage),zc=self.GPUShaderStage,jc=(self.GPUMapMode,self.GPUTextureUsage),Hc={powerPreference:"default",depth:!1,failIfMajorPerformanceCaveat:!1,ZO:!1,QO:"bilinear",tD:!1,pF:!1,sD:!0},Jc=Math.floor(65535/4),$c=4*Jc-16,qc=new Bc.Cl(0,0,1,0,1,1,0,1),Xc=Bc.jn(Bc.Ca),Yc=Bc.jn(Bc.Rect),Kc=(Bc.jn(Bc.Rect),Bc.jn(Bc.Cl));Bc.$S.eD=class extends Bc.$S.uw{constructor(t){super(t),this.iD=null,this.nD=null,this.rD=null,this.hD=null,this.oD=null,this.aD=null,this.lD="",this.uD=null,this.cD=null,this.fD=0,this.dD=0,this.pD=Vc.create(),this.CF=null,this.mD=null,this.gD=null,this.yD=null,this.SD=null,this.wD=null,this.PF=0,this.EF=0,this.vD=null,this.xD=null,this.bD=null,this.MD=null,this.h_=null,this.o_=null,this.TD=null,this.a_=null,this.FF=null,this.GD=null,this.u_=null,this._D=Bc.$S.CD.ID(),this.RD=Bc.$S.CD.PD(),this.ED=null,this.FD=null,this.AD=Bc.$S.CD.OD(),this.DD=Bc.$S.CD.kD(),this.LD=null,this.ND=null,this.BD=Bc.$S.CD.UD(),this.VD=Bc.$S.CD.WD(),this.zD=null,this.jD=null,this.HD=null,this.OF=new Float32Array(196605),this.kF=new Float32Array(131070),this.JD=new Uint32Array(65535),this.LF=null,this.DF=new Uint16Array(393210),this.NF=new Float32Array(4*Jc),this.BF=0,this.UF=0,this.$D=0,this.qD=Bc.jn(Bc.Mo,1,1,1,1),this.VF=0,this.XD=Bc.jn(Bc.$S.YD,this),this.KD=32768,this.ZD=0,this.QD=0,this.tk=0,this.sk=0,this.ek=0,this.ik=0,this.nk=0,this.rk=0,this.hk=0,this.ak=Bc.jn(Bc.Rect,0,0,0,0),this.lk=Bc.jn(Bc.Mo,1,1,1,1),this.uk=Bc.jn(Bc.Mo,1,1,1,1),this.ck=Bc.jn(Bc.Rect,0,0,0,0),this.fk=0,this.dk="",this.pk=null,this.mk=null,this.gk=null,this.yk=null,this.Sk=null,this.wk=null,this.vk=null,this.xk=null,this.bk=null,this.Mk=null,this.Tk=null,this.Gk=null,this._k=null,this.Ik=new Set,this.Ck=new Set,this.nA=8192,this.Rk=null,this.Pk=null,this.Ek=null,this.Fk=null,this.Ak=0,this.Ok=0,this.Dk=0,this.kk=0,this.Lk=null,this.Nk=null,this.Bk=new Map,this.Uk=null,this.Vk=null,this.Wk=[],this.zk=null,this.$F=null,this.jk=!1,this.Hk="bilinear",this.Jk=!1,this.GF=!1,this.$k=null,this.qk=!1,this.Xk=-1,this.Yk=-1,this.Kk=new Set,this.Zk=null,this.Qk=null,this.bA()}dv(){return!0}tL(t,s){s?this.KD|=t:this.KD&=~t}sL(t){return 0!==(this.KD&t)}eL(t,s){s?this.ZD|=t:this.ZD&=~t}iL(t){return 0!==(this.ZD&t)}async e_(t,s){if(s=Object.assign({},Hc,s),!navigator.gpu)throw new Error("renderer-unavailable (WebGPU not supported)");s.depth&&(this.KD|=524288),s.sD&&(this.KD|=65536),this.jk=!!s.ZO,this.Hk=s.QO,this.Jk=!!s.tD,this.iD={},this.GF=!(!s.depth||!s.pF),"default"!==s.powerPreference&&(this.iD.powerPreference=s.powerPreference),this.oD=t,await this.nL(s.failIfMajorPerformanceCaveat)}async nL(t){for(this.hD=null,await this.rL(t);!this.hD;)this.nD=null,await this.rL(t);await this.Yw()}async rL(t){if(!this.nD){if(this.nD=await navigator.gpu.requestAdapter(this.iD),!this.nD)throw new Error("renderer-unavailable (no WebGPU adapter available)");if(t&&(this.nD.isFallbackAdapter||this.nD.info.isFallbackAdapter))throw new Error("renderer-unavailable (WebGPU provided fallback adapter)");if("adreno-7xx"===this.nD.info.architecture)throw new Error("WebGPU disabled on adreno-7xx devices - see https://issues.chromium.org/issues/329702056")}const s=[];if(this.nD.features.has("timestamp-query")&&s.push("timestamp-query"),this.nD.features.has("shader-f16")&&s.push("shader-f16"),this.hD=await this.nD.requestDevice({requiredFeatures:s,requiredLimits:{maxTextureDimension2D:this.nD.limits.maxTextureDimension2D}}),!this.hD)return null;this.nA=this.hD.limits.maxTextureDimension2D,this.tL(134217728,this.hD.features.has("timestamp-query")),this.tL(268435456,this.hD.features.has("shader-f16")),this.tL(536870912,this.sL(268435456)&&void 0!==globalThis.Float16Array),this.hD.lost.then(t=>this.hL(t)),this.tL(32768,!1)}async hL(t){console.log("[WebGPU] Device lost: ",t),super.Kw(),this.XD.nM(),Bc.$S.oL.nM(),Bc.$S.aL.nM(),Bc.$S.ub.nM(),this.lD="",this.uD=null,this.cD=null,this.CF=null,this.gD=null,this.mD=null,this.yD=null,this.SD=null,this.wD=null,this.h_=null,this.o_=null,this.TD=null,this.a_=null,this.FF=null,this.GD=null,this.u_=null,this.vD=null,this.xD=null,this.bD=null,this.MD=null,this.mk=null,this.pk=null,this.Gk=null,this.gk=null,this.yk=null,this.Sk=null,this.Rk=null,this.Fk=null,this.wk=null,this.vk=null,this.xk=null,this.bk=null,this.Mk=null,this.Tk=null,this.Pk=null,this.Ek=null,this.zk=null,this.$F=null,this._k=null,this.$k=null,this.Lk=null,this.Nk=null,this.Ik.clear(),this.Ck.clear(),this.Bk.clear();for(const t of this.Aw.values())t.nM();this.hD=null,this.nD=null,this.rD=null,this.KD|=32768,this.Zk&&this.Zk(),await this.nL();for(const t of this.Aw.values())t.rM(this);this.nE(this.Vy,this.Wy,!0),this.Qk&&this.Qk()}async Yw(){super.Yw();const t=this.hD;this.lD=navigator.gpu.getPreferredCanvasFormat(),this.uD=null,this.cD=null;let s=jc.RENDER_ATTACHMENT;this.jk&&(s|=jc.TEXTURE_BINDING),this.Jk&&(s|=jc.COPY_SRC),this.lD.startsWith("rgba8")||this.lD.startsWith("bgra8")?this.dk=this.lD:this.dk="rgba8unorm",this.KD&=940113920,this.KD|=7680,this.ZD=0,this.sL(524288)&&(this.KD|=70254592),this.BF=0,this.UF=0,this.Ak=0,this.Dk=0,this.kk=0,this.Ok=0,this.qD.Co(1,1,1,1),this.lk.Co(1,1,1,1),this.uk.Co(1,1,1,1),this.LF=this.l_()?new globalThis.Float16Array(262140):new Float32Array(262140),this.ED=new ArrayBuffer(this.RD),this.FD=new Float32Array(this.ED),this.LD=new ArrayBuffer(this.DD),this.ND=new Float32Array(this.LD),this.zD=new ArrayBuffer(this.VD),this.jD=new Float32Array(this.zD),this.HD=new Uint32Array(this.zD),this.h_=t.createBuffer({label:"vertexbuffer",size:this.OF.byteLength,usage:Wc.VERTEX|Wc.COPY_DST}),this.o_=t.createBuffer({label:"texcoordbuffer",size:this.kF.byteLength,usage:Wc.VERTEX|Wc.COPY_DST}),this.TD=t.createBuffer({label:"texindexbuffer",size:this.JD.byteLength,usage:Wc.VERTEX|Wc.COPY_DST}),this.a_=t.createBuffer({label:"colorbuffer",size:this.LF.byteLength,usage:Wc.VERTEX|Wc.COPY_DST}),this.FF=t.createBuffer({label:"indexbuffer",size:this.DF.byteLength,usage:Wc.INDEX|Wc.COPY_DST}),this.GD=t.createBuffer({label:"pointsindexbuffer",size:6*Jc*2,usage:Wc.INDEX,mappedAtCreation:!0});const e=this.GD.getMappedRange();this.lL(e),this.GD.unmap(),this.u_=t.createBuffer({label:"pointbuffer",size:this.NF.byteLength,usage:Wc.VERTEX|Wc.STORAGE|Wc.COPY_DST}),this.pk=t.createBindGroupLayout({label:"bufferbindgrouplayout",entries:[{binding:0,visibility:zc.VERTEX,buffer:{type:"uniform",minBindingSize:this.RD}},{binding:1,visibility:zc.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.DD}},{binding:3,visibility:zc.VERTEX,buffer:{type:"read-only-storage",minBindingSize:this.NF.byteLength}},{binding:4,visibility:zc.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.VD}},{binding:5,visibility:zc.FRAGMENT,buffer:{type:"uniform"}}]});const i=[],n=Bc.$S.cL.uL();for(let t=0;t<n;++t)i.push({binding:2*t,visibility:zc.FRAGMENT,sampler:{type:"filtering"}},{binding:2*t+1,visibility:zc.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}});this.gk=t.createBindGroupLayout({label:"texturebindgrouplayout",entries:i}),this.yk=t.createBindGroupLayout({label:"backtexturebindgrouplayout",entries:[{binding:0,visibility:zc.FRAGMENT,sampler:{type:"nearest"===this.Hk?"non-filtering":"filtering"}},{binding:1,visibility:zc.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}}]}),this.Sk=t.createBindGroupLayout({label:"depthtexturebindgrouplayout",entries:[{binding:0,visibility:zc.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:zc.FRAGMENT,texture:{sampleType:"depth",viewDimension:"2d"}}]}),this.Rk=t.createPipelineLayout({bindGroupLayouts:[this.pk,this.gk,this.yk,this.Sk]});const r=Bc.$S.CD,h=this.fL(),o=this.l_();this.Pk=t.createShaderModule({label:"<default vertex module>",code:r.dL(r.GI(o),h)}),this.Pk.getCompilationInfo().then(t=>r.pL("<default>","vertex",t)),this.Ek=t.createShaderModule({label:"<normalized vertex module>",code:r.dL(r.mL(o),h)}),this.Ek.getCompilationInfo().then(t=>r.pL("<normalized>","vertex",t));const a=await Promise.all([r.e_(this,{name:"<default>",src:r.gL(!1,o),yL:r.gL(!0,o),QG:r.SL(o),wL:r.vL(o)}),r.e_(this,{name:"<single-texture-fill>",src:r.xL(!1,o),yL:r.xL(!0,o),QG:r.SL(o),wL:r.vL(o)}),r.e_(this,{name:"<generate-mipmap>",src:r.bL(),QG:r.ML()}),r.e_(this,{name:"<point>",src:r.TL(!1),yL:r.TL(!0),QG:r.GL()}),r.e_(this,{name:"<tilemap>",src:r._L(!1),yL:r._L(!0)}),r.e_(this,{name:"<fill>",src:r.IL()}),r.e_(this,{name:"<lineargradient>",src:r.CL()}),r.e_(this,{name:"<penumbra>",src:r.RL()}),r.e_(this,{name:"<hardellipse>",src:r.PL()}),r.e_(this,{name:"<hardellipseoutline>",src:r.EL()}),r.e_(this,{name:"<smoothellipse>",src:r.FL()}),r.e_(this,{name:"<smoothellipseoutline>",src:r.AL()}),r.e_(this,{name:"<tilerandomization>",src:r.OI(!1),yL:r.OI(!0)}),r.e_(this,{name:"<smoothline>",src:r.OL()})]);this.xw=a[0],this.Nk=a[1],this.Lk=a[2],this.bw=a[3],this.Mw=a[4],this.Gw=a[5],this._w=a[6],this.Iw=a[7],this.Cw=a[8],this.Rw=a[9],this.Pw=a[10],this.Ew=a[11],this.Tw=a[12],this.Fw=a[13];for(const t of a)this.yv(t);65536&this.KD?(this.KD|=393216,this.Fk=this.xw):this.Fk=this.Nk,this._k=this.Lk.DL(),this.vD=t.createBuffer({label:"vertexuniformbuffer",size:this.RD,usage:Wc.UNIFORM|Wc.COPY_DST}),this.xD=t.createBuffer({label:"fragmentuniformbuffer",size:this.DD,usage:Wc.UNIFORM|Wc.COPY_DST}),this.bD=t.createBuffer({label:"fragmentc3paramsuniformbuffer",size:this.VD,usage:Wc.UNIFORM|Wc.COPY_DST}),this.MD=t.createBuffer({label:"fragmentdefaultcustomparamsbuffer",size:16,usage:Wc.UNIFORM|Wc.COPY_DST}),this.sk=0,this.ek=this.RD,this.kL(),this.LL(),this.NL(),this.ik=0,this.nk=this.DD,this.BL(),this.UL(),this.mk=this.VL(this.MD),this.Gk=this.mk;const l=Bc.uo(32,32);l.getContext("2d"),this.wk=await this.RO(l),this.vk=null,this.xk=this.wk.WL(),this.$D=0,this.bk=null,this.Mk=this.wk.zL(),this.wk.jL(),this.mD=this.hD.createTexture({label:"nulldepthbuffer",size:[8,8,1],format:this.HL(),usage:jc.TEXTURE_BINDING}),this.yD=this.mD.createView({label:"nulldepthbufferview",aspect:"depth-only"}),this.wD=this.hD.createBindGroup({label:"nulldepthbufferbindgroup",layout:this.Sk,entries:[{binding:0,resource:this.JL({xT:"nearest"})},{binding:1,resource:this.yD}]}),this.Tk=this.wD,this.zk=Bc.jn(Bc.$S.aL,this,!0),this.zk.kG().$L(s,this.lD),this.$F=this.zk,this.qL(),this.rD=this.nD.info,this.aD||(this.aD=this.oD.getContext("webgpu")),this.aD.configure({device:t,format:this.lD,usage:s,alphaMode:"premultiplied"})}VL(t){return this.hD.createBindGroup({layout:this.pk,entries:[{binding:0,resource:{buffer:this.vD}},{binding:1,resource:{buffer:this.xD}},{binding:3,resource:{buffer:this.u_}},{binding:4,resource:{buffer:this.bD}},{binding:5,resource:{buffer:t}}]})}lL(t){const s=new Uint16Array(t);let e=0,i=s.length,n=0;for(;e<i;)s[e++]=n,s[e++]=n+1,s[e++]=n+2,s[e++]=n,s[e++]=n+2,s[e++]=n+3,n+=4}XL(){return this.hD}YL(){return this.Pk}KL(){return this.Ek}async TA(t){const s=await Bc.$S.CD.e_(this,t);return this.yv(s),s}jO(){return"webgpu"}ZL(){return this.lD}HL(){return"depth24plus-stencil8"}QL(){return this.uD}tN(){return this.cD}sN(){return this.jk}eN(){return this.Jk}iN(){return this.Rk}nN(){return this.gk}rN(){return this.yk}hN(){return this.Hk}oN(){return this.dk}BT(){return this.nA}OE(){return this.sL(32768)}VO(){return this.sL(134217728)}fL(){return this.sL(268435456)}l_(){return this.sL(536870912)}rb(){const t=this.by()*this.Ty();let s=t*Bc.$S.oL.aN(this.lD);return this.lN()&&(s+=t*Bc.$S.oL.aN(this.HL())),s}hb(){let t=0;for(const s of Bc.$S.aL.XG())s.uN()||(t+=s.kG().rG());return t}ob(){let t=0;for(const s of Bc.$S.oL.hG())s.cN()||(t+=s.rG());return t}WT(){return!0}fN(){return this.XD}nE(t,s,e){(this.Vy!==t||this.Wy!==s||e)&&(this.Kx(),this.Vy=t,this.Wy=s,this.fD=t,this.dD=s,this.zk.TG(),this.IA(this.zk.LG()),this.$F&&this.$F.CG(this.Vy,this.Wy),this.sL(524288)&&this.sL(67108864)&&this.CA(t,s))}CA(t,s){if(this.CF){if(this.PF===t&&this.EF===s)return;this.CF.destroy()}let e=jc.RENDER_ATTACHMENT;this.GF&&(e|=jc.TEXTURE_BINDING),this.CF=this.hD.createTexture({label:"depthbuffer",size:[t,s,1],format:this.HL(),usage:e}),this.gD=this.CF.createView({label:"depthbufferview"}),this.GF&&(this.SD=this.hD.createBindGroup({label:"depthbufferbindgroup",layout:this.Sk,entries:[{binding:0,resource:this.JL({xT:"nearest"})},{binding:1,resource:this.CF.createView({label:"depthbufferview",aspect:"depth-only"})}]})),this.PF=t,this.EF=s}RA(t,s){this.lN()&&(this.tL(67108864,!1),this.CA(t,s))}PA(){this.lN()&&(this.tL(67108864,!0),this.CA(this.Vy,this.Wy))}IA(t){Vc.A(this.dw,t)||(Vc.m(this.dw,t),this.kL())}FA(){this.IA(this.$F.LG())}AA(t){Vc.A(this.pw,t)||(Vc.m(this.pw,t),this.kL())}OA(){this.eL(1,!1)}DA(){return this.iL(1)}CO(t,s){if(t&&!Bc.$S.oL.dN(t)){const s=t.width||t.videoWidth,e=t.height||t.videoHeight,i=Bc.uo(s,e);i.getContext("2d").drawImage(t,0,0,s,e),t=i}this.Kx();const e=Bc.jn(Bc.$S.oL,this);return e.MG(t,s),e}async RO(t,s){if(Bc.$S.oL.dN(t))return this.CO(t,s);{if(!Bc.Ce.ImageBitmapOptions)throw new Error("no support for ImageBitmapOptions");const e=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});return this.CO(e,s)}}JL(t){const s=t.wT||"clamp-to-edge",e=t.vT||"clamp-to-edge",i=t.xT;let n=t.bT||0;"trilinear"!==i&&(n=0);const r=`${s},${e},${i},${n}`;let h=this.Bk.get(r);if(h)return h;const o={addressModeU:s,addressModeV:e,magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest"};return"bilinear"!==i&&"trilinear"!==i||(o.magFilter="linear",o.minFilter="linear"),"trilinear"===i&&(o.mipmapFilter="linear",n>1&&(o.maxAnisotropy=n)),h=this.hD.createSampler(o),this.Bk.set(r,h),h}DL(){return this._k}GG(t,s,e){this.Kx();const i=Bc.jn(Bc.$S.oL,this);return i.JT(t,s,e),i}DE(t,s,e){return s.KT(t,e)}PG(t){t&&(t.eG(),t.iG()>0||(this.OE()||(this.Kx(),this.vk===t&&this.zA(null),this.bk===t&&this.pN(null)),t.ZT()))}mN(t,s){this.OE()||(s?this.Ik.add(t):this.Ik.delete(t))}gN(t,s){s?this.Ck.add(t):this.Ck.delete(t)}yN(t){const s=[t],e=Bc.$S.cL.uL();for(const t of this.Ck)t.Hn();for(const i of this.Ik){if(s.length>=e)break;i!==t&&s.push(i)}s.length<2||Bc.jn(Bc.$S.cL,this,s)}wO(){this.SN()}wN(){this.SN()}SN(){this.uD=this.aD.getCurrentTexture(),this.cD=this.uD.createView({label:"swapchaintextureview"}),this.zk.kG().vN()}Yx(){null===this.Vk&&this.zk.xN()&&this.bN(),super.Yx(),this.XD.MN(this.Hw),this.zk.kG().TN(),this.uD=null,this.cD=null}qL(){this.Uk=this.hD.createCommandEncoder(),this.KD&=-16385}GN(t){if(!this.VO())throw new Error("GPU profiling not supported");if(this.$k)throw new Error("already started frame timing");return this.qk=!1,this.Kk.clear(),this.$k=Bc.jn(Bc.$S._N,this,t),this.$k}IN(t,s){if(this.VO()){if(!this.$k)throw new Error("not started frame timing");if(t<0||s<0||t===s)throw new Error("invalid timestamp index");this.CN(),this.qk=!0,this.Xk=t,this.Yk=s}}RN(){this.qk&&(this.CN(),this.qk=!1)}QA(t,s){if(this.BF+t>65535||this.UF+s>393210)this.Kx();else if(1&this.KD)return void(this.tk+=s);null===this.Vk&&this.bN(),this.KD|=1,this.QD=this.UF,this.tk=s}tO(){const t=this.BF;let s=this.UF;this.UF+=6;const e=this.DF;e[s++]=t,e[s++]=t+1,e[s++]=t+2,e[s++]=t,e[s++]=t+2,e[s]=t+3}PN(){const t=this.KD;if(!(1&t))return;const s=this.Vk;if(16&t){const e=this.$F;s.setViewport(0,0,e.by(),e.Ty(),0,1),2&t?s.setIndexBuffer(this.GD,"uint16"):s.setIndexBuffer(this.FF,"uint16"),s.setVertexBuffer(0,this.h_),s.setVertexBuffer(1,this.o_),s.setVertexBuffer(2,this.a_),s.setVertexBuffer(3,this.TD),25165824&t&&s.setStencilReference(1),4&t&&this.EN(s,this.ak,e)}if(32&t){let e=0;1073741824&t?e=4:8388608&t?e=2:16777216&t?e=3:3145728&~t||(e=1),s.setPipeline(this.Fk.FN(this.Ak,e,this.Dk,this.kk,this.Ok))}if(8192&t&&s.setBindGroup(0,this.Gk),64&t&&s.setBindGroup(1,this.xk),128&t&&s.setBindGroup(2,this.Mk),256&t&&s.setBindGroup(3,this.Tk),8&t){const e=this.$F;4&t?this.EN(s,this.ak,e):s.setScissorRect(0,0,e.by(),e.Ty())}s.drawIndexed(this.tk,1,this.QD,0,0),this.KD&=-8698}EN(t,s,e){const i=e.by(),n=e.Ty();let r=Bc.Yn(s.Za(),0,i),h=Bc.Yn(s.Qa(),0,n),o=Bc.Yn(s.tl(),r,i),a=Bc.Yn(s.sl(),h,n);Number.isNaN(r)&&(r=0),Number.isNaN(h)&&(h=0),Number.isNaN(o)&&(o=i),Number.isNaN(a)&&(a=n),t.setScissorRect(r,h,o-r,a-h)}bN(){const t=this.KD;7680&t&&this.AN();let s=null;s=8388608&t?this.ON():16777216&t?this.DN():this.kN(),this.Vk=this.Uk.beginRenderPass(s),this.KD|=25072}kN(){const t=this.KD,s=this.$F,e={colorAttachments:[{view:s.LN(),loadOp:s.xN()?"clear":"load",clearValue:s.NN().toJSON(),storeOp:"store"}]};return this.BN(e),s.UN(!1),3145728&~t||(e.depthStencilAttachment={view:this.gD,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:"clear",stencilClearValue:0,stencilStoreOp:"discard"},this.KD&=-4194305),e}ON(){const t=this.KD,s={colorAttachments:[],depthStencilAttachment:{view:this.gD,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:33554432&t?"clear":"load",stencilClearValue:0,stencilStoreOp:"store"}};return this.BN(s),this.KD&=-37748737,s}DN(){const t=this.$F,s={colorAttachments:[{view:t.LN(),loadOp:t.xN()?"clear":"load",clearValue:t.NN().toJSON(),storeOp:"store"}],depthStencilAttachment:{view:this.gD,depthReadOnly:!0,stencilReadOnly:!0}};return this.BN(s),t.UN(!1),s}BN(t){if(!this.qk)return;const s={querySet:this.$k.VN(),endOfPassWriteIndex:this.Yk};this.Kk.has(this.Xk)||(s.beginningOfPassWriteIndex=this.Xk,this.Kk.add(this.Xk)),t.timestampWrites=s}WN(t){t.xN()&&(this.CN(),this.Uk.beginRenderPass({colorAttachments:[{view:t.LN(),loadOp:"clear",clearValue:t.NN().toJSON(),storeOp:"store"}]}).end(),this.KD|=16384,t.UN(!1))}CN(){null!==this.Vk&&(this.PN(),this.Vk.end(),this.Vk=null)}Kx(t=!1){this.CN(),this.$k&&t&&(this.$k.zN(this.Uk),this.KD|=16384),16384&this.KD&&(this.Wk.push(this.Uk.finish()),this.qL()),0!==this.Wk.length&&(this.kA(),this.hD.queue.submit(this.Wk),Bc.wh(this.Wk),this.XD.jN(),this.$k&&t&&(this.$k.HN(),this.$k=null))}kA(){const t=this.hD.queue;if(this.BF>0){const s=this.BF;t.writeBuffer(this.h_,0,this.OF.buffer,0,3*s*4),t.writeBuffer(this.o_,0,this.kF.buffer,0,2*s*4),65536&this.KD&&t.writeBuffer(this.TD,0,this.JD.buffer,0,4*s);const e=this.l_()?2:4;t.writeBuffer(this.a_,0,this.LF.buffer,0,4*s*e),this.BF=0}this.UF>0&&(this.UF%2!=0&&(this.DF[this.UF++]=0),t.writeBuffer(this.FF,0,this.DF.buffer,0,2*this.UF),this.UF=0),this.VF>0&&(t.writeBuffer(this.u_,0,this.NF.buffer,0,4*this.VF),this.VF=0)}kL(){this.KD|=512,this.ZD|=1,this.JN(this._D.transform)}LL(){const t=this._D.$N;this.ck.Wo(this.FD,t.offset/4),this.JN(t)}NL(){const t=this._D.qN;this.FD[t.offset/4]=this.fk,this.JN(t)}JN(t){const s=t.offset,e=t.end;1024&this.KD?(this.sk=Math.min(this.sk,s),this.ek=Math.max(this.ek,e)):(this.KD|=1024,this.sk=s,this.ek=e,this.CN())}BL(){this.XN(this.lk,this.AD.YN)}UL(){this.XN(this.uk,this.AD.KN)}XN(t,s){t.Wo(this.ND,s.offset/4),this.ZN(s)}QN(t,s){t.Wo(this.ND,s.offset/4),this.ZN(s)}ZN(t){const s=t.offset,e=t.end;2048&this.KD?(this.ik=Math.min(this.ik,s),this.nk=Math.max(this.nk,e)):(this.KD|=2048,this.ik=s,this.nk=e,this.CN())}tB(t,s){this.jD[s.offset/4]!==Math.fround(t)&&(this.jD[s.offset/4]=t,this.sB(s))}eB(t,s){this.HD[s.offset/4]!==t&&(this.HD[s.offset/4]=t,this.sB(s))}iB(t,s){t.qo(this.jD,s.offset/4)||(t.Wo(this.jD,s.offset/4),this.sB(s))}sB(t){const s=t.offset,e=t.end;4096&this.KD?(this.rk=Math.min(this.rk,s),this.hk=Math.max(this.hk,e)):(this.KD|=4096,this.rk=s,this.hk=e,this.CN())}AN(){const t=this.KD;512&t&&(Vc.multiply(this.pD,this.dw,this.pw),this.FD.set(this.pD,this._D.transform.offset/4)),1024&t&&this.XD.nB(this.Uk,this.vD,this.ED,this.sk,this.ek-this.sk),2048&t&&this.XD.nB(this.Uk,this.xD,this.LD,this.ik,this.nk-this.ik),4096&t&&this.XD.nB(this.Uk,this.bD,this.zD,this.rk,this.hk-this.rk),this.KD=-7681&t|16384}PO(t){let s=this.Vy,e=this.Wy,i=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),i=!1),"number"==typeof t.height&&(e=Math.floor(t.height),i=!1)),s<=0||e<=0)throw new Error("invalid size");this.Kx();const n=Bc.jn(Bc.$S.aL,this);return n.MG(s,e,Object.assign({aG:i},t)),n}EO(t,s=!0){null===t&&(t=this.zk),this.$F!==t&&(this.CN(),this.$F=t,this.tL(2097152,t.VG()),t.WG()&&!t.uN()&&t.CG(this.Vy,this.Wy),s&&this.FA())}OO(t){}GO(){return this.$F===this.zk?null:this.$F}hO(t){return null===t?[this.Vy,this.Wy]:[t.by(),t.Ty()]}rB(){return this.zk}DO(t){this.Kx(),this.$F===t&&this.EO(null);const s=t.kG();this.vk===s&&this.zA(null),this.bk===s&&this.pN(null),t.ZT()}async qG(t,s,e){this.WN(t),this.Kx(),null===t&&(t=this.zk);const i=this.hD,n=t.by(),r=t.Ty();let h=0,o=0,a=n,l=r;if(e){h=Bc.Yn(Math.floor(e.Za()),0,n-1),o=Bc.Yn(Math.floor(e.Qa()),0,r-1);let t=e.width();t=0===t?n-h:Bc.Yn(Math.floor(t),0,n-h);let s=e.height();s=0===s?r-o:Bc.Yn(Math.floor(s),0,r-o),a=t,l=s}const u=i.createCommandEncoder(),c=t.kG();let f=c.tG(),d=null;"rgba8unorm"===c.hB()?c.oB()||Bc.Sn():(d=this.aB(c,"rgba8unorm",u),f=d);const p=4*a,m=256*Math.ceil(p/256),g=i.createBuffer({size:m*l,usage:Wc.MAP_READ|Wc.COPY_DST});u.copyTextureToBuffer({texture:f,origin:[h,o,0]},{buffer:g,bytesPerRow:m},[a,l,1]);const y=u.finish();i.queue.submit([y]),d&&d.destroy(),await g.mapAsync(self.GPUMapMode.READ);const S=g.getMappedRange().slice(0);let w;if(m===p)w=new ImageData(new Uint8ClampedArray(S),a,l);else{const t=new ArrayBuffer(p*l),s=new Uint8Array(t);for(let t=0;t<l;++t){const e=t*m,i=t*p;s.set(new Uint8Array(S,e,p),i)}w=new ImageData(new Uint8ClampedArray(t),a,l)}return g.destroy(),w}aB(t,s,e){const i=this.hD,n=t.by(),r=t.Ty();if(t.hB()===s)throw new Error("no conversion necessary");t.UG()||Bc.Sn();const h=i.createTexture({size:[n,r,1],format:s,usage:jc.COPY_SRC|jc.RENDER_ATTACHMENT}),o=this.Lk.DL(s),a=o.getBindGroupLayout(0),l=this.JL({xT:"nearest"}),u=t.tG().createView({baseMipLevel:0,mipLevelCount:1}),c=h.createView({baseMipLevel:0,mipLevelCount:1}),f=e.beginRenderPass({colorAttachments:[{view:c,loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=i.createBindGroup({layout:a,entries:[{binding:0,resource:l},{binding:1,resource:u}]});return f.setPipeline(o),f.setBindGroup(0,d),f.draw(4),f.end(),h}xO(t){524288&this.KD&&(t=!!t,!!(1048576&this.KD)!==t&&(2097152&this.KD&&this.CN(),this.tL(1048576,t)))}bO(){return this.sL(1048576)}lN(){return this.sL(524288)}MO(t){if(!this.GF)return;if(t&&this.bO())throw new Error("depth still enabled");const s=t?this.SD:this.wD;this.Tk!==s&&(this.PN(),this.Tk=s,this.KD|=256)}Ru(t){this.CN(),this.$F.UN(!0),this.$F.NN().set(t)}SO(t,s,e,i){this.CN(),this.$F.UN(!0),this.$F.NN().Co(t,s,e,i)}vO(){2621440&~this.KD||(this.CN(),this.KD|=4194304)}TO(t,s,e,i){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),i=Math.floor(i),4&this.KD&&this.ak.Ka(t,s,e,i)||(this.PN(),this.KD|=12,this.ak.ja(t,s,e,i))}_O(){4&this.KD&&(this.PN(),this.KD&=-5,this.KD|=8)}vv(){return 65536&this.KD?this.xw:this.Nk}xv(){this.bv(this.vv())}bv(t){if(this.Fk!==t){if(t===this.xw&&!(65536&this.KD))throw new Error("cannot set multitexture fill program when multitexturing not allowed");this.PN(),this.Fk=t,this.Ow=null,this.KD|=32,this.lB(t===this.xw)}}uO(){return this.Fk}lB(t){if(t=!!t,!!(131072&this.KD)===t)return;this.tL(131072,t);const s=null===this.vk?this.wk:this.vk;this.uB(s)}cB(t){t=!!t,!!(262144&this.KD)!==t&&(this.PN(),this.tL(262144,t),this.tL(32,!0))}fB(t){t=!!t,!!(1073741824&this.KD)!==t&&(this.PN(),this.tL(1073741824,t),this.KD|=32)}dB(){return this.sL(1073741824)}zA(t){t!==this.vk&&(this.vk=t,null===t&&(t=this.wk),this.uB(t))}uB(t){if(131072&this.KD){const s=t.pB();if(null!==s)return this.mB(s),this.$D=t.gB(),void this.cB(!0)}this.mB(t.WL()),this.$D=0,this.cB(!1)}mB(t){t!==this.xk&&(this.PN(),this.xk=t,this.KD|=64)}yB(t){this.vk===t&&(this.PN(),this.xk=t.WL(),this.KD|=64)}SB(t){if(this.xk!==t)return;this.PN();const s=null===this.vk?this.wk:this.vk;this.xk=s.WL(),this.$D=0,this.KD|=64}pN(t){t!==this.bk&&(this.bk=t,null===t&&(t=this.wk),this.PN(),this.Mk=t.zL(),this.KD|=128)}wB(t,s,e,i,n,r){const h=t.vB(),o=s.vB();if(0===(h&jc.COPY_SRC))throw new Error("source texture missing COPY_SRC usage");if(0===(o&jc.COPY_DST))throw new Error("destination texture missing COPY_DST usage");if(t===s)throw new Error("invalid destination");const a=Math.min(t.by(),s.by()),l=Math.min(t.Ty(),s.Ty());n=Math.min(n,a-e),r=Math.min(r,l-i),n<=0||r<=0||(this.CN(),this.Uk.copyTextureToTexture({texture:t.tG(),origin:[e,i]},{texture:s.tG(),origin:[e,i]},[n,r]),this.KD|=16384)}xB(t){return t>=2?4:1}bB(t){t=this.xB(t),this.Ok!==t&&(this.PN(),this.Ok=t,this.KD|=32)}eM(t){t!==this.Ak&&(this.PN(),this.Ak=t,this.Ow=null,this.KD|=32)}HA(t){this.eM(this.Zv(t))}$A(){this.eM(0)}KA(){this.eM(3)}BA(t,s,e,i){const n=this.qD;n.$o(t,s,e,i)||(n.Co(t,s,e,i),this.Ow=null)}UA(t){const s=this.qD;s.Uo()!==t&&(s.Do(t),this.Ow=null)}NA(){return this.qD.Uo()}iM(t){const s=this.qD;s.equals(t)||(s.set(t),this.Ow=null)}VA(){this.BA(1,1,1,1)}WA(){return this.qD}Jx(t){t!==this.Dk&&(this.PN(),this.Dk=t,this.Ow=null,this.KD|=32)}XA(){return this.Dk}$x(t){t!==this.kk&&(this.PN(),this.kk=t,this.Ow=null,this.KD|=32)}YA(){return this.kk}Rect(t){this.ZA(t.Za(),t.Qa(),t.tl(),t.sl())}ZA(t,s,e,i){this.Xx(t,s,e,s,e,i,t,i)}MB(t){const s=this.JD,e=this.$D;s[t++]=e,s[t++]=e,s[t++]=e,s[t]=e}Cl(t){this.sO(t,qc)}Xx(t,s,e,i,n,r,h,o){this.QA(4,6),this.tO();const a=this.OF,l=this.BF;this.BF+=4;let u=3*l;const c=this.Lw+this.Nw;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=e,a[u++]=i,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,qc.Wo(this.kF,2*l),262144&this.KD&&this.MB(l),this.qD.zo(this.LF,4*l)}wx(t,s){this.QA(4,6),this.tO();const e=this.BF;this.BF+=4,t.ql(this.OF,3*e,this.Lw+this.Nw),s.nl(this.kF,2*e),262144&this.KD&&this.MB(e),this.qD.zo(this.LF,4*e)}sO(t,s){this.QA(4,6),this.tO();const e=this.BF;this.BF+=4,t.ql(this.OF,3*e,this.Lw+this.Nw),s.Wo(this.kF,2*e),262144&this.KD&&this.MB(e),this.qD.zo(this.LF,4*e)}eO(t,s,e){this.QA(4,6),this.tO();const i=this.BF;this.BF+=4,t.ql(this.OF,3*i,this.Lw+this.Nw),s.Wo(this.kF,2*i),262144&this.KD&&this.MB(i),this.LF.set(e,4*i)}iO(t,s,e,i,n,r,h,o,a,l,u,c,f){this.QA(4,6),this.tO();const d=this.OF,p=this.BF;this.BF+=4;let m=3*p;const g=this.Lw+this.Nw;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.kF,2*p),262144&this.KD&&this.MB(p),this.qD.zo(this.LF,4*p)}ux(t,s,e,i,n,r,h,o,a,l,u,c,f){this.QA(4,6),this.tO();const d=this.OF,p=this.BF;this.BF+=4;let m=3*p;const g=this.Lw+this.Nw;d[m++]=t,d[m++]=s,d[m++]=g+e,d[m++]=i,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Wo(this.kF,2*p),262144&this.KD&&this.MB(p),this.qD.zo(this.LF,4*p)}nO(t,s,e,i,n,r,h,o,a,l,u,c,f,d){this.QA(4,6),this.tO();const p=this.OF,m=this.BF;this.BF+=4;let g=3*m;const y=this.Lw+this.Nw;p[g++]=t,p[g++]=s,p[g++]=y+e,p[g++]=i,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Wo(this.kF,2*m),262144&this.KD&&this.MB(m),this.LF.set(d,4*m)}uT(t,s,e,i){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(e.length%3!=0)throw new Error("index buffer length not multiple of 3");if(e.length>393210)throw new Error(`too many indices (${e.length}, limit 393210)`);this.QA(t.length,e.length);const n=this.BF;this.OF.set(t,3*n),this.kF.set(s,2*n),262144&this.KD&&this.JD.fill(this.$D,n,n+t.length);const r=this.DF;if(0===n)r.set(e,this.UF);else{let t=this.UF;for(let s=0,i=e.length;s<i;++s)r[t++]=e[s]+n}const h=this.LF;if(null!=i)h.set(i,4*n);else{const s=this.qD,e=s.Lo(),i=s.No(),r=s.Bo(),o=s.Uo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=e,h[a++]=i,h[a++]=r,h[a++]=o}this.BF+=t.length/3,this.UF+=e.length}oO(t){this.ck.equals(t)||(this.ck.m(t),this.LL());const s=this.Lw+this.Nw;this.fk!==s&&(this.fk=s,this.NL()),this.uk.equals(this.qD)||(this.uk.m(this.qD),this.UL()),this.bv(this.Mv()),this.tk=0,this.KD|=18}aO(){this.tk>0&&this.PN(),this.KD&=-3,this.KD|=16}lO(t,s,e,i){let n=this.VF;n>$c&&(this.Kx(),n=0),1&this.KD?this.tk+=6:(null===this.Vk&&this.bN(),this.KD|=1,this.QD=n/4*6,this.tk=6);const r=this.NF;r[n++]=t,r[n++]=s,r[n++]=e,r[n++]=i,this.VF=n}fO(t){this.lk.equals(t)||(this.lk.m(t),this.BL())}dO(t,s,e=1){const i=this.AD,n=this.ND;Xc.set(t,s),Xc.qo(n,i.TB.offset/4)||this.QN(Xc,i.TB),n[i.GB.offset/4]!==Math.fround(e)&&(n[i.GB.offset/4]=e,this.ZN(i.GB))}pO(t,s,e,i,n,r,h){const o=this.AD,a=this.ND;t.qo(a,o._B.offset/4)||(t.Wo(a,o._B.offset/4),this.ZN(o._B)),Xc.set(i/s,n/e),Xc.qo(a,o.IB.offset/4)||this.QN(Xc,o.IB),Xc.set(r/s,h/e),Xc.qo(a,o.CB.offset/4)||this.QN(Xc,o.CB)}mO(t,s,e,i,n,r,h){const o=this.AD,a=this.ND;Xc.set(e,i),Xc.qo(a,o.IB.offset/4)||this.QN(Xc,o.IB),a[o.GB.offset/4]!==Math.fround(n)&&(a[o.GB.offset/4]=n,this.ZN(o.GB)),Xc.set(r,h),Xc.qo(a,o.CB.offset/4)||this.QN(Xc,o.CB)}gO(t,s,e,i,n,r,h,o,a,l,u){const c=this.BD,f=this.Fk;u%=10800,f.zb()&&this.pN(t),f.RB()&&(this.iB(s,c.PB),this.iB(e,c._B),this.iB(i,c.EB),this.iB(n,c.AB)),this.tB(o,c.devicePixelRatio),this.tB(a,c.OB),this.tB(l,c.DB),this.tB(u,c.tg),this.tB(this.nv(),c.kB),this.tB(this.hv(),c.LB)}yO(t){t&&(t.NB()&&(this.CN(),t.BB(this.Uk)),this.UB(t.VB()))}WB(t){this.eB(t?1:0,this.BD.zB)}UB(t){t!==this.Gk&&(this.PN(),this.Gk=t,this.KD|=8192)}jB(t){this.Gk===t&&this.UB(this.mk)}FO(t){if(t.xN())return this.$F.UN(!0),void this.$F.NN().set(t.NN());t.zG()>=2&&this.$F.zG()<2?this.HB(t):(this.SO(0,0,0,0),this.KA(),this.VA(),this.AO(t))}AO(t){this.WN(t);const s=t.kG();this.zA(s),this.rO()}rO(){const t=this.dB();t||this.fB(!0),this.sx(0);const s=Kc,e=Yc;s.set(0,-1,0,-1,2,1,0,1),e.set(0,-1,2,1),this.wx(s,e),t||this.fB(!1)}HB(t){this.WN(t),this.CN(),this.Uk.beginRenderPass({colorAttachments:[{view:t.kG().LN(),resolveTarget:this.$F.kG().LN(),loadOp:"load",storeOp:"store"}]}).end(),this.KD|=16384}kO(){this.CN(),this.xO(!0),this.KD|=41943040}LO(t=!1){this.CN(),this.xO(t),this.KD&=-8388609,this.KD|=16777216}NO(){return this.sL(16777216)}BO(t=!0){this.CN(),this.xO(t),this.KD&=-16777217}bA(){this.Hv([["normal","one","one-minus-src-alpha"],["additive","one","one"],["xor","one","one-minus-src-alpha"],["copy","one","zero"],["destination-over","one-minus-dst-alpha","one"],["source-in","dst-alpha","zero"],["destination-in","zero","src-alpha"],["source-out","one-minus-dst-alpha","zero"],["destination-out","zero","one-minus-src-alpha"],["source-atop","dst-alpha","one-minus-src-alpha"],["destination-atop","one-minus-dst-alpha","src-alpha"]])}JB(){return this.nD?[...this.nD.features]:[]}$B(){return this.rD}qB(){const t=this.rD;if(!t)return"unknown/unknown";const s=t.vendor||"unknown",e=t.architecture||"unknown",i=[];return t.device&&i.push(t.device),t.description&&i.push(t.description),t.type&&i.push(t.type),t.backend&&i.push(t.backend),s+"/"+e+(i.length>0?` (${i.join(", ")})`:"")}}}{const Zc=self._s;Zc.$S.YD=class{constructor(t){this.fb=t,this.XB=new Map,this.YB=[],this.KB=[],this.ZB=[],this.QB=0,this.tU=0,this.sU=0,this.eU=0,this.iU=0,this.nU=0}Ob(){return this.fb}nM(){this.XB.clear(),Zc.wh(this.YB),Zc.wh(this.KB),Zc.wh(this.ZB)}rU(t){return Math.max(Zc.vr(t),16)}hU(t){this.iU++;const s=this.rU(t);{const t=this.XB.get(s);if(void 0!==t&&t.length>0){const e=t.pop();return e.oU(),0===t.length&&this.XB.delete(s),e}}return this.QB++,this.tU+=s,this.sU++,Zc.jn(Zc.$S.aU,this,s)}lU(t){this.nU++;const s=t.Au(),e=this.XB.get(s);void 0===e?this.XB.set(s,[t]):e.push(t)}uU(t){this.ZB.push(t)}jN(){for(const t of this.YB)t.cU();Zc.wh(this.YB);for(const t of this.KB)this.QB--,this.tU-=t.Au(),t.Hn();Zc.wh(this.KB);for(const t of this.ZB)t.destroy();Zc.wh(this.ZB)}MN(t){t%30==0&&this.fU(t)}fU(t){for(const[s,e]of this.XB.entries()){let i=0;for(let s=0,n=e.length;s<n;++s){const n=e[s];n.dU(t)?(this.QB--,this.tU-=n.Au(),n.Hn(),this.eU++):(e[i]=n,++i)}0===i?this.XB.delete(s):Zc.Sh(e,i)}this.pU()}nB(t,s,e,i,n){const r=this.hU(n),h=r.mU(),o=h.getMappedRange(0,n);new Uint8Array(o).set(new Uint8Array(e,i,n)),h.unmap(),t.copyBufferToBuffer(h,0,s,i,n),this.YB.push(r)}pU(){this.sU=0,this.eU=0,this.iU=0,this.nU=0}}}{const Qc=self._s,tf=self.GPUBufferUsage,sf=self.GPUMapMode;self.assert;Qc.$S.aU=class{constructor(t,s){this.XD=t,this.gU=1,this.yU=s,this.rF=this.Ob().XL().createBuffer({mappedAtCreation:!0,size:s,usage:tf.COPY_SRC|tf.MAP_WRITE}),this.SU=0}Ob(){return this.XD.Ob()}wU(){return this.gU}Au(){return this.yU}mU(){return this.rF}oU(){this.gU=1}async cU(){this.gU=2;try{await this.rF.mapAsync(sf.WRITE)}catch(t){return void console.warn("[WebGPU] Error recycling buffer, assuming device was lost: ",t)}this.Ob().OE()||(this.gU=0,this.SU=this.Ob().Zx(),this.XD.lU(this))}vU(){this.gU=0}dU(t){return this.SU<=t-25}Hn(){this.rF.destroy(),this.rF=null,this.XD=null}}}{const ef=self._s,nf=(self.assert,self.GPUBufferUsage);ef.$S.xU=class{constructor(t){const s=t.Ob();this.qb=t,this.bU=t.MU(),this.TU=new ArrayBuffer(this.bU),this.GU=new Float32Array(this.TU),this._U=!1,this.rF=s.XL().createBuffer({size:this.bU,usage:nf.UNIFORM|nf.COPY_DST}),this.IU=s.VL(this.rF)}Hn(){this.Ob().jB(this.IU),this.Ob().fN().uU(this.rF),this.rF=null,this.qb=null,this.TU=null,this.GU=null,this.IU=null}Ob(){return this.qb.Ob()}nI(){return this.qb}VB(){return this.IU}CU(t,s){const e=this.qb.RU(t),i=e.type,n=e.offset/4,r=this.GU;if("color"===i){if(s.Xo(r,n))return;s.jo(r,n),this._U=!0}else{if("float"!==i&&"percent"!==i)throw new Error(`unexpected shader param type '${i}'`);if(r[n]===Math.fround(s))return;r[n]=s,this._U=!0}}NB(){return this._U}BB(t){this.Ob().fN().nB(t,this.rF,this.TU,0,this.bU),this._U=!1}}}{let rf=function(t){for(const s of Object.values(t))s.end=s.offset+s.size},hf=function(t){const s=[];for(let e=0;e<t;++e)s.push(null);return s},of=function(t){return`\nstruct FragmentInput {\n\t@location(1) fragUV : vec2<f32>,\n\t@location(2) fragColor : vec4<${t?"f16":"f32"}>,\n\t@builtin(position) fragPos : vec4<f32>\n};\n\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texBack));\n}\n\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texDepth));\n}\n`},af=function(t,s,e,i,n){return t<<10|s<<7|e<<5|i<<4|n};0;const lf=self._s,uf="\nstruct Uniforms {\n\ttransform\t\t: mat4x4<f32>,\n\tpointTexStart\t: vec2<f32>,\n\tpointTexEnd\t\t: vec2<f32>,\n\tzElevation\t\t: f32\n};\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\n",cf={transform:{offset:0,size:64,end:0},$N:{offset:64,size:16,end:0},PU:{offset:64,size:8,end:0},EU:{offset:72,size:8,end:0},qN:{offset:80,size:4,end:0}};rf(cf);const ff=cf.qN.end,df="\nstruct Uniforms {\n\tcolor2\t\t\t\t: vec4<f32>,\n\tpointColor \t\t\t: vec4<f32>,\n\ttileSize\t\t\t: vec2<f32>,\n\ttileSpacing\t\t\t: vec2<f32>,\n\tsrcRectStart\t\t: vec2<f32>,\n\tsrcRectEnd\t\t\t: vec2<f32>,\n\tpixelSize\t\t\t: vec2<f32>,\n\toutlineThickness\t: f32\n};\n@binding(1) @group(0) var<uniform> uniforms : Uniforms;\n",pf={YN:{offset:0,size:16,end:0},KN:{offset:16,size:16,end:0},IB:{offset:32,size:8,end:0},CB:{offset:40,size:8,end:0},_B:{offset:48,size:16,end:0},FU:{offset:48,size:8,end:0},AU:{offset:56,size:8,end:0},TB:{offset:64,size:8,end:0},GB:{offset:72,size:4,end:0}};rf(pf);const mf=pf.GB.end,gf="\nstruct C3Params {\n\tsrcStart\t\t\t: vec2<f32>,\n\tsrcEnd\t\t\t\t: vec2<f32>,\n\tsrcOriginStart\t\t: vec2<f32>,\n\tsrcOriginEnd\t\t: vec2<f32>,\n\tlayoutStart\t\t\t: vec2<f32>,\n\tlayoutEnd\t\t\t: vec2<f32>,\n\tdestStart\t\t\t: vec2<f32>,\n\tdestEnd\t\t\t\t: vec2<f32>,\n\tdevicePixelRatio\t: f32,\n\tlayerScale\t\t\t: f32,\n\tlayerAngle\t\t\t: f32,\n\tseconds\t\t\t\t: f32,\n\tzNear\t\t\t\t: f32,\n\tzFar\t\t\t\t: f32,\n\tisSrcTexRotated\t\t: u32\n};\n@binding(4) @group(0) var<uniform> c3Params : C3Params;\n\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcStart) / (c3Params.srcEnd - c3Params.srcStart);\n}\n\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcEnd - c3Params.srcStart, c3Params.srcStart);\n}\n\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcStart, c3Params.srcEnd), max(c3Params.srcStart, c3Params.srcEnd));\n}\n\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcOriginStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart);\n}\n\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcOriginEnd - c3Params.srcOriginStart, c3Params.srcOriginStart);\n}\n\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcOriginStart, c3Params.srcOriginEnd), max(c3Params.srcOriginStart, c3Params.srcOriginEnd));\n}\n\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcOriginStart, (c3Params.layoutEnd - c3Params.layoutStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart), c3Params.layoutStart);\n}\n\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcStart, (c3Params.destEnd - c3Params.destStart) / (c3Params.srcEnd - c3Params.srcStart), c3Params.destStart);\n}\n\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.destStart, c3Params.destEnd), max(c3Params.destStart, c3Params.destEnd));\n}\n\nfn c3_linearizeDepth(depthSample : f32) -> f32\n{\n\treturn c3Params.zNear * c3Params.zFar / (c3Params.zFar + depthSample * (c3Params.zNear - c3Params.zFar));\n}\n",yf=["srcStart","srcEnd","srcOriginStart","srcOriginEnd","c3_srcToNorm","c3_normToSrc","c3_clampToSrc","c3_srcOriginToNorm","c3_normToSrcOrigin","c3_clampToSrcOrigin","c3_getLayoutPos","c3_srcToDest"],Sf=["layoutStart","layoutEnd","destStart","destEnd","c3_clampToDest"],wf={_B:{offset:0,size:16,end:0},OU:{offset:0,size:8,end:0},DU:{offset:8,size:8,end:0},EB:{offset:16,size:16,end:0},kU:{offset:16,size:8,end:0},LU:{offset:24,size:8,end:0},AB:{offset:32,size:16,end:0},NU:{offset:32,size:8,end:0},BU:{offset:40,size:8,end:0},PB:{offset:48,size:16,end:0},UU:{offset:48,size:8,end:0},VU:{offset:56,size:8,end:0},devicePixelRatio:{offset:64,size:4,end:0},OB:{offset:68,size:4,end:0},DB:{offset:72,size:4,end:0},tg:{offset:76,size:4,end:0},kB:{offset:80,size:4,end:0},LB:{offset:84,size:4,end:0},zB:{offset:88,size:4,end:0}};rf(wf);const vf=wf.zB.end,xf="\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>\n};\n",bf=new Map([["float",4],["percent",4],["color",12]]),Mf=new Map([["float",4],["percent",4],["color",16]]),Tf="\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\n{\n\treturn vec4<f32>(c.rgb * c.a, c.a);\n}\n\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\n{\n\tif (c.a == 0.0)\n\t{\n\t\treturn vec4<f32>(0.0);\n\t}\n\t\n\treturn vec4<f32>(c.rgb / c.a, c.a);\n}\n\nfn c3_grayscale(rgb : vec3<f32>) -> f32\n{\n\treturn dot(rgb, vec3<f32>(0.299, 0.587, 0.114));\n}\n\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\n{\n\treturn vec2<f32>(1.0) / vec2<f32>(textureDimensions(t));\n}\n\nfn c3_clamp2(v : vec2<f32>, l : f32, u : f32) -> vec2<f32>\n{\n\treturn clamp(v, vec2<f32>(l), vec2<f32>(u));\n}\n\nfn c3_mod(x : f32, y : f32) -> f32\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_mod2(x : vec2<f32>, y : vec2<f32>) -> vec2<f32>\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\n{\n\tvar hsl : vec3<f32> = vec3<f32>(0.0);\n\t\n\tvar fmin : f32 = min(min(color.r, color.g), color.b);\n\tvar fmax : f32 = max(max(color.r, color.g), color.b);\n\tvar delta : f32 = fmax - fmin;\n\n\thsl.z = (fmax + fmin) / 2.0;\n\n\tif (delta == 0.0)\n\t{\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t}\n\telse \n\t{\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\thsl.y = delta / (fmax + fmin);\n\t\t}\n\t\telse\n\t\t{\n\t\t\thsl.y = delta / (2.0 - fmax - fmin);\n\t\t}\n\t\t\n\t\tvar dR : f32 = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dG : f32 = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dB : f32 = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n\n\t\tif (color.r == fmax)\n\t\t{\n\t\t\thsl.x = dB - dG;\n\t\t}\n\t\telse if (color.g == fmax)\n\t\t{\n\t\t\thsl.x = (1.0 / 3.0) + dR - dB;\n\t\t}\n\t\telse if (color.b == fmax)\n\t\t{\n\t\t\thsl.x = (2.0 / 3.0) + dG - dR;\n\t\t}\n\n\t\tif (hsl.x < 0.0)\n\t\t{\n\t\t\thsl.x = hsl.x + 1.0;\n\t\t}\n\t\telse if (hsl.x > 1.0)\n\t\t{\n\t\t\thsl.x = hsl.x - 1.0;\n\t\t}\n\t}\n\n\treturn hsl;\n}\n\nfn c3_hueToRGB(f1 : f32, f2 : f32, hue_ : f32) -> f32\n{\n\tvar hue : f32 = hue_;\n\tif (hue < 0.0)\n\t{\n\t\thue = hue + 1.0;\n\t}\n\telse if (hue > 1.0)\n\t{\n\t\thue = hue - 1.0;\n\t}\n\t\t\n\tvar ret : f32;\n\t\n\tif ((6.0 * hue) < 1.0)\n\t{\n\t\tret = f1 + (f2 - f1) * 6.0 * hue;\n\t}\n\telse if ((2.0 * hue) < 1.0)\n\t{\n\t\tret = f2;\n\t}\n\telse if ((3.0 * hue) < 2.0)\n\t{\n\t\tret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n\t}\n\telse\n\t{\n\t\tret = f1;\n\t}\n\t\n\treturn ret;\n}\n\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n{\n\tvar rgb : vec3<f32> = vec3<f32>(hsl.z);\n\t\n\tif (hsl.y != 0.0)\n\t{\n\t\tvar f2 : f32;\n\t\t\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\tf2 = hsl.z * (1.0 + hsl.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n\t\t}\n\t\t\t\n\t\tvar f1 : f32 = 2.0 * hsl.z - f2;\n\t\t\n\t\trgb.r = c3_hueToRGB(f1, f2, hsl.x + (1.0 / 3.0));\n\t\trgb.g = c3_hueToRGB(f1, f2, hsl.x);\n\t\trgb.b = c3_hueToRGB(f1, f2, hsl.x - (1.0 / 3.0));\n\t}\n\t\n\treturn rgb;\n}\n";lf.$S.CD=class extends lf.$S.cb{constructor(t,s){if(super(t,s),this.WU=s.zU,this.jU=s.HU,this.JU=s.$U,this.Ek=s.qU,this.XU=new Map,this.YU=new Map,this.KU=!1,this.ZU=!1,this.Us=[],this.QU=0,s.parameters){let t=0;for(const e of s.parameters){const s=e[2];if(!bf.has(s))throw new Error(`unrecognized effect param type '${s}'`);const i=bf.get(s),n=Mf.get(s),r=t%n;0!==r&&(t+=n-r),this.Us.push({type:s,offset:t,size:i,end:t+i}),t+=i}this.QU=16*Math.ceil(t/16)}}static async e_(t,s){const e=t.XL(),i=s.name,n=t.fL(),r=t.l_(),h=s.src,o=lf.$S.CD.tV(h,n,r),a=e.createShaderModule({label:i,code:o});let l,u=null;if(s.yL){const t=lf.$S.CD.tV(s.yL,n,r);u=e.createShaderModule({label:i,code:t})}a.getCompilationInfo().then(t=>lf.$S.CD.pL(i,"fragment",t));const c=lf.$S.CD.dL(s.QG,n);let f;c?(l=e.createShaderModule({label:i,code:c}),l.getCompilationInfo().then(t=>lf.$S.CD.pL(i,"vertex",t))):l=t.YL();const d=lf.$S.CD.dL(s.wL,n);d?(f=e.createShaderModule({label:i,code:d}),f.getCompilationInfo().then(t=>lf.$S.CD.pL(i,"vertex (norm)",t))):f=t.KL();const p=lf.jn(lf.$S.CD,t,Object.assign({zU:a,HU:u,$U:l,qU:f},s));if(p.Fb=h.includes("%%C3PARAMS_STRUCT%%")&&yf.some(t=>h.includes(t)),p.KU=p.Fb||h.includes("%%C3PARAMS_STRUCT%%")&&Sf.some(t=>h.includes(t)),p.ZU=h.includes("%%C3PARAMS_STRUCT%%")&&h.includes("isSrcTexRotated"),"<generate-mipmap>"!==i){const s=p.sV(0,0,0,0,0);let e=null;t.lN()&&(e=p.sV(0,1,0,0,0));const[i,n]=await Promise.all([s,e]);p.XU.set(af(0,0,0,0,0),i),n&&p.XU.set(af(0,1,0,0,0),n)}return p}static eV(t,s){if(!t)return t;let e="";return e=s?"enable f16;\nalias f16or32 = f16;\n":"alias f16or32 = f32;\n",e+t}static tV(t,s,e){return t=lf.$S.CD.eV(t,s),lf.Wm(t,{"%%SAMPLERFRONT_BINDING%%":"@binding(0) @group(1)","%%TEXTUREFRONT_BINDING%%":"@binding(1) @group(1)","%%SAMPLERBACK_BINDING%%":"@binding(0) @group(2)","%%TEXTUREBACK_BINDING%%":"@binding(1) @group(2)","%%SAMPLERDEPTH_BINDING%%":"@binding(0) @group(3)","%%TEXTUREDEPTH_BINDING%%":"@binding(1) @group(3)","%%SHADERPARAMS_BINDING%%":"@binding(5) @group(0)","%%FRAGMENTINPUT_STRUCT%%":of(e),"%%FRAGMENTOUTPUT_STRUCT%%":xf,"%%C3PARAMS_STRUCT%%":gf,"%%C3_UTILITY_FUNCTIONS%%":Tf})}static dL(t,s){return lf.$S.CD.eV(t,s)}static pL(t,s,e){for(const i of e.messages){const e=`[WebGPU] Message (${i.type}) compiling ${s} shader '${t}': ${i.message} (line ${i.lineNum}, pos ${i.linePos})`;"error"===i.type?console.error(e):"warning"===i.type?console.warn(e):console.log(e)}}Hn(){this.WU=null,this.jU=null,this.JU=null,this.Ek=null,this.XU.clear(),this.YU.clear(),super.Hn()}XL(){return this.fb.XL()}iN(){return this.fb.iN()}Ob(){return this.fb}RB(){return this.KU}$b(){return this.ZU}rI(){return this.Us.length}hI(t){return t<0||t>=this.Us.length?null:this.Us[t].type}MU(){return this.QU}RU(t){return this.Us[t]}iV(t,s,e,i,n){const r=this.fb,h=r.l_(),[o,a]=r.qv(t);let l="none";switch(e){case 1:l="back";break;case 2:l="front"}const u={label:`${this.Rc()} blendMode ${t} variant ${s} multisampleCount ${n}`,layout:this.iN(),primitive:{cullMode:l,frontFace:0===i?"cw":"ccw"},vertex:{module:4===s?this.Ek:this.JU,entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:8,attributes:[{shaderLocation:1,offset:0,format:"float32x2"}]},{arrayStride:4*(h?2:4),attributes:[{shaderLocation:2,offset:0,format:h?"float16x4":"float32x4"}]},{arrayStride:4,attributes:[{shaderLocation:3,offset:0,format:"uint32"}]}]},fragment:{module:this.WU,entryPoint:"main",targets:[{format:r.ZL(),blend:{color:{srcFactor:o,dstFactor:a},alpha:{srcFactor:o,dstFactor:a}}}]}};if(n>=2&&(u.multisample={count:n}),1===s)u.fragment.module=this.jU||this.WU,u.depthStencil={format:r.HL(),depthWriteEnabled:!0,depthCompare:"less-equal"};else if(2===s){u.fragment.module=this.jU||this.WU,u.fragment.targets=[];const t={compare:"always",failOp:"keep",depthFailOp:"keep",passOp:"replace"};u.depthStencil={format:r.HL(),depthWriteEnabled:!0,depthCompare:"less-equal",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:1}}else if(3===s){u.fragment.module=this.jU||this.WU;const t={compare:"equal",failOp:"keep",depthFailOp:"keep",passOp:"keep"};u.depthStencil={format:r.HL(),depthWriteEnabled:!1,depthCompare:"always",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:0}}return u}nV(t,s,e,i,n){return this.XL().createRenderPipeline(this.iV(t,s,e,i,n))}sV(t,s,e,i,n){return this.XL().createRenderPipelineAsync(this.iV(t,s,e,i,n))}FN(t,s,e,i,n){const r=af(t,s,e,i,n);let h=this.XU.get(r);return h||(h=this.nV(t,s,e,i,n),this.XU.set(r,h),h)}static ID(){return cf}static PD(){return 16*Math.ceil(ff/16)}static OD(){return pf}static kD(){return 16*Math.ceil(mf/16)}static UD(){return wf}static WD(){return 16*Math.ceil(vf/16)}static GI(t){const s=t?"f16":"f32";return`\n\t\t${uf}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static mL(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\toutput.fragColor = input.color;\n\t\t\treturn output;\n\t\t}`}static SL(t){const s=t?"f16":"f32";return`\n\t\t${uf}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static vL(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static gL(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\t\t@binding(2) @group(1) var sampler1 : sampler;\n\t\t@binding(3) @group(1) var texture1 : texture_2d<f32>;\n\t\t@binding(4) @group(1) var sampler2 : sampler;\n\t\t@binding(5) @group(1) var texture2 : texture_2d<f32>;\n\t\t@binding(6) @group(1) var sampler3 : sampler;\n\t\t@binding(7) @group(1) var texture3 : texture_2d<f32>;\n\t\t@binding(8) @group(1) var sampler4 : sampler;\n\t\t@binding(9) @group(1) var texture4 : texture_2d<f32>;\n\t\t@binding(10) @group(1) var sampler5 : sampler;\n\t\t@binding(11) @group(1) var texture5 : texture_2d<f32>;\n\t\t@binding(12) @group(1) var sampler6 : sampler;\n\t\t@binding(13) @group(1) var texture6 : texture_2d<f32>;\n\t\t@binding(14) @group(1) var sampler7 : sampler;\n\t\t@binding(15) @group(1) var texture7 : texture_2d<f32>;\n\t\t@binding(16) @group(1) var sampler8 : sampler;\n\t\t@binding(17) @group(1) var texture8 : texture_2d<f32>;\n\t\t@binding(18) @group(1) var sampler9 : sampler;\n\t\t@binding(19) @group(1) var texture9 : texture_2d<f32>;\n\t\t@binding(20) @group(1) var sampler10 : sampler;\n\t\t@binding(21) @group(1) var texture10 : texture_2d<f32>;\n\t\t@binding(22) @group(1) var sampler11 : sampler;\n\t\t@binding(23) @group(1) var texture11 : texture_2d<f32>;\n\t\t@binding(24) @group(1) var sampler12 : sampler;\n\t\t@binding(25) @group(1) var texture12 : texture_2d<f32>;\n\t\t@binding(26) @group(1) var sampler13 : sampler;\n\t\t@binding(27) @group(1) var texture13 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar texXy : vec2<f32> = input.fragUV.xy;\n\t\t\tvar texIndex : u32 = input.texIndex;\n\t\t\tvar c : vec4<f32>;\n\n\t\t\tlet dx = dpdx(texXy);\n\t\t\tlet dy = dpdy(texXy);\n\t\t\t\n\t\t\tif (texIndex <= 6)\n\t\t\t{\n\t\t\t\tif (texIndex <= 2)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 0)\t\t\t{\tc = textureSampleGrad(texture0, sampler0, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 1)\t\t{\tc = textureSampleGrad(texture1, sampler1, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture2, sampler2, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 4)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 3)\t\t{\tc = textureSampleGrad(texture3, sampler3, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture4, sampler4, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex <= 5)\t\t{\tc = textureSampleGrad(texture5, sampler5, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture6, sampler6, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (texIndex <= 9)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 7)\t\t\t{\tc = textureSampleGrad(texture7, sampler7, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 8)\t\t{\tc = textureSampleGrad(texture8, sampler8, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture9, sampler9, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 11)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 10)\t\t{\tc = textureSampleGrad(texture10, sampler10, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture11, sampler11, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 12)\t\t{\tc = textureSampleGrad(texture12, sampler12, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture13, sampler13, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toutput.color = c * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static xL(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static ML(){return"\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\t\t\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar pos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-1.0, 1.0),\n\t\t\t\tvec2<f32>(1.0, 1.0),\n\t\t\t\tvec2<f32>(-1.0, -1.0),\n\t\t\t\tvec2<f32>(1.0, -1.0));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = pos[input.VertexIndex];\n\t\t\toutput.Position = vec4<f32>(p, 0.0, 1.0);\n\t\t\toutput.fragUV = p / 2.0 + 0.5;\n\t\t\treturn output;\n\t\t}"}static bL(){return"\n\t\t@binding(0) @group(0) var sampler0 : sampler;\n\t\t@binding(1) @group(0) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>\n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, vec2<f32>(input.fragUV.x, 1.0 - input.fragUV.y));\n\t\t\treturn output;\n\t\t}"}DL(t){t||(t=this.fb.oN());let s=this.YU.get(t);return s||(s=this.XL().createRenderPipeline({label:"<mipmap generator>",layout:"auto",vertex:{module:this.JU,entryPoint:"main"},primitive:{topology:"triangle-strip",stripIndexFormat:"uint16"},fragment:{module:this.WU,entryPoint:"main",targets:[{format:t,blend:{color:{srcFactor:"one",dstFactor:"zero"},alpha:{srcFactor:"one",dstFactor:"zero"}}}]}}),this.YU.set(t,s)),s}static GL(){return`\n\t\t${uf}\n\n\t\tstruct PointData {\n\t\t\tdata : array<vec4<f32>>\n\t\t};\n\t\t@binding(3) @group(0) var<storage> pointBuffer : PointData;\n\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar normPos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, 0.5),\n\t\t\t\tvec2<f32>(-0.5, 0.5));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = normPos[input.VertexIndex % u32(4)];\n\t\t\tvar pointData : vec4<f32> = pointBuffer.data[input.VertexIndex / u32(4)];\n\n\t\t\tvar size : f32 = pointData.z;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(p * size + pointData.xy, uniforms.zElevation, 1.0);\n\t\t\toutput.pointOpacity = pointData.w;\n\n\t\t\tvar pointTexMin : vec2<f32> = min(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pointTexMax : vec2<f32> = max(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pn : vec2<f32> = p + vec2<f32>(0.5, 0.5);\n\t\t\tvar pointCoord : vec2<f32> = select(vec2<f32>(1.0 - pn.y, pn.x), pn, uniforms.pointTexEnd.x > uniforms.pointTexStart.x);\n\n\t\t\toutput.fragUV = mix(pointTexMin, pointTexMax, pointCoord);\n\t\t\treturn output;\n\t\t}`}static TL(t){return`\n\t\t${df}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32,\n\t\t\t@builtin(position) fragPos : vec4<f32>\n\t\t};\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * uniforms.pointColor * input.pointOpacity;\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static _L(t){return`\n\t\t${df}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar halfPixelSize : vec2<f32> = vec2<f32>(0.5, 0.5) / vec2<f32>(textureDimensions(texture0));\n\n\t\t\tvar tile : vec2<f32> = floor(input.fragUV);\n\t\t\tvar tex : vec2<f32> = fract(input.fragUV);\n\t\t\tvar tileOrigin : vec2<f32> = uniforms.srcRectStart + tile * (uniforms.tileSize + uniforms.tileSpacing);\n\t\t\tvar lowerBound : vec2<f32> = tileOrigin + halfPixelSize;\n\t\t\tvar upperBound : vec2<f32> = tileOrigin + uniforms.tileSize - halfPixelSize;\n\n\t\t\toutput.color = textureSampleLevel(texture0, sampler0, clamp(tex, lowerBound, upperBound), 0.0) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static OI(t){return`\n${df}\n\n%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n%%FRAGMENTINPUT_STRUCT%%\n\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>,\n\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n};\n\n%%C3_UTILITY_FUNCTIONS%%\n\nconst PI : f32 = 3.1415926;\n\nfn cospVec4(a : vec4<f32>, b : vec4<f32>, x : f32) -> vec4<f32>\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nfn randVec3(seed : vec2<f32>) -> vec3<f32>\n{\n\treturn vec3<f32>(\n\t\tfract(sin(dot(seed.xy, vec2<f32>(12.9898,78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.yx, vec2<f32>(12.9898,-78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.xy, vec2<f32>(-12.9898,-78.233))) * 43758.5453));\n}\n\nfn sampleTile(tile : vec2<f32>, uv : vec2<f32>, ddx : vec2<f32>, ddy : vec2<f32>) -> vec4<f32>\n{\n\tvar posRandom = uniforms.tileSize;\n\tvar angleRandom = uniforms.outlineThickness;\n\tvar pixelSize = c3_getPixelSize(texture0);\n\t\n\tvar rand = (randVec3(round(tile)) - 0.5) * 2.0;\n\t\n\tvar angle = angleRandom * rand.z * PI;\n\tvar sin_a = sin(angle);\n\tvar cos_a = cos(angle);\n\tvar aspect = pixelSize.x / pixelSize.y;\n\n\tvar mid = tile + vec2<f32>(0.5, 0.5);\n\tvar dp = uv - mid;\n\tdp.x /= aspect;\n\tvar r = vec2<f32>(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvar p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\treturn textureSampleGrad(texture0, sampler0, p, ddx, ddy);\n}\n\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\n\tvar output : FragmentOutput;\n\t\n\tvar blendMarginX = uniforms.tileSpacing.x;\n\tvar blendMarginY = uniforms.tileSpacing.y;\n\t\n\tvar tile = floor(input.fragUV);\n\tvar tex = fract(input.fragUV);\n\tvar ddx = dpdx(input.fragUV);\n\tvar ddy = dpdy(input.fragUV);\n\t\n\tvar curTile = sampleTile(tile, input.fragUV, ddx, ddy);\n\t\n\tvar inLeftMargin = (tex.x < blendMarginX);\n\tvar inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tvar inTopMargin = (tex.y < blendMarginY);\n\tvar inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tvar leftTile = sampleTile(tile + vec2<f32>(-1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tvar leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =     sampleTile(tile + vec2<f32>(0.0,  -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftTile = sampleTile(tile + vec2<f32>(-1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =     sampleTile(tile + vec2<f32>(0.0,  1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftTile = sampleTile(tile + vec2<f32>(-1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tvar rightTile = sampleTile(tile + vec2(1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tvar rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =      sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightTile = sampleTile(tile + vec2<f32>(1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =      sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightTile = sampleTile(tile + vec2<f32>(1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tvar topTile = sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tvar bottomTile = sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutput.color = curTile;\n\t}\n\t\n\toutput.color *= vec4<f32>(input.fragColor);\n\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\treturn output;\n}\n`}static IL(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = vec4<f32>(input.fragColor);\n\t\t\treturn output;\n\t\t}"}static CL(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\tfn fromLinear(linearRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (linearRGB < vec3<f32>(0.0031308));\n\t\t\tvar higher : vec3<f32> = vec3<f32>(1.055) * pow(abs(linearRGB), vec3<f32>(1.0/2.4)) - 0.055;\n\t\t\tvar lower : vec3<f32> = linearRGB * 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\tfn toLinear(sRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (sRGB < vec3<f32>(0.04045));\n\t\t\tvar higher : vec3<f32> = pow(abs((sRGB + 0.055) / 1.055), vec3<f32>(2.4));\n\t\t\tvar lower : vec3<f32> = sRGB / 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar linearGrad : vec3<f32> = mix(toLinear(vec3<f32>(input.fragColor.rgb)), toLinear(uniforms.color2.rgb), vec3<f32>(input.fragUV.x));\n\n\t\t\tvar a : f32 = mix(f32(input.fragColor.a), uniforms.color2.a, input.fragUV.x);\n\t\t\toutput.color = vec4<f32>(fromLinear(linearGrad) * a, a);\n\t\t\treturn output;\n\t\t}\n\t\t`}static RL(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar grad : f32 = input.fragUV.x / (1.0 - input.fragUV.y);\n\t\t\toutput.color = vec4<f32>(input.fragColor) * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);\n\t\t\treturn output;\n\t\t}\n\t\t`}static PL(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\n\t\t\tvar f : f32 = step(diffSq.x + diffSq.y, 0.25);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}static EL(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\n\t\t\tvar innerF : f32 = step(distSq, 0.25);\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm * uniforms.outlineThickness;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\t\t\tvar outerF : f32 = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static FL(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\n\t\t\tvar f : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}`}static AL(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar pxNorm : vec2<f32> = uniforms.pixelSize * norm;\n\t\t\tvar innerEdge1 : vec2<f32> = halfNorm - pxNorm;\n\t\t\tvar innerEdge1Sq : vec2<f32> = innerEdge1 * innerEdge1;\n\n\t\t\tvar innerF : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\n\n\t\t\tvar innerEdge2 : vec2<f32> = halfNorm - pxNorm * uniforms.outlineThickness;\n\t\t\tvar innerEdge2Sq : vec2<f32> = innerEdge2 * innerEdge2;\n\t\t\tvar innerEdge3 : vec2<f32> = halfNorm - pxNorm * (uniforms.outlineThickness + 1.0);\n\t\t\tvar innerEdge3Sq : vec2<f32> = innerEdge3 * innerEdge3;\n\n\t\t\tvar outerF : f32 = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static OL(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar f : f32 = 1.0 - abs(input.fragUV.y - 0.5) * 2.0;\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}}}{const Gf=self._s,_f=new Set(["nearest","bilinear","trilinear"]),If=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Cf=self.GPUTextureUsage,Rf={wT:"clamp-to-edge",vT:"clamp-to-edge",xT:"trilinear",bT:0,TT:!0,rV:!1,oG:!1,hV:!1,oV:!1,lG:0,width:-1,height:-1},Pf=[[1,["r8unorm","r8snorm","r8uint","r8sint","stencil8"]],[2,["r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","depth16unorm"]],[3,["depth24plus"]],[4,["r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2uint","rgb10a2unorm","rg11b10ufloat","depth24plus-stencil8","depth32float"]],[8,["rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float"]],[16,["rgba32uint","rgba32sint","rgba32float"]],[5,["depth32float-stencil8"]]],Ef=new Map;for(const[Of,Df]of Pf)for(const kf of Df)Ef.set(kf,Of);const Ff=new Set,Af={_T:!0,flipY:!1};Gf.$S.oL=class{constructor(t,s){this.fb=t,this.RT=null,this.aV="",this.lV=null,this.uV=null,this.cV=null,this.fV=null,this.Vy=0,this.Wy=0,this.PT=!0,this.ET="clamp-to-edge",this.FT="clamp-to-edge",this.AT="trilinear",this.OT=0,this.kT=!1,this.jp=0,this.dV=!1,this.yG=!1,this.pV=!1,this.mV=!1,this.SG=0,this.gV=0,this.yV=!0,this.SV=null,this.wV=0,this.vV=!!s,this.vV&&(this.aV=this.fb.ZL(),this.dV=!0,this.yG=this.fb.sN(),this.AT=this.fb.hN(),this.uV=this.fb.JL({xT:this.AT}))}xV(t){if(this.ET=t.wT,this.FT=t.vT,this.AT=t.xT,this.OT=t.bT,this.kT=!!t.TT&&this.fb.sb()&&"nearest"!==t.xT,this.dV=!!t.rV,this.yG=!!t.oG,this.pV=!!t.hV,this.mV=!!t.oV,this.SG=this.fb.xB(t.lG),!_f.has(this.AT))throw new Error("invalid sampling");if(!If.has(this.ET)||!If.has(this.FT))throw new Error("invalid wrap mode");if(this.SG>=2&&this.yG)throw new Error("invalid use of multisampling");"nearest"===this.AT&&(this.OT=0),this.uV=this.fb.JL({wT:this.ET,vT:this.FT,xT:this.AT,bT:this.OT}),this.bV(),this.jp=1}bV(){const t=this.fb,s=t.XL();this.gV=0,this.dV?(this.gV=Cf.RENDER_ATTACHMENT,this.yG&&(this.gV|=Cf.TEXTURE_BINDING),this.mV&&(this.gV|=Cf.COPY_DST),this.aV=this.fb.ZL()):(this.gV=Cf.COPY_DST|Cf.TEXTURE_BINDING,this.aV=this.fb.oN()),this.pV&&(this.gV|=Cf.COPY_SRC),this.RT=s.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:this.MV(),format:this.aV,usage:this.gV,sampleCount:this.SG>=2?this.SG:1}),this.lV=this.RT.createView();const e=[],i=Gf.$S.cL.uL();for(let t=0;t<i;++t)e.push({binding:2*t,resource:this.uV},{binding:2*t+1,resource:this.lV});this.dV&&!this.yG||(this.cV=s.createBindGroup({layout:t.nN(),entries:e}),this.fV=s.createBindGroup({layout:t.rN(),entries:[{binding:0,resource:this.fb.JL({xT:this.fb.hN()})},{binding:1,resource:this.lV}]})),this.TV()&&this.mN(!0),Ff.add(this)}GV(){Ff.delete(this),this.SV&&this.SV.Hn(),this.mN(!1),this.RT.destroy(),this.RT=null,this.lV=null,this.cV=null,this.fV=null}static dN(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas}static _V(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||t instanceof ImageData}IV(t){return[t.width||t.videoWidth,t.height||t.videoHeight]}MG(t,s){if(t&&!Gf.$S.oL.dN(t))throw new TypeError("invalid texture source");if(s=Object.assign({},Rf,s),this.RT)throw new Error("already created texture");if(this.PT=!0,t){const[s,e]=this.IV(t);this.Vy=s,this.Wy=e}else if(this.Vy=s.width,this.Wy=s.height,this.Vy<=0||this.Wy<=0)throw new Error("invalid texture size");if(this.xV(s),this.dV||this.yG)throw new Error("static texture cannot be render target");t&&this.CV(t)}CV(t,s=!0){if(this.kT)this.RV(t,this.MV(),s);else{const e=this.fb.XL(),i=e.createCommandEncoder(),n=e.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:1,format:this.aV,usage:Cf.COPY_SRC|Cf.COPY_DST|Cf.RENDER_ATTACHMENT});this.PV(n,t,0,s),i.copyTextureToTexture({texture:n,mipLevel:0},{texture:this.RT,mipLevel:0},[this.Vy,this.Wy,1]),e.queue.submit([i.finish()]),n.destroy()}}PV(t,s,e,i=!0){const[n,r]=this.IV(s);this.fb.XL().queue.copyExternalImageToTexture({source:s},{texture:t,mipLevel:e,premultipliedAlpha:!!i},[n,r,1])}MV(){return this.kT?Math.floor(Math.log2(Math.max(this.Vy,this.Wy))+1):1}RV(t,s,e=!0){const i=this.fb.XL(),n=i.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:this.MV(),format:this.aV,usage:Cf.COPY_DST|Cf.COPY_SRC|Cf.TEXTURE_BINDING|Cf.RENDER_ATTACHMENT}),r=this.fb.DL(),h=r.getBindGroupLayout(0),o=this.fb.JL({xT:"bilinear"}),a=i.createCommandEncoder();this.PV(n,t,0,e),a.copyTextureToTexture({texture:n,mipLevel:0},{texture:this.RT,mipLevel:0},[this.Vy,this.Wy,1]);const l=[];for(let t=0;t<s;++t)l.push(n.createView({baseMipLevel:t,mipLevelCount:1}));let u=this.Vy,c=this.Wy;for(let t=1;t<s;++t){u/=2,c/=2;const s=Math.max(Math.floor(u),1),e=Math.max(Math.floor(c),1),f=a.beginRenderPass({colorAttachments:[{view:l[t],loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=i.createBindGroup({layout:h,entries:[{binding:0,resource:o},{binding:1,resource:l[t-1]}]});f.setPipeline(r),f.setBindGroup(0,d),f.draw(4),f.end(),a.copyTextureToTexture({texture:n,mipLevel:t},{texture:this.RT,mipLevel:t},[s,e,1])}i.queue.submit([a.finish()]),n.destroy()}JT(t,s,e){if(e=Object.assign({},Rf,e),this.RT)throw new Error("already created texture");this.PT=!1,this.Vy=t,this.Wy=s,this.xV(e)}async KT(t,s){if(!Gf.$S.oL.dN(t)&&!Gf.$S.oL._V(t))throw new Error("invalid texture source");if(!this.RT||this.jp<=0)throw new Error("texture not created");if(this.PT)throw new Error("cannot update static texture");if(s=Object.assign({},Af,s),(Gf.$S.oL._V(t)||s.flipY||!s._T)&&(t=await createImageBitmap(t,{premultiplyAlpha:s._T?"premultiply":"none",imageOrientation:s.flipY?"flipY":"none"}),!this.RT))return;this.fb.Kx();const[e,i]=this.IV(t);this.Vy===e&&this.Wy===i||(this.GV(),this.Vy=e,this.Wy=i,this.bV(),this.fb.yB(this)),this.CV(t,s._T)}ZT(){if(this.jp>0)throw new Error("texture still has references");if(!this.RT)throw new Error("already deleted texture");this.GV()}jL(){this.yV=!1,this.mN(!1)}TV(){return this.PT&&this.yV&&!this.dV}mN(t){this.fb.mN(this,t)}EV(t,s){if(this.SV)throw new Error("already in a group");this.SV=t,this.wV=s,this.mN(!1)}FV(){this.SV=null,this.wV=0,this.TV()&&this.mN(!0)}WL(){return this.cV}zL(){return this.fV}pB(){return null!==this.SV?this.SV.AV():this.TV()?(this.fb.yN(this),null!==this.SV?this.SV.AV():null):null}gB(){return this.wV}by(){return this.vV?this.fb.by():this.Vy}Ty(){return this.vV?this.fb.Ty():this.Wy}Ob(){return this.fb}tG(){return this.RT}LN(){return this.lV}hB(){return this.aV}JL(){return this.uV}OV(){return this.AT}NG(){return"nearest"!==this.AT}cN(){return this.dV}UG(){return this.yG}oB(){return this.pV}sG(){this.jp++}eG(){if(this.jp<=0)throw new Error("no more references");this.jp--}iG(){return this.jp}vB(){return this.gV}$L(t,s){this.gV=t,this.aV=s}vN(){const t=this.fb,s=t.XL();this.RT=t.QL(),this.lV=t.tN(),t.sN()&&(this.fV=s.createBindGroup({layout:t.rN(),entries:[{binding:0,resource:this.uV},{binding:1,resource:this.lV}]}))}TN(){this.RT=null,this.lV=null,this.fV=null}rG(){let t=this.by()*this.Ty()*Gf.$S.oL.aN(this.hB());return this.kT&&(t+=Math.floor(t/3)),t}static nM(){}static hG(){return Ff.values()}static aN(t){const s=Ef.get(t);return"number"==typeof s?s:NaN}}}{const Lf=self._s;Lf.$S.cL=class{constructor(t,s){if(s.length<2)throw new Error("invalid multi-texture group");this.fb=t,this.DV=s,this.kV=null;for(let t=0,e=s.length;t<e;++t)s[t].EV(this,t);s.length<Lf.$S.cL.uL()&&this.fb.gN(this,!0),this.LV()}Hn(){this.fb.gN(this,!1);for(const t of this.DV)t.FV();this.NV(),Lf.wh(this.DV),this.fb=null}LV(){this.NV();const t=this.fb.XL(),s=[],e=Lf.$S.cL.uL();for(let t=0;t<e;++t){const e=this.DV[Math.min(t,this.DV.length-1)];s.push({binding:2*t,resource:e.JL()},{binding:2*t+1,resource:e.LN()})}this.kV=t.createBindGroup({layout:this.fb.nN(),entries:s})}NV(){null!==this.kV&&this.fb.SB(this.kV),this.kV=null}AV(){return this.kV}static uL(){return 14}}}{const Nf=self._s,Bf=self.hs,Uf=(Bf.ys,Bf.fs),Vf={xT:"trilinear",alpha:!0,depth:!1,oG:!0,hV:!1,oV:!1,aG:!0,lG:0},Wf=new Set;Nf.$S.aL=class{constructor(t,s){this.fb=t,this.BV=!!s,this.gG=!!s&&t.lN(),this.UV=null,this.pG=!0,this.SG=0,this.VV=!1,this.WV=Nf.jn(Nf.Mo),this.wG=Uf.create(),this.vG=0,this.xG=0,this.bG=0,this.BV&&(this.UV=Nf.jn(Nf.$S.oL,t,!0))}MG(t,s,e){if(e=Object.assign({},Vf,e),this.UV)throw new Error("already created render target");if(this.gG=!!e.depth,this.pG=!!e.aG,this.SG=this.fb.xB(e.lG),this.SG>=2&&e.oG)throw new Error("invalid use of multisampling");this.UV=this.fb.GG(t,s,{xT:e.xT,TT:!1,rV:!0,oG:e.oG,hV:e.hV,oV:e.oV,lG:this.SG}),this.TG(),Wf.add(this)}ZT(){Wf.delete(this),this.UV.GV(),this.UV=null,this.fb=null}CG(t,s){if(t===this.by()&&s===this.Ty())return;const e=this.UV.OV(),i=this.UV.UG(),n=this.UV.oB();this.UV.GV(),this.UV=null,this.UV=this.fb.GG(t,s,{xT:e,TT:!1,rV:!0,oG:i,hV:n}),this.TG()}LN(){return this.BV?this.fb.tN():this.UV.LN()}TG(){this.fb.fv(this.wG,this.by()/this.Ty()),this.vG=this.fb.av(),this.xG=this.fb.nv(),this.bG=this.fb.hv()}WG(){return this.pG}uN(){return this.BV}VG(){return this.gG}by(){return this.BV?this.fb.by():this.UV.by()}Ty(){return this.BV?this.fb.Ty():this.UV.Ty()}kG(){if(this.UV)return this.UV;throw new Error("no texture")}Ob(){return this.fb}zG(){return this.SG}LG(){return this.fb.av()===this.vG&&this.fb.nv()===this.xG&&this.fb.hv()===this.bG||this.TG(),this.wG}NG(){return this.UV.NG()}UG(){return this.UV.UG()}oB(){return this.UV.oB()}HG(t){return"nearest"!==(t=Object.assign({},Vf,t)).xT===this.NG()&&!!t.oG===this.UG()&&!!t.hV===this.oB()&&!!t.depth===this.VG()&&("number"==typeof t.width||"number"==typeof t.height?!this.WG()&&this.by()===Math.floor(t.width)&&this.Ty()===Math.floor(t.height):this.WG())}UN(t){this.VV=!!t}xN(){return this.VV}NN(){return this.WV}static nM(){}static XG(){return Wf.values()}}}self._s.$S._N=class{constructor(t,s){this.fb=t,this.Hw=this.fb.Zx(),this.zV=s;const e=this.fb.XL();this.jV=e.createQuerySet({count:this.zV,type:"timestamp"});const i=self.GPUBufferUsage;this.HV=e.createBuffer({size:this.JV(),usage:i.QUERY_RESOLVE|i.COPY_SRC}),this.$V=e.createBuffer({size:this.JV(),usage:i.COPY_DST|i.MAP_READ}),this.zE=null}JV(){return 8*this.zV}VN(){return this.jV}zN(t){t.resolveQuerySet(this.jV,0,this.zV,this.HV,0),t.copyBufferToBuffer(this.HV,0,this.$V,0,this.JV())}async HN(){const t=this.JV();await this.$V.mapAsync(self.GPUMapMode.READ,0,t);const s=this.$V.getMappedRange(0,t);this.zE=new BigUint64Array(s.slice(0)),this.$V.destroy(),this.$V=null,this.HV.destroy(),this.HV=null,this.jV.destroy(),this.jV=null}JE(){return null!==this.zE}$E(){if(!this.zE)throw new Error("not yet got result");return this.zE}Zx(){return this.Hw}};{const zf=self._s,jf={qV:null,XV:null,YV:null,getTime:null,KV:null};zf.$S.ZV=class{constructor(t){t=Object.assign({},jf,t),this.QV=t.qV,this.tW=t.XV,this.sW=t.YV,this.eW=t.getTime,this.iW=t.KV,this.nW=null,this.rW=new Set}hW(t){this.rW.add(t)}oW(t){this.rW.delete(t)}nM(){this.nW=null;for(const t of this.rW)t.nM()}aW(t){return this.QV?this.QV(t):[t.by(),t.Ty()]}GO(t){return this.tW(t)}lW(t,s){this.sW(t,s)}uW(){return this.eW()}Ap(t){this.iW(t)}cW(t,s,e){return s=Math.floor(s),e=Math.floor(e),!this.nW||this.nW.by()===s&&this.nW.Ty()===e||(t.PG(this.nW),this.nW=null),null===this.nW&&(this.nW=t.CO(null,{width:s,height:e,xT:"nearest",TT:!1})),this.nW}}}{const Hf=self._s,Jf=(self.assert,self.hs.fs),$f=Hf.jn(Hf.Rect),qf=Hf.jn(Hf.Rect),Xf=Hf.jn(Hf.Rect),Yf=Hf.jn(Hf.Rect),Kf=Jf.create(),Zf=Jf.create(),Qf={fW:null,dW:null,pW:null,mW:!1},td={gW:null,yW:!1,SW:!1,wW:!1,vW:!1,xW:!1,bW:!1};Hf.$S.MW=class{constructor(t,s){s=Object.assign({},Qf,s),this.Wp=t,this.TW=s.fW,this.GW=s.dW,this._W=s.pW,this.IW=null,this.RW=[],this.PW=[],this.EW=[],this.FW=!1,this.Yb=0,this.AW=!1,this.OW=!1,this.DW=!1,this.kW=!1,this.LW=!1,this.NW=!1,this.bF=!1,this.BW=!1,this.UW=!1,this.VW=!1,this.WW=!1,this.zW=!1,this.jW=0,this.HW=[null,null,null],this.JW=!!s.mW,this.$W=0,this.qW=0,this.XW=0,this.YW=0,this.KW=null,this.ZW=null,this.QW=Hf.jn(Hf.Rect),this.tz=Hf.jn(Hf.Rect),this.sz=Hf.jn(Hf.Rect),this.ez=Hf.jn(Hf.Rect),this.iz=Hf.jn(Hf.Rect),this.nz=1,this.rz=1,this.hz=0,this.oz=0,this.az=null,this.lz=null,this.uz=0,this.cz=0,this.fz=0,this.dz=0,this.pz=!1,this.wG=Jf.create(),this.mz=Jf.create(),this.Wp.hW(this)}Hn(){this.Wp.oW(this),Hf.wh(this.EW),Hf.wh(this.RW),Hf.wh(this.PW),this.KW=null,this.ZW=null,this.TW=null,this.GW=null,this._W=null}nM(){this.FW=!0,Hf.wh(this.EW),Hf.wh(this.RW),Hf.wh(this.PW)}gz(){return this.FW}yz(t,s){if(s=Object.assign({},td,s),Hf.wh(this.EW),this.$W=0,this.qW=0,this.AW=!1,this.OW=!1,this.DW=!1,this.kW=!1,this.LW=!1,this.NW=!1,this.jW=0,this.zW=!!s.vW,this.WW=!!s.bW,this.FW=!1,Hf.Th(this.RW,t),0===t.length)return;if(s.gW){if(s.gW.length!==t.length)throw new Error("incorrect indexMap length");Hf.Th(this.PW,s.gW)}else{Hf.wh(this.PW);for(let s=0,e=t.length;s<e;++s)this.PW.push(s)}for(const s of t)this.$W+=s.kb(),this.qW+=s.Lb(),s.Wb()&&(this.AW=!0),s.jb()&&(this.OW=!0),s.zb()&&(this.DW=!0),s.Nb()&&(this.kW=!0),s.$b()&&(this.LW=!0);this.NW=this.Sz(t[0].Ob());const e=this.wz(t[0],s),i=this.vz(t.at(-1),s);if(1===t.length&&!e&&!i)return void(this.VW=!0);this.VW=!1;let n=0;e&&(this.jW=1,this.EW.push(Hf.jn(Hf.$S.MW.bz.xz,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||e){let t=1===n?2:1;s!==r-1||i||(t=0),this.jW=Math.max(this.jW,t),this.EW.push(Hf.jn(Hf.$S.MW.bz.Mz,this,n,t,s)),n=t}else this.jW=1,this.EW.push(Hf.jn(Hf.$S.MW.bz.Tz,this,-1,1,s)),n=1;i&&this.EW.push(Hf.jn(Hf.$S.MW.bz.Gz,this,n,0))}wz(t,s){return!!(s.yW||t.Bb()||s.wW&&!t.Vb()||t.jb()&&!this.WW||0!==this.$W||0!==this.qW)||(t.Ob().nb()?t.zb()&&(s.xW||s.vW)||t.Hb()&&s.vW:t.zb()&&!this.NW&&s.xW)}vz(t,s){return!!s.SW||(t.Ob().nb()?t.zb()||t.Nb():(t.zb()||t.Nb())&&this._z())}Sz(t){return t.dv()&&this.DW&&!this.kW}Iz(t,s,e){t.dv()&&null===s&&(s=t.rB()),this.az=s,this.KW=e.Cz||null,this.ZW=e.Rz||null,this.Yb=e.Pz||0,this.nz=e.devicePixelRatio||1,this.rz=e.OB||1,this.hz=e.DB||0,this.oz="number"==typeof e.time?e.time:this.Wp.uW(),this.bF=!1,t.OA(),this.AW&&this.Ez();let i=!1;if(this.Fz()&&(this.Az(t,e),i=!0,this.lz=this.Wp.cW(t,this.XW,this.YW),$f.m(this.tz),$f.vl(),t.dv()&&t.WN(this.az),t.wB(this.az.kG(),this.lz,$f.Za(),$f.Qa(),$f.width(),$f.height())),this.VW)this.Oz(t,e);else if(i||this.Az(t,e),0!==this.sz.width()||0!==this.sz.height()){t.$A(),t.Hx(),t.VA(),t.Qv(0),t.sx(0),this.IW=e.Dz||null,this.uz=e.kz||0,this.cz=e.Lz||0,this.fz=e.Nz||0,this.dz=e.Bz||0,this.pz=!!e.Uz,this.Vz(t),this.HW[0]=s,this.HW[1]=this.jW>=1?this.Wz():null,this.HW[2]=2===this.jW?this.Wz():null;for(const s of this.EW){const e=this.zz(s.jz()),i=this.zz(s.Jz());t.dv()?s.$z(t,e,i):s.qz(t,e,i)}t.zA(null),this.HW[1]&&this.Xz(this.HW[1]),this.HW[2]&&this.Xz(this.HW[2]),this.HW.fill(null),this.Yz(t),this.az=null,this.lz=null,this.KW=null,this.ZW=null,this.IW=null}}Az(t,s){const[e,i]=this.Wp.aW(t);this.Kz(t,e,i),this.Zz(s)}Kz(t,s,e){if(s<=0||e<=0)throw new Error("invalid draw size");this.XW===s&&this.YW===e||this.Qz(t,s,e,0,0,this.wG,this.mz),this.XW=s,this.YW=e}Qz(t,s,e,i,n,r,h){const o=s/2+i,a=e/2+n;t.fv(r,s/e);const l=t.gv(o,a,t.Zw(e),o,a,0,e);Jf.m(h,l)}Zz(t){if(this.QW.m(t.AB),t.tj?this.tz.m(t.tj):this.tz.set(0,0,this.XW,this.YW),this.VW){const s=t.kz??0,e=t.Lz??0;this.tz.offset(-s,-e)}this.sz.m(this.tz),this.sz.St(this.XW,this.YW);const s=this.rz*this.nz;this.tz.cl(this.$W*s,this.qW*s),this.iz.m(this.tz),this.iz.St(this.XW,this.YW),this.tz.xl(0,0,this.XW,this.YW),this.ez.m(this.tz),this.ez.St(this.XW,this.YW)}Vz(t){if(this.BW=t.bO(),this.UW=t.NO(),this.WW)t.xO(!1),this.OW&&t.MO(!0);else{if($f.m(this.tz),t.nb()){const t=this.rz*this.nz;$f.cl(Math.max(this.$W,1)*t,Math.max(this.qW,1)*t),$f.vl(),$f.Yn(0,0,this.XW,this.YW)}else $f.vl();t.TO($f.Za(),$f.Qa(),$f.width(),$f.height(),this.YW)}}sj(t){t.VA(),this.WW||(this.UW?t.BO(!1):t.xO(!1),this.OW&&t.MO(!0)),t.dv()&&t.fB(!0)}Yz(t){t.MO(!1),this.UW?t.LO(this.BW):t.xO(this.BW),this.WW||t._O(),t.dv()&&t.fB(!1),this.bF=t.DA()}ej(){this.iz.Yn(0,0,1,1)}zz(t){return t<0?null:this.HW[t]}Wz(){return this.Wp.GO(this)}ij(){return this.az}Xz(t){this.Wp.lW(t,this)}nj(t){return this.RW[t]}rj(t){this.IW?this.IW(this,t,()=>this.TW(t,this)):this.TW(t,this),this.VW||this.sj(t)}hj(t){if(this.WW)return!0;if(0!==this.uz||0!==this.cz||0!==this.fz||0!==this.dz)return!1;const[s,e]=t.hO(t.GO());return s===this.XW&&e===this.YW}oj(t,s){let e=this.wG,i=this.mz;if(s&&!this.hj(t)){let s,n;e=Kf,i=Zf,0!==this.fz&&0!==this.dz?[s,n]=[this.fz,this.dz]:[s,n]=t.hO(t.GO()),this.Qz(t,s,n,this.uz,this.cz,e,i),this.WW||t._O()}t.IA(e),t.AA(i)}Ez(){this.Wp.Ap(this)}aj(t,s){return this._W(this.PW[t],s)}lj(t,s){let e=this.iz,i=this.ez,n=this.sz;t.nb()&&(qf.m(e),qf.pl(1),e=qf,Xf.m(i),Xf.pl(1),i=Xf,Yf.m(n),Yf.pl(1),n=Yf),this.uj(t,s,i,n,e,1/this.XW,1/this.YW)}cj(t,s){let e=this.ez,i=this.sz,n=1/this.XW,r=1/this.YW;if(this.GW){let{fj:t,dj:s,pj:h}=this.GW(this.KW);t||($f.set(0,0,0,0),t=$f),s||(s=this.XW),h||(h=this.YW),e=t,i=t,n=1/s,r=1/h}else t.nb()&&(Xf.m(e),Xf.pl(1),e=Xf,Yf.m(i),Yf.pl(1),i=Yf);let h=this.iz;t.nb()&&(h=qf,h.m(this.iz),h.pl(1)),this.uj(t,s,e,i,h,n,r),t.dv()&&this.LW&&t.WB(this.zW)}mj(t){return this.DW?t.dv()?this.Fz()?this.lz:this.az.kG():this.az:null}uj(t,s,e,i,n,r,h){t.gO(this.mj(t),n,e,i,this.QW,r,h,this.nz,this.rz,this.hz,this.oz),t.yO(this.aj(s,t))}Oz(t,s){const e=this.RW[0],i=t.bO(),n=e.jb();n&&(t.xO(!1),t.MO(!0),this.iz.set(0,0,1,1),this.sz.set(0,0,1,1)),t.bv(e),t.eM(this.Yb),t.EO(this.az),t.Hx();let r=0,h=1;if(this.sz.set(0,0,1,1),e.Hb()&&this.GW){const{fj:t,dj:s,pj:e}=this.GW(this.KW);t&&this.sz.m(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(e)?1/e:0}else{const[s,e]=this.Wp.aW(t);r=1/s,h=1/e}s.AB?this.QW.m(s.AB):this.QW.set(0,0,0,0),t.gO(this.mj(t),this.iz,this.sz,this.sz,this.QW,r,h,this.nz,this.rz,this.hz,this.oz),t.yO(this.aj(0,t)),t.dv()&&this.LW&&t.WB(this.zW),t.Qv(0),this.rj(t),n&&(t.MO(!1),t.xO(i))}Fz(){return this.NW}_z(){return!this.NW}gj(){return this.DW}yj(){return!!this.VW&&!this.Fz()}Sj(){return this.WW}wj(){return this.KW}vj(){return this.ZW}xj(){return this.Yb}bj(){return this.pz}DA(){return this.bF}Mj(){return this.tz}Tj(){return this.ez}Gj(){return this.JW}async _j(t,s,e){}}}self._s.$S.MW.bz=class{constructor(t,s,e,i=-1){this.Ij=t,this.Cj=s,this.Rj=e,this.US=i}Pj(){return this.Ij}jz(){return this.Cj}Jz(){return this.Rj}Ej(){return this.US}nI(){return this.Pj().nj(this.Ej())}qz(t,s,e){}$z(t,s,e){}};{const sd=self._s;sd.$S.MW.bz.xz=class extends sd.$S.MW.bz{constructor(t,s,e,i){super(t,s,e,i)}qz(t,s,e){const i=this.Pj();t.$A(),t.Hx(),t.xv(),t.EO(e,i.bj()),t.SO(0,0,0,0),i.rj(t),i.ej()}$z(t,s,e){const i=this.Pj();t.$A(),t.Hx(),t.xv(),t.EO(e,!1),t.SO(0,0,0,0),i.rj(t),i.ej()}}}{const ed=self._s,id=ed.jn(ed.Rect),nd=ed.jn(ed.Cl);ed.$S.MW.bz.Gz=class extends ed.$S.MW.bz{constructor(t,s,e,i){super(t,s,e,i)}qz(t,s,e){const i=this.Pj();t.xv(),t.EO(e),i.oj(t,!0),t.eM(i.xj()),t.zA(s.kG()),nd.Xl(i.Mj()),id.m(i.Tj()),id.pl(1),t.wx(nd,id),i.Gj()&&t.OO(s)}$z(t,s,e){const i=this.Pj();t.xv(),t.EO(e,!1),i.hj(t)?nd.Xl(i.Tj()):(t.fB(!1),i.oj(t,!0),nd.Xl(i.Mj())),t.pN(null),t.eM(i.xj()),t.zA(s.kG()),i.Sj()?t.rO():t.wx(nd,i.Tj())}}}{const rd=self._s;rd.$S.MW.bz.Tz=class extends rd.$S.MW.bz{constructor(t,s,e,i){super(t,s,e,i)}qz(t,s,e){const i=this.Pj();t.EO(e,i.bj()),t.SO(0,0,0,0),t.KA(),t.bv(this.nI()),i.cj(t,this.Ej()),i.rj(t),i.ej()}$z(t,s,e){const i=this.Pj();t.EO(e,!1),t.SO(0,0,0,0),t.KA(),t.bv(this.nI()),i.cj(t,this.Ej()),i.rj(t),i.ej()}}}{const hd=self._s,od=hd.jn(hd.Rect),ad=hd.jn(hd.Cl);hd.$S.MW.bz.Mz=class extends hd.$S.MW.bz{constructor(t,s,e,i){super(t,s,e,i)}qz(t,s,e){const i=this.Pj();t.EO(e);const n=0===this.Jz();n?t.eM(i.xj()):(t.SO(0,0,0,0),t.KA()),t.bv(this.nI()),i.lj(t,this.Ej()),t.zA(s.kG()),i.oj(t,n),ad.Xl(i.Mj()),od.m(i.Tj()),od.pl(1),t.wx(ad,od),i.Gj()&&t.OO(s)}$z(t,s,e){const i=this.Pj();t.EO(e,!1),0===this.Jz()?(t.eM(i.xj()),t.pN(null),i.hj(t)?ad.Xl(i.Tj()):(t.fB(!1),i.oj(t,!0),ad.Xl(i.Mj()))):(t.SO(0,0,0,0),t.KA(),ad.Xl(i.Tj())),t.bv(this.nI()),i.lj(t,this.Ej()),t.zA(s.kG()),i.Sj()?t.rO():t.wx(ad,i.Tj())}}}{let ld=function(t,s){const e=t[0]-s[0];return 0!==e?e:t[1]-s[1]};0;const ud=self._s,cd=self.Ls;let fd=null;const dd=new Set,pd=[],md=[];let gd=!1,yd=!1,Sd=!1;const wd=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.Fj=class{constructor(t){fd=t,Object.defineProperties(this,{Aj:{value:fd.Dj().Oj(),writable:!1},kj:{value:fd.Nj().Lj(),writable:!1},Bj:{value:{},writable:!1},Uj:{value:{},writable:!1},Vj:{value:fd.Wj(),writable:!1},zj:{value:fd.jj(),writable:!1},Hj:{value:fd.Jj(),writable:!1},$j:{value:fd.qj(),writable:!1},Xj:{value:new Date(fd.Yj()),writable:!1},storage:{value:new self.Kj(fd),writable:!1},Zj:{value:fd.Qj(),writable:!1},tH:{value:fd.sH(),writable:!1},eH:{value:fd.iH(),writable:!1},xT:{value:fd.OV(),writable:!1},nH:{value:new self.rH(t),writable:!1},hH:{value:new self.oH(t),writable:!1}}),fd.aH().addEventListener("keydown",t=>{dd.has(t.key)?t.stopPropagation():dd.add(t.key)}),fd.aH().addEventListener("keyup",t=>dd.delete(t.key)),fd.Sf().addEventListener("window-blur",()=>dd.clear()),fd.Qj()&&(self.alert=t=>(gd||(gd=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}lH(t){Object.defineProperties(this.Bj,t)}uH(t){Object.defineProperties(this.Uj,t)}addEventListener(t,s){fd.aH().addEventListener(t,s)}removeEventListener(t,s){fd.aH().removeEventListener(t,s)}cH(t,...s){cd.hi(t);const e=fd.fH(),i=e.dH(t);if(!i)throw new Error(`cannot find function name '${t}'`);if(!i._u())return i.pH();if(s.length<i.mH())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${i.mH()} expected)`);const n=i.gH();let r=n.yH();const h=e.SH();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.yH())t.has(s)||(r.push(s),t.add(s));for(const s of e.wH())t.has(s)||(r.push(s),t.add(s))}return n.vH(r,i.xH(),i.bH(),i.pH(),...s)}MH(t){const s=fd.GH().TH();if(!s)throw new Error("not in a function which returns a value");switch(s._H()){case 1:"number"==typeof t&&s.IH(t);break;case 2:"string"==typeof t&&s.IH(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.IH(t)}}signal(t){cd.hi(t),fd.fH().CH(t)}RH(t){return cd.hi(t),fd.fH().PH(t)}EH(){return[fd.sH(),fd.iH()]}get FH(){return fd.AH()}get OH(){return fd.DH()}get kH(){return fd.LH()}get NH(){return fd.BH()}get UH(){return fd.VH()}get WH(){return fd.zH()}get jH(){return fd.HH()}set jH(t){cd.ei(t),fd.JH(t)}get $H(){return yd||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),yd=!0),fd.qH()}get framesPerSecond(){return fd.qH()}get XH(){return fd.YH()}get KH(){return fd.ZH()}get QH(){return fd.tJ()}get sJ(){return fd.eJ()}set sJ(t){if(!wd.has(t))throw new Error("invalid framerate mode");fd.iJ(t)}get nJ(){return fd.rJ()}set nJ(t){cd.ei(t),fd.hJ(t)}get oJ(){return fd.aJ()}set oJ(t){fd.lJ(t)}set uJ(t){fd.cJ(!!t)}get uJ(){return fd.fJ()}get dJ(){return fd.Dj().pJ()}get mJ(){return fd.Dj().gJ()}random(){return fd.yJ()}get layout(){const t=fd.SJ();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.wJ()}vJ(t){const s=fd.xJ();let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.bJ(t),!e)throw new Error("invalid layout");return e.wJ()}MJ(){return fd.xJ().TJ().map(t=>t.wJ())}GJ(t){const s=fd.xJ();let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.bJ(t),!e)throw new Error("invalid layout");s._J()||s.IJ(e)}get keyboard(){const t=fd.CJ().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get RJ(){const t=fd.CJ().RJ;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get PJ(){const t=fd.CJ().PJ;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get EJ(){const t=fd.CJ().EJ;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get rC(){return fd.AJ().FJ()}OJ(t,s){cd.hi(t),cd.hi(s),fd.DJ(t,s)}kJ(t){cd.ei(t);const s=fd.LJ(t);return s?s.NJ():null}BJ(t,s){cd.Pi(s);const e=fd.UJ();for(const s of t){const t=fd.VJ(s),e=t.WJ();pd.push([e.zJ().Ej(),e.jJ()]),md.push(t)}if(0===pd.length)return;pd.sort(ld),md.sort((t,e)=>s(t.NJ(),e.NJ()));let i=!1;for(let t=0,s=pd.length;t<s;++t){const s=md[t],n=e.HJ(pd[t][0]),r=pd[t][1],h=n.JJ();h[r]!==s&&(h[r]=s,s.WJ().$J(n,!0),n.qJ(s),i=!0)}i&&fd.XJ(),ud.wh(pd),ud.wh(md)}async YJ(t,s){Sd||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),Sd=!0);const e=new MessageChannel,i=e.port1,n=e.port2;return await fd.KJ("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),i}alert(t){return fd.KJ("runtime","alert",{message:t+(fd.Qj()?" [via Web Worker]":"")})}ZJ(t){return cd.ei(t),fd.QJ(t)}t$(t){fd.s$(t)}async e$(t,s,e){cd.oi(t),cd.Ze(s),cd.Ni(e,DOMRect),e||(e=new DOMRect(0,0,0,0));const i=fd.AJ();if(!i)return;fd.XJ();const n=await i.i$(t||"image/png",s,e.x,e.y,e.width,e.height);return await fd.n$(ud.a$.o$.h$.r$,null),n}}}{self._s,self.Ls;let vd=null;self.l$=class{constructor(t){vd=t,Object.defineProperties(this,{u$:{value:!0,writable:!1}})}c$(t){const s=self.d$.f$(t);if(!s)throw new Error("invalid IImageInfo");s.p$(vd.m$())}g$(t){return vd.so(t)}y$(t){return vd.eo(t)}S$(t){return vd.io(t)}w$(t){return vd.no(t)}v$(t){return Promise.resolve(vd.x$(t))}b$(t){return vd.M$(t)}get T$(){return vd.G$()}async _$(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}I$(...t){return vd.C$(...t)}R$(t){return vd.P$(t)}E$(t){return vd.F$(t)}get A$(){return vd.O$()}}}{const xd=self._s,bd=self.Ls;let Md=null;self.D$=class{constructor(t){Md=t,Object.defineProperties(this,{runtime:{value:Md.m$(),writable:!1}})}k$(t,s){const e=Md.m$(),i=e.VJ(t),n=e.VJ(s);return Md.L$(i,n)}N$(t,s){const e=Md.m$(),i=e.VJ(t);for(const t of s){const s=e.VJ(t);if(Md.L$(i,s))return t}return null}B$(t){const s=Md.m$().VJ(t),e=Md.U$(s);return e?e.NJ():null}V$(t,s){if(bd.ei(t),bd.ei(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Md.W$(t,s)}z$(){return Md.j$()}H$(t,s){const e=Md.m$();let i;i=Array.isArray(t)?t.map(t=>e.J$(t)):[e.J$(t)];const n=xd.Rect.Ya(s),r=[];return Md.$$(null,i,n,r),r.map(t=>t.NJ())}}}{const Td=self._s;self.Ls;let Gd=null;const _d=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Id=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["Firefox","firefox"],["Safari","safari"]]),Cd=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.rH=class{constructor(t){Gd=t,Object.defineProperties(this,{q$:{value:Td.Ks.he,writable:!1},os:{value:_d.get(Td.Ks.Zs)||"unknown",writable:!1},X$:{value:Td.Ks.Qs,writable:!1},browser:{value:Id.get(Td.Ks.te)||"unknown",writable:!1},Y$:{value:Td.Ks.se,writable:!1},K$:{value:Cd.get(Td.Ks.ie)||"unknown",writable:!1}})}get Z$(){let t=Gd.Q$();return Gd.tq()?t="windows-webview2":"cordova"===t?t="Android"===Td.Ks.Zs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get rC(){return Gd.AJ().sq()}get eq(){return Gd.AJ().iq()}get nq(){return Gd.AJ().rq()}get hq(){return Gd.AJ().oq()}get aq(){return Gd.AJ().lq()}get uq(){return Gd.AJ().cq()}get fq(){return Gd.AJ().pq()}get mq(){return Gd.AJ().gq()}get devicePixelRatio(){return Gd.yq()}}}{self._s;const Rd=self.Ls;self.Kj=class{constructor(t){this.Sq=t.wq()}getItem(t){return Rd.hi(t),this.Sq.getItem(t)}setItem(t,s){return Rd.hi(t),this.Sq.setItem(t,s)}removeItem(t){return Rd.hi(t),this.Sq.removeItem(t)}clear(){return this.Sq.clear()}keys(){return this.Sq.keys()}}}{const Pd=self._s,Ed=(self.Ls,Pd.Is());self.vq=class{#t;constructor(){const t=Pd.bq.xq(Ed);this.#t=t,Object.defineProperties(this,{runtime:{value:t.m$().Mq(),writable:!1},id:{value:t.Tq(),writable:!1},Gq:{value:t._q(),writable:!1},Iq:{value:t.Cq(),writable:!1},Rq:{value:t.Pq(),writable:!1},Eq:{value:t.Fq(),writable:!1},Aq:{value:t.Oq(),writable:!1},Dq:{value:t.kq(),writable:!1},Lq:{value:t.Nq(),writable:!1},Bq:{value:t.Uq(),writable:!1}}),t.m$().Vq(this,t)}static Wq(t){if(!t)return null;const s=Pd.bq.zq(t);return s?s.jq():null}Hq(){return this.#t.$q().Jq()}qq(){return this.#t.Xq().NJ()}}}{const Fd=globalThis._s,Ad=globalThis.Ls,Od=Fd.Is();globalThis.Yq=class{#t;constructor(){const t=Fd.bq.xq(Od);this.#t=t,Object.defineProperties(this,{name:{value:t.Rc(),writable:!1},runtime:{value:t.m$().Mq(),writable:!1},Kq:{value:t.Zq().jq(),writable:!1}}),t.m$().Vq(this,t)}addEventListener(t,s){Ad.hi(t),Ad.Pi(s),this.#t.aH().addEventListener(t,s)}removeEventListener(t,s){Ad.hi(t),Ad.Pi(s),this.#t.aH().removeEventListener(t,s)}Qq(){return[...this.tX()]}sX(){return Fd.Bh(this.tX())}eX(){return[...this.iX()]}nX(){return Fd.Bh(this.iX())}rX(t){const s=this.#t,e=s.m$().hX(t),i=s.oX(e);return i?i.NJ():null}*tX(){for(const t of this.#t.aX())yield t.NJ()}*iX(){for(const t of this.#t.uX().lX())yield t.NJ()}}}{const Dd=globalThis._s,kd=globalThis.Ls,Ld=Dd.Is();globalThis.cX=class extends globalThis.Yq{#t;constructor(){super();const t=Dd.bq.xq(Ld);this.#t=t}fX(t){kd.Pi(t);const s=this.#t;if(s.dX()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.pX(t)}Me(t,s,e,i,n){if(kd.Ke(s),kd.Ke(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.m$(),o=h.SJ().zJ(t);if(!o)throw new Error("invalid layer");const a=h.mX(r,o,s,e,i,n);i&&o.gX(a);const l=h.fH();return l.yX(!0),a.SX(),l.yX(!1),l.wX()||h.xJ().vX()||h.xX(),a.NJ()}bX(){return this.#t.MX().map(t=>t.Jq())}*TX(){for(const t of this.#t.MX())yield t.Jq()}GX(t){return kd.Li(t,globalThis._X),t.IX(this)}}}{const Nd=globalThis._s,Bd=globalThis.Ls,Ud=globalThis.cX,Vd=Nd.Is();globalThis._X=class extends globalThis.Yq{#t;constructor(){super();const t=Nd.bq.xq(Vd);this.#t=t}CX(){return this.#t.RX().map(t=>t.Jq())}*PX(){for(const t of this.#t.RX())yield t.Jq()}IX(t){Bd.Li(t,Ud);const s=this.#t,e=s.m$().J$(t);return s.EX(e)}}}{self._s;const Wd=self.Ls,zd=["above","below","top-sublayer","bottom-sublayer"];self.FX=class{#t;constructor(t){this.#t=t;const s=[],e=t.AX(),i=e.OX().length;for(let t=0;t<i;++t)s.push(new self.DX(e,t));Object.defineProperties(this,{runtime:{value:t.m$().Mq(),writable:!1},name:{value:t.Rc(),writable:!1},index:{value:t.Ej(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Wd.hi(t),Wd.Pi(s),this.#t.aH().addEventListener(t,s)}removeEventListener(t,s){Wd.hi(t),Wd.Pi(s),this.#t.aH().removeEventListener(t,s)}get width(){return this.#t.by()}set width(t){Wd.ei(t),this.#t.ny(t)}get height(){return this.#t.Ty()}set height(t){Wd.ei(t),this.#t.hy(t)}kX(t,s){Wd.ei(t),Wd.ei(s);const e=this.#t;e.ny(t),e.hy(s)}getSize(){const t=this.#t;return[t.by(),t.Ty()]}set scale(t){Wd.ei(t),this.#t.LX(t)}get scale(){return this.#t.NX()}set angle(t){Wd.ei(t),this.#t.BX(t)}get angle(){return this.#t.UX()}set scrollX(t){Wd.Ke(t),this.#t.VX(t)}get scrollX(){return this.#t.WX()}set scrollY(t){Wd.Ke(t),this.#t.zX(t)}get scrollY(){return this.#t.jX()}scrollTo(t,s){Wd.Ke(t),Wd.Ke(s);const e=this.#t;e.VX(t),e.zX(s)}HX(){const t=this.#t;return[t.WX(),t.jX()]}get JX(){return this.#t.$X()}qX(t){const s=this.#t;let e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return e=s.zJ(t),e?e.XX():null}YX(){return this.#t.KX().map(t=>t.XX())}*ZX(){for(const t of this.#t.ZX())yield t.XX()}QX(t,s,e){const i=this.#t,n=self.tY;Wd.hi(t),Wd.Ni(s,n);const r=s?i.m$().sY(s):null,h=zd.indexOf(e);if(h<0)throw new Error("invalid location");i.eY(t,r,h)}iY(t,s,e){const i=this.#t,n=i.m$(),r=self.tY;Wd.Li(t,r);const h=n.sY(t);if(!h)throw new Error("invalid layer");Wd.Ni(s,r);const o=s?n.sY(s):null,a=zd.indexOf(e);if(a<0)throw new Error("invalid location");i.nY(h,o,a)}rY(t){const s=this.#t,e=self.tY;Wd.Li(t,e);const i=s.m$().sY(t);if(!i)throw new Error("invalid layer");const n=i.m$();s.hY(i),n.fH().wX()||n.xX()}oY(){const t=this.#t,s=t.m$();t.aY(),s.fH().wX()||s.xX()}lY(t,s){Wd.ei(t),Wd.ei(s),this.#t.uY(t,s)}cY(){return this.#t.fY()}set W(t){Wd.hi(t);const s=this.#t;if("perspective"===t)s.dY();else{if("orthographic"!==t)throw new Error("invalid projection");s.pY()}}get W(){return this.#t.mY()?"orthographic":"perspective"}}}{const jd=self._s,Hd=self.Ls,Jd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),$d=new Map([...Jd.entries()].map(t=>[t[1],t[0]])),qd=new Set(["2d","3d"]),Xd=jd.jn(jd.Mo);self.tY=class{#t;constructor(t){this.#t=t;const s=[],e=t.AX(),i=e.OX().length;for(let t=0;t<i;++t)s.push(new self.DX(e,t));Object.defineProperties(this,{runtime:{value:t.m$().Mq(),writable:!1},name:{value:t.Rc(),writable:!1},layout:{value:t.bJ().wJ(),writable:!1},effects:{value:s,writable:!1}}),t.m$().Vq(this,t)}addEventListener(t,s){this.#t.aH().addEventListener(t,s)}removeEventListener(t,s){this.#t.aH().removeEventListener(t,s)}get gY(){const t=this.#t.yY();return t?t.XX():null}*SY(){for(const t of this.#t.SY())yield t.XX()}*wY(){for(const t of this.#t.vY())yield t.XX()}*xY(){for(const t of this.#t.vY())for(const s of t.bY())yield s.XX()}get index(){return this.#t.Ej()}get isVisible(){return this.#t.MY()}set isVisible(t){this.#t.TY(t)}get GY(){return this.#t._Y()}get IY(){return this.#t.CY()}set IY(t){this.#t.RY(t)}get PY(){return this.#t.EY()}set PY(t){this.#t.FY(!!t)}get AY(){return this.#t.OY()}get opacity(){return this.#t.NA()}set opacity(t){t=jd.Yn(+t,0,1),isNaN(t)||this.#t.UA(t)}set scale(t){Hd.ei(t),this.#t.DY(t)}get scale(){return this.#t.kY()}set LY(t){Hd.ei(t),this.#t.NY(t)}get LY(){return this.#t.BY()}set angle(t){Hd.ei(t),this.#t.BX(t)}get angle(){return this.#t.UY()}set VY(t){Hd.ei(t),this.#t.WY(t)}get VY(){return this.#t.zY()}set jY(t){Hd.ei(t),this.#t.HY(t)}get jY(){return this.#t.JY()}set qN(t){Hd.ei(t),this.#t.wM(t)}get qN(){return this.#t.SM()}set renderingMode(t){if(!qd.has(t))throw TypeError("invalid rendering mode");this.#t.$Y("3d"===t)}get renderingMode(){return this.#t.qY()?"3d":"2d"}set XY(t){this.#t.YY(t)}get XY(){return this.#t.KY()}set ZY(t){this.#t.QY(t)}get ZY(){return this.#t.tK()}set Pz(t){Hd.hi(t);const s=Jd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.eM(s)}get Pz(){return $d.get(this.#t.sK())}set backgroundColor(t){if(Hd.Mi(t),t.length<3)throw new Error("expected 3 elements");Xd.Ro(t[0],t[1],t[2]);const s=this.#t,e=s.eK();e.Ho(Xd)||(e.ko(Xd),s.m$().XJ())}get backgroundColor(){const t=this.#t.eK();return[t.Lo(),t.No(),t.Bo()]}set scrollX(t){Hd.Ke(t);const s=this.#t;s.iK(!0),s.VX(t)}get scrollX(){return this.#t.WX()}set scrollY(t){Hd.Ke(t);const s=this.#t;s.iK(!0),s.zX(t)}get scrollY(){return this.#t.jX()}scrollTo(t,s){Hd.Ke(t),Hd.Ke(s);const e=this.#t;e.iK(!0),e.VX(t),e.zX(s)}HX(){const t=this.#t;return[t.WX(),t.jX()]}nK(){this.#t.iK(!1)}getViewport(){return this.#t.rK().el()}hK(t,s,e=0){Hd.Ke(t),Hd.Ke(s),Hd.Ke(e);const i=this.#t,n=i.m$();return i.oK(t-n.rq(),s-n.oq(),e)}aK(t,s,e=0){Hd.Ke(t),Hd.Ke(s),Hd.Ke(e);const i=this.#t,n=i.m$(),[r,h]=i.lK(t,s,e);return[r+n.rq(),h+n.oq()]}uK(t,s,e=0){return Hd.Ke(t),Hd.Ke(s),Hd.Ke(e),this.#t.cK(t,s,e)}fK(t,s,e=0){return Hd.Ke(t),Hd.Ke(s),Hd.Ke(e),this.#t.dK(t,s,e)}get pK(){return this.#t.mK()}}}{let Yd=function(t){let s=Qd.get(t);return s||(s=Kd.jn(Kd.Event.Sf),Qd.set(t,s),s)};0;const Kd=self._s,Zd=self.Ls,Qd=new WeakMap,tp=Kd.Is();self.gK=class{#t;constructor(){const t=Kd.bq.xq(tp);this.#t=t;const s={runtime:{value:t.m$().Mq(),writable:!1},objectType:{value:t.yK().Jq(),writable:!1},Kq:{value:t.Zq().jq(),writable:!1}};t.SK(s),t.wK(s),Object.defineProperties(this,s),t.m$().Vq(this,t)}static vK(){return Kd.bq.xK()}bK(){const t=Qd.get(this);t&&(t.Hn(),Qd.delete(this))}addEventListener(t,s,e){Zd.hi(t),Zd.Pi(s),Yd(this).addEventListener(t,s,e)}removeEventListener(t,s,e){Zd.hi(t),Zd.Pi(s),Yd(this).removeEventListener(t,s,e)}dispatchEvent(t){Yd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.m$();s.MK(t),s.fH().wX()||s.xJ().vX()||s.fH().TK()||s.xX()}GK(){const t=this.#t._K();return t?t.map(t=>t.NJ()):[]}*IK(){const t=this.#t;if(t.CK())for(const s of t.RK())yield s.NJ()}get uid(){return this.#t.PK()}get EK(){return this.#t.FK()}get AK(){return this.#t.DK()}set jH(t){Zd.ei(t),this.#t.JH(t)}get jH(){return this.#t.kK()}LK(){this.#t.NK()}get OH(){const t=this.#t;return t.m$().DH(t)}BK(...t){Zd.Mi(t);const s=new Set(t),e=this.#t.UK();return s.isSubsetOf(e)}VK(t){Zd.Li(t,Set),this.#t.WK(t)}zK(){return new Set(this.#t.UK())}signal(t){Zd.hi(t);const s=this.#t;s.m$().fH().jK(s,t)}RH(t){Zd.hi(t);const s=this.#t;return s.m$().fH().HK(s,t)}}}{const sp=self._s,ep=self.Ls,ip=sp.Is();self.JK=class extends self.gK{#t;#s=!1;#e=null;#i=!1;#n=null;#r;#h;constructor(t){super(),this.#t=sp.bq.xq(ip),this.#s=!1,this.#e=null,this.#i=!1,this.#n=null,this.#r=t?.$K,this.#h=t?.qK}bK(){this.XK(!1),this.YK(!1),super.bK()}KK(){return sp.bq.ZK()}QK(t){const s=this.#t;s.m$().tZ(t,s)}sZ(t){const s=this.#t;return s.m$().n$(t,s)}eZ(t,s){if(ep.hi(t),ep.Pi(s),!this.#r)throw new Error("no DOM component id set");this.#t.m$().iZ(this.#r,t,s)}nZ(t){ep.Mi(t);for(const[s,e]of t)this.eZ(s,e)}rZ(t,s){if(ep.hi(t),!this.#r)throw new Error("no DOM component id set");this.#t.m$().Vc(this.#r,t,s)}hZ(t,s){if(ep.hi(t),!this.#r)throw new Error("no DOM component id set");return this.#t.m$().KJ(this.#r,t,s)}oZ(t,s){if(!this.#t.m$().Qj())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.rZ(t,s)}XK(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.m$();if(t){if(!this.#e)if(this.#t.m$().aZ()){const t=globalThis.lZ,s=this.Kq;this.#e=()=>{const e=performance.now();this.uZ(),t.cZ(s,performance.now()-e)}}else this.#e=()=>this.uZ();s.Sf().addEventListener("tick",this.#e)}else s.Sf().removeEventListener("tick",this.#e)}fZ(){return this.#s}uZ(){}YK(t){if(t=!!t,this.#i===t)return;this.#i=t;const s=this.#t.m$();if(t){if(!this.#n)if(this.#t.m$().aZ()){const t=globalThis.lZ,s=this.Kq;this.#n=()=>{const e=performance.now();this.dZ(),t.cZ(s,performance.now()-e)}}else this.#n=()=>this.dZ();s.Sf().addEventListener("tick2",this.#n)}else s.Sf().removeEventListener("tick2",this.#n)}pZ(){return this.#i}dZ(){}mZ(){return[]}gZ(){return null}yZ(t){}SZ(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.m$().wZ(this.#h)}vZ(t,s){if(ep.hi(t),ep.Pi(s),!this.#h)throw new Error("no wrapper component id set");this.#t.m$().xZ(this.#h,t,s)}bZ(t){ep.Mi(t);for(const[s,e]of t)this.vZ(s,e)}MZ(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.hH.TZ(this.#h,t,s)}GZ(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.hH._Z(this.#h,t,s)}}}{let np=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=rp.bq.xq(cp),e=s.WJ();this.#t=s,this.#s=e,up.set(this,s);const i=[],n=e.IZ();if(n){const t=e.yK().AX().OX().length;for(let s=0;s<t;++s)i.push(new self.DX(n,s))}const r={effects:{value:i,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.bJ().wJ()}get CZ(){return this.#s.zJ().XX()}get x(){return this.#s.dM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.dM()===t||(s.pM(t),s.RZ())}get y(){return this.#s.gM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.gM()===t||(s.yM(t),s.RZ())}setPosition(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.dM()===t&&e.gM()===s||(e.PZ(t,s),e.RZ())}EZ(){const t=this.#s;return[t.dM(),t.gM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const e=this.#s;e.FZ(t,s),e.RZ()}set AZ(t){t=+t;const s=this.#s;isNaN(t)||s.OZ()===t||(s.DZ(t),s.RZ())}get AZ(){return this.#s.OZ()}set kZ(t){t=+t;const s=this.#s;isNaN(t)||s.LZ()===t||(s.NZ(t),s.RZ())}get kZ(){return this.#s.LZ()}BZ(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.OZ()===t&&e.LZ()===s||(e.DZ(t),e.NZ(s),e.RZ())}UZ(){const t=this.#s;return[t.OZ(),t.LZ()]}get qN(){return this.#s.SM()}set qN(t){t=+t;const s=this.#t,e=this.#s;isNaN(t)||e.SM()===t||(e.wM(t),s.m$().XJ())}get VZ(){return this.#s.WZ()}get width(){return this.#s.by()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.by()===t||(s.ny(t),s.RZ())}get height(){return this.#s.Ty()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Ty()===t||(s.hy(t),s.RZ())}kX(t,s){t=+t,s=+s;const e=this.#s;isNaN(t)||isNaN(s)||e.by()===t&&e.Ty()===s||(e.nE(t,s),e.RZ())}getSize(){const t=this.#s;return[t.by(),t.Ty()]}get angle(){return this.#s.UX()}set angle(t){t=rp.Kn(+t);const s=this.#s;isNaN(t)||s.UX()===t||(s.BX(t),s.RZ())}get zZ(){return rp.Qn(this.angle)}set zZ(t){this.angle=rp.Zn(t)}Zl(t){return t?(this.#s.jZ(ap,lp,!1),ap.el()):this.#s.HZ().el()}JZ(t){return t?(this.#s.jZ(ap,lp,!1),lp.Jl()):this.#s.$Z().Jl()}qZ(){return this.#s.XZ()}get isVisible(){return this.#s._Y()}set isVisible(t){t=!!t;const s=this.#t,e=this.#s;e._Y()!==t&&(e.TY(t),s.m$().XJ())}get opacity(){return this.#s.NA()}set opacity(t){t=rp.Yn(+t,0,1);const s=this.#t,e=this.#s;isNaN(t)||e.NA()===t||(e.UA(t),s.m$().XJ())}set YZ(t){if(hp.Mi(t),t.length<3)throw new Error("expected 3 elements");pp.Ro(t[0],t[1],t[2]);const s=this.#t,e=this.#s;e.KZ().Ho(pp)||(e.ZZ(pp),s.m$().XJ())}get YZ(){const t=this.#s.KZ();return[t.Lo(),t.No(),t.Bo()]}set Pz(t){hp.hi(t);const s=fp.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const e=this.#t;this.#s.eM(s),e.m$().XJ()}get Pz(){return dp.get(this.#s.sK())}QZ(){this.#s.tQ()}sQ(){this.#s.eQ()}iQ(t){hp.Li(t,op);const s=this.#t,e=s.m$().sY(t);if(!e)throw new Error("invalid layer");s.WJ().nQ(e)}rQ(t,e){hp.Li(t,s),this.#s.hQ(up.get(t),e)}get zIndex(){return this.#s.jJ()}get oQ(){return this.#s.aQ()}set oQ(t){this.#s.lQ(!!t)}Tl(t,s){return hp.Ke(t),hp.Ke(s),this.#s.uQ(+t,+s)}k$(t){hp.Li(t,s);const e=this.#t,i=up.get(t);return e.m$().Nj().L$(e,i)}B$(){const t=this.#t,s=t.m$().Nj().U$(t);return s?s.NJ():null}getParent(){const t=this.#t.cQ();return t?t.NJ():null}fQ(){const t=this.#t.dQ();return t?t.NJ():null}*pQ(){for(const t of this.#t.pQ())yield t.NJ()}mQ(){return this.#t.gQ()}yQ(t){const s=this.#t.SQ(t);return s?s.NJ():null}*children(){for(const t of this.#t.children())yield t.NJ()}*wQ(){for(const t of this.#t.wQ())yield t.NJ()}vQ(t,e){hp.Li(t,s),hp.mi(e),e||(e={});const i=this.#t,n=up.get(t);i.xQ(n,e)}removeChild(t){hp.Li(t,s);const e=this.#t,i=up.get(t);e.bQ(i)}MQ(){const t=this.#t;t.TQ()&&t.cQ().bQ(t)}GQ(){const t=this.#s;return{_Q:t.IQ(),CQ:t.RQ(),PQ:t.EQ(),FQ:t.AQ(),OQ:t.DQ(),kQ:t.LQ(),NQ:t.BQ(),UQ:t.VQ(),WQ:t.zQ()}}jQ(t,s){hp.ei(t),hp.ei(s),this.#s.HQ(t,s)}JQ(){const t=this.#s;t.$Q(),t.RZ()}qQ(t,s,e){hp.ei(t),hp.ei(s),hp.pi(e);const i=this.#s;i.XQ(t,s,e)&&i.RZ()}YQ(t,s){let e=NaN,i=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.KQ()){const a=o.ZQ().eT(t,s);null!==a&&(e=a.dM(),i=a.gM(),n=a.SM(),r=a.vM(),h=a.bM())}return{x:e,y:i,qN:n,QQ:r,t0:h}}s0(){const t=this.#s;if(!t.KQ())return[0,0];const s=t.ZQ();return[s.HM(),s.JM()]}}};0;const rp=self._s,hp=self.Ls,op=(self.gK,self.tY),ap=rp.jn(rp.Rect),lp=rp.jn(rp.Cl),up=new WeakMap,cp=rp.Is(),fp=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),dp=new Map([...fp.entries()].map(t=>[t[1],t[0]])),pp=rp.jn(rp.Mo);self.e0=np(self.gK),self.i0=np(self.JK)}{self._s;const mp=self.Ls;self.n0=class extends self.e0{#t;constructor(){super(),this.#t=self.gK.vK()}r0(){return this.#t.o0().h0()}focus(){this.#t.o0().a0()}blur(){this.#t.o0().l0()}u0(t,s){mp.hi(t),this.#t.o0().c0(t,s)}}}{let gp=function(t){let s=wp.get(t);return s||(s=yp.jn(yp.Event.Sf),wp.set(t,s),s)};0;const yp=self._s,Sp=self.Ls,wp=new WeakMap,vp=yp.Is();self.f0=class{#t;constructor(){const t=yp.bq.xq(vp);this.#t=t;const s={runtime:{value:t.m$().Mq(),writable:!1},behavior:{value:t.p0().d0(),writable:!1},m0:{value:t.y0().g0(),writable:!1}};Object.defineProperties(this,s),t.m$().Vq(this,t)}static vK(){return yp.bq.xK()}get S0(){return this.#t.w0().NJ()}bK(){const t=wp.get(this);t&&(t.Hn(),wp.delete(this))}addEventListener(t,s,e){Sp.hi(t),Sp.Pi(s),gp(this).addEventListener(t,s,e)}removeEventListener(t,s,e){Sp.hi(t),Sp.Pi(s),gp(this).removeEventListener(t,s,e)}dispatchEvent(t){gp(this).dispatchEvent(t)}}}{const xp=self._s,bp=(self.Ls,xp.Is());self.v0=class{constructor(){const t=xp.bq.xq(bp),s={runtime:{value:t.m$().Mq(),writable:!1},behavior:{value:t.p0().d0(),writable:!1},name:{value:t.Rc(),writable:!1}};Object.defineProperties(this,s)}}}{const Mp=self._s,Tp=(self.Ls,Mp.Is());self.x0=class{#s;constructor(){const t=Mp.bq.xq(Tp);this.#s=t;const s={runtime:{value:t.m$().Mq(),writable:!1},id:{value:t.Tq(),writable:!1}};Object.defineProperties(this,s),t.m$().Vq(this,t)}Qq(){return this.#s.lX().map(t=>t.NJ())}static Wq(t){if(!t)return null;const s=Mp.bq.b0(t);return s?s.d0():null}}}{const Gp=self._s,_p=self.Ls,Ip=Gp.jn(Gp.Mo);self.DX=class{#t;constructor(t,s){this.#t=t;const e={index:{value:s,writable:!1}};Object.defineProperties(this,e)}get name(){return this.#t.OX()[this.index].Rc()}get isActive(){return this.#t.M0(this.index)}set isActive(t){t=!!t;const s=this.#t;s.M0(this.index)!==t&&(s.T0(this.index,t),s.G0(),s.m$().XJ())}setParameter(t,s){_p.ei(t),t=Math.floor(+t);const e=this.#t,i=e._0(this.index,t);if(null===i)throw new RangeError("invalid index");if(i instanceof Gp.Mo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ip.Ro(s[0],s[1],s[2]),s=Ip}else if("number"!=typeof s)throw new TypeError("expected number");e.I0(this.index,t,s)&&e.M0(this.index)&&e.m$().XJ()}getParameter(t){_p.ei(t),t=Math.floor(+t);const s=this.#t._0(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Gp.Mo?[s.Lo(),s.No(),s.Bo()]:s}}}self._s,self.Ls;self.C0=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Rc(),writable:!1}})}get speed(){return this.#t.R0()}get P0(){return this.#t.E0()}get F0(){return this.#t.A0()}get O0(){return this.#t.D0()}get k0(){return this.#t.L0()}get frameCount(){return this.#t.N0()}B0(){return this.#t.U0().map(t=>t.V0())}*frames(){for(const t of this.#t.U0())yield t.V0()}};self._s,self.Ls;self.d$=class{#s;constructor(t){this.#s=t}static f$(t){return t.#s}get width(){return this.#s.by()}get height(){return this.#s.Ty()}getSize(){const t=this.#s;return[t.by(),t.Ty()]}W0(t){return t.z0(this)}j0(){return this.#s.kE().el()}};{self._s;const Cp=self.Ls;self.H0=class extends self.d${#s;constructor(t){super(t.J0()),this.#s=t,Object.defineProperties(this,{duration:{value:t.$0(),writable:!1},AZ:{value:t.OZ(),writable:!1},kZ:{value:t.LZ(),writable:!1}})}UZ(){const t=this.#s;return[t.OZ(),t.LZ()]}q0(){return this.#s.X0()}Y0(t){return this.K0(t)[0]}Z0(t){return this.K0(t)[1]}K0(t){const s=this.#s;let e=null;if("number"==typeof t)e=s.Q0(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");e=s.t1(t)}return e?[e.dM(),e.gM()]:this.UZ()}s1(){const t=this.#s.e1();return t?t.pu():0}i1(t){return this.n1(t)[0]}h1(t){return this.n1(t)[1]}n1(t){Cp.ei(t),t=Math.floor(t);const s=this.#s.e1();if(!s||t<0||t>=s.pu())return[0,0];const e=s.du();return[e[2*t],e[2*t+1]]}get tag(){return this.#s.o1()}}}{let Rp=function(t){const s=Ep.get(t);if(s.a1())throw new Error("timeline/tween was released and is no longer valid");return s};0;self._s;const Pp=self.Ls,Ep=new WeakMap;self.l1=class{constructor(t){Ep.set(this,t),t.m$().Vq(this,t)}pause(){Rp(this).u1()}resume(){Rp(this).c1()}stop(){Rp(this).Bf()}BK(t){return Rp(this).f1(t)}set time(t){Pp.ei(t),Rp(this).d1(t)}get time(){return Rp(this).uW()}set totalTime(t){Pp.ei(t),Rp(this).m1(t)}get totalTime(){return Rp(this).g1()}set P0(t){Rp(this).S1(!!t)}get P0(){return Rp(this).w1()}set k0(t){Rp(this).v1(!!t)}get k0(){return Rp(this).b1()}set playbackRate(t){Pp.ei(t),Rp(this).M1(t)}get playbackRate(){return Rp(this).T1()}get progress(){const t=Rp(this);return t.uW()/t.g1()}get tags(){return Rp(this).G1()}get finished(){return Rp(this)._1()}get I1(){return Rp(this).IsPlaying()}get C1(){return Rp(this).R1()}get P1(){return Ep.get(this).a1()}}}{let Fp=function(t){const s=Ap.get(t);if(s.a1())throw new Error("timeline was released and is no longer valid");return s};0;self._s,self.Ls;const Ap=new WeakMap;self.E1=class extends self.l1{constructor(t){super(t),Ap.set(this,t);const s={name:{value:t.Rc(),writable:!1}};Object.defineProperties(this,s)}}}{let Op=function(t){const s=kp.get(t);if(s.a1())throw new Error("tween was released and is no longer valid");return s};0;self._s;const Dp=self.Ls,kp=new WeakMap,Lp=new WeakMap;let Np=null;self.F1=class extends self.l1{constructor(t,s,e){super(t),Np||(Np=e.A1),kp.set(this,t),s&&Lp.set(this,s)}stop(){const t=Op(this);Lp.get(this).O1(t)}D1(t){Dp.hi(t);const s=self.Wu.oc(Np(t));Op(this).L1(s)}get S0(){const t=Op(this).N1();return t?t.NJ():null}get B1(){return Op(this).U1()}set B1(t){Op(this).V1(!!t)}get finished(){const t=Op(this);return t._1().then(()=>new Promise(s=>{t.W1()&&s()}))}get released(){return Op(this).z1()}get value(){const t=Op(this);if("value"!==t.j1())throw new Error("not a value tween");return t.J1("value").H1()}}}self._s,self.Ls;self.q1=class extends self.vq{constructor(){super()}};{const Bp=self._s,Up=self.Ls,Vp=Bp.Is();self.X1=class extends self.q1{#t;#e;#s=0;#r=new Map;constructor(t){if(super(),this.#t=Bp.bq.xq(Vp),!t?.$K)throw new Error("no DOM component ID specified");this.#e=t.$K,this.Y1("elem-focused",t=>t.K1()),this.Y1("elem-blurred",t=>{t&&t.Z1()})}Q1(t){const s=this.#s++;return this.#r.set(s,t),s}t2(t){this.#r.delete(t)}Y1(t,s){this.#t.m$().iZ(this.#e,t,t=>{const e=this.#r.get(t.elementId);s(e,t)})}s2(t){Up.Mi(t);for(const[s,e]of t)this.s2(s,e)}}}{const Wp=self._s,zp=(self.Ls,Wp.Is());self.e2=class extends self.cX{#t;constructor(){super(),this.#t=Wp.bq.xq(zp)}i2(){}n2(){return this.#t.J0().h2()}o2(t){}a2(t){}l2(){}u2(t){}}}{const jp=self._s,Hp=(self.Ls,jp.Is());self.c2=class extends self.i0{#t;#n=null;#s=null;constructor(t){super(t),this.#t=jp.bq.xq(Hp)}bK(){if(super.bK(),this.#n){const t=this.#t.m$().Sf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}f2(){if(this.#n)return;this.#n=()=>this.d2(),this.#s=()=>this.m2();const t=this.#t.m$().Sf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}d2(){}m2(){}g2(t){}S2(){return!0}xb(){return!1}}}{const Jp=self._s,$p=(self.Ls,Jp.jn(Jp.Rect)),qp=new WeakMap,Xp=Jp.Is();self.w2=class extends self.c2{#t=-1;#s=!0;#r=!1;#i=!1;#e=-.2;#h=Jp.jn(Jp.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.$K)throw new Error("no DOM component ID specified");super(t);const s=Jp.bq.xq(Xp);qp.set(this,s),this.#t=this.Kq.Q1(this);const e=s.m$().AJ();this.#o=e.v2(),this.#a=e.b2(),this.XK(!0)}bK(){super.bK(),this.Kq.t2(this.#t),this.M2("destroy"),this.#t=-1,qp.delete(this)}T2(){if(qp.get(this).m$().Qj())throw new Error("not valid in worker mode");return this.G2("get-element")}M2(t,s){s||(s={}),s.elementId=this.#t,this.rZ(t,s)}G2(t,s){return s||(s={}),s.elementId=this.#t,this.oZ(t,s)}_2(t,s){return s||(s={}),s.elementId=this.#t,this.hZ(t,s)}I2(t){t||(t={});const s=qp.get(this).WJ();t.elementId=this.#t,t.isVisible=s._Y(),t.htmlIndex=s.zJ().C2(),t.htmlZIndex=s.R2(),Object.assign(t,this.P2()),this.#s=!!t.isVisible,this.oZ("create",t),this.E2(!0)}F2(t){t=!!t,this.#s!==t&&(this.#s=t,this.M2("set-visible",{isVisible:t}))}uZ(){this.E2(!1)}A2(){const t=qp.get(this).m$().AJ().O2();return"Android"===Jp.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}E2(t){const s=qp.get(this);if(s.D2())return;const e=s.WJ(),i=e.zJ(),n=e.HZ();let[r,h]=i.lK(n.Za(),n.Qa()),[o,a]=i.lK(n.tl(),n.sl());const l=s.m$().AJ(),u=l.lq(),c=l.cq();if(!e._Y()||!i._Y())return void this.F2(!1);if(!this.A2()&&(o<=0||a<=0||r>=u||h>=c))return void this.F2(!1);$p.set(r,h,o,a);const f=l.v2(),d=l.b2(),p=i.C2(),m=e.R2();if(!t&&$p.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.F2(!0);this.#h.m($p),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.F2(!0);let g=null;this.#i&&(g=i.L2()+this.#e),this.M2("update-position",{left:Math.round(this.#h.Za()),top:Math.round(this.#h.Qa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}N2(){this.G2("focus",{focus:!0})}B2(){this.G2("focus",{focus:!1})}K1(){this.#r=!0}Z1(){this.#r=!1}U2(){return this.#r}V2(t,s){this.W2("set-css-style",{prop:Jp.vo(t),val:s})}z2(t,s){this.W2("set-attribute",{name:t,val:s})}j2(t){this.W2("remove-attribute",{name:t})}H2(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.M2("update-state",this.P2())}))}P2(){}J2(){return this.#t}}}self._s,self.Ls;self.q2=class extends self.x0{constructor(){super()}};self._s,self.Ls;self.X2=class extends globalThis.v0{constructor(){super()}i2(){}};{const Yp=self._s,Kp=(self.Ls,new WeakMap),Zp=Yp.Is();self.Y2=class extends self.f0{#i=!1;#s=!1;#t=!1;constructor(){super(),Kp.set(this,Yp.bq.xq(Zp))}bK(){super.bK(),this.XK(!1),this.YK(!1),this.K2(!1),Kp.delete(this)}KK(){return Yp.bq.ZK()}Z2(){}QK(t){const s=Kp.get(this);s.m$().tZ(t,s.w0(),s.y0())}sZ(t){const s=Kp.get(this);return s.m$().n$(t,s.w0(),s.y0())}XK(t){if(t=!!t,this.#i===t)return;this.#i=t;const s=Kp.get(this).m$();t?s.Q2(this):s.t3(this)}fZ(){return this.#i}uZ(){}YK(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Kp.get(this).m$();t?s.s3(this):s.e3(this)}pZ(){return this.#s}dZ(){}K2(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Kp.get(this).m$();t?s.i3(this):s.n3(this)}r3(){return this.#t}h3(){}mZ(){return[]}gZ(){return null}yZ(t){}}}{self._s;const Qp=self.Ls;let tm=null;self.oH=class{constructor(t){tm=t,Object.defineProperties(this,{o3:{value:tm.a3(),writable:!1}})}l3(){tm.XJ()}t$(t){tm.s$(t)}TZ(t,s,e){Qp.hi(t),Qp.hi(s),Qp.Ti(e),tm.u3(t,s,e)}_Z(t,s,e){return Qp.hi(t),Qp.hi(s),Qp.Ti(e),tm.c3(t,s,e)}f3(t){return Qp.oi(t),new self.d3(tm,t)}set m3(t){tm.g3(!!t)}get m3(){return tm.y3()}S3(t){tm.w3(!!t)}v3(t){Qp.Ke(t);const s=tm.x3(t);return s?s.Jq():null}}}self._s,self.Ls;self.d3=class{#t;#s;#h;#e;#r;#n;constructor(t,s){this.#t=t;const e=t.fH(),i=t.SH();this.#s=i,this.#h=i.b3();const n=t.GH();this.#e=n.M3(),this.#r=n.T3(i);const r=e.G3().T3();this.#n=r,s&&r._3(s),t.I3(!1)}C3(){const t=this.#t.fH(),s=this.#h,e=this.#n;t.R3(s),this.#s.P3(this.#e,this.#r),t.E3(s),e.F3(e.Ej()+1)}get A3(){return this.#n.O3()}release(){const t=this.#t,s=t.GH(),e=t.fH().G3();t.I3(!0),e.D3(),s.D3()}};{let sm=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};0;const em=self._s,im=self.Ls;let nm=null,rm=null;const hm=["none","back","front"],om=["cw","ccw"];self.L3=class{constructor(t,s){rm=t,nm=s}N3(){nm.$A()}B3(t){nm.HA(t)}U3(){nm.Iv()}V3(){nm.xv()}W3(){nm.Ov()}setColor(t){nm.BA(t[0],t[1],t[2],t[3])}z3(t,s,e,i){nm.BA(t,s,e,i)}j3(){nm.VA()}H3(t){nm.UA(t)}J3(t){nm.sx(t)}q3(){return nm.ix()}X3(t){const s=hm.indexOf(t);if(-1===s)throw new Error("invalid cull mode");nm.Jx(s)}Y3(){return hm[nm.XA()]}K3(t){const s=om.indexOf(t);if(-1===s)throw new Error("invalid front face winding");nm.$x(s)}Z3(){return nm.YA()}rect(t){nm.ZA(t.left,t.top,t.right,t.bottom)}Q3(t,s,e,i){nm.ZA(t,s,e,i)}t4(t){nm.Cl(em.Cl.$l(t))}s4(t,s,e,i,n,r,h,o){nm.Xx(t,s,e,i,n,r,h,o)}e4(t,s){nm.wx(em.Cl.$l(t),em.Rect.il(s))}i4(t,s){nm.sO(em.Cl.$l(t),em.Cl.$l(s))}n4(t,s,e){nm.eO(em.Cl.$l(t),em.Cl.$l(s),e)}r4(t,s,e,i,n,r,h,o,a,l,u,c,f){nm.iO(t,s,e,i,n,r,h,o,a,l,u,c,em.Rect.il(f))}h4(t,s,e,i,n,r,h,o,a,l,u,c,f){nm.ux(t,s,e,i,n,r,h,o,a,l,u,c,em.Cl.$l(f))}o4(t,s,e,i,n,r,h,o,a,l,u,c,f,d){nm.nO(t,s,e,i,n,r,h,o,a,l,u,c,em.Cl.$l(f),d)}a4(t,s,e,i){nm.uT(t,s,e,i)}l4(t){nm.qx(t)}line(t,s,e,i){nm.Ry(t,s,e,i)}u4(t,s,e,i,n,r){nm.mx(t,s,e,i,n,r)}c4(t,s,e,i){nm.vx(t,s,e,i)}f4(t){nm.Tx(em.Rect.il(t))}d4(t){nm.Gx(em.Cl.$l(t))}m4(t){nm.Ex(t)}g4(){nm.Fx()}y4(t){nm.kx(t)}S4(){nm.Ux()}w4(t){im.Ni(t,self.v4);const s=t?rm.sY(t):null;nm.zA(s)}x4(t,s){const e=self.d$.f$(t);if(!e)throw new Error("invalid IImageInfo");return e.b4(nm,{wT:s?.wT??"clamp-to-edge",vT:s?.vT??"clamp-to-edge",xT:s?.xT??"trilinear",TT:s?.TT??!0})}M4(t){const s=self.d$.f$(t);if(!s)throw new Error("invalid IImageInfo");s.TP()}z0(t){const s=self.d$.f$(t);if(!s)throw new Error("invalid IImageInfo");const e=s.kG();return self.v4.T4(rm,e)}G4(t,s){if(!sm(t))throw new TypeError("invalid texture data");const e=nm.CO(t,{wT:s?.wT??"clamp-to-edge",vT:s?.vT??"clamp-to-edge",xT:s?.xT??"trilinear",TT:s?.TT??!0});return self.v4.T4(rm,e)}_4(t,s,e){im.ei(t),im.ei(s);const i=nm.GG(t,s,{wT:e?.wT??"clamp-to-edge",vT:e?.vT??"clamp-to-edge",xT:e?.xT??"trilinear",TT:e?.TT??!0});return self.v4.T4(rm,i)}I4(t,s,e){im.Li(s,self.v4);const i=rm.sY(s);nm.DE(t,i,{_T:e?._T??!0})}deleteTexture(t){im.Li(t,self.v4);const s=rm.sY(t);nm.PG(s)}C4(){const t=nm.lb();return new self.R4(rm,t)}P4(){rm.AJ().E4(nm)}F4(t){im.Li(t,globalThis.tY),rm.sY(t).A4(nm)}}}{self._s,self.Ls;const am=new WeakMap,lm=new WeakMap;self.v4=class{constructor(t,s){am.set(this,{runtime:t,texture:s}),lm.set(s,this),t.Vq(this,s),Object.defineProperties(this,{width:{value:s.by(),writable:!1},height:{value:s.Ty(),writable:!1}})}static T4(t,s){if(!s)return null;return lm.get(s)||new self.v4(t,s)}}}{let um=function(t){return fm.get(t).O4};0;self._s;const cm=self.Ls,fm=new WeakMap;self.R4=class{constructor(t,s){fm.set(this,{runtime:t,O4:s}),t.Vq(this,s)}release(){um(this).Hn()}set D4(t){cm.hi(t),um(this).FP(t)}get D4(){return um(this).PR()}set L4(t){cm.ei(t),um(this).AP(t)}get L4(){return um(this).OP()}set lineHeight(t){cm.ei(t),um(this).kP(t)}get lineHeight(){return um(this).LP()}set N4(t){um(this).NP(t)}get N4(){return um(this).BP()}set B4(t){um(this).UP(t)}get B4(){return um(this).VP()}setColor(t){cm.Mi(t),this.U4(t[0],t[1],t[2])}U4(t,s,e){um(this).JP(t,s,e)}V4(t){cm.hi(t),um(this).iM(t)}set W4(t){um(this).$P(t)}get W4(){return um(this).qP()}set verticalAlign(t){um(this).XP(t)}get verticalAlign(){return um(this).YP()}set z4(t){um(this).KP(t)}get z4(){return um(this).ZP()}set j4(t){um(this).QP(t)}get j4(){return um(this).tE()}set text(t){cm.hi(t),um(this).Wc(t)}get text(){return um(this).sE()}kX(t,s,e){cm.ei(t),cm.ei(s),cm.ei(e),um(this).nE(t,s,e)}W0(){const{runtime:t,O4:s}=fm.get(this),e=s.kG();return self.v4.T4(t,e)}j0(){return um(this).kE().el()}H4(t){cm.Pi(t),um(this).IP=t}J4(){um(this).TP()}get q4(){return um(this).hE()}get X4(){return um(this).aE()}}}{let dm=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const e=s.at(-1).toLowerCase();return ym.get(e)||""},pm=function(t){return new Promise((s,e)=>{const i=document.createElement("script");i.onload=s,i.onerror=e,i.async=!1,i.type="module",i.src=t,document.head.appendChild(i)})};0;const mm=self._s,gm=new Set(["local","remote"]),ym=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);mm.Y4=class extends mm.Wn{constructor(t,s){super();const e=s.exportType;this.Nc=t,this.K4=new Map,this.Z4="cordova"===e,this.Q4=!!s.isiOSCordova,this.t5=s.swClientId,this.s5=s.supportedAudioFormats||{},this.e5=new Map,this.i5=!1,this.n5=s.scriptFolder,this.r5="",this.h5="",this.o5="",this.a5=s.fileMap||new Map,this.l5=new Map,this.u5=[];const i="html5"===e||"scirra-arcade"===e||"instant-games"===e;this.c5=i?"remote":"local",this.f5=new Map,this.d5=[],this.p5=[],this.m5=!1,this.g5=0,this.y5=0,this.S5=0,this.w5=!1,this.v5=mm.jn(mm.Qd,()=>this.x5(),50),this.b5=mm.jn(mm.jd,Math.max(mm.hardwareConcurrency,8)),this.M5=mm.jn(mm.jd,20),this.T5=new self.l$(this)}Hn(){for(const t of this.f5.values())t.Hn();this.f5.clear(),mm.wh(this.p5),this.Nc=null}m$(){return this.Nc}G5(){return this.n5}_5(t){this.r5=t}G$(){return this.r5}I5(t){this.h5=t}C5(){return this.h5}R5(t){this.o5=t}P5(){return this.o5}E5(t){this.u5=t}O$(){return this.u5}io(t,s){return s=s||this.c5,mm.Kh(t)?"playable-ad-single-file"===this.Nc.Q$()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.b5.Bu(()=>mm.io(t)):this.M5.Bu(()=>mm.io(t)):mm.io(t)}no(t){return mm.Kh(t)?"playable-ad-single-file"===this.Nc.Q$()?mm.ho(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.c5?this.b5.Bu(()=>mm.no(t)):this.M5.Bu(()=>mm.no(t)):mm.no(t)}so(t){return mm.Kh(t)?"playable-ad-single-file"===this.Nc.Q$()?mm.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.c5?this.b5.Bu(()=>mm.so(t)):this.M5.Bu(()=>mm.so(t)):mm.so(t)}async eo(t){const s=await this.so(t);return JSON.parse(s)}M$(t){let s=this.r5+t;return"Gecko"===mm.Ks.ie&&"preview"===this.Nc.Q$()&&(s=this.F5(s)),s}x$(t){return"playable-ad-single-file"===this.Nc.Q$()&&mm.Kh(t)?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):t}A5(t){if(mm.Yh(t)||"preview"!==this.Nc.Q$()||!this.t5||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.t5),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}O5(t,s){return(s?"true":"false")+"|"+t}D5(t){const s=!!t.k5;if(t.L5&&!gm.has(t.L5))throw new Error("invalid load policy");const e=this.O5(t.url,s);let i=this.f5.get(e);return i||(i=mm.jn(mm.N5,this,{url:t.url,size:t.size||0,L5:t.L5||this.c5,k5:s}),this.f5.set(e,i),this.m5||(this.g5+=i.Au(),this.p5.push(i.B5().then(()=>this.U5(i.Au())))),i)}V5(t){const s=this.O5(t.W5(),t.z5());this.f5.delete(s)}async j5(t){try{await Promise.all(this.p5),this.S5=1,t&&0===this.g5&&this.x5()}catch(t){console.error("Error loading: ",t),this.w5=!0,this.x5()}}H5(){this.m5=!0}J5(){return this.w5}U5(t){this.y5+=t,this.v5.pp()}x5(){const t=mm.jn(mm.Event,"loadingprogress");0===this.g5?this.S5=1:this.S5=mm.Yn(this.y5/this.g5,0,1),t.progress=this.S5,this.Nc.Sf().dispatchEvent(t),this.Nc.q5(mm.jn(mm.Event,"loadingprogress"))}pJ(){return this.S5}gJ(){return this.Nc.Y5().X5()}K5(t){mm.Th(this.d5,t),this.d5.length&&this.p5.push(this.Z5())}async Z5(){const t=[],s=[];for(const[e,i,n]of this.d5)this.g5+=n,t.push(this.Q5(e,i,s).then(()=>this.U5(n)));await Promise.all(t),this.Nc.Qj()&&s.length>0&&await this.Nc.KJ("runtime","load-webfonts",{webfonts:s})}async Q5(t,s,e){try{let i=this.x$(s);"Gecko"===mm.Ks.ie&&(t=`'${t}'`),("Gecko"===mm.Ks.ie&&"preview"===this.Nc.Q$()||"playable-ad-single-file"===this.Nc.Q$())&&(i=this.F5(i));const n=new FontFace(t,`url('${i}')`);this.Nc.Qj()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Nc.Qj()&&e.push({name:t,url:i})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}t6(t){return!!this.s5[t]}s6(t,s){this.i5=!!s;for(const[s,e,i]of t)this.e5.set(s,{fileName:s,e6:e.map(t=>({type:t[0],i6:t[1],fullName:s+t[1],fileSize:t[2]})),n6:i})}r6(t){const s=this.e5.get(t);if(!s)return null;let e=null;for(const t of s.e6)if(e||"audio/webm; codecs=opus"!==t.type||(e=t),this.t6(t.type))return t;return e}h6(t){const s=this.r6(t);return s?{url:this.M$(s.fullName),type:s.type}:null}o6(){if(this.i5){const t=[];for(const s of this.e5.values()){if(s.n6)continue;const e=this.r6(s.fileName);e&&t.push({a6:s.fileName,url:this.M$(e.fullName),type:e.type,fileSize:e.fileSize})}return t}return[]}l6(t){return"preview"===this.Nc.Q$()&&(t=new URL(t,location.href).toString()),this.a5.get(t)||null}F5(t){let s=this.l5.get(t);if(s)return s;const e=this.l6(t);return e?(s=URL.createObjectURL(e),this.l5.set(t,s),s):t}Oj(){return this.T5}async C$(...t){const s=t.map(t=>this.x$(t));if(this.Nc.Qj())if(1===t.length){const s=t[0];await import((mm.Kh(s)?"./":"")+s)}else{const s=t.map(t=>`import "${mm.Kh(t)?"./":""}${t}";`).join("\n"),e=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(e)}else await Promise.all(s.map(t=>pm(t)))}async P$(t){if(WebAssembly.compileStreaming){const s=this.x$(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await mm.no(t);return await WebAssembly.compile(s)}}async F$(t){const s=this.x$(t);return await this.Nc.KJ("runtime","add-stylesheet",{url:s})}}}{const Sm=self._s;Sm.u6=class extends Sm.Wn{constructor(t,s){super(),this.c6=t,this.Nc=t.m$(),this.f6=s.url||"",this.yU=s.size,this.d6=s.L5,this.p6=s.blob||null,this.m6=!!this.p6,this.PS=null}Hn(){this.PS=null,this.c6=null,this.Nc=null,this.p6=null}W5(){return this.f6}Au(){return this.yU}B5(){return"local"===this.d6||this.p6?(this.m6=!0,Promise.resolve()):(this.PS||(this.PS=this.c6.io(this.f6,this.d6).then(t=>(this.m6=!0,this.PS=null,this.p6=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.PS=null})),this.PS)}g6(){return this.m6}y6(){return this.p6?Promise.resolve(this.p6):this.PS?this.PS:this.c6.io(this.f6,this.d6)}}}{const wm=self._s,vm=new wm.jd,xm=new Set;wm.N5=class extends wm.u6{constructor(t,s){super(t,s),this.S6=null,this.w6=null,this.jp=0,this.v6=-1,this.x6=-1,this.b6=!!s.k5,xm.add(this)}Hn(){if(0!==this.jp)throw new Error("released image asset which still has texture references");this.c6.V5(this),this.S6=null,xm.delete(this),super.Hn()}static M6(){for(const t of xm)t.S6=null,t.w6=null,t.jp=0}b4(t,s){return s=s||{},this.jp++,this.w6?Promise.resolve(this.w6):(this.S6||(s.bT=this.Nc.AJ().T6(),this.S6=this.G6(t,s)),this.S6)}async G6(t,s){try{const e=await this.y6();return 0===this.jp?(this.S6=null,null):await vm.Bu(async()=>{const i=await t.RO(e,s);return this.S6=null,0===this.jp?(t.PG(i),null):(this.w6=i,this.v6=i.by(),this.x6=i.Ty(),this.w6)})}catch(t){throw console.error("Failed to load texture: ",t),t}}TP(){if(this.jp<=0)throw new Error("texture released too many times");this.jp--,0===this.jp&&this.w6&&(this.w6.Ob().PG(this.w6),this.w6=null)}_6(){return this.jp}kG(){return this.w6}by(){return this.v6}Ty(){return this.x6}z5(){return this.b6}async I6(){const t=await this.y6();return wm.Ce.ImageBitmap?await createImageBitmap(t):await wm.lo(t)}}}{let bm=function(t,s){return t.WJ().C6()-s.WJ().C6()};0;const Mm=self._s;self.assert;Mm.R6=class extends Mm.Wn{constructor(t,s,e){super(),this.P6=t,this.Ra=s,this.Pa=e,this.E6=[],this.F6=!0,this.A6=new Set,this.O6=!1}Hn(){Mm.wh(this.E6),this.A6.clear(),this.P6=null}Bf(){Mm.wh(this.E6),this.F6=!0,this.A6.clear(),this.O6=!1}D6(){this.F6=!1}Pu(){return!this.E6.length||!(this.E6.length>this.A6.size)&&(this.k6(),!0)}L6(t){if(this.A6.has(t))return this.A6.delete(t),void(0===this.A6.size&&(this.O6=!1));this.E6.push(t),this.F6=1===this.E6.length}Kf(t){this.A6.add(t),this.O6=!0,this.A6.size>=50&&this.k6()}k6(){this.O6&&(this.E6.length!==this.A6.size?(Mm.Rh(this.E6,this.A6),this.A6.clear(),this.O6=!1):this.Bf())}N6(){this.F6||(this.E6.sort(bm),this.F6=!0)}B6(t){this.k6(),this.N6(),this.E6.length&&t.push(this.E6)}}}{const Tm=self._s;Tm.U6=class extends Tm.Wn{constructor(t,s){super(),this.V6=t,this.W6=s,this.z6=Tm.jn(Tm.Iu)}Hn(){this.z6.Hn(),this.z6=null}j6(t,s,e){let i=this.z6.Hs(t,s);return i||(e?(i=Tm.jn(Tm.R6,this,t,s),this.z6.Set(t,s,i),i):null)}H6(t){return Math.floor(t/this.V6)}J6(t){return Math.floor(t/this.W6)}q6(t,s,e){if(s)for(let i=s.Za(),n=s.tl();i<=n;++i)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(e&&e.Tl(i,n))continue;const s=this.j6(i,n,!1);s&&(s.Kf(t),s.Pu()&&this.z6.Eu(i,n))}if(e)for(let i=e.Za(),n=e.tl();i<=n;++i)for(let n=e.Qa(),r=e.sl();n<=r;++n)s&&s.Tl(i,n)||this.j6(i,n,!0).L6(t)}X6(t,s){let e=this.H6(t.Za());const i=this.J6(t.Qa()),n=this.H6(t.tl()),r=this.J6(t.sl());for(;e<=n;++e)for(let t=i;t<=r;++t){const i=this.j6(e,t,!1);i&&i.B6(s)}}Y6(t){let s=t.Za();const e=t.Qa(),i=t.tl(),n=t.sl();for(;s<=i;++s)for(let t=e;t<=n;++t){const e=this.j6(s,t,!1);e&&e.D6()}}}}{let Gm=function(t,s){return t.WJ().C6()-s.WJ().C6()},_m=function(t,s){return t.WJ().SM()-s.WJ().SM()};0;const Im=self._s,Cm=(self.assert,new Im.Rect),Rm=new Im.Cl,Pm=[],Em=(new Im.Rect,new Im.Rect,self.hs),Fm=Em.ys,Am=Em.Ss,Om=Em.fs,Dm=Om.create(),km=Fm.create(),Lm=Am.create(),Nm=Fm.create(),Bm=Fm.create(),Um=Fm.create(),Vm=Im.jn(Im.Ca),Wm=(Im.jn(Im.Rect),[]),zm=[],jm=[],Hm={name:"",K6:-1,Z6:!1,isVisible:!0,IY:!0,PY:!1,backgroundColor:[1,1,1,1],XY:!0,Q6:[1,1],opacity:1,ZY:!1,t8:!1,s8:!1,e8:!1,LY:1,Pz:0,qN:0,i8:[],n8:[],r8:[]},Jm=new Map,$m=t=>{if(!t.S0.yK().h8())return;const s=t.S0.PK();Jm.has(s)&&(Jm.delete(s),Jm.size||t.S0.m$().Sf().removeEventListener("instancedestroy",$m))};Im.o8=class extends Im.Wn{constructor(t,s,e){super(),e=Object.assign({},Hm,e),this.a8=t,this.Nc=t.m$(),this.l8=s,this.qn=e.name,this.US=-1,this.u8=!!e.PY,this.c8=-1,this.f8=e.K6,this.d8=!!e.Z6,this.p8=!!e.isVisible,this.m8=!!e.IY,this.g8=Im.jn(Im.Mo),this.g8.Sa(e.backgroundColor),this.y8=!!e.XY,this.S8=e.Q6[0],this.w8=e.Q6[1],this.Kb=Im.jn(Im.Mo,1,1,1,e.opacity),this.v8=Im.jn(Im.Mo),this.x8=!!e.ZY,this.b8=!!e.t8,this.M8=!!e.s8,this.T8=!!e.e8,this.G8=e.LY,this.Yb=e.Pz,this._8=null,this.I8=1,this.Zb=e.qN,this.C8=0,this.P8=0,this.E8=0,this.F8=!1,this.xF=Im.jn(Im.Rect),this.A8=Im.jn(Im.Rect),this.O8=Im.jn(Im.Rect),this.D8=!0,this.wG=Om.create(),this.k8=!0,this.mz=Om.create(),this.L8=!0,this.N8=Im.jn(Im.$S.KS),this.B8=!0,this.U8=[],this.V8=e.i8,this.W8=[],this.z8=[],this.j8=new Map,this.E6=[],this.H8=!1,this.J8=!1,this.q8=!1;const i=this.Nc.AJ();this.X8=Im.jn(Im.Y8,this,e.n8),this.Ij=Im.jn(Im.$S.MW,i.K8(),{fW:(t,s)=>{const e=s.wj(),n=e.GO();t.iM(e.Z8()),t.AO(n),t.OO(n),i.Q8(n)},pW:t=>this.AX().t7(t)}),this.s7=!0,this.e7=!0,this.i7=null,this.n7=[],this.r7=!1,this.h7=Im.jn(Im.Rect,0,0,-1,-1),this.o7=Im.jn(Im.Rect,0,0,-1,-1),this.a7=new self.tY(this),this.l7=Im.jn(Im.Event.Sf),this.u7(),this.c7()&&(this.i7=Im.jn(Im.U6,this.Nc.sH(),this.Nc.iH())),this.f7=e.r8.map(t=>Im.o8.d7(this.a8,this,t))}p7(){for(const t of this.V8){const s=this.Nc.m7(t[1]);this.a8.g7(s),s.y7()||(s.S7(t),s.w7(this.US)),this.W8.push(t),this.j8.set(t[2],t)}Im.Th(this.U8,this.W8),this.V8=null}static d7(t,s,e){return Im.jn(Im.o8,t,s,{name:e[0],K6:e[2],isVisible:e[3],IY:e[13],PY:e[19],backgroundColor:e[4].map(t=>t/255),XY:e[5],Q6:[e[6],e[7]],opacity:e[8],ZY:e[9],t8:e[17],s8:e[18],e8:e[10],LY:e[11],Pz:e[12],qN:e[16],i8:e[14],n8:e[15],r8:e[20]})}Hn(){for(const t of this.f7)t.Hn();Im.wh(this.f7);for(const t of this.E6)this.Nc.MK(t);Im.wh(this.E6),this.X8.Hn(),this.X8=null,this.Ij.Hn(),this.Ij=null,this.a7=null,this.l8=null,this.a8=null,this.Nc=null}Jn(){return!this.a8}v7(t){return this.j8.get(t)}x7(t){const s=this.a8.b7(),e=this.W8;let i=0;for(let n=0,r=e.length;n<r;++n){const r=e[n],h=this.Nc.m7(r[1]);let o=!0;if(!h.M7()||s)if(h.h8()&&Jm.has(r[2]))o=!1;else{const s=this.Nc.T7(r,this,!0);t.push(s),h.h8()&&(Jm.size||this.Nc.Sf().addEventListener("instancedestroy",$m),Jm.set(s.PK(),s),o=!1,this.z8.push(s.PK()))}o&&(e[i]=e[n],++i)}Im.Sh(e,i),this.Nc.xX(),this.qJ()}G7(t,s){if(!t.Zq().Cq())throw new Error("instance is not of world type");const e=t.WJ();if(e.zJ()!==this)throw new Error("instance added to wrong layer");this.E6.push(t),0!==e.SM()&&(this.q8=!0),s&&this.c7()&&t.WJ().RZ(),this.qJ(t)}_7(t){this.E6.includes(t)||(this.E6.push(t),0!==t.WJ().SM()&&(this.q8=!0),this.qJ(t))}I7(t,s){const e=t.WJ();if(e.zJ()!==this)throw new Error("instance added to wrong layer");this.E6.unshift(t),0!==e.SM()&&(this.q8=!0),this.qJ(t),s&&this.c7()&&t.WJ().RZ()}C7(t,s){const e=this.E6.indexOf(t);e<0||(s&&this.c7()&&t.WJ().R7(),this.E6.splice(e,1),this.qJ(t),this.P7())}E7(){this.q8=!0}P7(){0===this.E6.length&&(this.q8=!1)}F7(t){if(t){const t=new Set;for(const s of this.E6){const e=s.WJ().C6();e>=0&&t.add(e)}let s=-1;for(const e of this.E6){const i=e.WJ();if(!(i.C6()>=0)){for(++s;t.has(s);)++s;i.A7(s)}}}this.E6.sort(Gm)}O7(){}D7(){for(const t of this.E6)t.yK().h8()||this.Nc.MK(t);this.Nc.xX(),Im.wh(this.E6),this.q8=!1,this.qJ()}k7(t,s,e,i,n,r){const h=this.Nc.fH(),o=this.Nc.L7(),a=t.N7(),l=[];for(const u of this.W8){const c=u[0],f=c[0],d=c[1];if(!s.Tl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.EX(p))continue}let m=n;if(!m){const t=this.Nc.UJ();this.bJ()===t?m=this:(m=t.B7(this.Rc()),m||(m=t.HJ(this.Ej())))}const g=this.Nc.T7(u,m,!1,void 0,void 0,!1,r,void 0,r);r&&m.gX(g);const y=g.WJ();y.FZ(e,i),y.RZ(),h.yX(!0),g.SX(),h.yX(!1),l.push(g)}return l}dX(){return this.E6.length}bJ(){return this.a8}Rc(){return this.qn}U7(t){this.US=t}Ej(){return this.US}V7(t){this.c8=t}C2(){return this.c8}EY(){return this.u8}FY(t){t=!!t,this.u8!==t&&(this.u8=t,this.a8.W7(),this.Nc.XJ())}z7(){let t=-1;const s=this.yY();return t=s?s.vY().indexOf(this):this.bJ().j7().indexOf(this),t}H7(){return this.f8}m$(){return this.Nc}J7(){return this.d8}q7(){for(const t of this.SY())if(t.J7())return!0;return!1}yq(){return this.Nc.yq()}AX(){return this.X8}Pj(){return this.X7(),this.Ij}X7(){const t=this.Y7();if(!this.s7&&t===this.e7&&!this.Ij.gz())return;const s=this.AX().K7();this.Ij.yz(s.map(t=>t.nI()),{gW:s.map(t=>t.Ej()),yW:!t,bW:!0}),this.s7=!1,this.e7=t}G0(){this.AX().G0(),this.s7=!0}c7(){return this.T8&&!this.M8}Z7(){return this.i7}Q7(){this.r7=!1}_Y(){for(const t of this.t9())if(!t.MY())return!1;return!0}MY(){return this.p8}TY(t){t=!!t,this.p8!==t&&(this.p8=t,this.Nc.XJ())}RY(t){this.m8=!!t}CY(){return this.m8}OY(){for(const t of this.t9())if(!t.CY())return!1;return!0}iK(t){if(t=!!t,this.F8!==t){if(this.F8=t,t){const t=this.bJ();this.P8=t.WX(),this.E8=t.jX()}this.s9(),this.Nc.XJ()}}e9(){return this.F8}VX(t){const s=this.bJ(),e=s.i9(),i=s.n9();t>i&&(t=i),t<e&&(t=e),this.P8!==t&&(this.P8=t,this.e9()&&(this.s9(),this.Nc.XJ()))}zX(t){const s=this.bJ(),e=s.r9(),i=s.h9();t>i&&(t=i),t<e&&(t=e),this.E8!==t&&(this.E8=t,this.e9()&&(this.s9(),this.Nc.XJ()))}WX(){return this.e9()?this.P8:this.bJ().WX()}jX(){return this.e9()?this.E8:this.bJ().jX()}rK(){return this.o9(),this.xF}a9(){return this.o9(),this.A8}l9(){return this.o9(),this.O8}u9(){return this.bJ().fY()}Zw(t){return this.Nc.Zw(t)}c9(t,s){const e=this.a9();if(0===t)s.m(e);else{let i=e.hl(),n=e.ol();const r=this.f9(t),h=e.width()/r,o=e.height()/r,[a,l]=this.u9();if(.5!==a||.5!==l){const s=this.d9(),e=this.Nc,r=this.Zw()/s;let h=(a-.5)*e.p9()/r,o=(l-.5)*e.m9()/r;const u=this.UX();0!==u&&(Vm.set(h,o),Vm.rotate(u),h=Vm.Aa(),o=Vm.Da());const c=Im.pr(s,0,t);i+=Im._t(h,0,c),n+=Im._t(o,0,c)}s.set(i-h/2,n-o/2,i+h/2,n+o/2)}}NA(){return this.Kb.Uo()}UA(t){t=Im.Yn(t,0,1),this.Kb.Uo()!==t&&(this.Kb.Do(t),this.u7(),this.Nc.XJ())}u7(){this.v8.m(this.Kb),this.v8.Ko()}Z8(){return this.v8}Y7(){return this.Kb.$o(1,1,1,1)}BY(){return this.G8}NY(t){this.G8!==t&&(this.G8=t,this.s9(),this.Nc.XJ())}zY(){return this.S8}JY(){return this.w8}g9(t,s){this.S8===t&&this.w8===s||(this.S8=t,this.w8=s,this.s9(),this.Nc.XJ())}WY(t){this.g9(t,this.JY())}HY(t){this.g9(this.zY(),t)}wM(t){this.Zb!==t&&(this.Zb=t,this.Nc.XJ())}SM(){return this.Zb}BX(t){t=Im.Kn(t),this.C8!==t&&(this.C8=t,this.s9(),this.Nc.XJ())}UX(){return Im.Kn(this.a8.UX()+this.C8)}UY(){return this.C8}y9(){return this.E6.length>0}JJ(){return this.E6}S9(){return this.w9()&&this.M8?(Im.Th(jm,this.JJ()),jm.sort((t,s)=>this.v9(t,s)),jm):this.JJ()}x9(t){Im.Fn(t,this.S9());for(const s of this.f7)s._Y()&&s.NA()>0&&s.x9(t)}v9(t,s){const e=this.bJ().b9(),i=e[0],n=e[1],r=e[2],h=t.WJ(),o=s.WJ(),a=h.dM()-i,l=h.gM()-n,u=h.SM()-r,c=o.dM()-i,f=o.gM()-n,d=o.SM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}eK(){return this.g8}KY(){return this.y8}YY(t){t=!!t,this.y8!==t&&(this.y8=t,this.Nc.XJ())}tK(){return this.x8}QY(t){t=!!t,this.x8!==t&&(this.x8=t,this.Nc.XJ())}$Y(t){t=!!t,this.b8!==t&&(this.b8=t,this.s9(),this.Nc.XJ())}qY(){return this.b8}M9(){return!this.m$().T9()||!this.b8}w9(){return!this.M9()}G9(){return this.w9()&&this.bJ()._9()}I9(){if(!this.G9())return!1;for(const t of this.f7)if(!t.I9())return!1;return!0}eM(t){this.Yb!==t&&(this.Yb=t,this.Nc.XJ())}sK(){return this.Yb}C9(){return!this.l8}yY(){return this.l8}R9(t){this.l8=t}vY(){return this.f7}P9(){return this.f7.length>0}E9(t,s=!0){s?this.f7.push(t):this.f7.unshift(t)}F9(t,s,e){let i=this.f7.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");e&&++i,this.f7.splice(i,0,t)}A9(t){const s=this.f7.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.f7.splice(s,1)}O9(){for(const t of this.f7)if(t.D9())return!0;return!1}*bY(){for(const t of this.f7)yield*t.bY();yield this}*SY(){let t=this.yY();for(;t;)yield t,t=t.yY()}*t9(){yield this,yield*this.SY()}k9(t){for(const s of this.SY())if(s===t)return!0;return!1}L9(t){return this===t||this.S8===t.S8&&this.w8===t.w8&&this.I8===t.I8&&this.G8===t.G8&&this.C8===t.C8&&this.WX()===t.WX()&&this.jX()===t.jX()}N9(){return{parallaxX:this.zY(),parallaxY:this.JY(),scale:this.kY(),scaleRate:this.BY(),angle:this.UY(),hasOwnScroll:this.e9(),scrollX:this.WX(),scrollY:this.jX()}}B9(t){this.g9(t.parallaxX,t.parallaxY),this.DY(t.scale),this.NY(t.scaleRate),this.BX(t.angle),this.iK(t.hasOwnScroll),this.VX(t.scrollX),this.zX(t.scrollY),this.o9()}U9(t){0!==t.size&&Im.Rh(this.E6,t)>0&&(this.P7(),this.qJ())}qJ(t){this.H8=!1,this.r7=!1,t&&!t.yK().Zq().Pq()||(this.J8=!1)}V9(){if(!this.H8){if(this.E6.sort(_m),this.c7())for(let t=0,s=this.E6.length;t<s;++t){const s=this.E6[t].WJ();s.A7(t),this.i7.Y6(s.W9())}else for(let t=0,s=this.E6.length;t<s;++t)this.E6[t].WJ().A7(t);this.H8=!0}}z9(){if(this.J8)return;const t=this.a8.j9(this.C2()).map(t=>[...t.bY()]).flat();let s=0;for(const e of t){for(const t of e.JJ())t.yK().Zq().Pq()&&t.WJ().H9(s++);e.J9()}}J9(){this.J8=!0}q9(){return{isVisible:this._Y(),opacity:this.NA(),isInteractive:this.CY()}}X9(t,s,e){const i=t.WJ(),n=s.WJ();if(i.zJ()!==this||n.zJ()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=i.jJ();let h=n.jJ();return r!==h+(e?1:-1)&&(Im.Gh(this.E6,r),r<h&&h--,e&&h++,h===this.E6.length?this.E6.push(t):this.E6.splice(h,0,t),this.qJ(t),!0)}Y9(t,s){const e=[];let i=0,n=0,r=t.length,h=s.length;for(;i<r&&n<h;){const r=t[i],h=s[n];r.WJ().C6()<h.WJ().C6()?(e.push(r),++i):(e.push(h),++n)}for(;i<r;++i)e.push(t[i]);for(;n<h;++n)e.push(s[n]);return e}K9(t){const s=[],e=t.length;for(let i=0;i<e-1;i+=2){const e=t[i],n=t[i+1];s.push(this.Y9(e,n))}return e%2==1&&s.push(t[e-1]),s}Z9(t){for(;t.length>1;)t=this.K9(t);return t[0]}Q9(){return this.V9(),Im.wh(Pm),this.i7.X6(this.rK(),Pm),Pm.length?1===Pm.length?Pm[0]:this.Z9(Pm):[]}D9(){return this._Y()&&this.NA()>0&&this.ttt()}ttt(){if(this.y9()||!this.KY()||this.l7.Mf("beforedraw")||this.l7.Mf("afterdraw"))return!0;for(const t of this.f7)if(t.ttt())return!0;return!1}stt(){return this.tK()||!this.Y7()||0!==this.sK()||this.X8.ett()}itt(){if(this.stt())return!0;for(const t of this.f7)if(t.itt())return!0;return!1}GO(){return this._8}f9(t){if(this.a8.mY())return 1;{const s=this.ntt();return s/(s-t)}}htt(t){const s=this.Nc.mK();if(this.a8.mY())return s;{const e=this.ntt();return this.Zw()/Math.abs(e-t)*s}}s9(){this.L8=!0,this.B8=!0,this.D8=!0}ott(t){return this.L8&&(this.att(t,this.mz,0,0,null),this.L8=!1),this.mz}d9(t){return this.Zw(t)/this.ltt()}ntt(){return this.G9()?this.bJ().b9()[2]:this.d9()}utt(){if(this.G9()){const t=this.bJ().b9();return[t[0],t[1],t[2]]}return this.ctt()}ctt(t=0,s=0,e=0){const i=this.Nc,n=this.bJ(),r=i.ftt(),h=i.dtt();let o=(this.WX()-r)*this.S8+r,a=(this.jX()-h)*this.w8+h;i.fJ()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.mY()?this.Zw(e):this.d9(e),[f,d]=this.u9();if(.5!==f||.5!==d){const t=this.Zw(e)/c;let s=(f-.5)*i.p9()/t,n=(d-.5)*i.m9()/t;const r=this.UX();0!==r&&(Vm.set(s,n),Vm.rotate(r),s=Vm.Aa(),n=Vm.Da()),l+=s,u+=n}return[l,u,c]}att(t,s,e,i,n){const r=this.Nc,h=this.bJ();if(this.G9()){Fm.m(Nm,h.b9()),Fm.m(Bm,h.ptt()),Fm.m(Um,h.mtt());const t=r.ftt(),s=r.dtt(),e=Bm[0]-Nm[0],i=Bm[1]-Nm[1],n=Bm[2]-Nm[2];Nm[0]=(Nm[0]-t)*this.S8+t,Nm[1]=(Nm[1]-s)*this.w8+s,Nm[2]*=Math.max(this.S8,this.w8),Bm[0]=Nm[0]+e,Bm[1]=Nm[1]+i,Bm[2]=Nm[2]+n}else{const[t,s,r]=this.ctt(e,i,n);Fm.set(Nm,t,s,r),Fm.set(Bm,t,s,r-100);const h=this.UX();0===h?Fm.set(Um,0,1,0):Fm.set(Um,Math.sin(h),Math.cos(h),0)}t.mv(s,Nm,Bm,Um,n||r.m9())}gtt(){this.k8=!0,this.B8=!0,this.D8=!0}ytt(t){return this.k8&&(this.Stt(t),this.k8=!1),this.wG}Stt(t){const s=this.Nc.AJ(),[e,i]=this.u9();if(this.a8.mY())t.pv(this.wG,s.wtt(),s.vtt());else if(.5===e&&.5===i)Om.m(this.wG,s.xtt());else{const n=s.wtt(),r=s.vtt();t.fv(this.wG,n/r,e,i)}}A4(t,s=!0,e=0,i=0,n=0){s&&t.IA(this.ytt(t));let r=null;0===e&&0===i&&0===n?r=this.ott(t):(this.att(t,Dm,e,i,n),r=Dm),t.AA(r)}btt(t){this.A4(t),t.Qv(this.SM())}Mtt(t){let s=null;if(t.nb()&&this.Nc.Ttt()){const e=this.Nc.AJ().Gtt(this);e&&(s=e.aF(),t.UO(s))}return s}_tt(t){if(t.dv()&&this.Nc.Ttt()){const s=2*(this.Ej()+1);t.IN(s,s+1)}}Itt(t,s){if(this.l7.Mf(s)){t.xv(),t.zA(null),t.$A(),t.Hx(),t.BA(1,1,1,1),t.Qv(this.SM()),t.sx(0);const e=new Im.Event(s);e.rC=this.Nc.AJ().FJ(),this.q5(e)}}lT(t,s,e){const i=this.Nc.AJ(),n=this.stt();let r=null;const h=this.Mtt(t);if(this._tt(t),n){const s={xT:this.Nc.OV(),oG:!0,hV:!!t.dv()&&this.Nc.Ctt()};"low"===i.Rtt()&&(s.width=i.wtt(),s.height=i.vtt()),r=this.Nc.Ptt(s),this._8=r,t.EO(r),this.KY()&&t.SO(0,0,0,0)}else this._8=s,t.EO(s);if(this.KY()||t.Ru(this.g8),this.a8.Ett(t,this._8,this.f7,n&&this.KY()),this._tt(t),this.A4(t),t.Qv(this.SM()),t.xO(this.w9()),this.Itt(t,"beforedraw"),this.ltt()>Number.EPSILON){this.V9();const s=this.c7()&&0===this.SM()&&!this.q8;this.G9()?this.Ftt(t):s?this.Att(t):this.Ott(t,this.S9())}this.Itt(t,"afterdraw"),t.Qv(0),t.sx(0),n&&(t.xO(!1),this.Dtt(t,r,s,e)),h&&t.WO(h),this._8=null}Ott(t,s){const e=this.rK(),i=this._8,n=this.bJ().mY(),r=this.bJ().ktt();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.WJ();l._Y()&&l.Ltt(e,r,n)&&this.Ntt(a,l,t,i)}}Ftt(t){const s=this._8,e=this.Btt(),i=Wm,n=zm,r=this.S9();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.WJ();if(!l._Y()||!l.Utt(e)){++h;continue}(!a.Vtt()||l.Wtt()>0)&&n.push(a);const u=a.WJ().WZ();i.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.WJ();if(s._Y()&&s.Utt(e)){if(s.WZ()!==u)break;t.Vtt()?(s.Wtt()>0&&n.push(t),i.push(t)):n.push(t)}}if(1!==i.length||i[0].ztt()){this.jtt(t,i);for(let e=0,i=n.length;e<i;++e){const i=n[e],r=i.WJ();r.Htt(!0),this.Ntt(i,r,t,s),r.Htt(!1)}}else{this.Ntt(a,l,t,s);for(let e=0,i=n.length;e<i;++e){const i=n[e];if(i===a)continue;const r=i.WJ();r.zJ().Ntt(i,r,t,s)}}h=c,Im.wh(i),Im.wh(n)}}jtt(t,s){const e=this._8;t.kO();for(let e=0,i=s.length;e<i;++e){const i=s[e],n=i.WJ();n.Jtt(!0),this.$tt(i,n,t)}t.LO();for(let i=0,n=s.length;i<n;++i){const n=s[i],r=n.WJ();this.Ntt(n,r,t,e),r.Jtt(!1)}t.BO()}Att(t){const s=this.i7,e=this.o7,i=this.h7,n=this.rK();let r;e.set(s.H6(n.Za()),s.J6(n.Qa()),s.H6(n.tl()),s.J6(n.sl())),this.r7&&e.equals(i)?r=this.n7:(r=this.Q9(),this.r7=!0,i.m(e)),this.Ott(t,r),r!==this.n7&&Im.Th(this.n7,r)}Ntt(t,s,e,i){s.ett()?this.qtt(t,s,e,i):this.$tt(t,s,e)}$tt(t,s,e){const i=s.Xtt();e.kv()!==i&&i.sM(),t.lT(e)}qtt(t,s,e,i){this.Ytt(t,s,e,i,null)&&this.A4(e)}Ytt(t,s,e,i,n){const r=s.IZ().Pj();return r.Iz(e,i,{Cz:t,Pz:s.sK(),devicePixelRatio:this.Nc.Ktt(),time:t.Ztt(),OB:this.Nc.Qtt()*this.ltt(),DB:this.UX(),AB:s.HZ(),tj:r.yj()?null:this.tst(s),Dz:n&&n.Dz,kz:n&&n.kz,Lz:n&&n.Lz,Nz:n&&n.Nz,Bz:n&&n.Bz,Uz:n&&n.Uz}),e.Qv(this.SM()),r.DA()}Dtt(t,s,e,i){const n=this.X8.K7(),r=this.Nc;0===n.length?(t.EO(e),t.xv(),i&&0===this.Yb&&this.Y7()?t.FO(s):(t.eM(this.Yb),t.iM(this.v8),t.AO(s)),t.OO(s),r.Q8(s)):this.Pj().Iz(t,e,{Cz:this,Pz:this.sK(),devicePixelRatio:r.Ktt(),OB:r.Qtt()*this.ltt(),DB:this.UX(),AB:this.rK(),tj:null,mW:!0})}kY(){return this.I8}DY(t){this.I8!==t&&(this.I8=t,this.a8.sst(),this.s9(),this.Nc.XJ())}mK(){return this.ltt()*this.Nc.mK()}L2(){return this.ltt()*this.Nc.L2()}ltt(){return(this.I8*this.a8.NX()-1)*this.G8+1}o9(){if(!this.D8)return;this.D8=!1;const t=this.Nc.ftt(),s=this.Nc.dtt(),e=(this.WX()-t)*this.S8+t,i=(this.jX()-s)*this.w8+s,n=this.ltt(),r=this.Nc.p9()/n,h=this.Nc.m9()/n;let o=e-r/2,a=i-h/2;this.Nc.fJ()&&(o=Math.round(o),a=Math.round(a));const l=this.A8;l.set(o,a,o+r,a+h);const u=this.UX();0!==u&&(Cm.m(l),Cm.offset(-l.hl(),-l.ol()),Rm.Yl(Cm,u),Rm.Zl(Cm),Cm.offset(l.hl(),l.ol()),l.m(Cm));const c=this.Zb;this.c9(c,this.xF),this.G9()?this.est(c,this.O8):this.O8.m(this.xF)}est(t,s){const e=this.Nc.AJ(),i=e.lq(),n=e.cq(),[r,h]=this.oK(0,0,t),[o,a]=this.oK(i,0,t),[l,u]=this.oK(i,n,t),[c,f]=this.oK(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}oK(t,s,e=0){return this.ist(t,s,e,this.L2())}cK(t,s,e=0){return this.ist(t,s,e,this.mK()*this.yq())}ist(t,s,e,i){const n=this.Nc,r=n.Ob(),h=this.ltt(),o=n.p9()/h,a=n.m9()/h,l=Lm;Am.set(l,0,0,o,a),t/=i,s=l[3]-s/i;const u=this.ytt(r),c=this.ott(r),f=km;return Im.$S.YS(t,s,e,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}nst(t,s){const e=this.I8,i=this.G8,n=this.S8,r=this.w8,h=this.C8,o=this.G9();o&&this.bJ().rst(!1),this.I8=1,this.G8=1,this.S8=1,this.w8=1,this.C8=0,this.s9();const a=this.oK(t,s);return this.I8=e,this.G8=i,this.S8=n,this.w8=r,this.C8=h,this.s9(),o&&this.bJ().rst(!0),a}lK(t,s,e=0){return this.hst(t,s,e,this.L2())}dK(t,s,e=0){return this.hst(t,s,e,this.mK()*this.yq())}hst(t,s,e,i){const n=this.Nc,r=n.Ob(),h=this.ltt(),o=n.p9()/h,a=n.m9()/h,l=Lm;Am.set(l,0,0,o,a);const u=this.ytt(r),c=this.ott(r),f=km;return Im.$S.qS(t,s,e,c,u,l,f)?[f[0]*i,(l[3]-f[1])*i]:[NaN,NaN]}ost(t,s){return t*=this.mK()*this.yq(),0!==s&&(t*=this.f9(s)),t}tst(t){const s=t.HZ(),e=t.WZ(),i=t.Wtt(),n=e+i,r=s.Za(),h=s.Qa(),o=s.tl(),a=s.sl();if(this.G9()){if(this.ast(r,h,e)||this.ast(o,h,e)||this.ast(o,a,e)||this.ast(r,a,e))return null;if(i>0&&(this.ast(r,h,n)||this.ast(o,h,n)||this.ast(o,a,n)||this.ast(r,a,n)))return null}else if(n>=this.d9())return null;let[l,u]=this.dK(r,h,e),[c,f]=this.dK(o,a,e);if(0!==this.UX()||i>0||this.G9()){const[t,s]=this.dK(o,h,e),[d,p]=this.dK(r,a,e);if(i>0){const[e,i]=this.dK(r,h,n),[m,g]=this.dK(o,h,n),[y,S]=this.dK(o,a,n),[w,v]=this.dK(r,a,n);let x=Math.min(l,c,t,d,e,m,y,w);c=Math.max(l,c,t,d,e,m,y,w),l=x,x=Math.min(u,f,s,p,i,g,S,v),f=Math.max(u,f,s,p,i,g,S,v),u=x}else{let e=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=e,e=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=e}}return Cm.set(l,u,c,f),Cm}Btt(){return this.B8&&(this.lst(),this.B8=!1),this.N8}lst(){const t=this.Nc.Ob(),s=this.ytt(t),e=this.ott(t);this.N8.rw(e,s)}ast(t,s,e){return this.Btt().ow(t,s,e)}ust(){return{d:this.J7(),s:this.kY(),a:this.UY(),v:this.MY(),i:this.CY(),html:this.EY(),bc:this.g8.toJSON(),t:this.KY(),sx:this.P8,sy:this.E8,hosp:this.F8,px:this.zY(),py:this.JY(),c:this.Kb.toJSON(),sr:this.BY(),fx:this.X8._M(),cg:this.z8}}cst(t){this.d8=!!t.d,this.I8=t.s,this.C8=t.a,this.p8=!!t.v,this.m8=!t.hasOwnProperty("i")||t.i,this.u8=!!t.html,this.g8.Sa(t.bc),this.y8=!!t.t,t.hasOwnProperty("sx")&&(this.P8=t.sx),t.hasOwnProperty("sy")&&(this.E8=t.sy),t.hasOwnProperty("hosp")&&(this.F8=!!t.hosp),this.S8=t.px,this.w8=t.py,this.Kb.Sa(t.c),this.u7(),this.G8=t.sr,Im.Th(this.z8,t.cg),Im.Th(this.W8,this.U8);const s=new Set(this.z8);let e=0;for(let t=0,i=this.W8.length;t<i;++t)s.has(this.W8[t][2])||(this.W8[e]=this.W8[t],++e);Im.Sh(this.W8,e),this.X8.IM(t.fx),this.s7=!0}fst(){this.F7(!1),this.qJ(),this.s9(),this.gtt()}XX(){return this.a7}aH(){return this.l7}q5(t){t.CZ=this.XX(),this.l7.dispatchEvent(t)}gX(t,s=!1,e=!1){if(this.E6.includes(t))return s&&this.E6.sort((t,s)=>(t.WJ().dst()??0)-(s.WJ().dst()??0)),void(e&&this.E6.forEach((t,s)=>t.WJ().A7(s)));if(t.pst()){const s=[...t.wQ()];s.push(t),s.sort((t,s)=>(t.WJ().dst()??0)-(s.WJ().dst()??0));for(const t of s)if(t.CK())for(const e of t.RK()){if(s.includes(e))continue;const t=[...e.wQ()];t.push(e),t.sort((t,s)=>(t.WJ().dst()??0)-(s.WJ().dst()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.Zq().Cq()&&this.G7(t,!0);e&&this.E6.forEach((t,s)=>t.WJ().A7(s))}else{if(t.Zq().Cq()&&this.G7(t,!0),!t.CK())return void(e&&this.E6.forEach((t,s)=>t.WJ().A7(s)));for(const s of t.RK()){const t=[...s.wQ()];if(t.push(s),t.sort((t,s)=>(t.WJ().dst()??0)-(s.WJ().dst()??0)),t&&t.length)for(const s of t)s.Zq().Cq()&&this.G7(s,!0)}e&&this.E6.forEach((t,s)=>t.WJ().A7(s))}}}}{let qm=function(t,s,e,i){return t[0]===Math.fround(s)&&t[1]===Math.fround(e)&&t[2]===Math.fround(i)},Xm=function(t,s){rg!==t&&(t.btt(s),rg=t)};0;const Ym=self._s,Km=self.lZ,Zm=(self.assert,Ym.jn(Ym.Rect),Ym.jn(Ym.Rect),Ym.jn(Ym.Rect)),Qm=Ym.jn(Ym.Mo),tg=self.hs.ys,sg=[],eg=[],ig=[],ng=[];let rg=null;Ym.mst=class extends Ym.Wn{constructor(t,s,e){super(),this.gst=t,this.Nc=t.m$(),this.qn=e[0],this.yst=e[1],this.Sst=e[2],this.Vy=e[1],this.Wy=e[2],this.wst=!!e[3],this.vst=!!e[4],this.xst=e[5],this.bst=e[6],this.Mst=e[7],this.Tst=null,this.f8=e[8],this.US=s,this.P8=0,this.E8=0,this.I8=1,this.C8=0,this.Gst=new Set,this._st=new Set,this.Ist=new Set,this.Cst=[],this.Rst=[],this.Pst=new Map,this.Est=new Map,this.Fst=[],this.Ast=!1,this.Ost=tg.create(),this.Dst=tg.create(),this.kst=tg.create(),this.Lst=[],this.Nst=[],this.Bst=new Map,this.Ust=new Map,this.Vst=-1;const i=this.Nc.AJ();this.X8=Ym.jn(Ym.Y8,this,e[11]),this.Ij=Ym.jn(Ym.$S.MW,i.K8(),{fW:(t,s)=>{const e=s.wj().GO();t.VA(),t.AO(e),t.OO(e),i.Q8(e)},pW:t=>this.AX().t7(t)}),this.s7=!0,this.Wst=!1,this._8=null,this.zst={},this.jst=new Map,this.Hst=!0,this.Jst=new self.FX(this),this.l7=Ym.jn(Ym.Event.Sf);for(const t of e[9])this.Lst.push(Ym.o8.d7(this,null,t));this.$st();for(const t of this.ZX())t.p7();for(const t of e[10]){const s=this.Nc.m7(t[1]);if(!s)throw new Error("missing nonworld object class");s.y7()||s.S7(t),this.Fst.push(t),this.g7(s)}}Hn(){for(const t of this.Nst)t.Hn();Ym.wh(this.Nst),this.Ist.clear(),this.Tst=null,this.gst=null,this.Nc=null}m$(){return this.Nc}Rc(){return this.qn}H7(){return this.f8}Ej(){return this.US}AX(){return this.X8}Pj(){return this.X7(),this.Ij}X7(){const t="low"===this.Nc.AJ().Rtt();if(!this.s7&&this.Wst===t&&!this.Ij.gz())return;const s=this.AX().K7();this.Ij.yz(s.map(t=>t.nI()),{gW:s.map(t=>t.Ej()),SW:t,bW:!0}),this.s7=!1,this.Wst=t}G0(){this.AX().G0(),this.s7=!0}qst(){let t=this.Nst[0].ltt();for(let s=1,e=this.Nst.length;s<e;++s){const e=this.Nst[s];0===e.zY()&&0===e.JY()||(t=Math.min(t,e.ltt()))}return t}Xst(){return.5*this.Nc.p9()/this.qst()}Yst(){return.5*this.Nc.m9()/this.qst()}i9(){return this.$X()?-1/0:this.Xst()}n9(){return this.$X()?1/0:this.by()-this.Xst()}r9(){return this.$X()?-1/0:this.Yst()}h9(){return this.$X()?1/0:this.Ty()-this.Yst()}VX(t){const s=this.i9(),e=this.n9();t>e&&(t=e),t<s&&(t=s),this.P8!==t&&(this.P8=t,this.Kst(),this.Nc.XJ())}WX(){return this.P8}zX(t){const s=this.r9(),e=this.h9();t>e&&(t=e),t<s&&(t=s),this.E8!==t&&(this.E8=t,this.Kst(),this.Nc.XJ())}jX(){return this.E8}$X(){return this.wst}sst(){this.VX(this.WX()),this.zX(this.jX());for(const t of this.Nst)t.e9()&&(t.VX(t.WX()),t.zX(t.jX()))}uY(t,s){this.xst===t&&this.bst===s||(this.xst=t,this.bst=s,this.Zst()&&(this.Qst(),this.Kst(),this.Nc.XJ()))}tet(){return this.mY()?.5:this.xst}eet(){return this.mY()?.5:this.bst}fY(){return[this.tet(),this.eet()]}ktt(){const t=this.tet(),s=this.eet();return t<0||t>1||s<0||s>1}dY(){this.vst&&(this.vst=!1,this.Qst(),this.Kst(),this.Nc.XJ())}pY(){this.vst||(this.vst=!0,this.Qst(),this.Kst(),this.Nc.XJ())}mY(){return this.vst}Zst(){return!this.mY()}rst(t){t=!!t,this.Ast!==t&&(this.Ast=t,this.Kst(),this.Nc.XJ())}_9(){return this.Ast}iet(t,s,e,i,n,r,h,o,a){qm(this.Ost,t,s,e)&&qm(this.Dst,i,n,r)&&qm(this.kst,h,o,a)||(tg.set(this.Ost,t,s,e),tg.set(this.Dst,i,n,r),tg.set(this.kst,h,o,a),this.net())}net(){this.Kst(),this.Nc.XJ()}b9(){return this.Ost}ptt(){return this.Dst}mtt(){return this.kst}NX(){return this.I8}LX(t){this.I8!==t&&(this.I8=t,this.Kst(),this.sst(),this.Nc.XJ())}BX(t){t=Ym.Kn(t),this.C8!==t&&(this.C8=t,this.Kst(),this.Nc.XJ())}UX(){return this.C8}by(){return this.Vy}ny(t){!isFinite(t)||t<1||(this.Vy=t)}Ty(){return this.Wy}hy(t){!isFinite(t)||t<1||(this.Wy=t)}ret(){return this.Tst}j7(){return this.Lst}*ZX(){for(const t of this.Lst)yield*t.bY()}KX(){return this.Nst}het(){return this.Nst.length}zJ(t){return"number"==typeof t?this.HJ(t):this.B7(t.toString())}HJ(t){return t=Ym.Yn(Math.floor(t),0,this.Nst.length-1),this.Nst[t]}B7(t){return this.Bst.get(t.toLowerCase())||null}oet(t){return!!this.B7(t)}aet(t){return this.Ust.get(t)||null}Qst(){for(const t of this.Nst)t.gtt()}Kst(){for(const t of this.Nst)t.s9()}eY(t,s,e){if(this.oet(t))throw new Error(`layer name '${t}' already in use`);if(!s&&e<2)throw new Error("invalid insert position");const i=e>=2?s:s.yY(),n=Ym.jn(Ym.o8,this,i,{name:t,K6:Math.floor(1e15*Math.random()),Z6:!0});this.let(n,s,e),this.m$().XJ(),this.W7()}nY(t,s,e){if(!s&&e<2)throw new Error("invalid insert position");t===s&&e<2||(this.uet(t),this.let(t,s,e),this.m$().XJ(),this.W7())}hY(t){if(this.uet(t)){const s=this.Nc.fH();s.yX(!0),t.Hn(),s.yX(!1),this.m$().XJ(),this.W7()}}aY(){const t=new Set;for(const s of this.ZX())s.J7()&&!s.q7()&&t.add(s);if(0===t.size)return;const s=this.Nc.fH();s.yX(!0);for(const s of t)this.uet(s),s.Hn();s.yX(!1),this.m$().XJ(),this.W7()}let(t,s,e){if(e>=2)if(s){if(s===t||s.k9(t))throw new Error(`cannot move layer '${t.Rc()}' to sub-layer of itself`);s.E9(t,2===e),t.R9(s)}else 2===e?this.Lst.push(t):this.Lst.unshift(t),t.R9(null);else{const i=s.yY();if(i){if(s.k9(t))throw new Error(`cannot move layer '${t.Rc()}' to sub-layer of itself`);i.F9(t,s,0===e),t.R9(i)}else{let i=this.Lst.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");0===e&&++i,this.Lst.splice(i,0,t),t.R9(null)}}}uet(t){const s=t.yY();if(s)return s.A9(t),!0;if(this.Lst.length>1){const s=this.Lst.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.Lst.splice(s,1),!0}return!1}$st(){this.Nst=[...this.ZX()],this.Bst.clear(),this.Ust.clear();for(let t=0,s=this.Nst.length;t<s;++t){const s=this.Nst[t];s.U7(t),this.Bst.set(s.Rc().toLowerCase(),s),this.Ust.set(s.H7(),s)}}cet(){let t=0;for(const s of this.Lst){for(const e of s.bY())e.V7(t);s.EY()&&t++}}fet(){return this.Lst.at(-1).C2()+1}async W7(){this.$st(),this.cet(),this.Vst=this.fet()}det(){return this.Vst}pet(){this.Vst=-1}j9(t){const s=[];for(const e of this.Lst){const i=e.C2();if(i===t)s.push(e);else if(i>t)break}return s}N9(){return{scrollX:this.WX(),scrollY:this.jX(),scale:this.NX(),angle:this.UX(),vpX:this.tet(),vpY:this.eet()}}B9(t){this.VX(t.scrollX),this.zX(t.scrollY),this.LX(t.scale),this.BX(t.angle),this.uY(t.vpX,t.vpY)}met(){let t=this.Lst.filter(t=>t.D9())[0];for(;t;){if(!t.KY())return Qm.ko(t.eK()),Qm.Do(1),Qm;if(t.stt())return Qm.Co(0,0,0,0),Qm;t=t.vY().filter(t=>t.D9())[0]}return Qm.Co(0,0,0,0),Qm}b7(){return this.Hst}yet(){return[...this.Gst]}g7(t){if(t.CK())for(const s of t.vet().wet())this.Gst.add(s);else this.Gst.add(t)}xet(){return[...this._st]}bet(t,s){if(t===this||!s)return Promise.resolve();t&&(Ym.po(this._st,t._st),t._st.clear());const e=[];for(const t of this.Gst)this._st.has(t)||(e.push(t.Met(s)),this._st.add(t));return Promise.all(e)}async Tet(t){if(t.N7())throw new Error("cannot load textures for family");const s=this.Nc.Ob();if(!s||s.OE()||this._st.has(t))return;this._st.add(t);const e=t.Met(s);this.Get(e),await e,t._et(),this.Nc.XJ()}Get(t){this.Ist.add(t),t.then(()=>this.Ist.delete(t)).catch(()=>this.Ist.delete(t))}Iet(){return Promise.all([...this.Ist])}Cet(t){if(t.N7()||t.dX()>0)throw new Error("cannot unload textures");const s=this.Nc.Ob();s&&this._st.has(t)&&(this._st.delete(t),t.Ret(s))}Pet(t,s){if(t!==this&&s)for(const s of this._st)s.h8()||t.Gst.has(s)||(s.Ret(),this._st.delete(s))}Eet(){this._st.clear()}async Fet(t){const s=this.Nc,e=this.gst,i=s.fH();this.Mst&&(this.Tst=i.Aet(this.Mst),this.Tst.Oet()),e.Det(this),this.Vy=this.yst,this.Wy=this.Sst,this.P8=s.sH()/2,this.E8=s.iH()/2,this.sst(),this.Qst(),this.Kst(),this.cet(),await this.Nc.AJ().ket(this.fet(),!0),this.Let(t),this.Nc.Net(!0),this.Bet(),this.Hst||this.Uet(),this.Vet(this.Cst),this.Vet(this.Rst),this.Wet(),e.zet(),s.xX(),this.Nc.Net(!1);const n=this.Nc.jet();if(await Promise.all(n),Ym.wh(n),!s.Het()){for(const t of this.Cst)t.Jet();for(const t of this.Rst)t.$et(this.Pst,this.Est);for(const[t,s]of Object.entries(this.zst)){const e=this.Nc.x3(parseInt(t,10));e&&!e.N7()&&e.M7()&&Ym.wh(s)}for(const t of this.Cst)t.qet();for(const t of this.Rst)t.qet();for(const t of this.Cst)t.TQ()||t.Xet();for(const t of this.Rst)t.TQ()||t.Xet()}Ym.wh(this.Cst),Ym.wh(this.Rst),this.Pst.clear(),this.Est.clear(),await Promise.all([...this.Gst].map(t=>t.Yet(this.Nc.Ob()))),t&&(s.Sf().dispatchEvent(new Ym.Event("beforefirstlayoutstart")),await s.Ket(new Ym.Event("beforeprojectstart"))),await this.Zet(new Ym.Event("beforeanylayoutstart")),s.Sf().dispatchEvent(new Ym.Event("beforelayoutstart")),await this.Ket(new Ym.Event("beforelayoutstart")),s.Het()||await s.n$(Ym.a$.o$.h$.Qet,null,null),s.Sf().dispatchEvent(new Ym.Event("afterlayoutstart")),await this.Ket(new Ym.Event("afterlayoutstart")),await this.Zet(new Ym.Event("afteranylayoutstart")),t&&(s.Sf().dispatchEvent(new Ym.Event("afterfirstlayoutstart")),await s.Ket(new Ym.Event("afterprojectstart"))),i.tit(e),await this.Iet(),this.Hst=!1}Let(t){for(const t of this.Nc.L7())if(!t.N7()&&t.Cq())for(const s of t.lX()){const t=s.WJ(),e=t.zJ(),i=e.Rc(),n=this.B7(i);if(n)t.$J(n,!0),n._7(s);else{const i=Ym.Yn(e.Ej(),0,this.Nst.length-1),n=this.Nst[i];t.$J(n,!0),n._7(s)}}if(!t)for(const t of this.Nst)t.F7(!1)}Bet(){for(const t of this.Nst)t.x7(this.Cst),t.O7()}Uet(){let t=!1;for(const[s,e]of Object.entries(this.zst)){const i=this.Nc.x3(parseInt(s,10));if(i&&!i.N7()&&i.M7())for(const s of e){let e=null;if(i.Cq()&&(e=s.hasOwnProperty("instJson")?this.aet(s.instJson.w.l):this.aet(s.w.l),!e))continue;const n=this.Nc.T7(i,e,!1,0,0,!0);s.hasOwnProperty("instJson")?n.IM(s.instJson):n.IM(s),t=!0,this.Rst.push(n),s.hasOwnProperty("instJson")&&(this.Pst.set(n,s),this.Est.set(s.index,n))}}for(const t of this.Nst)t.F7(!0),t.qJ();t&&(this.Nc.xX(),this.Nc.sit())}Vet(t){for(const s of t){if(!s.CK())continue;const e=s.WJ(),i=s.FK();for(const n of s.yK().vet().PX()){if(n===s.yK())continue;const r=n.lX();if(r.length>i)s.eit(r[i]);else{let i;i=e?this.Nc.T7(n,e.zJ(),!0,e.dM(),e.gM(),!0):this.Nc.T7(n,null,!0,0,0,!0),this.Nc.xX(),n.iit(),s.eit(i),t.push(i)}}}}Wet(){for(const t of this.Fst)this.Nc.m7(t[1]).CK()||this.Nc.T7(t,null,!0)}nit(){const t=[],s=this.Fst;let e=0;for(let i=0,n=s.length;i<n;++i){const n=s[i],r=this.Nc.m7(n[1]);r.h8()?r.CK()&&r.vet().rit()||t.push(this.Nc.T7(n,null,!0)):(s[e]=n,++e)}Ym.Sh(s,e),this.Nc.xX(),this.Vet(t)}k7(t,s,e,i,n,r,h){if(e)return e.k7(t,s,n,r,i,h);{const e=[];for(const o of this.Nst)e.push(o.k7(t,s,n,r,i,h));return e.flat()}}async hit(){const t=this.gst;this.Nc.Het()||(await this.Zet(new Ym.Event("beforeanylayoutend")),await this.Ket(new Ym.Event("beforelayoutend")),await this.Nc.n$(Ym.a$.o$.h$.oit,null,null),await this.Ket(new Ym.Event("afterlayoutend")),await this.Zet(new Ym.Event("afteranylayoutend"))),t.ait(!0),this.Nc.fH().lit(),this.Hst||this.uit();for(const t of this.Nst)t.D7();for(const t of this.Nc.L7())if(!(t.h8()||t.Cq()||t.Zq()._q()||t.N7())){for(const s of t.lX())this.Nc.MK(s);this.Nc.xX()}t.ait(!1),t.SJ()===this&&t.Det(null)}cit(t,s){const e=t.yK().H7().toString();this.zst.hasOwnProperty(e)||(this.zst[e]=[]);const i=this.zst[e],n={index:s,instJson:t._M(),sceneGraphJson:{children:[]}};i.push(n),this.jst.set(t,n)}fit(t){const s=this.jst.get(t);for(const e of t.dit()){const t=this.jst.get(e);t&&s.sceneGraphJson.children.push({index:t.index,flags:Ym.mit.pit(e.WJ())})}}uit(){this.jst.clear();let t=0;for(const s of this.Nst){s.V9();for(const e of s.JJ()){const s=e.yK();!s.h8()&&s.M7()&&(this.cit(e,t),t++)}}for(const t of this.Nst)for(const s of t.JJ()){const t=s.yK();!t.h8()&&t.M7()&&this.fit(s)}this.jst.clear()}git(){this.zst={},this.Hst=!0}GO(){return this._8}stt(){const t=this.Nc,s=t.Ob().nb();return"low"===t.AJ().Rtt()||s&&t.Ctt()||this.X8.ett()||s&&t.T9()}yit(t){const s=this.Nc.AJ();if(this.stt()){t.EO(null),t.SO(0,0,0,0);const e={xT:this.Nc.OV(),oG:t.dv()||this.Nc.Ctt()||this.X8.ett(),hV:!!t.dv()&&this.Nc.Ctt()};"low"===s.Rtt()&&(e.width=s.wtt(),e.height=s.vtt()),this._8=this.Nc.Ptt(e)}else this._8=null}Sit(t){this.Nc.wit(t)&&(t.xO(!1),t.EO(null),t.xv(),t.FO(this._8))}vit(t){this.stt()&&(t.xO(!1),this.xit(t,this._8))}bit(t){t.EO(this._8),t.Ru(this.met()),this.Nc.T9()&&t.vO();const s=this.j9(0);this.Ett(t,this._8,s,!0),t.dv()&&t.IN(0,1),this.vit(t),this._8=null}Mit(t,s){let e=null;this.Nc.wit(t)&&(e=this._8),t.EO(e),t.SO(0,0,0,0),this.Nc.T9()&&t.vO();const i=this.j9(s);this.Ett(t,e,i,!0),this.Sit(t),t.Kx(),this.Nc.AJ().Tit(s)}Ett(t,s,e,i){const n=e.filter(t=>t.D9());for(let e=0,r=n.length;e<r;){const h=n[e];if(h.I9()&&!h.itt()){sg.push(h);for(let t=e+1;t<r;++t){const s=n[t];if(!s.I9()||s.itt())break;sg.push(n[t])}if(sg.length>=2||1===sg.length&&sg[0].O9()){this.Git(t,s,sg),e+=sg.length,Ym.wh(sg);continue}Ym.wh(sg)}h.lT(t,s,i&&0===e),++e}}xit(t,s){const e=this.X8.K7(),i=this.Nc;0===e.length?(t.EO(null),t.xv(),t.FO(s),t.OO(s),i.Q8(s)):(Zm.set(0,0,i.p9(),i.m9()),this.Pj().Iz(t,null,{Cz:this,Pz:3,devicePixelRatio:this.Nc.Ktt(),OB:this.Nc.Qtt()*this.NX(),DB:this.UX(),AB:Zm,tj:null,mW:!0}))}Git(t,s,e){const i=e[0],n=i.Mtt(t);i._tt(t),e[0].KY()||(Qm.ko(e[0].eK()),Qm.Do(1),t.Ru(Qm)),t.xO(!0);const r=eg,h=ig,o=ng;for(const s of e)s.V9(),s.x9(r),s.Itt(t,"beforedraw");for(let e=0,i=r.length;e<i;){const n=r[e],a=n.WJ(),l=a.zJ();if(!a._Y()||!a.Utt(l.Btt())){++e;continue}(!n.Vtt()||a.Wtt()>0)&&o.push(n);const u=n.WJ().WZ();h.push(n);let c=e+1;for(;c<i;++c){const t=r[c],s=t.WJ();if(s._Y()&&s.Utt(s.zJ().Btt())){if(s.WZ()!==u)break;t.Vtt()?(s.Wtt()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].ztt()){this._it(t,s,h);for(let e=0,i=o.length;e<i;++e){const i=o[e],n=i.WJ(),r=n.zJ();n.Htt(!0),Xm(r,t),r.Ntt(i,n,t,s),n.Htt(!1)}}else{Xm(l,t),l.Ntt(n,a,t,s);for(let e=0,i=o.length;e<i;++e){const i=o[e];if(i===n)continue;const r=i.WJ(),h=r.zJ();Xm(h,t),h.Ntt(i,r,t,s)}}e=c,Ym.wh(h),Ym.wh(o)}for(const s of e)s.Itt(t,"afterdraw");n&&t.WO(n),Ym.wh(r),rg=null}_it(t,s,e){t.kO();for(let s=0,i=e.length;s<i;++s){const i=e[s],n=i.WJ(),r=n.zJ();n.Jtt(!0),Xm(r,t),r.$tt(i,n,t)}t.LO();for(let i=0,n=e.length;i<n;++i){const n=e[i],r=n.WJ(),h=r.zJ();Xm(h,t),h.Ntt(n,r,t,s),r.Jtt(!1)}t.BO()}ust(){const t={sx:this.WX(),sy:this.jX(),s:this.NX(),a:this.UX(),w:this.by(),h:this.Ty(),ortho:this.mY(),vpX:this.tet(),vpY:this.eet(),fv:this.Hst,persist:this.zst,fx:this.X8._M(),layers:{},dynamicLayers:[]};for(const s of this.Nst)if(s.J7()){const e=s.yY();t.dynamicLayers.push({sid:s.H7(),name:s.Rc(),parentSid:e?e.H7():null,siblingIndex:s.z7(),data:s.ust()})}else t.layers[s.H7().toString()]=s.ust();return t}cst(t){this.P8=t.sx,this.E8=t.sy,this.I8=t.s,this.C8=t.a,this.Vy=t.w,this.Wy=t.h,this.vst=!!t.ortho,t.hasOwnProperty("vpX")&&(this.xst=t.vpX),t.hasOwnProperty("vpY")&&(this.bst=t.vpY),this.Hst=!!t.fv,this.zst=t.persist,this.X8.IM(t.fx),this.s7=!0;for(const[s,e]of Object.entries(t.layers)){const t=parseInt(s,10),i=this.aet(t);i&&i.cst(e)}if(t.hasOwnProperty("dynamicLayers")){this.aY(),this.Nc.xX();const s=new Map,e=t.dynamicLayers;for(let t=e.length-1;t>=0;--t){const i=e[t],n=i.sid,r=i.name,h=i.parentSid,o=i.siblingIndex,a=i.data;if(this.$st(),this.oet(r)||this.aet(n))continue;let l,u;if(null===h)l=null,u=this.Lst;else{if(l=this.aet(h),!l)continue;u=l.vY()}const c=Ym.jn(Ym.o8,this,l,{name:r,K6:n,Z6:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({CZ:c,Iit:o}),c.cst(a)}for(const[t,e]of s){e.sort((t,s)=>t.Iit-s.Iit);for(const s of e){const e=s.CZ,i=s.Iit;let n=t.indexOf(e);t.splice(n,1),t.splice(i,0,e)}}}this.W7(),this.Qst(),this.Kst()}wJ(){return this.Jst}aH(){return this.l7}q5(t){t.layout=this.wJ();const s=this.Nc,e=s.aZ()&&!s.fH().wX();e&&Km.Cit(),this.l7.dispatchEvent(t),e&&Km.Rit()}Ket(t){return t.layout=this.wJ(),this.l7._f(t)}Zet(t){return t.layout=this.wJ(),this.Nc.Ket(t)}Pit(){this.Eit(this.Lst)}Eit(t,s=0){const e=t.slice(0);e.reverse();for(const t of e)console.log(`${"\t".repeat(s)}- ${t.Rc()}`),this.Eit(t.vY(),s+1)}}}{const hg=self._s;hg.Fit=class extends hg.Wn{#s;#e=[];#f=new Map;#a=new Map;#i=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}Hn(){this.#s=null,this.#i=null,this.#r=null,this.#d=null,hg.wh(this.#e),this.#f.clear(),this.#a.clear(),hg.wh(this.#t)}e_(t){const s=hg.jn(hg.mst,this,this.#e.length,t);this.#e.push(s),this.#f.set(s.Rc().toLowerCase(),s),this.#a.set(s.H7(),s)}m$(){return this.#s}Ait(t){this.#r=t}Oit(){if(this.#r)return this.#r;if(this.#e.length)return this.#e[0];throw new Error("no first layout")}Dit(t){return this.#f.get(t.toLowerCase())||null}kit(t){return this.#a.get(t)||null}Lit(t){return t=hg.Yn(Math.floor(t),0,this.#e.length-1),this.#e[t]}bJ(t){return"number"==typeof t?this.Lit(t):this.Dit(t.toString())}TJ(){return this.#e}Det(t){this.#i=t}SJ(){return this.#i}Nit(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}Bit(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*Uit(){this.#i&&(yield this.#i),this.#t.length&&(yield*this.#t)}Vit(t){return this.#i===t||this.#t.includes(t)}ait(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}vX(){return this.#h>0}IJ(t){this.#d=t}zet(){this.#d=null}_J(){return!!this.#d}Wit(){return this.#d}zit(){const t=this.SJ();t&&t.Qst()}jit(){const t=this.SJ();t&&t.Kst()}}}{const og=self._s,ag=new RegExp("<(.+?)>","g");og.Hit=class extends og.Wn{constructor(t){super(),this.Nc=t,this.Jit=og.jn(og.$it),this.qit=null,this.Xit=[],this.Yit=new Map,this.Kit=new Map,this.Zit=new Map,this.Qit=[],this.tnt=[],this.snt=[],this.ent=!1,this.int=!1,this.nnt=!1,this.rnt=()=>this.hnt(),this.ont=()=>this.ant(),this.lnt=()=>this.unt(),this.cnt=()=>this.fnt(),this.dnt=t=>this.pnt(t.S0),this.mnt=t=>this.gnt(),this.ynt=t=>this.Snt(),this.wnt=t=>this.vnt(),this.xnt=[],this.bnt=0}Hn(){this.Mnt(),this.rnt=null,this.ont=null,this.lnt=null,this.cnt=null,this.dnt=null,this.ynt=null;for(const t of this.Xit)t.u1(),t.Hn();og.wh(this.Xit),this.Xit=null,this.Jit.Hn(),this.Jit=null,og.wh(this.Qit),this.Qit=null,og.wh(this.tnt),this.tnt=null,og.wh(this.snt),this.snt=null,this.Yit.clear(),this.Yit=null,this.Kit.clear(),this.Kit=null,this.Zit.clear(),this.Zit=null,og.wh(this.xnt),this.xnt=null,this.Nc=null}Tnt(){const t=this.Nc.Sf();t.addEventListener("pretick",this.rnt),t.addEventListener("tick2",this.ont),t.addEventListener("beforelayoutchange",this.lnt),t.addEventListener("layoutchange",this.cnt),t.addEventListener("instancedestroy",this.dnt),t.addEventListener("beforeload",this.mnt),t.addEventListener("afterload",this.ynt),t.addEventListener("afterlayoutstart",this.wnt)}Mnt(){const t=this.Nc.Sf();t.removeEventListener("pretick",this.rnt),t.removeEventListener("tick2",this.ont),t.removeEventListener("beforelayoutchange",this.lnt),t.removeEventListener("layoutchange",this.cnt),t.removeEventListener("instancedestroy",this.dnt),t.removeEventListener("beforeload",this.mnt),t.removeEventListener("afterload",this.ynt),t.removeEventListener("afterlayoutstart",this.wnt)}e_(t){this.Jit.Bu(t);const s=og._nt.Gnt(t,this);this.Bu(s),this.Int(s),this.Zit.set(s.Rc(),0)}Cnt(t){const s=this.Rnt(),e=t.DK(),i=s.Hs(e),n=og._nt.Cnt(`${e}:${this.Zit.get(e)}`,i,this);return this.Pnt(e),this.Bu(n),this.Nc.aZ()&&globalThis.lZ.Ent(n),n}Fnt(t){return this.Zit.get(t)}Pnt(t){this.Zit.set(t,this.Zit.get(t)+1)}Ant(){for(const t of this.Xit){if(t.Ont())continue;const s=t.DK();this.Pnt(s)}}Dnt(){for(const t of this.Zit.keys())this.Zit.set(t,0)}Bu(t){this.Xit.push(t),this.Yit.set(t.Rc().toLowerCase(),t)}Kf(t){t.knt(),t.Ont()||(og._h(this.Xit,t),og._h(this.Qit,t),og._h(this.tnt,t),og._h(this.snt,t),this.Yit.delete(t.Rc().toLowerCase()),this.Lnt(t),this.Nc.aZ()&&globalThis.lZ.Nnt(t),t.a1()||t.Hn())}tZ(t){this.Nc.tZ(t,this.qit,null)}m$(){return this.Nc}Rnt(){return this.Jit}Bnt(t){this.qit=t}Unt(){return this.qit}*Vnt(){for(const t of this.Xit)yield t}*Wnt(){for(const t of this.tnt)yield t}znt(t,s){this.Kit.has(t)||this.Kit.set(t,new Set),this.Kit.get(t).add(s)}Int(t){for(const s of t.jnt())this.znt(s,t)}Lnt(t){for(const[s,e]of this.Kit.entries())e.has(t)&&(e.delete(t),0===e.size&&this.Kit.delete(s))}Hnt(t){if(this.Kit.has(t))return this.Kit.get(t)}Jnt(t,s){if(s)for(const e of this.Xit)if(s.every(t=>e.$nt(t.S0,t.trackId))&&e.Rc().includes(t.Rc()))return e}qnt(t){return this.Yit.get(t.toLowerCase())||null}Xnt(t){for(const s of this.Qit)if(s.Rc()===t)return s;for(const s of this.tnt)if(s.Rc()===t)return s;return null}*Ynt(t){if(ag.test(t)){let s;ag.lastIndex=0;const e=new Set;do{if(s=ag.exec(t),s){const t=s[1].split(",");for(const s of t)e.add(s)}}while(s);for(const t of e.values()){const s=this.qnt(t);s&&(yield s)}e.clear()}else{const s=this.qnt(t);s&&(yield s)}}*Knt(t){for(const s of this.Xit)s.f1(t)&&(yield s)}Znt(t){this.Qit.includes(t)||this.Qit.push(t),this.Qnt()}trt(t){og._h(this.tnt,t),this.srt()}ert(t){this.tnt.includes(t)?(t.irt(!0),t.nrt(!1),t.rrt(!1)):(t.irt(!1),t.nrt(!0),t.rrt(!1),this.Qit.includes(t)||this.Qit.push(t)),this.Qnt()}hrt(t){t.irt(!1),t.nrt(!1),t.ort(),og._h(this.Qit,t),this.srt()}art(t){t.irt(!1),t.nrt(!1),this.tnt.includes(t)&&(t.rrt(!0),this.snt.push(t),og._h(this.tnt,t)),this.Qit.includes(t)&&t.rrt(!0)}lrt(t){t.irt(!1),t.nrt(!1),t.rrt(!1),t.M1(1),og._h(this.tnt,t)}urt(t){this.art(t),t.ort()}hnt(){const t=this.m$();if(t.Het())return;if(!this.ent)return;if(this.int)return;let s=0;for(t.aZ()&&(s=performance.now()),this.nnt=!0;this.Qit.length;){const t=this.Qit.pop();t.crt()?(t.frt(),this.snt.push(t)):(t.drt(),this.tnt.push(t)),0!==t.prt()&&(this.bnt=1)}const e=this.Nc.mrt(),i=this.Nc.grt(),n=this.Nc.HH();for(let t=this.tnt.length-1;t>=0;t--){const s=this.tnt[t];s&&s.yrt(e,n,i)}this.nnt=!1,t.aZ()&&globalThis.lZ.Srt(performance.now()-s),0!==this.bnt&&t.XJ()}ant(){const t=this.m$();if(t.Het())return;if(!this.ent)return;if(this.int)return;let s,e=0;t.aZ()&&(e=performance.now());for(let t=0,e=this.snt.length;t<e;t++){const e=this.snt[t];s||(s=new Set),e.knt(),this.wrt(e),s.add(e)}if(s){og.Rh(this.snt,s),this.bnt=0;for(let t=0,s=this.tnt.length;t<s;t++)if(0!==this.tnt[t].prt()){this.bnt=1;break}}this.srt(),t.aZ()&&globalThis.lZ.Srt(performance.now()-e)}wrt(t){t.a1()||t.vrt()&&t.W1()&&t.xrt()&&t.brt()}Qnt(){this.ent||(this.ent=!0)}srt(){this.snt.length||this.tnt.length||this.Qit.length||this.nnt||(this.ent=!1)}unt(){for(this.int=!0;this.Qit.length;)this.hrt(this.Qit.pop());const t=new Set;for(const s of this.tnt)s.unt()&&(s.knt(),t.add(s));og.Rh(this.tnt,t),t.clear();for(const s of this.snt)s.unt()&&(s.knt(),t.add(s));og.Rh(this.snt,t),this.srt();for(const t of this.Xit)t.Mrt()}fnt(){this.int=!1}pnt(t){const s=t.yK(),e=this.Hnt(s);if(e)if(this.Nc.Het())this.xnt.push(t);else for(const t of e)t.Ont()||(t.a1()?this.Kf(t):t.vrt()||(this.wrt(t),this.Kf(t)))}gnt(){for(const t of this.Qit.map(t=>t))this.wrt(t),this.Kf(t);for(const t of this.tnt.map(t=>t))this.wrt(t),this.Kf(t)}Snt(){for(const t of this.xnt)this.pnt(t);og.wh(this.xnt);for(const t of this.Xit)t.Snt()}vnt(){const t=this.Nc.xJ().SJ();if(t)for(const s of this.Xit){const e=s.Trt();e&&t.Rc()===e&&this.ert(s)}}ust(){return{timelinesJson:this.Grt(),scheduledTimelinesJson:this._rt(),playingTimelinesJson:this.Irt(),markedForRemovalTimelinesJson:this.Crt(),hasRuntimeListeners:this.ent,changingLayout:this.int,isTickingTimelines:this.nnt}}cst(t){t&&(this.Dnt(),this.Rrt(t.timelinesJson),this.Prt(t.scheduledTimelinesJson),this.Ert(t.playingTimelinesJson),this.Frt(t.markedForRemovalTimelinesJson),this.ent=!t.hasRuntimeListeners,this.int=!!t.changingLayout,this.nnt=!!t.isTickingTimelines,this.Ant(),this.Qnt(),this.srt())}Grt(){return this.Xit.map(t=>t.ust())}Rrt(t){for(const s of t){let t=this.qnt(s.name);if(t)t.cst(s);else{const e=this.Art(s);if(!e)continue;const i=this.qnt(e);t=this.Cnt(i),t.cst(s)}t.Ort()||this.Kf(t)}}Art(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}_rt(){return this.Drt(this.Qit)}Prt(t){this.krt(t,this.Qit)}Irt(){return this.Drt(this.tnt)}Ert(t){this.krt(t,this.tnt)}Crt(){return this.Drt(this.snt)}Frt(t){this.krt(t,this.snt)}Lrt(t,s){if(!s)return!1;for(const e of s)if(e===t.Rc())return!0;return!1}Drt(t){return t.map(t=>t.Rc())}krt(t,s){const e=new Set;for(const i of s)this.Lrt(i,t)||e.add(i);if(og.Rh(s,e),t){const e=t=>s=>s.Rc()===t;for(const i of t){const t=this.qnt(i);t&&(s.find(e(i))||s.push(t))}}}}}{const lg=self._s,ug=[0,0],cg=[0,0],fg=[0,0],dg=[0,0,0,0,0],pg=new Array(4),mg=[{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0}],gg={x:0,y:0,t:0,vt:0};lg.Nrt=class{constructor(t,s){this.Brt=!1,this.Urt=t,this.Vrt=[];let e=null;if(e=s?this.Urt.Wrt(s):lg.Bh(this.Urt.zrt()),!e)return;const i=e.J1("offsetX"),n=e.J1("offsetY");if(!i||!n)return;this.jrt=i,this.Hrt=n;const r=i.Jrt(),h=n.Jrt();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],e=(s.$rt(),s.qrt()),i=h[t],n=(i.$rt(),i.qrt());e&&"cubic-bezier"===e.Xrt()&&n&&"cubic-bezier"===n.Xrt()?this.Vrt.push(lg.jn(lg.Yrt,e,n,s,i,this.Vrt.length)):(e&&"line"===e.Xrt()&&n&&n.Xrt(),this.Vrt.push(lg.jn(lg.Krt,s,i,this.Vrt.length)))}this.Brt=!0}Hn(){for(const t of this.Vrt)t.Hn();lg.wh(this.Vrt),this.Vrt=null,this.Urt=null,this.jrt=null,this.Hrt=null}Zrt(){return this.Brt}Qrt(){return this.Vrt}tht(t){const s="relative"===this.jrt.sht()?t.dM():0,e="relative"===this.Hrt.sht()?t.gM():0;for(const t of this.Vrt)t.tht(s,e)}qS(t,s,e){let i=NaN,n=this.Vrt.length;for(let e=0;e<n;e++){const n=this.Vrt[e];if("cubic-bezier"===n.oI()){const e=n.qS(t,s);(isNaN(i)||e[3]<i)&&(i=e[3],fg[0]=e[2],fg[1]=n.Ej())}}return fg}eht(t,s,e){const i=e.iht;lg.Ye(i[0])||(i[0]=0),lg.Ye(i[1])||(i[1]=1);let n=NaN,r=this.Vrt.length;for(let e=0;e<r;e++){const r=this.Vrt[e];if("cubic-bezier"===r.oI()){const e=r.nht(t,s,i);(isNaN(n)||e[3]<n)&&(n=e[3],fg[0]=e[2],fg[1]=r.Ej())}}return fg}rht(t,s){return this.Vrt[s].rht(t)}hht(t,s){return this.Vrt[s].hht(t)}},lg.Yrt=class{constructor(t,s,e,i,n){this.US=n;const r=t.oht("cubic-bezier"),h=e.oht("cubic-bezier"),o=s.oht("cubic-bezier"),a=i.oht("cubic-bezier");this.aht=t.lht(),this.uht=s.lht(),this.cht=t.lht()+r.fht(),this.dht=s.lht()+o.fht(),this.pht=e.lht()+h.mht(),this.ght=i.lht()+a.mht(),this.yht=e.lht(),this.Sht=i.lht(),this.wht=0,this.vht=0,this.xht=0,this.bht=0,this.Mht=0,this.Tht=0,this.Ght=0,this._ht=0,this.Iht=0,this.Cht=0,this.Rht=0,this.Pht=0,this.Eht=0,this.Fht=0,this.Aht=0,this.Oht=0,this.Dht=0,this.kht=0,this.Lht=0,this.Nht=0,this.Bht=NaN,this.Brt=!1,this.Uht=100,this.Vht=new Array(this.Uht+1),this.Vht[0]=0,this.Wht=0,this.zht=[],this.jht=[];for(let t=0;t<100;t++)this.jht.push({x:0,y:0,t:0,vt:0});this.Hht()}Hn(){lg.wh(this.Vht),this.Vht=null,lg.wh(this.zht),this.zht=null,lg.wh(this.jht),this.jht=null}oI(){return"cubic-bezier"}Ej(){return this.US}Jht(){return Math.floor(this.Wht/25)}$ht(){return 1/this.Jht()}tht(t,s){this.qht=t,this.Xht=s,this.Vht=new Array(this.Uht+1),this.Vht[0]=0,this.Hht(),this.wht=this.aht+this.qht,this.vht=this.uht+this.Xht,this.xht=this.cht+this.qht,this.bht=this.dht+this.Xht,this.Mht=this.pht+this.qht,this.Tht=this.ght+this.Xht,this.Ght=this.yht+this.qht,this._ht=this.Sht+this.Xht,this.Iht=3*(this.xht-this.wht),this.Cht=3*(this.bht-this.vht),this.Rht=3*(this.Mht-this.xht),this.Pht=3*(this.Tht-this.bht),this.Eht=3*(this.Ght-this.Mht),this.Fht=3*(this._ht-this.Tht),this.Aht=3*(this.xht-this.wht),this.Oht=3*(this.wht+this.Mht-2*this.xht),this.Dht=this.Ght-this.wht+3*(this.xht-this.Mht),this.kht=3*(this.bht-this.vht),this.Lht=3*(this.vht+this.Tht-2*this.bht),this.Nht=this._ht-this.vht+3*(this.bht-this.Tht)}Map(t){if(!this.Brt)return NaN;const s=this.Yht(t);return cg[0]=this.Kht(s),cg[1]=this.Zht(s),cg}qS(t,s){const e=this.Qht(100),i=this.tot(t,s,e),n=this.sot(t,s,e,i);return dg[0]=n.x,dg[1]=n.y,dg[2]=n.t,dg[3]=n.vt,dg}nht(t,s,e){const i=this.Qht(100),n=this.eot(t,s,i,e),r=this.sot(t,s,i,n);return dg[0]=r.x,dg[1]=r.y,dg[2]=r.t,dg[3]=r.vt,dg}rht(t){const s=1-t,e=s*s,i=2*s*t,n=t*t,r=e*this.Iht+i*this.Rht+n*this.Eht,h=e*this.Cht+i*this.Pht+n*this.Fht,o=lg.tr(r,h);return ug[0]=r/o,ug[1]=h/o,ug}hht(t){const s=1-t,e=s*s,i=2*s*t,n=t*t,r=e*this.Iht+i*this.Rht+n*this.Eht,h=e*this.Cht+i*this.Pht+n*this.Fht;return Math.atan2(h,r)}Yht(t){if(!this.Brt)return;let s=t*this.Vht[this.Uht],e=0,i=this.Uht,n=0;for(;e<i;)n=e+((i-e)/2|0),this.Vht[n]<s?e=n+1:i=n;this.Vht[n]>s&&n--;const r=this.Vht[n];return r===s?n/this.Uht:(n+(s-r)/(this.Vht[n+1]-r))/this.Uht}Kht(t){return this.Brt?self.Wu.rc("cubicbezier")(t,this.aht+this.qht,this.cht+this.qht,this.pht+this.qht,this.yht+this.qht):NaN}Zht(t){return this.Brt?self.Wu.rc("cubicbezier")(t,this.uht+this.Xht,this.dht+this.Xht,this.ght+this.Xht,this.Sht+this.Xht):NaN}Qht(t){if(t=t||100,this.zht.length>=t)return this.zht;this.zht=new Array(t),t++;for(let s=0;s<t-1;s++){const e=s/(t-1),i=e**2,n=e**3,r=this.Aht*e,h=this.Oht*i,o=this.Dht*n,a=this.kht*e,l=this.Lht*i,u=this.Nht*n,c=this.wht+r+h+o,f=this.vht+a+l+u;this.jht[s].x=c,this.jht[s].y=f,this.jht[s].t=e,this.jht[s].vt=0,this.zht[s]=this.jht[s]}return this.zht}tot(t,s,e,i=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.Bht))for(let i=0;i<100;i++){const h=e[i],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=i)}else{for(let i=this.Bht;i<this.Bht+5&&!(i>=e.length);i++){const h=e[i],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=i)}for(let i=this.Bht;i>this.Bht-5&&!(i<0);i--){const h=e[i],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=i)}}return this.Bht=r,r}eot(t,s,e,i,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.Bht))for(let h=0;h<100;h++){const o=e[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.vt<n&&(n=o.vt,r=h)}else{for(let h=this.Bht;h<this.Bht+5&&!(h>=e.length);h++){const o=e[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.vt<n&&(n=o.vt,r=h)}for(let h=this.Bht;h>this.Bht-5&&!(h<0);h--){const o=e[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=i[0]&&o.t<=i[1]&&o.vt<n&&(n=o.vt,r=h)}}return this.Bht=r,r}sot(t,s,e,i){let n=e[i],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=e.length;let o=0===i?0:i-1,a=i===r-1?r-1:i+1,l=e[o].t,u=(e[a].t-l)/4;if(u<.001)break;pg[0]=e[o];for(let e=1;e<=2;e++){const r=l+e*u,o=r**2,a=r**3,c=this.Aht*r,f=this.Oht*o,d=this.Dht*a,p=this.kht*r,m=this.Lht*o,g=this.Nht*a,y=this.wht+c+f+d,S=this.vht+p+m+g,w=y-t,v=S-s,x=w*w+v*v;if(x<h){h=x,i=e,gg.x=y,gg.y=S,gg.t=r,gg.vt=x,n=gg;break t}const b=mg[e-1];b.x=y,b.y=S,b.t=r,b.vt=x,pg[e]=b}pg[3]=e[a],e=pg}while(r++<20);return n}Hht(){this.Brt=!0;let t=this.Kht(0),s=this.Zht(0),e=0;for(let i=1;i<=this.Uht;i++){const n=this.Kht(.01*i),r=this.Zht(.01*i),h=t-n,o=s-r;e+=lg.tr(h,o),this.Vht[i]=e,t=n,s=r}this.Wht=e}},lg.Krt=class{constructor(t,s,e){this.US=e,this.iot=t.lht(),this.not=s.lht(),this.qht=0,this.Xht=0}Hn(){}oI(){return"line"}Ej(){return this.US}tht(t,s){this.qht=t,this.Xht=s}dM(){return this.iot+this.qht}gM(){return this.not+this.Xht}}}{const yg=self._s;yg._nt=class extends yg.Wn{constructor(t,s,e){super(),this.Nc=e.m$(),this.rot=e,this.hot=s,this.qn=t,this.oot=[],this.aot=0,this.lot=null,this.uot=0,this.cot(),this.fot=null,this.dot=null,this.pot=0,this.mot=0,this.got=1,this.yot=0,this.Sot=-1,this.wot=1,this.vot=!1,this.xot=!1,this.bot=!1,this.Mot=!0,this.Tot=!1,this.Got=!1,this._ot=-1,this.Iot=!1,this.Cot=!1,this.Rot=!1,this.Pot=!1,this.Eot=NaN,this.Fot=[""],this.Aot="",this.Oot=!1,this.bnt=0,this.Dot=0,this.kot=null,this.Lot=null}static Gnt(t,s){const e=s.Rnt(),i=e.Not(),n=e.Hs(t[i]),r=yg.jn(yg._nt,t[i],n,s);return r.Bot(!0),r}static Cnt(t,s,e){return yg.jn(yg._nt,t,s,e)}Hn(){if(this.a1())return;const t=this.Nc.Sf();this.rot.hrt(this),this.rot.urt(this);for(const t of this.oot)t.Hn();yg.wh(this.oot),this.oot=null,this.Nc=null,this.rot=null,this.hot=null,this.Tot=!0,this.fot=null,this.dot=null,this.Uot(t)}Uot(t){const s=yg.jn(yg.Event,"timelinestatereleased");s.Vot=this,t.dispatchEvent(s)}oI(){return 0}cot(){for(const t of this.hot.zot().Wot())this.aot=this.oot.push(yg.jot.e_(this,t))}Hot(){return this.rot}m$(){return this.Nc}zrt(){return this.oot}Jot(t,s,e,i){if(!this.Dot)return;let n;for(let r=0;r<this.oot.length;r++){let h=this.oot[r];if(t!==h.N1())continue;const o=h.J1(e);o&&s.constructor===o.$ot().constructor&&o.sht()===i.sht()&&(n||(n=[]),n.push(o))}return n}Ort(){return!!this.oot.length}Wrt(t){for(const s of this.oot)if(yg.Ki(s.j1(),t))return s;return null}qot(t){for(const s of this.oot)if(!s.Xot()&&yg.Ki(s.Rc(),t))return s;return null}_3(t){this.qn=t}Rc(){return this.qn}Yot(){return this.hot}DK(){return this.hot.Rc()}g1(){return this.hot.g1()}m1(t){this.hot.m1(t)}Kot(){return this.hot.Kot()}Zot(t){this.hot.Zot(t)}Qot(){return this.hot.Qot()}tat(t){this.hot.tat(t)}sht(){return this.hot.sht()}sat(t){this.hot.sht(t)}L1(t){for(const s of this.zrt())s.L1(t)}w1(){return this.hot.w1()}S1(t){return this.hot.S1(t)}b1(){return this.hot.b1()}v1(t){return this.hot.v1(t)}A0(){return this.hot.A0()}eat(){return this.wot}iat(t){return this.hot.iat(t)}M1(t){if(t=Number(t),yg.Ye(t))return this.got=t}T1(){return this.got}Trt(){return this.hot.Trt()}nat(){return this.hot.nat()}rat(){return this.hot.rat()}hat(){return this.yot}oat(){return!this.IsPlaying()||this.got>0}aat(){return this.IsPlaying()?"playing":this.R1()?"paused":this.W1()?"complete":"other"}_1(){return this.fot||(this.fot=new Promise(t=>{this.dot=t})),this.fot}ort(){this.fot&&(this.dot(),this.fot=null,this.dot=null)}lat(t){this.Fot=yg._nt.uat(t),this.Oot=!0}G1(){return this.Fot}cat(){return this.Oot&&(this.Aot=this.Fot.join(" ")),this.Oot=!1,this.Aot}f1(t){if(!this.Fot)return!1;if(!this.Fot.length)return!1;const s=yg._nt.uat(t);return!!s&&!!s.length&&s.every(yg._nt.fat,this)}dat(){yg.a$.pat&&this.constructor===yg._nt&&(yg.a$.pat.h$.mat(this),this.rot.tZ(yg.a$.pat.h$.gat),this.rot.tZ(yg.a$.pat.h$.yat),this.rot.tZ(yg.a$.pat.h$.Sat),this.rot.tZ(yg.a$.pat.h$.wat),yg.a$.pat.h$.vat())}xat(){this._ot=this.Nc.VH()}brt(){this.Rot||(this.Rot=!0,yg.a$.pat&&this.constructor===yg._nt&&(yg.a$.pat.h$.mat(this),this.rot.tZ(yg.a$.pat.h$.bat),this.rot.tZ(yg.a$.pat.h$.Mat),this.rot.tZ(yg.a$.pat.h$.Tat),this.rot.tZ(yg.a$.pat.h$.Gat),yg.a$.pat.h$.vat()))}irt(t){this.vot=t}_at(){return this._ot===this.Nc.VH()}IsPlaying(t=!1){return!!this._at()||!(!this.Iat()||t)||this.vot}Cat(){return this.IsPlaying(!0)}R1(){return this.Rat()}Rat(){return!(this.a1()||this.Iat()||this.Cat()||this.W1())}nrt(t){this.xot=t}Iat(){return this.xot}Pat(t){this.Mot=t;const s=this.w1(),e=this.b1();if(s||e){if(s&&!e);else if(!s&&e){const t=this.uW();1===this.yot&&(t<=0||t>=this.g1())&&(this.Mot=!0)}}else{const t=this.uW();(t<=0||t>=this.g1())&&(this.Mot=!0)}}W1(){return this.Mot}a1(){return this.Tot}rrt(t){this.Got=t}crt(){return this.Got}Eat(t){this.Iot=t}Fat(){return this.Iot}Bot(t){this.Cot=!!t}Ont(){return this.Cot}xrt(){return this.bot}uW(){return this.pot}d1(t){if(t=Number(t),!yg.Ye(t))return;const s=this.uW();this.Aat(t),this.Pat(!1),this.W1()||this.Eat(!0),(this.Cat()||this.Iat()||!this.bot)&&(this.Cat()||this.Iat()||this.bot?this.Cat()?this.u1():this.Iat()&&(this.rot.hrt(this),this.Oat()):this.Oat()),this.Dat(),this.kat(this.uW(),!1,!0,!0,s),this.Lat(),this.bnt&&this.m$().XJ(),this.Nat()}Aat(t){yg.Ye(t)||(t=this.g1()),t<0?this.pot=0:t>=this.g1()?this.pot=this.g1():this.pot=t}Bat(t){yg.Ye(t)||(t=this.g1()),t<0?this.pot=0:t>=this.g1()?this.pot=this.g1():this.pot=t;for(const t of this.oot)t.Uat()}Nat(){yg.a$.pat&&this.constructor===yg._nt&&(yg.a$.pat.h$.mat(this),this.rot.tZ(yg.a$.pat.h$.Vat),this.rot.tZ(yg.a$.pat.h$.Wat),this.rot.tZ(yg.a$.pat.h$.zat),yg.a$.pat.h$.vat())}jat(){if(this.w1())return!0;if(this.b1()&&1===this.yot){if(this.oat()){if(this.uW()>=this.g1())return!1}else if(this.uW()<=0)return!1}else if(!this.w1()&&!this.b1())if(this.oat()){if(this.uW()>=this.g1())return!1}else if(this.uW()<=0)return!1;return!0}c1(){this.a1()||this.jat()&&this.Play(!0)}Play(t=!1){return!this.a1()&&!this.Iat()&&(this.Cat()&&this._at()?this.Hat():!this.Cat()&&!!(this.W1()||t||this.Fat())&&this.Jat())}Hat(){return this.Eat(!1),this.rot.trt(this),this.rot.ert(this),this._1(),!0}Jat(){return this.Eat(!1),this.rot.ert(this),this._1(),!0}u1(t=!1){this.a1()||(this.Pat(t),this.rot.art(this),this.W1()&&this.ort())}Bf(t=!0,s=!1){if(this.a1())return;if(!this.Cat()&&this.Iat())return this.rot.hrt(this);if(this.W1())return;this.u1(!0),this.oat()?this.Aat(0):this.Aat(this.g1());const e=this.uW();this.Dat(),s?this.$at(e):this.kat(e,!1,!1,!0),t&&this.Nat(),this.Lat(),this.bnt&&t&&this.m$().XJ()}qat(){this.Bf(!1,!0)}$at(t){this.kat(t,!1,!1,!0,NaN,!1,!0)}unt(){return!!this.a1()||!(!this.m$().Het()&&this.Xat())&&(this.rot.lrt(this),this.m$().Het()||this.qat(),!0)}Oat(){this.drt(!0)}frt(){this.drt(!1,!0),this.irt(!1),this.nrt(!1)}drt(t=!1,s=!1){if(!this.crt()||s)if(t){this.Rot=!1,this.bot=!0,this.Pot=!0,this.Dat();for(const t of this.oot)t.drt();this.Lat()}else if(this.irt(!0),this.nrt(!1),this.dat(),this.W1()){this._ot=-1,0!==this.yot&&(this.got=Math.abs(this.got)),this.yot=0,this.Sot=-1,this.wot=1,this.Mot=!1,this.Rot=!1,this.bot=!0,this.Pot=!0,this.oat()?this.Aat(0):this.Aat(this.g1()),this.Dat();for(const t of this.oot)t.drt();this.Lat()}else{-1!==this.Sot&&(this.yot=this.Sot),this.Pot=!0,this.Rot=!1,this.Dat();for(const t of this.oot)t.Yat();this.Lat()}}prt(){return this.bnt}Dat(){this.Dot=0;for(const t of this.oot)t.eF()&&(this.Dot=1)}Lat(){this.bnt=0;for(const t of this.oot)t.Kat(),0===this.bnt&&1===t.prt()&&(this.bnt=1),this.lot||1!==t.Zat()||(this.lot||(this.lot=[]),this.uot=this.lot.push(t))}yrt(t,s,e){if(this.rat()){if(0===t&&0===this.Eot)return;this.Eot=t,t=e}else{if(0===e&&0===this.Eot)return;this.Eot=e,t=e,s=1}const i=this.pot+this.mot,n=i+t*s*this.got,r=this.hot.Qat;n<0?(this.pot=0,this.mot=-n):n>=r?(this.pot=r,this.mot=this.pot-n):(this.pot=n,this.mot=0);let h=!1,o=!1;const a=this.w1(),l=this.b1();let u;a||l?a&&!l?this.got>0?this.pot>=r&&(this.Bat(0),o=!0):this.pot<=0&&(this.Bat(r),o=!0):!a&&l?this.got>0?this.pot>=r&&(this.Aat(r),this.M1(-1*this.T1()),o=!0,1===this.yot?this.wot<this.A0()?(this.wot++,this.yot=0):h=!0:0===this.yot&&(this.yot=1)):this.pot<=0&&(this.Aat(0),this.M1(-1*this.T1()),o=!0,1===this.yot?this.wot<this.A0()?(this.wot++,this.yot=0):h=!0:0===this.yot&&(this.yot=1)):a&&l&&(this.got>0?this.pot>=r&&(this.Aat(r),this.M1(-1*this.T1()),o=!0,this.yot++,yg.wrap(this.yot,0,2)):this.pot<=0&&(this.Aat(0),this.M1(-1*this.T1()),o=!0,this.yot++,yg.wrap(this.yot,0,2))):this.got>0?this.pot>=r&&(this.wot<this.A0()?(this.wot++,this.Bat(0),o=!0):(this.Aat(r),h=!0)):this.pot<=0&&(this.wot<this.A0()?(this.wot++,this.Bat(r),o=!0):(this.Aat(0),h=!0));const c=this.aot;if(h){for(u=0;u<c;u++)this.oot[u].tlt();return this.u1(!0),void this.xat()}const f=this.uot;for(u=0;u<f;u++)this.lot[u].slt();if(1===this.Dot)for(u=0;u<c;u++){const t=this.oot[u],s=t.elt();this.pot-s<0&&i-s>0?(this.pot=s<0?0:s>=r?r:s,t.wc(s,!0,!1,o,this.Pot,!1)):t.wc(this.pot,!0,!1,o,this.Pot,!1)}else for(u=0;u<c;u++)this.oot[u].wc(this.pot,!0,!1,o,this.Pot,!1);if(!this.IsPlaying()&&this.kot){const t=this.kot.uW()+this.kot.nlt().ilt().elt(),s=this.pot-t;this.pot-=s,0!==this.mot&&(this.mot-=s),this.kot=null}for(u=0;u<f;u++)this.lot[u].rlt();this.Pot&&(this.Pot=!1)}hlt(t){this.kot=t}olt(){return this.kot}kat(t,s=!1,e=!1,i=!1,n=NaN,r=!1,h=!1){for(const t of this.oot)t.slt();for(const r of this.oot){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.uW()-r.elt(),s=n-r.elt();t<0&&s>0&&(o=r.elt(),this.Aat(o))}r.wc(o,s,e,i,this.Pot,h)}for(const t of this.oot)t.rlt();this.Pot&&r&&(this.Pot=!1)}llt(){const t=this.hot.zot().ult(),s=yg.jot.e_(this,t);return this.aot=this.oot.push(s),s}knt(){if(!this.a1())for(const t of this.oot)t.clt()}Mrt(){for(const t of this.oot)t.Mrt()}*lX(){for(const t of this.oot)t.N1()&&(yield t.N1())}flt(){for(const t of this.oot)t.dlt()}plt(t,s,e){if(s){if("number"==typeof e&&e>=0){const t=this.oot[e];if(!t)return;return t.mlt(s),void this.rot.znt(s.yK(),this)}for(const e of this.oot)if(e.Xot()){if(t){if(e.j1()!==t)continue;e.mlt(s),this.rot.znt(s.yK(),this);break}if(!e.glt()){e.mlt(s),this.rot.znt(s.yK(),this);break}}}}$nt(t,s){for(const e of this.oot)if(e.Xot())if(s){if(s===e.j1()&&t===e.N1())return!0}else if(t===e.N1())return!0;return!1}vrt(){return this.oot.some(t=>!t.Xot()||t.ylt())}Xat(){return this.oot.some(t=>{if(t.Xot()){if(!t.ylt())return!1;const s=t.yK();return!!s&&s.h8()}return!1})}J1(t){for(const s of this.zrt())for(const e of s.Slt())if(e.wlt()===t)return e}vlt(t){for(const s of this.oot)if(t===s.N1())return s;return null}xlt(t){let s=t?t.split(" "):[];const e=new Set(s.map(t=>t.toLowerCase().trim()));s=[...e.values()];for(const t of this.zrt())for(const e of t.blt())if(s.every(t=>e.Mlt(t)))return e}jnt(){const t=[];for(const s of this.zrt())t.push(s.yK());return t.filter(t=>t)}Snt(){for(const t of this.zrt())t.Snt()}ust(){return{tracksJson:this.Tlt(),name:this.qn,playheadTime:this.uW(),playbackRate:this.got,pingPongState:this.yot,resumePingPongState:this.Sot,currentRepeatCount:this.wot,isPlaying:this.vot,isScheduled:this.xot,initialStateSet:this.bot,finishedTriggers:this.Rot,complete:this.Mot,released:this.Tot,markedForRemoval:this.Got,completedTick:this._ot,implicitPause:this.Iot,isTemplate:this.Cot,tags:this.Fot.join(" "),stringTags:this.Aot,tagsChanged:this.Oot,firstTick:this.Pot}}cst(t){t&&(this.Glt(t.tracksJson),this.qn=t.name,this.pot=t.playheadTime,this.got=t.playbackRate,this.yot=t.pingPongState,this.Sot=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.wot=t.currentRepeatCount,this.vot=!!t.isPlaying,this.xot=!!t.isScheduled,this.bot=!!t.initialStateSet,this.Rot=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Mot=!!t.complete,this.Tot=!!t.released,this.Got=!!t.markedForRemoval,this._ot=t.completedTick,this.Iot=!!t.implicitPause,this.Cot=!!t.isTemplate,this.Fot=t.tags.split(" "),this.Aot=t.stringTags,this.Oot=!!t.tagsChanged,this.Pot=!!t.firstTick)}Tlt(){return this.oot.map(t=>t.ust())}Glt(t){this.flt(),t.forEach((t,s)=>{this.oot[s].cst(t)}),this.oot.filter(t=>t.ylt())}static fat(t){const s=this.G1();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static uat(t){if(yg.bi(t))return t.slice(0);if(yg.ri(t))return t.split(" ");throw new Error("invalid tags")}_lt(){return this.Lot||(this.Lot=yg.jn(self.E1,this)),this.Lot}}}{const Sg=self._s;Sg.jot=class extends Sg.Wn{constructor(t,s){super(),this.Urt=t,this.Ilt=s,this.Clt=s.zot(),this.Rlt=NaN,this.Plt=NaN,this.Elt=null,this.Flt=null,this.Alt=!1,this.YE=s.elt()>0,this.Olt=!1,this.Dlt=!1,this.klt=NaN,this.Llt=null,this.Nlt=this.Ilt.nlt().Blt(),this.Ult=[],this.Vlt(),this.Wlt=0,this.bnt=0,this.zlt=0}static e_(t,s){return Sg.jn(Sg.jot,t,s)}Hn(){this.Nlt=null;for(const t of this.Ult)t.Hn();Sg.wh(this.Ult),this.Ult=null,this.Urt=null,this.Elt=null,this.Flt=null,this.Ilt=null,this.Llt=null}Vlt(){for(const t of this.Ilt.Hlt().jlt())this.Ult.push(Sg.Jlt.e_(this,t))}clt(){for(const t of this.Ult)t.clt()}Mrt(){for(const t of this.Ult)t.Mrt();this.Elt=null,this.Flt=null}$lt(){return this.Urt}m$(){return this.Urt.m$()}blt(){return this.Nlt||(this.Nlt=this.Ilt.nlt().Blt()),this.Nlt}Slt(){return this.Ult}J1(t){for(let s=0;s<this.Ult.length;s++){const e=this.Ult[s];if(e.wlt()===t)return e}}qlt(){this.Elt||this.N1()}Xlt(){return!!this.Elt&&!this.Elt.D2()}ylt(){if(!this.Xot())return!1;if(this.Alt)return!1;const t=this.Ylt(),s=this.m$().LJ(t);return!!s&&!s.D2()}yK(){if(!this.Xot())return;const t=this.Klt();return-1!==t?this.m$().m7(t):void 0}Zlt(){return this.Urt.zrt().indexOf(this)}dlt(){this.Elt=null,this.Rlt=NaN,this.Flt=null,this.Plt=NaN,this.Alt=!0}glt(){return!!this.Elt}N1(){if(this.Alt)return;if(this.Elt&&this.Xlt())return this.Elt;const t=this.Ylt();return this.Elt=this.m$().LJ(t),this.Elt}mlt(t){if(this.Alt=!1,this.Elt!==t){this.Mrt(),this.Elt=t,this.Plt=t.yK().Ej(),this.Rlt=t.PK(),this.Flt=t.WJ();for(const s of this.Qlt()){const e=s.tut,i=s.sut;switch(e.eut()){case"instance-variable":{i.iut();const e=t.yK(),n=e.nut(s.name),r=e.rut(n),h=e.hut(n);r===s.name&&h===s.type&&i.out(n);break}case"behavior":{const e=s.m0,n=this.yK(),r=t.yK(),h=i.y0(r);if(e&&h){const t=e.Rc();n.aut(t),r.aut(t),i.iut(),i.lut(h.H7())}break}}}}}*Qlt(){for(const t of this.Ult){const s=t.$ot(),e=this.yK(),i={tut:t,sut:s};switch(t.eut()){case"world-instance":i.uut=t.wlt();break;case"instance-variable":{const t=s.iut();i.name=e.rut(t),i.type=e.hut(t);break}case"effect":{const t=e.AX(),n=s.cut(t);i.fut=n;break}case"behavior":{const t=s.y0(e);i.m0=t;break}case"plugin":i.Kq=e.Zq()}yield i}}WJ(){if(this.Flt&&this.Xlt())return this.Flt;const t=this.N1();return t&&(this.Flt=t.WJ()),this.Flt}ilt(){return this.Ilt}Ylt(){return isNaN(this.Rlt)?this.Ilt.Ylt():this.Rlt}dut(t){this.Ilt.dut(t)}Qot(){return this.Ilt.Qot()}tat(t){this.Ilt.tat(t)}sht(){return this.Ilt.sht()}j1(){return this.Ilt.j1()}elt(){return this.Ilt.elt()}mut(){return this.Ilt.mut()}gut(t){this.Ilt.gut(t)}sat(t){this.Ilt.sat(t)}L1(t){for(const s of this.blt())s.L1(t);for(const s of this.Slt())s.L1(t)}yut(){return this.Ilt.yut()}Sut(t){this.Ilt.Sut(t)}Klt(){return isNaN(this.Plt)?this.Ilt.Klt():this.Plt}wut(t){this.Ilt.wut(t)}vut(t){this.Ilt.vut(t)}xut(){const t=this.N1();return t&&t.o0().but()?t.o0().xut():this.Ilt.xut()}Mut(t){this.Ilt.Mut(t)}Tut(){const t=this.N1();return t&&t.o0().but()?t.o0().Tut():this.Ilt.Tut()}oI(){return this.Ilt.oI()}Rc(){return this.Ilt.Rc()}Xot(){return 0===this.oI()}Gut(){return 1===this.oI()}_ut(){return 2===this.oI()}Iut(){return this.Wlt}prt(){return this.bnt}Zat(){return this.zlt}eF(){return this.YE}Uat(){for(const t of this.Ult)t.Uat()}drt(){if(this.qlt(),!this.Xlt()&&this.Xot())return;const t=this.$lt().oat(),s=t?0:this.mut();for(const t of this.Ult)t.drt(s),0===this.Wlt&&1===t.Iut()&&(this.Wlt=1),0===this.bnt&&1===t.prt()&&(this.bnt=1);this.zlt=0,this.Ult.some(t=>t.Zat())&&(this.zlt=1),this.Llt=t?this.Cut(s):this.Rut(s),this.Olt=!1,this.Dlt=!1,this.wc(s),this.Put(this.Llt)}Eut(){const t=this.Fut(),s=this.Aut();let e,i;return this.Urt.oat()?(e={uW:()=>t.uW()+this.elt(),G1:()=>t.Out()||"<no tags>"},i={uW:()=>s?s.uW()+this.elt():this.mut(),G1:()=>s?.Out()||"<no tags>"}):(e={uW:()=>s?s.uW()+this.elt():this.mut(),G1:()=>s?.Out()||"<no tags>"},i={uW:()=>t.uW()+this.elt(),G1:()=>t.Out()||"<no tags>"}),[e,i]}Fut(){const t=this.Urt.uW()-this.elt();return this.Urt.oat()?this.Cut(t):this.Rut(t)}Aut(){return this.Urt.oat()?this.Fut().$rt():this.Fut().Dut()}Yat(){if(this.qlt(),!this.Xlt()&&this.Xot())return;const t=this.Urt.oat(),s=this.Urt.uW()-this.elt();this.Llt=t?this.Cut(s):this.Rut(s);for(const t of this.Ult)t.Yat(s)}tlt(){if(!this.$lt().W1()&&(this.qlt(),(this.Xlt()||!this.Xot())&&!this.YE)){const t=this.Urt.uW();t>=this.elt()+this.mut()?this.wc(this.mut(),!0,!1,!0,!1,!1,!0):t<=0&&this.wc(0,!0,!1,!0,!1,!1,!0)}}Kat(){for(let t=0,s=this.Ult.length;t<s;t++){const s=this.Ult[t];s.Kat(),0===this.Wlt&&1===s.Iut()&&(this.Wlt=1),0===this.bnt&&1===s.prt()&&(this.bnt=1)}}slt(){const t=this.Ult.length;for(let s=0;s<t;s++)this.Ult[s].slt()}wc(t,s=!1,e=!1,i=!1,n=!1,r=!1,h=!1){this.Elt||this.N1();const o=this.Elt&&!this.Elt.D2(),a=0===this.Ilt.Jc;if((o||!a)&&!(r&&a&&this.yK().h8()||(t-=this.elt())<0)){this.kut(t,s),this.Lut(t,s,n),!this.$lt().IsPlaying()&&this.$lt().olt()&&(t=this.$lt().olt().uW());for(let s=0,n=this.Ult.length;s<n;s++)this.Ult[s].wc(t,e,i,h);this.Nut(t,s),0!==this.Wlt&&(this.Flt||(this.Flt=this.Elt.WJ()),this.Flt&&this.Flt.RZ())}}rlt(){const t=this.Ult.length;for(let s=0;s<t;s++)this.Ult[s].rlt()}kut(t,s){if(s&&this.YE&&!this.Olt){if(this.$lt().oat()){if(t<0)return}else if(t>this.mut())return;for(const t of this.Ult)t.drt();this.Olt=!0}}Nut(t,s){if(s&&this.YE&&!this.Dlt)if(this.$lt().oat()){if(t>=this.mut()){for(const t of this.Ult)t.wc(this.mut(),!1,!0);this.Dlt=!0}}else if(t<=0){for(const t of this.Ult)t.wc(0,!1,!0);this.Dlt=!0}}Lut(t,s,e){if(e)return;if(!s)return;if(!Sg.a$.pat)return;const i=this.$lt();if(i.oat()){const s=this.Llt.$rt(),e=this.Llt.uW(),n=s?s.uW():i.g1();(t<=e||t>=n)&&(this.Llt=this.Clt.But(t,this.Ilt),s&&this.Uut(this.Llt))}else{if(!this.Clt.Vut(t,this.Ilt))return;this.Llt||(this.Llt=this.Clt.Vut(t,this.Ilt));const s=this.Llt.Dut(),e=this.Llt.uW(),i=s?s.uW():0;(t>=e||t<=i)&&(this.Llt=this.Clt.Vut(t,this.Ilt),this.Llt&&this.Uut(this.Llt))}}Cut(t){return this.Clt.Wut(t,this.Ilt)||this.Clt.But(t,this.Ilt)}Rut(t){return this.Clt.Wut(t,this.Ilt)||this.Clt.Vut(t,this.Ilt)}Uut(t,s=!1){if(!Sg.a$.pat)return;const e=this.$lt(),i=e.Hot();Sg.a$.pat.h$.mat(e),Sg.a$.pat.h$.zut(t),i.tZ(Sg.a$.pat.h$.jut),i.tZ(Sg.a$.pat.h$.Uut),e.IsPlaying()||s||e.hlt(t),Sg.a$.pat.h$.vat(e),Sg.a$.pat.h$.Hut(t)}Put(t){this.Uut(t,!0)}Jut(){return this.Ilt.nlt().$ut()}qut(){const t=this.Ilt.Hlt().Xut(),s=Sg.Jlt.e_(this,t);return this.Ult.push(s),s}Yut(t){this.Ilt.nlt().Kut(t)}Zut(t){for(const s of this.Ult)s.Zut(t)}Qut(){for(const t of this.Ult)t.Qut()}tct(){if(this.qlt(),this.Xlt()||!this.Xot())for(const t of this.Ult)t.tct()}sct(){if(this.qlt(),!this.Xlt()&&this.Xot())return;let t=!1;for(const s of this.Ult){const e=s.sct();!t&&e&&(t=!0)}if(t){const t=this.Jut();t.d1(this.$lt().uW()),t.L1("noease"),t.Sut(!0),t.lat("")}}Snt(){isNaN(this.klt)||this.ect(this.klt),this.klt=NaN}ust(){const t=this.N1(),s=t?t.PK():this.Ylt();return{propertyTracksJson:this.ict(),lastKeyframeDataItemJson:this.nct(),initialStateOfNestedSet:this.Olt,endStateOfNestedSet:this.Dlt,instanceUid:s,cleared:this.Alt}}cst(t){if(t){this.rct(t.propertyTracksJson),this.hct(t.lastKeyframeDataItemJson),this.klt=t.instanceUid,this.Olt=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Olt=t.initialStateOfNestedSet),this.Dlt=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Dlt=t.endStateOfNestedSet),this.Alt=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Ult)0===this.Wlt&&1===t.Iut()&&(this.Wlt=1),0===this.bnt&&1===t.prt()&&(this.bnt=1);this.zlt=0,this.Ult.some(t=>t.Zat())&&(this.zlt=1)}}nct(){return this.Ilt.nlt().oct(this.Llt)}ict(){return this.Ult.map(t=>t.ust())}rct(t){t.forEach((t,s)=>{this.Ult[s].cst(t)})}ect(t){if(!Sg.Ye(t))return;const s=this.m$().LJ(t);s&&this.$lt().plt(this.Ilt.j1(),s,this.Zlt())}hct(t){const s=this.Ilt.nlt();this.Llt=s.act(t)}}}{const wg=self._s;wg.Jlt=class extends wg.Wn{constructor(t,s){super(),this.lct=t,this.uct=s,this.cct=s.Hlt(),this.Wlt=0,this.bnt=0,this.zlt=0,this.fct=this.$ot(),this.dct=this.uct.mct().pct(),this.gct=null,this.yct=null}static e_(t,s){return wg.jn(wg.Jlt,t,s)}Hn(){this.lct=null,this.fct&&(this.fct.Hn(),this.fct=null),this.dct=null,this.uct=null,this.cct=null}Iut(){return this.Wlt}prt(){return this.bnt}Zat(){return this.zlt}Sct(){return!!this.yct}wct(t){this.yct=t}vct(){return this.yct}xct(){return this.lct}bct(){return this.uct}Hlt(){return this.cct}$lt(){return this.lct.$lt()}m$(){return this.lct.m$()}N1(){return this.lct.N1()}$ot(){if(this.fct)return this.fct;let t;switch(this.uct.eut()){case"behavior":t=new wg.Jlt.Mct(this);break;case"effect":t=new wg.Jlt.Tct(this),this.bnt=1;break;case"instance-variable":t=new wg.Jlt.Gct(this);break;case"plugin":t=new wg.Jlt._ct(this),this.bnt=1;break;case"world-instance":t=new wg.Jlt.Ict(this),this.bnt=1,this.Wlt=1;break;case"value":t=new wg.Jlt.Cct(this);break;case"audio":t=new wg.Jlt.Rct(this)}return this.fct=t,this.fct}eut(){return this.uct.eut()}Pct(t){this.uct.Pct(t)}Ect(){return this.uct.Fct()}Act(t){this.uct.Oct(t)}H1(){return this.$ot().Dct()}wlt(){return this.uct.kct()}Lct(t){this.uct.Nct(t)}Bct(){return this.uct.oI()}Uct(t){this.uct.Vct(t)}Wct(){return this.Hlt().zct(this.uct).oI()}jct(){return this.uct.jct()}Hct(t){this.uct.Hct(t)}Jct(){return this.uct.Jct()}$ct(t){this.uct.$ct(t)}yut(){return this.uct.yut()}Sut(t){this.uct.Sut(t)}Qot(){return this.uct.Qot()}tat(t){this.uct.tat(t)}sht(){return this.uct.sht()}sat(t){this.uct.sat(t)}L1(t){for(const s of this.qct())s.L1(t)}Xct(){return this.uct.Xct()}qct(){return this.dct||(this.dct=this.uct.mct().pct()),this.dct}Jrt(){return this.uct.mct().Jrt()}Yct(t){return this.cct.Yct(t,this.uct)}Kct(t){return this.cct.Kct(t,this.uct)}Zct(t){let s,e=this.cct.Yct(t,this.uct);return e?s=this.cct.Qct(t,this.uct):(e=this.cct.Kct(t,this.uct),s=this.cct.tft(t,this.uct)),{start:e,end:s}}*sft(){for(const t of this.qct())yield t.lht()}*eft(){for(const t of this.qct())yield t.uW()}clt(){this.$ot().clt()}Mrt(){this.$ot().Mrt()}ift(){return this.$ot().ift()}Uat(){this.$ot().Uat()}drt(t){this.$ot().drt(),this.gct=this.nft(t),this.Kat()}Yat(t){this.$ot().Yat(),this.gct=this.nft(t)}Kat(){const t=this.xct();if(this.zlt=0,t.Xot()){const s=this.$lt(),e=t.N1(),i=this.$ot(),n=this.wlt();if(i.rft()){const t=s.Jot(e,i,n,this);t&&t.length&&(this.zlt=1)}else this.zlt=0}}nft(t){const s=this.$lt();return this.cct.Yct(t,this.uct)||(s.oat()?this.cct.Kct(t,this.uct):this.cct.tft(t,this.uct))}slt(){this.fct.slt()}wc(t,s=!1,e=!1,i=!1){let n,r,h=!1;if(s)n=this.cct.Kct(t,this.uct);else{if(this.gct){const s=this.$lt(),e=this.gct.$rt(),i=this.gct.uW(),n=e?e.uW():s.g1();(t<=i||t>=n)&&(this.gct=this.cct.Kct(t,this.uct),h=!0)}else this.gct=this.cct.Kct(t,this.uct),h=!0;n=this.gct}n&&(r=n.$rt()),this.fct.wc(t,n,r,s,e,i,h)}hft(t){if(this.gct){const s=this.$lt(),e=this.gct.$rt(),i=this.gct.uW(),n=e?e.uW():s.g1();(t<=i||t>=n)&&(this.gct=this.cct.Kct(t,this.uct))}else this.gct=this.cct.Kct(t,this.uct);const s=this.gct,e=s.$rt();return this.fct.hft(t,s,e)}oft(t,s,e){return this.fct.hft(t,s,e)}rlt(){this.fct.rlt()}static aft(t,s){const e=s.bct();return s.cct.Kct(t,e)}static lft(t,s){const e=s.bct();return s.cct.tft(t,e)}uft(){const t=this.uct.mct().cft();return this.gct=null,t}Zut(t){this.gct=null,this.uct.mct().fft(t)}Qut(){this.$ot().Qut()}tct(){if(this.$ot().tct()){const t=this.cct.zct(this.uct),s=this.$ot().ift();t.dft(s)}}sct(){const t=this.$ot().sct();return t&&this.pft(),this.$ot().mft(),t}pft(){const t=this.$lt().uW(),s=this.$ot(),e=wg.Jlt.aft(t,this),i=this.uft();i.Vct(e.oI()),i.d1(t),i.L1(e.gft()),i.Sut(!0),i.yft(s.Sft()),i.dft(s.ift())}ust(){return{sourceAdapterJson:this.$ot().ust()}}cst(t){t&&this.$ot().cst(t.sourceAdapterJson)}}}{const vg=self._s.Jlt;vg.Ict=class{constructor(t){this.wft=t,this.vft=null,this.xft()}Hn(){this.vft&&(this.vft.Hn(),this.vft=null),this.wft=null}rft(){return this.vft.rft()}J1(){return this.wft}clt(){this.vft&&this.vft.clt()}Mrt(){this.vft&&this.vft.Mrt()}xft(){return this.vft||(this.vft=this.bft()),this.vft}iut(){}Ej(){return this.iut()}Mft(){}Uat(){this.xft().Uat()}drt(){this.xft().drt()}Yat(){this.xft().Yat()}slt(){this.vft.Tft()}wc(t,s,e,i,n,r,h){let o;switch(this.wft.Wct()){case"numeric":o=vg.Gft.wc(t,s,e,this.wft);break;case"angle":o=vg._ft.wc(t,s,e,this.wft);break;case"boolean":o=vg.Ift.wc(t,s,e,this.wft);break;case"color":o=vg.Cft.wc(t,s,e,this.wft);break;case"text":o=vg.Rft.wc(t,s,e,this.wft)}this.vft.Pft(t,o,s,e,i,n,r,h)}hft(t,s,e){switch(this.wft.Wct()){case"numeric":return vg.Gft.wc(t,s,e,this.wft);case"angle":return vg._ft.wc(t,s,e,this.wft);case"boolean":return vg.Ift.wc(t,s,e,this.wft);case"color":return vg.Cft.wc(t,s,e,this.wft);case"text":return vg.Rft.wc(t,s,e,this.wft)}}rlt(){this.vft.Eft()}Qut(){this.xft().Fft()}mft(){this.xft().mft()}ift(){return this.xft().ift()}tct(){return this.xft().tct()}sct(){return this.xft().sct()}Sft(){const t=this.wft,s=t.xct().$lt().uW(),e=vg.aft(s,t),i=e.$rt();switch(t.Wct()){case"numeric":return vg.Gft.wc(s,e,i,t);case"angle":return vg._ft.wc(s,e,i,t);case"boolean":return vg.Ift.wc(s,e,i,t);case"color":return vg.Cft.wc(s,e,i,t);case"text":return vg.Rft.wc(s,e,i,t)}}bft(){const t=this.wft;switch(t.Xct()?t.Wct():""){case"combo":case"boolean":case"text":case"string":return new vg.Oft.Aft(this);case"numeric":case"number":case"angle":return"combo"===this.wft.Bct()?new vg.Oft.Aft(this):new vg.Oft.Dft(this);case"color":case"offsetColor":return new vg.Oft.kft(this);default:return new vg.Oft.Dft(this)}}ust(){return{propertyAdapterJson:this.xft().ust()}}cst(t){t&&this.xft().cst(t.propertyAdapterJson)}}}{const xg=self._s;class bg extends xg.Jlt.Ict{constructor(t){super(t),this.Lft=NaN}iut(){return this.wft.bct().Fct()[0]}Ej(){return this.Lft?this.Lft:super.Ej()}Mft(){return this.wft.xct().N1()}out(t){this.wft.bct().Fct()[0]!==t&&(this.Lft=t)}wc(t,s,e,i,n,r,h){this.xft().Nft(s.Dct())&&super.wc(t,s,e,i,n,r,h)}hft(t,s,e){if(this.xft().Nft(s.Dct()))return super.hft(t,s,e)}ust(){return Object.assign(super.ust(),{index:this.Lft})}cst(t){t&&(super.cst(t),this.Lft=t.index)}}xg.Jlt.Gct=bg}{const Mg=self._s;class Tg extends Mg.Jlt.Ict{constructor(t){super(t),this.f8=NaN}iut(){return this.wft.bct().Fct()[1]}Mft(){const t=this.wft.bct(),s=this.wft.xct(),e=this.f8?this.f8:t.Fct()[0],i=s.N1(),n=i.Bft(e);return i.Uft()[n].o0()}y0(t){const s=this.wft.bct().Fct()[2];return t.Vft(s)}lut(t){this.wft.bct().Fct()[0]!==t&&(this.f8=t)}wc(t,s,e,i,n,r,h){const o=this.wft.xct().N1();this.y0(o.yK())&&super.wc(t,s,e,i,n,r,h)}hft(t,s,e){const i=this.wft.xct().N1();if(this.y0(i.yK()))return super.hft(t,s,e)}ust(){return Object.assign(super.ust(),{sid:this.f8})}cst(t){t&&(super.cst(t),this.f8=t.sid)}}Mg.Jlt.Mct=Tg}{const Gg=self._s;class _g extends Gg.Jlt.Ict{constructor(t){super(t)}iut(){return this.wft.bct().Fct()[1]}Mft(){const t=this.wft.xct().WJ().IZ(),s=t.AX(),e=this.cut(s).Ej();return t.M0(e)?t.Wft(e):null}cut(t){const s=this.wft.bct().Fct()[0];return t.zft(s)}wc(t,s,e,i,n,r,h){this.jft()&&super.wc(t,s,e,i,n,r,h)}hft(t,s,e){if(this.jft())return super.hft(t,s,e)}jft(){const t=this.wft.xct().WJ().IZ(),s=t.AX(),e=this.cut(s);if(!e)return;const i=e.Ej();return t.M0(i)}}Gg.Jlt.Tct=_g}{const Ig=self._s;class Cg extends Ig.Jlt.Ict{constructor(t){super(t)}iut(){return this.wft.bct().Fct()[0]}Mft(){return this.wft.xct().N1().o0()}wc(t,s,e,i,n,r,h){const o=this.wft.xct();o.yK().Zq()===o.N1().yK().Zq()&&super.wc(t,s,e,i,n,r,h)}hft(t,s,e){const i=this.wft.xct();if(i.yK().Zq()===i.N1().yK().Zq())return super.hft(t,s,e)}Hft(){const t=this.wft.xct(),s=t.yK().Zq();if(Ig.a$.Jft&&s instanceof Ig.a$.Jft&&("initial-frame"===this.wft.wlt()||"initial-animation"===this.wft.wlt()))switch(this.wft.sht()){case"relative":return{$ft:(s,e,i,n,r)=>{if(e!==n){const i=n/e,r=t.J1("offsetWidth"),h=t.J1("offsetScaleX");if(r||h){const o=r?.$ot()?.xft(),a=h?.$ot()?.xft();if(s.TQ()&&s.EQ())a&&a.qft(n),s.ny(this.Xft(n,e,s,t,o,a));else{const e=n*((s.Kft()?.Yft()??this.Zft(s,t))/this.Zft(s,t));a&&a.qft(n);const r=o?.Qft()??0,h=a?.Qft()??0;s.ny(e+(r+h*i))}}else s.ny(s.by()*i)}if(i!==r){const e=r/i,n=t.J1("offsetHeight"),h=t.J1("offsetScaleY");if(n||h){const o=n?.$ot()?.xft(),a=h?.$ot()?.xft();if(s.TQ()&&s.AQ())a&&a.qft(r),s.hy(this.tdt(r,i,s,t,o,a));else{const i=r*((s.Kft()?.sdt()??this.edt(s,t))/this.edt(s,t));a&&a.qft(r);const n=o?.Qft()??0,h=a?.Qft()??0;s.hy(i+(n+h*e))}}else s.hy(s.Ty()*e)}}};case"absolute":return null}}idt(t,s,e,i=0){const n=s.$lt().vlt(t.N1());if(!n)return i;const r=n.J1(e);if(!r)return i;const h=r.bct().mct();if(!h)return i;const o=h.ndt();return o?o.Dct():i}Zft(t,s){const e=s.$lt().vlt(t.N1());if(e)return e.xut();const i=t.N1().o0();return i.but()?i.xut():t.Kft().Yft()}edt(t,s){const e=s.$lt().vlt(t.N1());if(e)return e.Tut();const i=t.N1().o0();return i.but()?i.Tut():t.Kft().sdt()}Xft(t,s,e,i,n,r){const h=e.Kft().Yft(),o=h/e.cQ().Kft().Yft();let a=1;const l=r?.rdt()??0;if(0!==l){const t=h/this.Zft(e,i);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.hdt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return e.cQ().by()*o*a*f}tdt(t,s,e,i,n,r){const h=e.Kft().sdt(),o=h/e.cQ().Kft().sdt();let a=1;const l=r?.odt()??0;if(0!==l){const t=h/this.edt(e,i);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.adt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return e.cQ().Ty()*o*a*f}}Ig.Jlt._ct=Cg}{const Rg=self._s;class Pg extends Rg.Jlt.Ict{constructor(t){super(t),this.ldt=0,this.udt=!1}rft(){return!1}drt(){const t=this.wft.Hlt();let s=this.wft.bct();s=t.zct(s),this.ldt=s.lht()}Yat(){}Dct(){return this.udt||this.wft.wc(0),this.ldt}wc(t,s,e,i,n,r,h){this.ldt=Rg.Jlt.Gft.wc(t,s,e,this.wft),this.udt=!0}Qut(){}mft(){}ift(){return this.ldt}tct(){return!1}sct(){return!1}ust(){return{value:this.ldt,init:this.udt}}cst(t){t&&(this.ldt=t.value,this.udt=!t.hasOwnProperty("init")||t.init)}}Rg.Jlt.Cct=Pg}{const Eg=self._s;class Fg extends Eg.Jlt.Ict{constructor(t){super(t),this.cdt=!1,this.fdt=null,this.ddt=null,this.pdt=null,this.Urt=this.wft.$lt(),this.lct=this.wft.xct(),this.mdt=this.wft.Ect(),this.gdt=this.mdt[0],this.ydt=this.mdt[1],this.mdt[3]?this.Sdt=this.mdt[3]:this.Sdt=Math.random().toString(36).slice(2),this.wdt=NaN,this.vdt=NaN,this.xdt=NaN,this.bdt=null,this.Mdt()}Hn(){super.Hn(),this.fdt=null,this.ddt=null,this.pdt=null,this.Urt=null,this.lct=null,this.mdt=null,this.gdt=null,this.bdt=null}Mdt(){if(!self._s.a$.Audio)return;const t=this.wft.m$().Tdt(self._s.a$.Audio);t&&(this.fdt=t.Xq().o0()),this.ddt=self._s.a$.Audio.Gdt,this.pdt=self._s.a$.Audio._dt}Idt(){if(this.bdt)return;const t=this.wft.xct().J1("audioSource");t&&(this.bdt=t.$ot())}Cdt(){const t=this.wft.xct().J1("volume");return t?t.$ot().vdt:this.vdt}clt(){super.clt(),this.cdt=!1,this.fdt&&(this.pdt&&(this.wdt=this.pdt.Rdt.call(this.fdt,this.Sdt),this.vdt=this.pdt.Pdt.call(this.fdt,this.Sdt)),this.ddt&&this.ddt.u1.call(this.fdt,this.Sdt))}Edt(){return this.Sdt}Fdt(){return this.xdt}Adt(t){this.xdt=t}drt(){super.drt(),this.wdt=NaN,this.cdt=!1}Yat(){super.Yat();const t=this.wft.$lt().uW();switch(this.wdt=t-this.ydt,this.wft.wlt()){case"audioSource":break;case"volume":this.vdt=this.wft.hft(t)}this.cdt=!1}wc(t,s,e,i,n,r,h){if(this.fdt)switch(this.wft.wlt()){case"audioSource":{if(!this.Urt.oat())return;if(i)return void(this.ddt&&this.ddt.u1.call(this.fdt,this.Sdt));if(t<this.ydt)return void(this.cdt=!1);const s=this.pdt.Odt.call(this.fdt,this.Sdt),e=this.Urt.T1();if(e!==s&&this.ddt.M1.call(this.fdt,this.Sdt,e),this.cdt)return;if(!this.wft.$lt().IsPlaying())return;if(this.cdt=!0,isNaN(this.wdt)){const s=self.performance.now(),e=t-this.ydt;if("suspended"===this.fdt.Ddt())return void(this.cdt=!1);const i=e+(self.performance.now()-s)/1e3;if(this.ddt){let t=this.Fdt();isNaN(t)?(this.Adt(0),t=0):this.Adt(t),this.ddt.kdt.call(this.fdt,this.gdt,t,this.Sdt,i)}}else{const t=this.wdt;this.wdt=NaN;const s=this.Cdt();if(this.vdt=NaN,"suspended"===this.fdt.Ddt())return void(this.cdt=!1);this.ddt&&(this.Adt(s),this.ddt.kdt.call(this.fdt,this.gdt,s,this.Sdt,t))}break}case"volume":this.Idt(),super.wc(t,s,e,i,n,r,h)}}hft(t,s,e){if(this.fdt)switch(this.wft.wlt()){case"audioSource":return;case"volume":return this.Idt(),super.hft(t,s,e)}}Ldt(t,s){return this.bdt?this.bdt.Fdt():0}Ndt(t,s,e,i){this.bdt&&this.bdt.Adt(this.Ldt()+s),this.ddt&&this.bdt&&this.ddt.Adt.call(this.fdt,this.bdt.Edt(),this.bdt.Fdt())}Bdt(t,s,e){this.bdt&&this.bdt.Adt(s),this.ddt&&this.bdt&&this.ddt.Adt.call(this.fdt,this.bdt.Edt(),this.bdt.Fdt())}Udt(){return!0}ust(){return{audioPlaybackStarted:this.cdt,audioTag:this.Sdt,pauseTime:this.wdt,pauseVolume:this.vdt,volume:this.xdt}}cst(t){t&&(this.cdt=t.audioPlaybackStarted,this.Sdt=t.audioTag,this.wdt=t.pauseTime,this.vdt=t.pauseVolume,this.xdt=t.volume,this.Mdt())}}Eg.Jlt.Rct=Fg}self._s.Jlt.Oft=class{constructor(t){this.fct=t,this.wft=t.J1(),this.Flt=this.wft.xct().WJ(),this.Vdt=this.wft.wlt(),this.Wdt=!1,this.zdt=null,this.jdt=null}Hn(){this.fct=null,this.wft=null,this.Flt=null,this.zdt=null,this.jdt=null}rft(){return!1}clt(){}Mrt(){this.Flt=null,this.zdt=null,this.jdt=null}$ot(){return this.fct}J1(){return this.wft}WJ(){return this.Flt||(this.Flt=this.wft.xct().WJ()),this.Flt}Hdt(t){this.Wdt=!!t}Jdt(){return this.Wdt}Uat(){}drt(){}Yat(){}Fft(){this.zdt=this.ift()}mft(){this.zdt=null}ift(){}tct(){}sct(){}Nft(t){return typeof this.$dt()==typeof t}Tft(){}Pft(t,s,e,i,n,r,h,o){}Eft(){}qdt(){return this.Ydt(()=>{const t=this.wft.bct();return this.wft.Hlt().zct(t)},()=>{const t=this.wft.bct();return this.wft.Hlt().ndt(t)}).Xdt()}Kdt(){const t=this.wft.$lt().uW()-this.wft.xct().elt();return this.Ydt(()=>{const s=this.wft.bct();return this.wft.Hlt().Kct(t,s)},()=>{const s=this.wft.bct(),e=this.wft.Hlt();return e.tft(t,s)||e.ndt(s)}).Xdt()}Ydt(t,s){return this.wft.$lt().oat()?t():s()}Zdt(t,s){return"relative"===this.wft.sht()?t():s()}Qdt(t,s){return this.Jdt()?(this.Hdt(!1),t()):s()}tpt(t){}spt(){return this.fct.Ej()}ept(){return this.jdt||(this.jdt=this.fct.Mft()),this.jdt}ipt(t,s,e,i,n,r){switch(this.wft.eut()){case"behavior":return t();case"effect":return s();case"instance-variable":return e();case"plugin":return i();case"world-instance":return n();case"audio":return r()}}ust(){return{firstAbsoluteUpdate:this.Wdt,saveState:this.zdt}}cst(t){t&&(this.Wdt=t.firstAbsoluteUpdate,this.zdt=t.saveState)}npt(t,s=!1){const e=[];for(const i of t){const t=i.xct().elt();for(const n of i.qct())s&&0===n.uW()?e.push({time:t+n.uW(),value:n.Xdt()}):s||e.push({time:t+n.uW(),value:n.Xdt()})}return e.sort((t,s)=>t.time-s.time)}rpt(t,s,e){return this.hpt(s,e)}hpt(t,s){for(let e=s.length-1;e>=0;e--)if(s[e].time<=t)return s[e];return null}};{const Ag=self._s,Og=new Map,Dg=[0,0,0];class kg extends Ag.Jlt.Oft{constructor(t){super(t)}Uat(){}drt(){}Yat(){}ift(){const t=this.wft.eut(),s=this.ept(),e=this.spt();switch(t){case"behavior":case"plugin":return this.opt(s.apt(e));case"effect":return this.opt(s[e]);case"world-instance":return this.opt(this.$dt())}}tct(){const t=this.qdt();return!this.lpt(t,this.$dt())}sct(){return!Ag.Qe(this.zdt)&&!this.lpt(this.zdt,this.$dt())}lpt(t,s){return t=this.upt(t),s=this.upt(s),t.Ho(s)}qdt(){const t=super.qdt();return this.upt(t)}Kdt(){const t=super.Kdt();return this.upt(t)}tpt(t){}opt(t){return Ag.Di(t,Ag.Mo)?t.toArray().slice(0,3):t.slice(0,3)}upt(t){return Ag.Di(t,Ag.Mo)?t:new Ag.Mo(t[0],t[1],t[2],1)}Nft(t){return!0}rft(){return!0}Tft(){const t=this.wft.$lt(),s=this.wft.N1(),e=this.wft.$ot(),i=t.Jot(s,e,this.Vdt,this.wft);if(i&&i.length>1){Og.has(s)||Og.set(s,new Map);const t=Og.get(s),e=this.wft.eut();t.has(e)||t.set(e,new Map);const i=t.get(e);i.has(this.Vdt)||i.set(this.Vdt,{cpt:!1,color:new Ag.Mo(0,0,0,1)})}}fpt(t,s,e){const i=Og.get(t).get(s).get(e);return i.cpt=!0,i.color}Pft(t,s,e,i,n,r,h,o){const a=this.wft.$lt(),l=this.wft.xct(),u=this.wft.N1(),c=this.wft.$ot(),f=this.wft.eut(),d=this.Vdt,p=a.Jot(u,c,d,this.wft);if(p&&p.length>1){const t=this.npt(p,!0),e=this.rpt(a,a.uW(),t);if(e){const t=l.elt(),i=e.time-t;if(0===i)this.fpt(u,f,this.Vdt).Po(s[0],s[1],s[2]);else{if(i<0)return;const t=s[0],e=s[1],n=s[2],r=this.wft.wc(i,!1,!0),h=Ag.Mo.ba(t,r[0]),o=Ag.Mo.ba(e,r[1]),a=Ag.Mo.ba(n,r[2]);this.fpt(u,f,this.Vdt).Po(h,o,a)}}}else this.dpt(s[0],s[1],s[2])}Eft(){const t=this.wft.N1();if(!Og.has(t))return;const s=Og.get(t),e=this.wft.eut();if(!s.has(e))return;const i=s.get(e);if(!i.has(this.Vdt))return;const n=i.get(this.Vdt),r=n.cpt,h=n.color;r&&this.dpt(h.Lo(),h.No(),h.Bo()),0===i.size&&s.delete(e),0===s.size&&Og.delete(t)}$dt(){const t=this.wft.eut(),s=this.ept(),e=this.spt();switch(t){case"behavior":case"plugin":return this.upt(s.apt(e));case"effect":return s[e].clone();case"world-instance":return this.WJ().KZ().clone()}}dpt(t,s,e){const i=this.wft.eut(),n=this.ept(),r=this.spt();switch(i){case"behavior":case"plugin":Dg[0]=t,Dg[1]=s,Dg[2]=e,n.ppt(r,Dg);break;case"effect":n[r].Ro(t,s,e);break;case"world-instance":this.WJ().mpt(t,s,e)}}ust(){}cst(t){}}Ag.Jlt.Oft.kft=kg}{const Lg=self._s,Ng=Lg.Jlt;class Bg extends Lg.Jlt.Oft{constructor(t){super(t)}Uat(){}drt(){}Yat(){}ift(){return this.$dt()}tct(){return this.qdt()!==this.ift()}sct(){return!Lg.Qe(this.zdt)&&this.zdt!==this.ift()}rft(){return!1}Pft(t,s,e,i,n,r,h,o){const a=this.wft,l=a.xct(),u=a.eut(),c=a.$lt(),f=l.N1(),d=a.$ot(),p=this.Vdt,m=c.Jot(f,d,p,a);if(m&&m.length>1){const e=this.npt(m),i=t+l.elt(),n=this.rpt(c,i,e);n&&(s=n.value)}switch(a.Wct()){case"numeric":if(!Ng.Gft.gpt(this.spt(),this.ept(),s,u))return;break;case"angle":if(!Ng._ft.gpt(this.spt(),this.ept(),s,u))return;break;case"boolean":if(!Ng.Ift.gpt(this.spt(),this.ept(),s,u))return;break;case"color":if(!Ng.Cft.gpt(this.spt(),this.ept(),s,u))return;break;case"text":if(!Ng.Rft.gpt(this.spt(),this.ept(),s,u))return}this.dpt(s)}$dt(){const t=this.wft.eut(),s=this.ept(),e=this.spt();switch(t){case"behavior":case"plugin":return s.apt(e);case"effect":return s[e];case"instance-variable":return s.ypt(e)}}dpt(t){const s=this.wft.eut(),e=this.ept(),i=this.spt();switch(s){case"behavior":case"plugin":e.ppt(i,t);break;case"effect":e[i]=t;break;case"instance-variable":e.Spt(i,t)}}}Lg.Jlt.Oft.Aft=Bg}{const Ug=self._s,Vg=(Ug.Jlt.Oft,new Map),Wg=(t,s,e,i,n,r=!1,h=null,o=null)=>{Vg.set(t,{wpt:s,vpt:e,xpt:i,round:n,bpt:r,init:h,reset:o})},zg=(t,s,e,i=0)=>{const n=s.$lt().vlt(t.N1());if(!n)return i;const r=n.J1(e);if(!r)return i;const h=r.bct().mct();if(!h)return i;const o=h.ndt();return o?o.Dct():i},jg=t=>{const s=[];let e=t.cQ();for(;e;)s.push(e),e=e.cQ();return s.reverse(),s};Wg("offsetX",(t,s,e,i)=>{"relative"===i.wft.sht()?t.Mpt(s,e.$lt().nat()):t.Mpt(s)},(t,s)=>t.pM(s),t=>t.dM(),!0),Wg("offsetY",(t,s,e,i)=>{"relative"===i.wft.sht()?t.Tpt(s,e.$lt().nat()):t.Tpt(s)},(t,s)=>t.yM(s),t=>t.gM(),!0),Wg("offsetWidth",(t,s,e,i,n=!1,r=!0)=>{if(0===s)return;const h="relative"===i.wft.sht(),o=1===i.Gpt.oI();if((h||o)&&t.TQ()&&t.EQ()){if(isNaN(i._pt)){const s=jg(t);let e;e=o?s[s.length-1].by():s[s.length-1].Kft().Yft(),i._pt=0===e?Number.EPSILON:e}if(n)return;i.Ipt+=s;const e=s/i._pt;t.Ly(e,r),i.Cpt+=e}else t.Ly(s),i.Cpt+=s},(t,s)=>t.ny(s),t=>t.by(),!0,!1,null,t=>{t.Cpt=0,t.Ipt=0}),Wg("offsetHeight",(t,s,e,i,n=!1,r=!0)=>{if(0===s)return;const h="relative"===i.wft.sht(),o=1===i.Gpt.oI();if((h||o)&&t.TQ()&&t.AQ()){if(isNaN(i._pt)){const s=jg(t);let e;e=o?s[s.length-1].Ty():s[s.length-1].Kft().sdt(),i._pt=0===e?Number.EPSILON:e}if(n)return;i.Rpt+=s;const e=s/i._pt;t.Ppt(e,r),i.Cpt+=e}else t.Ppt(s),i.Cpt+=s},(t,s)=>t.hy(s),t=>t.Ty(),!0,!1,null,t=>{t.Cpt=0,t.Rpt=0}),Wg("offsetAngle",(t,s,e,i,n)=>{t.Ept(s)},(t,s)=>t.BX(s),t=>t.UX(),!1,!0),Wg("offsetOpacity",(t,s,e,i,n)=>{s/=i.Fpt?i.Fpt:1;const r=t.NA()+s;if(0===i.Apt)r>1?i.Apt+=r-1:r<0&&(i.Apt+=r),t.Opt(s);else{const e=t.NA()+s;s>0&&i.Apt>0?e>1&&(i.Apt+=e-1):s>0&&i.Apt<0?(i.Apt+=s,i.Apt>0&&(t.Opt(i.Apt),i.Apt=0)):s<0&&i.Apt>0?(i.Apt+=s,i.Apt<0&&(t.Opt(i.Apt),i.Apt=0)):s<0&&i.Apt<0&&e<0&&(i.Apt+=e)}},(t,s)=>{t.UA(s)},t=>t.NA(),!1,!0,(t,s,e)=>{switch(t.Apt=0,t.wft.sht()){case"relative":{t.wft.Hlt();const s=t.wft.bct().mct().pct();let e=t.WJ().NA(),i=e;for(const n of s){const s=n.uW();i=e+t.wft.hft(s),i=Ug.Yn(i,0,1)}t.Dpt=e-i,t.Dpt=Math.round(100*(t.Dpt+Number.EPSILON))/100,i=e;for(let e=s.length-1;e>=0;e--){const n=s[e].uW();i-=t.wft.hft(n),i=Ug.Yn(i,0,1)}t.kpt=i,t.kpt=Math.round(100*(t.kpt+Number.EPSILON))/100;break}}const i="relative"===t.wft.sht(),n=1===t.Gpt.oI();if((i||n)&&s.TQ()&&s.BQ()){const i=jg(s);let n=i[0].Kft().Lpt();n+=zg(i[0],e,"offsetOpacity");for(let t=1;t<i.length;t++)n+=zg(i[t],e,"offsetOpacity");t.Fpt=0===n?1:n}},t=>{switch(t.wft.sht()){case"relative":{t.Apt=0;const s=t.WJ();let e=s.NA();e=Math.round(100*(e+Number.EPSILON))/100,t.wft.$lt().oat()?(s.UA(e+t.Dpt),t.KI=0):(s.UA(e-t.kpt),t.KI=t.$ot().Sft());break}}}),Wg("offsetOriginX",(t,s)=>t.Npt(s),(t,s)=>t.DZ(s),t=>t.OZ(),!1),Wg("offsetOriginY",(t,s)=>t.Bpt(s),(t,s)=>t.NZ(s),t=>t.LZ(),!1),Wg("offsetZElevation",(t,s)=>t.Upt(s),(t,s)=>t.wM(s),t=>t.SM(),!0),Wg("offsetScaleX",(t,s,e,i)=>{if(0===s)return;const n=t.by()<0?-1:1;if(i.Vpt+=s,"relative"===i.wft.sht()&&t.TQ()&&t.EQ()){const r=zg(t,e,"offsetWidth"),h=isNaN(i.Wpt)?e.xut():i.Wpt,o=(h+r/(t.Kft().Yft()/h))*n*s;isNaN(i._pt)&&Vg.get("offsetWidth").wpt(t,1,e,i,!0);const a=o/i._pt;t.Ly(a,!0),i.Cpt+=a}else{const r=(isNaN(i.Wpt)?e.xut():i.Wpt)*n*s;t.Ly(r),i.Cpt+=r}},(t,s,e)=>{t.ny(e.xut()*s)},(t,s)=>{const e=t.by()<0?-1:1;if(t.EQ()){const i=t.cQ(),n=s.$lt().vlt(i.N1());let r=NaN;if(n)r=i.by()/n.xut();else{const t=i.N1().o0();r=t.but()?i.by()/t.xut():1}return t.by()*e/(s.xut()*r)}return t.by()*e/s.xut()},!1,!1,null,t=>{t.Cpt=0,t.Wpt=NaN,t.Vpt=0}),Wg("offsetScaleY",(t,s,e,i)=>{if(0===s)return;const n=t.Ty()<0?-1:1;if(i.zpt+=s,"relative"===i.wft.sht()&&t.TQ()&&t.AQ()){const r=zg(t,e,"offsetHeight"),h=isNaN(i.Wpt)?e.Tut():i.Wpt,o=(h+r/(t.Kft().sdt()/h))*n*s;isNaN(i._pt)&&Vg.get("offsetHeight").wpt(t,1,e,i,!0);const a=o/i._pt;t.Ppt(a,!0),i.Cpt+=a}else{const r=(isNaN(i.Wpt)?e.Tut():i.Wpt)*n*s;t.Ppt(r),i.Cpt+=r}},(t,s,e)=>{t.hy(e.Tut()*s)},(t,s)=>{const e=t.Ty()<0?-1:1;if(t.AQ()){const i=t.cQ(),n=s.$lt().vlt(i.N1());let r=NaN;if(n)r=i.Ty()/n.Tut();else{const t=i.N1().o0();r=t.but()?i.Ty()/t.Tut():1}return t.Ty()*e/(s.Tut()*r)}return t.Ty()*e/s.Tut()},!1,!1,null,t=>{t.Cpt=0,t.Wpt=NaN,t.zpt=0});class Hg extends Ug.Jlt.Oft{constructor(t){super(t),this.KI=0,this.Apt=0,this.Dpt=0,this.kpt=0,this.Fpt=NaN,this._pt=NaN,this.Cpt=0,this.Wpt=NaN,this.Ipt=0,this.Vpt=0,this.Rpt=0,this.zpt=0,this.jpt=void 0,this.Hpt=void 0,this.Jpt=null,this.$pt=null,this.qpt=null,this.Xpt=null,this.Ypt=null,this.Kpt=null,this.Zpt=null,this.Qpt=null,this.tmt=!1,this.smt=!1,Ug.Di(this.wft.$lt(),Ug.emt)?this.Gpt=new Ug.Jlt.Oft.imt(this):this.Gpt=new Ug.Jlt.Oft.nmt(this);const s=this.wft.wlt();switch(this.wft.eut()){case"world-instance":{const t=Vg.get(s);this.Jpt=t.xpt,this.$pt=t.wpt,this.qpt=t.vpt,this.tmt=t.round,this.smt=t.bpt,this.Ypt=t.init,this.Xpt=t.reset;break}case"audio":this.Kpt=t.Ldt,this.Zpt=t.Ndt,this.Qpt=t.Bdt,this.tmt=!!t.Udt(),this.smt=!1}}Hn(){this.Gpt=null,this.Jpt=null,this.$pt=null,this.qpt=null,this.Xpt=null,this.Ypt=null,this.Kpt=null,this.Zpt=null,this.Qpt=null,super.Hn()}rft(){return this.Gpt.rft()}rmt(){return this.KI}hmt(t){this.KI=t}Uat(){this.Xpt&&this.Xpt(this)}drt(){const t=this.Gpt.drt();if("number"==typeof t&&(this.KI=t),this.Ypt){const t=this.WJ(),s=this.wft.xct();this.Ypt(this,t,s)}}Yat(){const t=this.Gpt.Yat();"number"==typeof t&&(this.KI=t)}ift(){return this.$dt()}tct(){return this.qdt()!==this.ift()}sct(){return!Ug.Qe(this.zdt)&&this.zdt!==this.ift()}Tft(){this.Gpt.Tft()}Pft(t,s,e,i,n,r,h,o){return this.Gpt.Pft(t,s,e,i,n,r,h,o)}Eft(){this.Gpt.Eft()}$dt(){const t=this.ept(),s=this.spt(),e=this.WJ(),i=this.wft.xct();switch(this.wft.eut()){case"behavior":case"plugin":return t.apt(s);case"effect":return t[s];case"instance-variable":return t.ypt(s);case"world-instance":return this.Jpt(e,i);case"audio":return this.Kpt.call(this.$ot(),e,i)}}dpt(t,s,e,i=!0){const n=this.ept(),r=this.spt(),h=this.WJ(),o=this.wft.xct();switch(this.wft.eut()){case"behavior":n.omt(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.amt(r,t);break;case"plugin":n.omt(r,t,this.$ot().Hft());break;case"world-instance":this.$pt(h,t,o,this,!1,i);break;case"audio":this.Zpt.call(this.$ot(),h,t,o,this)}}lmt(t,s,e){let i=this.wft.Qot();if(i="default"===i?"continuous":i,"discrete"===i&&!s)return;if("discrete"===i&&e){const t=this.wft.$lt().uW();if(!this.wft.Yct(t))return}const n=this.ept(),r=this.spt(),h=this.WJ(),o=this.wft.xct();switch(this.wft.eut()){case"behavior":n.ppt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Spt(r,t);break;case"plugin":n.ppt(r,t,this.$ot().Hft());break;case"world-instance":this.qpt(h,t,o);break;case"audio":this.Qpt.call(this.$ot(),h,t,o)}}umt(t,s,e,i,n,r,h,o){this.Gpt.umt(t,s,e,i,n,r,h,o)}cmt(t,s,e,i,n){"angle"===this.wft.Bct()&&(t=Ug.Qn(t));const r=(t.toString().split(".")[1]||"").length,h=this.$dt();let o;switch(o=0===r?this.tmt?Math.round(h):this.smt?"angle"===this.wft.Bct()?Ug.Zn(Math.round(Ug.Qn(h))):Number(Ug.toFixed(h,2)):h:this.tmt?Number(Ug.toFixed(h,r)):(this.smt,h),this.dpt(o-h,s,e,!1),this.wft.wlt()){case"offsetWidth":case"offsetScaleX":{const t=this.WJ(),s=t.by(),e=Number(Ug.toFixed(s,2));t.Ly(e-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.WJ(),s=t.Ty(),e=Number(Ug.toFixed(s,2));t.Ppt(e-s);break}}}ust(){return Object.assign(super.ust(),{v:this.KI,a:this.Apt,fod:this.Dpt,bod:this.kpt,of:this.Fpt,sf:this._pt,armorf:this.jpt,armandf:this.Hpt,ca:this.Cpt,os:this.Wpt,awo:this.Ipt,aho:this.Rpt,asxo:this.Vpt,asyo:this.zpt})}cst(t){t&&(super.cst(t),this.KI=t.v,this.Apt=t.a,this.Dpt=Ug.Ye(t.fod)?t.fod:0,this.kpt=Ug.Ye(t.bod)?t.bod:0,this.Fpt=Ug.Ye(t.of)?t.of:NaN,this._pt=Ug.Ye(t.sf)?t.sf:NaN,this.jpt=Ug.Ye(t.armorf)?t.armorf:void 0,this.Hpt=Ug.Ye(t.armandf)?t.armandf:void 0,this.Cpt=Ug.Ye(t.ca)?t.ca:0,this.Wpt=Ug.Ye(t.os)?t.os:NaN,this.Ipt=Ug.Ye(t.awo)?t.awo:0,this.Rpt=Ug.Ye(t.aho)?t.aho:0,this.Vpt=Ug.Ye(t.asxo)?t.asxo:0,this.zpt=Ug.Ye(t.asyo)?t.asyo:0)}qft(t){this.Wpt=t}Qft(){return this.Cpt}hdt(){return this.Ipt}adt(){return this.Rpt}rdt(){return this.Vpt}odt(){return this.zpt}}Ug.Jlt.Oft.Dft=Hg}{const Jg=self._s;class $g{constructor(t){this.fmt=!1,this.ldt=0,this.dmt=!1,this.pmt=!1,this.Ult=t;for(let t=0,s=this.Ult.length;t<s;t++)this.Ult[t].wct(this)}Slt(){return this.Ult}mmt(){this.fmt=!0}gmt(){return this.fmt}yft(t){this.ldt=t}Dct(){return this.ldt}ymt(t){this.dmt=t}Smt(){return this.dmt}tlt(t){this.pmt=t}wmt(){return this.pmt}Bf(){this.fmt=!1,this.ldt=0,this.dmt=!1,this.pmt=!1}}class qg{constructor(t){this.vmt=t}Hn(){this.vmt=null}oI(){return 0}drt(){const t=this.vmt;return this.vmt.J1(),t.Zdt(()=>t.Ydt(()=>0,()=>t.$ot().Sft()),()=>{})}Yat(){}rft(){switch(this.vmt,this.vmt.J1().sht()){case"relative":return!1;case"absolute":return!0}}Tft(){this.vmt;const t=this.vmt.J1(),s=t.wlt();switch(t.sht()){case"relative":break;case"absolute":if(t.Sct())t.vct().Bf();else{const e=t.$lt(),i=t.N1(),n=t.$ot(),r=e.Jot(i,n,s,t);r&&r.length>1&&new $g(r)}}}Pft(t,s,e,i,n,r,h,o){const a=this.vmt,l=this.vmt.J1();switch(l.sht()){case"relative":{const h=a.rmt();a.dpt(s-h,e,i),r&&this.umt(t,e,i,n,h,s),a.hmt(s);break}case"absolute":{const t=l.$lt(),e=l.xct();if(l.N1(),l.$ot(),l.Sct()){const i=l.vct(),n=i.Slt(),r=a.npt(n,!0),u=a.rpt(t,t.uW(),r);if(u){const t=e.elt(),n=u.time-t;if(0===n)i.tlt(h),i.ymt(o),i.mmt(),i.yft(i.Dct()+s);else{if(n<0)return;const t=l.hft(n);i.tlt(h),i.ymt(o),i.mmt(),i.yft(i.Dct()+(s-t))}}}else a.lmt(s,o,h);break}}}Eft(){const t=this.vmt,s=this.vmt.J1();switch(s.sht()){case"relative":break;case"absolute":if(s.Sct()){const e=s.vct();e.gmt()&&t.lmt(e.Dct(),e.Smt(),e.wmt())}}}umt(t,s,e,i,n,r){const h=this.vmt;i||(s&&t===s.uW()?h.cmt(s.lht(),s,e):e&&t===e.uW()?h.cmt(e.lht(),s,e):r-n===0&&h.cmt(s.lht(),s,e))}}Jg.Jlt.Oft.nmt=qg}{const Xg=self._s;class Yg{constructor(t){this.vmt=t}Hn(){this.vmt=null}oI(){return 1}drt(){const t=this.vmt;return t.Hdt(!0),this.tpt(t.qdt())}Yat(){const t=this.vmt;if(t.qdt()!==t.Kdt())return t.Hdt(!0),this.tpt(t.Kdt())}rft(){return!1}Tft(){}Pft(t,s,e,i,n,r,h,o){const a=this.vmt,l=a.rmt();switch(a.J1().sht()){case"relative":a.dpt(s-l,e,i),r&&this.umt(t,e,i,n,l,s,!1,h);break;case"absolute":a.Jdt()?(a.Hdt(!1),a.dpt(l,e,i)):0===t&&0===a.J1().$lt().g1()?a.lmt(s,!0,!1):(a.dpt(s-l,e,i),r&&this.umt(t,e,i,n,l,s,this.xmt(),h))}a.hmt(s)}Eft(){}tpt(t){return t-this.vmt.ift()}xmt(){const t=this.vmt,s=t.WJ().N1(),e=t.J1().m$().Hot();let i=0;for(const t of e.Wnt())0===t.oI()?t.$nt(s)&&i++:1===t.oI()&&t.N1()===s&&i++;return i<=1}umt(t,s,e,i,n,r,h,o){const a=this.vmt;i?s&&t===s.uW()?a.cmt(s.lht(),s,e,h,o):e&&t===e.uW()?a.cmt(e.lht(),s,e,h,o):e||a.cmt(s.lht(),s,e,h,o):s&&t===s.uW()?a.cmt(s.lht(),s,e,h,o):e&&t===e.uW()?a.cmt(e.lht(),s,e,h,o):r-n===0&&a.cmt(s.lht(),s,e,h,o)}}Xg.Jlt.Oft.imt=Yg}{const Kg=self._s,Zg=self.Wu;Kg.Jlt.Gft=class{constructor(){}static gpt(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.ypt(t)}return n!==e}static wc(t,s,e,i){if(!e){let t=i.bct();return t=i.Hlt().ndt(t),t.lht()}let n=i.Qot();if("default"===n&&(n="continuous"),"combo"===i.Bct()&&(n="discrete"),"discrete"===n)return s.lht();if("continuous"===n||"step"===n){const r=i.$lt().Kot();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.lht(),o=e.lht(),a=s.oht("cubic-bezier"),l=e.oht("cubic-bezier"),u=a&&a.bmt()&&l&&l.Mmt();if(!u&&h===o)return h;const c=s.uW(),f=e.uW();"step"===n&&0!==r&&(t=Kg.Yn(t,c,f));const d=Kg.normalize(t,c,f),p=s.gft();let m;if(u){const t=f-c;m=Zg.rc(p)(t*d,0,1,t),m=Zg.rc("cubicbezier")(m,h,h+a.fht(),o+l.mht(),o)}else m=Zg.rc(p)((f-c)*d,h,o-h,f-c);return"integer"===i.Bct()?Math.floor(m):m}}}}{const Qg=self._s;Qg.Jlt._ft=class{constructor(){}static gpt(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.ypt(t)}return n!==e}static wc(t,s,e,i){if(!e){let t=i.bct();return t=i.Hlt().ndt(t),t.lht()}let n=i.Qot();if("default"===n&&(n="continuous"),"combo"===i.Bct()&&(n="discrete"),"discrete"===n)return s.lht();if("continuous"===n||"step"===n){const r=i.$lt().Kot();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.uW(),o=e.uW(),a=s.lht(),l=e.lht();"step"===n&&0!==r&&(t=Qg.Yn(t,h,o));const u=s.oht("angle");if(!u){if(a===l)return a;const e=Qg.normalize(t,h,o),i=self.Wu.rc(s.gft());return Qg.lr(a,l,i(e,0,1,1))}{const e=u.Tmt();if(a===l&&0===e)return a;const i=Qg.normalize(t,h,o),n=self.Wu.rc(s.gft())(i,0,1,1);switch(u.Gmt()){case"closest":return Qg.lr(a,l,n,e);case"clockwise":return Qg.ur(a,l,n,e);case"anti-clockwise":return Qg.cr(a,l,n,e)}}}}}}self._s.Jlt.Ift=class{constructor(){}static gpt(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.ypt(t)}return!!n!=!!e}static wc(t,s,e,i){if(!e){let t=i.bct();return t=i.Hlt().ndt(t),t.lht()?1:0}return s.lht()?1:0}};{const ty=self._s,sy=[0,0,0],ey=[0,0,0],iy=[0,0,0];ty.Jlt.Cft=class{constructor(){}static gpt(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.ypt(t)}return Array.isArray(e)?(sy[0]=e[0],sy[1]=e[1],sy[2]=e[2]):(iy.ha(e),sy[0]=Math.floor(255*iy.Lo()),sy[1]=Math.floor(255*iy.No()),sy[2]=Math.floor(255*iy.Bo())),Array.isArray(n)?(ey[0]=n[0],ey[1]=n[1],ey[2]=n[2]):(iy.ha(n),ey[0]=Math.floor(255*iy.Lo()),ey[1]=Math.floor(255*iy.No()),ey[2]=Math.floor(255*iy.Bo())),sy[0]!==ey[0]||sy[1]!==ey[1]||sy[2]!==ey[2]}static wc(t,s,e,i){if(!e){let t=i.bct();t=i.Hlt().ndt(t);const s=t.lht();return sy[0]=s[0],sy[1]=s[1],sy[2]=s[2],sy}let n=i.Qot();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.lht();return sy[0]=t[0],sy[1]=t[1],sy[2]=t[2],sy}if("continuous"===n||"step"===n){const r=i.$lt().Kot();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.uW(),o=e.uW(),a=s.lht(),l=e.lht();"step"===n&&0!==r&&(t=ty.Yn(t,h,o));const u=ty.normalize(t,h,o),c=s.gft(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],S=self.Wu.rc(c),w=o-h,v=w*u;return sy[0]=f===m?f:S(v,f,m-f,w),sy[1]=d===g?d:S(v,d,g-d,w),sy[2]=p===y?p:S(v,p,y-p,w),sy}}}}self._s.Jlt.Rft=class{constructor(){}static gpt(t,s,e,i){let n;switch(i){case"behavior":case"plugin":n=s.apt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.ypt(t)}return n!==e}static wc(t,s,e,i){if(!e){let t=i.bct();return t=i.Hlt().ndt(t),t.lht()}return s.lht()}};{const ny=self._s;ny.$it=class{constructor(){this._mt=new Map}Hn(){for(const t of this._mt.values())t.Hn();this._mt.clear(),this._mt=null}Bu(t){const s=new ny.Imt(t),e=s.Rc();this._mt.set(e,s)}Hs(t){return this._mt.get(t)}Not(){return 0}static Cmt(t,s,e,i){if(s)for(const n of s)ny.$it.Rmt("create",n,t,e,i)}static Pmt(t,s,e,i){if(s)for(const n of s)ny.$it.Rmt("create-including-disabled",n,t,e,i)}static Emt(t,s,e,i){t.length?s.forEach((s,e)=>{t[e].cst(s)}):s.forEach(s=>{ny.$it.Rmt("load",s,t,e,i)})}static Rmt(t,s,e,i,n){let r;if("function"==typeof i)switch(t){case"load":r=new i(null,n);break;case"create":case"create-including-disabled":r=new i(s,n)}else if("object"==typeof i){const e=s[i.Fmt],h=i.map.get(e);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.cst(s),e.push(r);break;case"create":if("function"==typeof r.yut&&!r.yut())return r.Hn();e.push(r);break;case"create-including-disabled":e.push(r)}}}}{const ry=self._s;ry.Imt=class{constructor(t){this.qn="",this.Qat=NaN,this.Amt=0,this.Omt="default",this.Dmt="default",this.kmt=!1,this.Lmt=!1,this.Nmt=1,this.Clt=null,this.Bmt="",this.Umt=!1,this.Vmt=!0,t&&(this.qn=t[0],this.Qat=t[1],this.Amt=t[2],this.Omt=t[3],this.Dmt=t[4],this.kmt=!!t[6],this.Lmt=!!t[7],this.Nmt=t[8],this.Bmt=t[9],this.Umt=!!t[10],this.Vmt=!!t[11],this.Clt=new ry.Wmt(t[5],this))}Hn(){this.Clt.Hn(),this.Clt=null}zot(){return this.Clt||(this.Clt=new ry.Wmt(null,this)),this.Clt}Rc(){return this.qn}_3(t){this.qn=t}g1(){return this.Qat}m1(t){this.Qat=t}Kot(){return this.Amt}Zot(t){this.Amt=t}Qot(){return this.Omt}tat(t){this.Omt=t}sht(){return this.Dmt}sat(t){this.Dmt=t}w1(){return this.kmt}S1(t){this.kmt=t}b1(){return this.Lmt}v1(t){this.Lmt=t}A0(){return this.Nmt}iat(t){this.Nmt=t}Trt(){return this.Bmt}nat(){return this.Umt}rat(){return this.Vmt}ust(){return{trackDataJson:this.Clt.ust(),name:this.qn,totalTime:this.Qat,step:this.Amt,interpolationMode:this.Omt,resultMode:this.Dmt,loop:this.kmt,pingPong:this.Lmt,repeatCount:this.Nmt,startOnLayout:this.Bmt,transformWithSceneGraph:!!this.Umt,useSystemTimescale:this.Vmt}}cst(t){t&&(this.zot().cst(t.trackDataJson),this.qn=t.name,this.Qat=t.totalTime,this.Amt=t.step,this.Omt=t.interpolationMode,this.Dmt=t.resultMode,this.kmt=t.loop,this.Lmt=t.pingPong,this.Nmt=t.repeatCount,this.Bmt=t.startOnLayout,this.Umt=!!t.transformWithSceneGraph,this.Vmt=!!t.useSystemTimescale)}}}{const hy=self._s;class oy{constructor(t,s){this.Clt=s,this.zmt=null,this.jmt=null,this.Rlt=NaN,this.Plt=NaN,this.Omt="default",this.Dmt="default",this.fu=!1,this.Hmt=null,this.cct=null,this.Uc="",this.Jmt=null,this.$mt=0,this.qmt=this.Clt.Yot().g1(),this.Jc=0,this.qn="",t&&(t[0]&&(this.zmt=t[0],this.Rlt=t[0][2],this.Plt=t[0][1]),this.Omt=t[1],this.Dmt=t[2],this.fu=!!t[3],t[6]&&(this.Uc=t[6]),t[7]&&(this.Jmt=t[7],this.$mt=t[7][0],this.qmt=t[7][1]),t[8]&&(this.jmt=t[8]),t[8]&&(this.jmt=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.qn=t[10]),this.Hmt=new hy.Xmt(t[4],this),this.cct=new hy.Ymt(t[5],this))}Hn(){this.zmt=null,this.Clt=null,this.Hmt&&(this.Hmt.Hn(),this.Hmt=null),this.cct&&(this.cct.Hn(),this.cct=null),this.Jmt=null}zot(){return this.Clt}nlt(){return this.Hmt||(this.Hmt=new hy.Xmt(null,this)),this.Hmt}Hlt(){return this.cct||(this.cct=new hy.Ymt(null,this)),this.cct}Kmt(){return this.zmt}Klt(){return this.Plt}wut(t){this.Plt=t}Ylt(){return this.Rlt}dut(t){this.Rlt=t}Qot(){return this.Omt}tat(t){this.Omt=t}sht(){return this.Dmt}sat(t){this.Dmt=t}yut(){return this.fu}Sut(t){this.fu=!!t}j1(){return this.Uc}elt(){return this.$mt}mut(){return this.qmt}gut(t){this.qmt=t}xut(){return this.jmt[0]}vut(t){this.jmt||(this.jmt=[]),this.jmt[0]=t}Tut(){return this.jmt||(this.jmt=[]),this.jmt[1]}Mut(t){this.jmt||(this.jmt=[]),this.jmt[1]=t}oI(){return this.Jc}Rc(){return this.qn}ust(){return{keyframeDataJson:this.Hmt.ust(),propertyTrackDataJson:this.cct.ust(),instanceData:this.zmt,additionalInstanceData:this.jmt,instanceUid:this.Rlt,objectClassIndex:this.Plt,interpolationMode:this.Omt,resultMode:this.Dmt,enabled:this.fu,id:this.Uc,nestedData:this.Jmt,type:this.Jc,name:this.qn}}cst(t){t&&(this.zmt=t.instanceData,this.Rlt=t.instanceUid,this.Plt=t.objectClassIndex,this.Omt=t.interpolationMode,this.Dmt=t.resultMode,this.fu=t.enabled,this.Uc=t.id,this.Jc=t.type?t.type:0,this.qn=t.name?t.name:"",this.qmt=this.Clt.Yot().g1(),t.nestedData&&(this.Jmt=t.nestedData,this.$mt=this.Jmt[0],this.qmt=this.Jmt[1]),t.additionalInstanceData&&(this.jmt=t.additionalInstanceData),this.nlt().cst(t.keyframeDataJson),this.Hlt().cst(t.propertyTrackDataJson))}}hy.Wmt=class{constructor(t,s){this.hot=s,this.Zmt=[],hy.$it.Cmt(this.Zmt,t,oy,this)}Hn(){this.hot=null;for(const t of this.Zmt)t.Hn();hy.wh(this.Zmt),this.Zmt=null}Yot(){return this.hot}ult(){const t=new oy(null,this);return this.Zmt.push(t),t}Qmt(t){return t.nlt().Blt()[0]}tgt(t){return t.nlt().Blt().at(-1)}Wut(t,s){const e=s.nlt().Blt(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.uW()===t)return i}}sgt(t,s){const e=s.nlt().Blt(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.uW()>t)return i}}Vut(t,s){const e=s.nlt().Blt(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.uW()>=t)return i}}But(t,s){const e=s.nlt().Blt();for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.uW()<=t)return i}}*Wot(){for(const t of this.Zmt)yield t}ust(){return{trackDataItemsJson:this.Zmt.map(t=>t.ust())}}cst(t){t&&hy.$it.Emt(this.Zmt,t.trackDataItemsJson,oy,this)}}}{const ay=self._s;class ly{constructor(t,s){this.cct=s,this.egt="",this.igt=null,this.Vdt=null,this.Jc=null,this.ngt=NaN,this.rgt=NaN,this.Omt="default",this.Dmt="default",this.fu=!1,this.hgt=null,this.ogt=!0,t&&(this.egt=t[0][0],this.igt=t[0].slice(1),this.Vdt=t[1],this.Jc=t[2],this.ngt=t[3],this.rgt=t[4],this.Omt=t[5],this.Dmt=t[6],this.fu=!!t[7],this.hgt=new ay.agt(t[8],this),this.ogt=t[9])}Hn(){this.hgt.Hn(),this.hgt=null,this.cct=null,this.igt=null}Hlt(){return this.cct}mct(){return this.hgt||(this.hgt=new ay.agt(null,this)),this.hgt}eut(){return this.egt}Pct(t){this.egt=t}Fct(){return this.igt}Oct(t){this.igt=t}kct(){return this.Vdt}Nct(t){this.Vdt=t}oI(){return this.Jc}Vct(t){this.Jc=t}jct(){return this.ngt}Hct(t){this.ngt=t}Jct(){return this.rgt}$ct(t){this.rgt=t}Qot(){return this.Omt}tat(t){this.Omt=t}sht(){return this.Dmt}sat(t){this.Dmt=t}yut(){return this.fu}Sut(t){this.fu=!!t}Xct(){return!!this.ogt}ust(){return{propertyKeyframeDataJson:this.hgt.ust(),sourceAdapterId:this.egt,sourceAdapterArguments:this.igt,property:this.Vdt,type:this.Jc,min:this.ngt,max:this.rgt,interpolationMode:this.Omt,resultMode:this.Dmt,enabled:this.fu,canHavePropertyKeyframes:this.ogt}}cst(t){t&&(this.egt=t.sourceAdapterId,this.igt=t.sourceAdapterArguments,this.Vdt=t.property,this.Jc=t.type,this.ngt=t.min,this.rgt=t.max,this.Omt=t.interpolationMode,this.Dmt=t.resultMode,this.fu=t.enabled,this.ogt=t.canHavePropertyKeyframes,this.mct().cst(t.propertyKeyframeDataJson))}}ay.Ymt=class{constructor(t,s){this.Ilt=s,this.lgt=[],ay.$it.Cmt(this.lgt,t,ly,this)}Hn(){this.Ilt=null;for(const t of this.lgt)t.Hn();ay.wh(this.lgt),this.lgt=null}ilt(){return this.Ilt}Xut(){const t=new ly(null,this);return this.lgt.push(t),t}zct(t){return t.mct().pct()[0]}ndt(t){return t.mct().pct().at(-1)}Yct(t,s){const e=s.mct().pct(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.uW()===t)return i}}Qct(t,s){const e=s.mct().pct(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.uW()>t)return i}}tft(t,s){const e=s.mct().pct(),i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.uW()>=t)return i}}Kct(t,s){const e=s.mct().pct();for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.uW()<=t)return i}}*jlt(){for(const t of this.lgt)yield t}ust(){return{propertyTrackDataItemsJson:this.lgt.map(t=>t.ust())}}cst(t){t&&ay.$it.Emt(this.lgt,t.propertyTrackDataItemsJson,ly,this)}}}{const uy=self._s;class cy{constructor(t,s){if(this.Hmt=s,this.oz=-1,this.ugt="noease",this.cgt=!1,this.Fot=null,this.fgt=null,!t)return;this.oz=t[0],this.ugt=t[1],this.cgt=!!t[2];const e=t[3];this.Fot=e?e.split(" "):[],this.fgt=new Set(this.Fot.map(t=>t.toLowerCase())),this.dgt=null,this.pgt=null}Hn(){this.Hmt=null,uy.wh(this.Fot),this.Fot=null,this.fgt.clear(),this.fgt=null,this.dgt=null}nlt(){return this.Hmt}$rt(){return this.dgt}mgt(t){this.dgt=t}Dut(){return this.pgt}ggt(t){this.pgt=t}uW(){return this.oz}d1(t){this.oz=t,this.Hmt.ygt()}gft(){return this.ugt}L1(t){this.ugt=t}yut(){return this.cgt}Sut(t){this.cgt=!!t}G1(){return this.Fot}lat(t){this.Fot=t?t.split(" "):[],this.fgt=new Set(this.Fot.map(t=>t.toLowerCase()))}Sgt(){return this.fgt}Out(){return Array.from(this.fgt).join(",").trim()}Mlt(t){return this.fgt.has(t.toLowerCase())}ust(){return{time:this.oz,ease:this.ugt,enable:this.cgt,tags:this.Fot}}cst(t){t&&(this.oz=t.time,this.ugt=t.ease,this.cgt=t.enable,this.Fot=t.tags,this.fgt=new Set(this.Fot.map(t=>t.toLowerCase())))}}uy.Xmt=class{constructor(t,s){this.Ilt=s,this.Nlt=[],uy.$it.Cmt(this.Nlt,t,cy,this),this.ygt()}Hn(){this.Ilt=null;for(const t of this.Nlt)t.Hn();uy.wh(this.Nlt),this.Nlt=null}ygt(){this.Nlt.sort((t,s)=>t.uW()-s.uW());for(let t=0;t<this.Nlt.length;t++){const s=this.Nlt[t];s.mgt(this.Nlt[t+1]),s.ggt(this.Nlt[t-1])}}ilt(){return this.Ilt}wgt(){return this.Nlt.length}Blt(){return this.Nlt}$ut(){const t=new cy(null,this);return this.Nlt.push(t),this.ygt(),t}Kut(t){for(const s of this.Nlt){if(!t(s))continue;const e=this.Nlt.indexOf(s);-1!==e&&(s.Hn(),this.Nlt.splice(e,1))}this.vgt(),this.ygt()}vgt(){this.Nlt.sort((t,s)=>t.uW()-s.uW())}oct(t){return this.Nlt.indexOf(t)}act(t){return this.Nlt[t]}*xgt(){for(const t of this.Nlt)yield t}*bgt(){for(let t=this.Nlt.length-1;t>=0;t--)yield this.Nlt[t]}ust(){return{keyframeDataItemsJson:this.Nlt.map(t=>t.ust())}}cst(t){t&&(uy.$it.Emt(this.Nlt,t.keyframeDataItemsJson,cy,this),this.ygt())}}}{const fy=self._s;class dy{constructor(t,s){this.hgt=s,this.ldt=null,this.Mgt=null,this.Jc="",this.oz=NaN,this.ugt="noease",this.cgt=!1,this.Tgt=null,this.Ggt=void 0,this._gt="line",t&&(this.ldt=t[0][0],this.Mgt=t[0][1],this.Jc=t[0][2],this.oz=t[1],this.ugt=t[2],this.cgt=!!t[3],this._gt=t[5],this.Tgt=null,t[4]&&(this.Tgt=new fy.Igt(t[4],this)),this.dgt=null,this.Cgt=null)}Hn(){this.hgt=null,this.Tgt&&(this.Tgt.Hn(),this.Tgt=null),this.dgt=null,this.Cgt=null}Rgt(){return this.Tgt}mgt(t){this.dgt=t}$rt(){return this.dgt}Pgt(t){this.Cgt=t}qrt(){return this.Cgt}Dct(){return this.ldt}yft(t){"color"===this.Jc&&fy.Ye(t)?(this.ldt[0]=fy.Rr(t),this.ldt[1]=fy.Pr(t),this.ldt[2]=fy.Er(t)):this.ldt=t}Xdt(){return this.Mgt}dft(t){"color"===this.Jc&&fy.Ye(t)?(this.Mgt[0]=fy.Rr(t),this.Mgt[1]=fy.Pr(t),this.Mgt[2]=fy.Er(t)):this.Mgt=t}lht(){const t=this.hgt.bct().sht();return"relative"===t?this.Dct():"absolute"===t?this.Xdt():void 0}oI(){return this.Jc}Vct(t){this.Jc=t}uW(){return this.oz}d1(t){this.oz=t,this.hgt.Egt()}gft(){return this.ugt}L1(t){this.ugt=t}yut(){return this.cgt}Sut(t){this.cgt=!!t}Xrt(){return this._gt}oht(t){if(!this.Tgt)return;if(this.Ggt||null===this.Ggt)return this.Ggt;const s=this.Tgt.Fgt();if(!s)return this.Ggt=null,this.Ggt;const e=s.length;for(let i=0;i<e;i++){const e=s[i];if(e.j1()===t)return this.Ggt=e,this.Ggt}return this.Ggt=null,this.Ggt}ust(){const t=this.Tgt;return{addonDataJson:t?t.ust():t,value:this.ldt,aValue:this.Mgt,type:this.Jc,time:this.oz,ease:this.ugt,enable:this.cgt}}cst(t){t&&(t.addonDataJson&&this.Tgt.Agt(t.addonDataJson),this.ldt=t.value,this.Mgt=t.aValue,this.Jc=t.type,this.oz=t.time,this.ugt=t.ease,this.cgt=t.enable)}}fy.agt=class{constructor(t,s){this.uct=s,this.dct=[],this.Ogt=[],fy.$it.Cmt(this.dct,t,dy,this),fy.$it.Pmt(this.Ogt,t,dy,this),this.Egt()}Hn(){this.uct=null;for(const t of this.dct)t.Hn();fy.wh(this.dct),this.dct=null;for(const t of this.Ogt)t.Hn();fy.wh(this.Ogt),this.Ogt=null}Egt(){let t=this.dct;t.sort((t,s)=>t.uW()-s.uW());for(let s=0;s<t.length;s++){const e=t[s];s+1<t.length&&e.mgt(t[s+1]),s-1>=0&&e.Pgt(t[s-1])}t=this.Ogt,t.sort((t,s)=>t.uW()-s.uW());for(let s=0;s<t.length;s++){const e=t[s];s+1<t.length&&e.mgt(t[s+1]),s-1>=0&&e.Pgt(t[s-1])}}cft(){const t=new dy(null,this);return this.dct.push(t),this.Egt(),t}fft(t){for(const s of this.dct){if(!t(s))continue;const e=this.dct.indexOf(s);-1!==e&&(s.Hn(),this.dct.splice(e,1))}this.Dgt(),this.Egt()}Dgt(){this.dct.sort((t,s)=>t.uW()-s.uW())}bct(){return this.uct}kgt(){return this.dct.length}ndt(){return this.dct[this.dct.length-1]}pct(){return this.dct}Jrt(){return this.Ogt}*Lgt(){for(const t of this.dct)yield t}*Ngt(){for(let t=this.dct.length-1;t>=0;t--)yield this.dct[t]}ust(){const t=this.dct,s=this.Ogt;return{propertyKeyframeDataItemsJson:t.map(t=>t.ust()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.ust())}}cst(t){t&&(fy.$it.Emt(this.dct,t.propertyKeyframeDataItemsJson,dy,this),fy.$it.Emt(this.Ogt,t.propertyKeyframeDataItemsIncludingDisabledJson,dy,this),this.Egt())}}}{const py=self._s;class my{constructor(t,s){this.Tgt=s,this.Uc=t[0],this.Bgt=t[1]}Hn(){this.Tgt=null,this.Bgt=null}Rgt(){return this.Tgt}j1(){return this.Uc}ust(){return{id:this.Uc,data:this.Bgt}}cst(t){t&&(this.Uc=t.id,this.Bgt=t.data)}}class gy extends my{constructor(t,s){super(t,s),this.Ugt=this.Bgt[0],this.Vgt=!!this.Bgt[1],this.Wgt=this.Bgt[2],this.zgt=!!this.Bgt[3]}Hn(){super.Hn()}fht(){return this.Ugt}bmt(){return this.Vgt}mht(){return this.Wgt}Mmt(){return this.zgt}ust(){return Object.assign(super.ust(),{startAnchor:this.Ugt,startEnable:!!this.Vgt,endAnchor:this.Wgt,endEnable:!!this.zgt})}cst(t){t&&(super.cst(t),this.Ugt=t.startAnchor,this.Vgt=!!t.startEnable,this.Wgt=t.endAnchor,this.zgt=!!t.endEnable)}}class yy extends my{constructor(t,s){super(t,s),this.jgt=this.Bgt[0],this.Hgt=this.Bgt[1]}Hn(){super.Hn()}Gmt(){return this.jgt}Tmt(){return this.Hgt}ust(){return Object.assign(super.ust(),{direction:this.jgt,revolutions:this.Hgt})}cst(t){t&&(super.cst(t),this.jgt=t.direction,this.Hgt=t.revolutions)}}py.Igt=class{constructor(t,s){this.Jgt=s,this.$gt=[],py.$it.Cmt(this.$gt,t,{Fmt:0,map:new Map([["cubic-bezier",gy],["angle",yy]])},this)}Hn(){this.Jgt=null;for(const t of this.$gt)t.Hn();py.wh(this.$gt),this.$gt=null}qgt(){return this.Jgt}Fgt(){return this.$gt}*Xgt(){for(const t of this.$gt)yield t}ust(){return{addonDataItemsJson:this.$gt.map(t=>t.ust())}}cst(t){t&&py.$it.Emt(this.$gt,t.addonDataItemsJson,{Fmt:"id",map:new Map([["cubic-bezier",gy],["angle",yy]])},this)}}}{const Sy=self._s;let wy=0;Sy.emt=class extends Sy._nt{constructor(t,s){super("tween-"+wy++,t,s),this.Uc="",this.Ygt=!1,this.Kgt="start-value",this.Elt=null,this.Zgt=null,this.Qgt=null,this.tyt=null,this.syt=null,this.eyt=null,this.lct=null,this.iyt=null}Hn(){this.a1()||(this.nyt(Sy.oyt.hyt.h$.ryt),this.nyt(Sy.oyt.hyt.h$.ayt),this.lyt(),super.Hn(),this.Elt=null,this.Zgt=null,this.Qgt=null,this.eyt=null,this.lct=null,this.tyt=null,this.syt=null)}Uot(t){const s=Sy.jn(Sy.Event,"tweenstatereleased");s.uyt=this,t.dispatchEvent(s)}oI(){return 1}cot(){for(const t of this.hot.zot().Wot())this.oot.push(Sy.cyt.e_(this,t));this.lct=this.oot[0]}llt(){const t=this.hot.zot().ult(),s=Sy.cyt.e_(this,t);return this.oot.push(s),this.fyt(),s}fyt(){this.lct=this.oot[0]}J1(t){return this.lct.Slt()[0]}Uct(t){this.dyt=t}N1(){const t=this.zrt();if(!t||!t.length)return;const s=t[0];if(this.lct=s,!s)return;const e=s.N1();return s.Xlt()?e:void 0}pyt(t){this.eyt=t}z1(){return this.tyt||(this.tyt=new Promise(t=>{this.syt=t})),this.tyt}lyt(){this.tyt&&(this.syt&&this.syt(),this.tyt=null,this.syt=null)}myt(t){this.Qgt||(this.Qgt=[]),this.Qgt.push(t)}gyt(t){this.Zgt||(this.Zgt=[]),this.Zgt.push(t)}yyt(t){if(!this.Qgt)return;const s=this.Qgt.indexOf(t);-1!==s&&this.Qgt.splice(s,1)}Syt(t){if(!this.Zgt)return;const s=this.Zgt.indexOf(t);-1!==s&&this.Zgt.splice(s,1)}wyt(t,s){for(const e of this.oot)for(const i of e.Ult){if(i.wlt()!==s)continue;const e=i.Hlt(),n=i.bct(),r=e.zct(n);r.yft(t),r.dft(t)}}vyt(t){for(const s of this.oot)for(const e of s.Ult)if(e.wlt()===t)return e}xyt(t){let s=!1;for(const e of t){const t=this.vyt(e);t&&(this.wyt(t.ift(),e),s=!0)}if(s){if(this.oat()){const t=this.g1()-this.uW();this.m1(t);for(const s of this.oot)s.gut(t);this.Aat(0)}else{const t=this.uW();this.m1(t);for(const s of this.oot)s.gut(t);this.Aat(t)}this.Oat()}}byt(t,s){const e=this.vyt(s);if(!e)return;const i=e.Hlt(),n=e.bct(),r=i.ndt(n);r.d1(this.g1()),r.yft(t),r.dft(t)}Myt(t){this.Uc=t}j1(){return this.Uc}Tyt(t){this.Kgt=t}Gyt(){return this.Kgt}V1(t){this.Ygt=t}U1(){return this.Ygt}dat(){if(this.Qgt)for(const t of this.Qgt)t(this);if(!this.W1())for(const t of this.oot)t.sct()}xat(){this._ot=this.Nc.VH()}brt(){if(!this.Rot&&(this.Rot=!0,this.Zgt))for(const t of this.Zgt)t(this)}d1(t){this._yt(),super.d1(t)}Bat(t){Sy.Ye(t)||(t=this.g1()),t<0?this.pot=0:t>=this.g1()?this.pot=this.g1():this.pot=t,this.lct.Uat()}drt(t){if(!this.xrt()&&"current-state"===this.Gyt())for(const t of this.oot)t.tct();super.drt(t)}u1(t=!1){if(super.u1(t),!this.W1())for(const t of this.oot)t.Qut()}Bf(t=!0,s=!1){this._yt(),super.Bf(t,s)}_yt(){for(const t of this.oot){const s=t=>{const s=t.uW(),e=this.g1();return 0!==s&&s!==e};t.Yut(s),t.Zut(s)}}unt(){if(this.a1())return!0;const t=this.N1();return!(t&&t.yK().h8()||(this.rot.lrt(this),this.qat(),0))}yrt(t,s,e){if(this.Elt||(this.Elt=this.N1()),!this.Elt||this.Elt.D2())return this.u1(!0),void this.xat();const i=this.Elt.HH();if(-1!==i&&(t=e*i),0===t&&0===this.Eot)return;this.Eot=t;const n=this.pot+this.mot+t*this.got,r=this.hot.Qat;n<0?(this.pot=0,this.mot=-n):n>=r?(this.pot=r,this.mot=this.pot-n):(this.pot=n,this.mot=0);let h=!1,o=!1;const a=this.w1(),l=this.b1();if(a||l?a&&!l?this.got>0?this.pot>=r&&(this.Bat(0),this.nyt(Sy.oyt.hyt.h$.Iyt),this.nyt(Sy.oyt.hyt.h$.Cyt),o=!0):this.pot<=0&&(this.Bat(r),this.nyt(Sy.oyt.hyt.h$.Iyt),this.nyt(Sy.oyt.hyt.h$.Cyt),o=!0):!a&&l?this.got>0?this.pot>=r&&(this.Aat(r),this.M1(-1*this.T1()),o=!0,1===this.yot?this.wot<this.A0()?(this.wot++,this.nyt(Sy.oyt.hyt.h$.Iyt),this.nyt(Sy.oyt.hyt.h$.Cyt),this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt),this.IsPlaying()?this.yot=0:this.Sot=0):(this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt),h=!0):0===this.yot&&(this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt),this.IsPlaying()?this.yot=1:this.Sot=1)):this.pot<=0&&(this.Aat(0),this.M1(-1*this.T1()),o=!0,1===this.yot?this.wot<this.A0()?(this.wot++,this.nyt(Sy.oyt.hyt.h$.Iyt),this.nyt(Sy.oyt.hyt.h$.Cyt),this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt),this.IsPlaying()?this.yot=0:this.Sot=0):(h=!0,this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt)):0===this.yot&&(this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt),this.IsPlaying()?this.yot=1:this.Sot=1)):a&&l&&(this.got>0?this.pot>=r&&(this.Aat(r),this.M1(-1*this.T1()),o=!0,0===this.yot&&(this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt)),1===this.yot&&(this.nyt(Sy.oyt.hyt.h$.Iyt),this.nyt(Sy.oyt.hyt.h$.Cyt),this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt)),this.IsPlaying()?(this.yot++,this.yot=Sy.wrap(this.yot,0,2)):(this.Sot=this.yot+1,this.Sot=Sy.wrap(this.Sot,0,2))):this.pot<=0&&(this.Aat(0),this.M1(-1*this.T1()),o=!0,0===this.yot&&(this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt)),1===this.yot&&(this.nyt(Sy.oyt.hyt.h$.Iyt),this.nyt(Sy.oyt.hyt.h$.Cyt),this.nyt(Sy.oyt.hyt.h$.Ryt),this.nyt(Sy.oyt.hyt.h$.Pyt)),this.IsPlaying()?(this.yot++,this.yot=Sy.wrap(this.yot,0,2)):(this.Sot=this.yot+1,this.Sot=Sy.wrap(this.Sot,0,2)))):this.got>0?this.pot>=r&&(this.wot<this.A0()?(this.wot++,this.Bat(0),this.nyt(Sy.oyt.hyt.h$.Iyt),this.nyt(Sy.oyt.hyt.h$.Cyt),o=!0):(this.Aat(r),h=!0)):this.pot<=0&&(this.wot<this.A0()?(this.wot++,this.Bat(r),this.nyt(Sy.oyt.hyt.h$.Iyt),this.nyt(Sy.oyt.hyt.h$.Cyt),o=!0):(this.Aat(0),h=!0)),!this.a1()&&this.IsPlaying()){if(h)return this.lct.tlt(),this.u1(!0),void this.xat();this.lct.wc(this.pot,!0,!1,o,this.Pot,!1),this.Pot&&(this.Pot=!1)}}nyt(t){const s=this.N1();this.eyt.Eyt(this),this.Nc.tZ(t,s,this.eyt.y0()),this.eyt.Fyt()}ust(){const t=super.ust(),s=this.Yot();return Object.assign(t,{tweenDataItemJson:s.ust(),id:this.Uc,destroyInstanceOnComplete:this.Ygt,initialValueMode:this.Kgt})}cst(t){t&&(this.Yot().cst(t.tweenDataItemJson),super.cst(t),this.Uc=t.id,this.Ygt=t.destroyInstanceOnComplete,this.Kgt=t.initialValueMode,this.fyt())}static IsPlaying(t){return t.IsPlaying()}static R1(t){return t.R1()}static Ayt(t){return!!t.b1()&&0===t.hat()}static Oyt(t){return!!t.b1()&&1===t.hat()}static Dyt(t){const s=t.runtime.Hot(),e=new Sy.Imt;if(t.json){e.cst(t.json.tweenDataItemJson);const i=new Sy.emt(e,s);return i.cst(t.json),i}{const i=new Sy.emt(e,s);Sy.bi(t.kyt)||(t.kyt=[t.kyt]),i.Myt(t.id),i.lat(t.tags),i.Tyt(t.Lyt),i.V1(t.Nyt),i.S1(t.loop),i.v1(t.Byt),i.m1(t.time),i.Zot(0),i.tat("default"),i.sat(t.kyt[0].Uyt),i.iat(t.F0);const n=i.llt();n.dut(t.S0.PK()),n.tat("default"),n.sat(t.kyt[0].Uyt),n.Sut(!0),n.wut(t.S0.yK().Ej());const r=t.S0.o0(),h=r.but()?r.xut():t.S0.WJ().by(),o=r.but()?r.Tut():t.S0.WJ().Ty();n.vut(h),n.Mut(o);const a=n.Jut();a.d1(0),a.L1("noease"),a.Sut(!0),a.lat("");const l=n.Jut();l.d1(t.time),l.L1("noease"),l.Sut(!0),l.lat("");for(const s of t.kyt){const e=n.qut();e.Pct(s.Vyt),e.Act(s.Wyt),e.Lct(s.uut),e.Uct(s.type),e.Hct(NaN),e.$ct(NaN),e.tat("default"),e.sat(s.Uyt),e.Sut(!0);const i=e.uft();i.Vct(s.valueType),i.d1(0),i.L1(s.zyt),i.Sut(!0),i.yft(s.jyt),i.dft(s.jyt);const r=e.uft();r.Vct(s.valueType),r.d1(t.time),r.L1(s.zyt),r.Sut(!0),r.yft(s.Hyt),r.dft(s.Hyt),e.$ot()}return i}}static dut(t,s){if(!isNaN(s))for(const e of t.zrt())e.dut(s)}static pyt(t,s){t.pyt(s)}Jyt(t,s){return this.iyt||(this.iyt=Sy.jn(self.F1,this,t,s)),this.iyt}}}{const vy=self._s;vy.cyt=class extends vy.jot{constructor(t,s){super(t,s),this.$yt=null,this.qyt=null}static e_(t,s){return vy.jn(vy.cyt,t,s)}Xyt(){1===this.Ult.length?this.$yt=this.Ult[0]:(this.$yt=this.Ult[0],this.qyt=this.Ult[1])}Vlt(){for(const t of this.Ilt.Hlt().jlt())this.Ult.push(vy.Yyt.e_(this,t));this.Xyt()}qut(){const t=this.Ilt.Hlt().Xut(),s=vy.Yyt.e_(this,t);return this.Ult.push(s),this.Xyt(),s}drt(){if(this.qlt(),!this.Xlt()&&this.Xot())return;const t=this.$lt().oat()?0:this.mut();for(const s of this.Ult)s.drt(t),0===this.Wlt&&1===s.Iut()&&(this.Wlt=1),0===this.bnt&&1===s.prt()&&(this.bnt=1);this.zlt=0,this.Ult.some(t=>t.Zat())&&(this.zlt=1),this.Llt=this.Cut(t),this.Olt=!1,this.Dlt=!1,this.wc(t)}slt(){}wc(t,s=!1,e=!1,i=!1,n=!1,r=!1,h=!1){if(this.Elt||this.N1(),this.Elt)return!this.Elt.D2()&&(!r||!this.yK().h8())&&(this.qyt?(this.$yt.wc(t,e,i,h),this.qyt.wc(t,e,i,h)):this.$yt.wc(t,e,i,h),void(0!==this.$yt.Iut()&&(this.Flt||(this.Flt=this.Elt.WJ()),this.Flt&&this.Flt.RZ())))}rlt(){}cst(t){super.cst(t),this.Xyt()}}}{const xy=self._s;xy.Yyt=class extends xy.Jlt{constructor(t,s){super(t,s),this.Kyt=!1}static e_(t,s){return xy.jn(xy.Yyt,t,s)}wc(t,s=!1,e=!1,i=!1){let n,r;if(this.Kyt)n=this.dct[0],r=this.dct[1];else if(s)n=this.cct.Kct(t,this.uct),r=n.$rt();else{if(this.gct){const s=this.$lt(),e=this.gct.$rt(),i=this.gct.uW(),n=e?e.uW():s.g1();(t<=i||t>=n)&&(this.gct=this.cct.Kct(t,this.uct))}else this.gct=this.cct.Kct(t,this.uct);n=this.gct,r=n.$rt()}this.fct.wc(t,n,r,s,e,i)}uft(){const t=this.uct.mct().cft();return this.gct=null,this.Kyt=this.qct().length<=2,t}Zut(t){this.gct=null,this.uct.mct().fft(t),this.Kyt=this.qct().length<=2}ust(){return{sourceAdapterJson:this.$ot().ust(),basic:this.Kyt}}cst(t){t&&(this.$ot().cst(t.sourceAdapterJson),this.Kyt=t.basic)}}}{const by=self._s,My=self.Wu;by.vc=class extends by.Wn{constructor(t,s=!0){super(),this.qn=t[0],this.Zyt=t[2],this.Qyt=[];for(const s of t[1]){const t=by.tSt.e_(this,s);this.Qyt.push(t)}for(let t=0;t<this.Qyt.length;t++){const s=this.Qyt[t],e=this.Qyt[t+1],i=this.Qyt[t-1];s.mgt(e),s.Pgt(i)}this.sSt=new Map,this.eSt=new Map,this.iSt(),s&&My.bc(this.qn,(t,s,e,i)=>this.wc(t,s,e,i),null,{transition:this})}static e_(t){return by.jn(by.vc,t)}Hn(){for(const t of this.Qyt)t.Hn();by.wh(this.Qyt),this.Qyt=null,this.sSt.clear(),this.sSt=null,this.eSt.clear(),this.eSt=null}xc(t){this.Zyt=!!t}nSt(t){const s=this.eSt.get(t);if(s)return s;for(const s of this.Qyt)if(s.rSt()===t)return this.eSt.set(t,s),s}hSt(t){for(let s=this.Qyt.length-1;s>=0;s--){const e=this.Qyt[s],i=e.rSt();if(i<=t){let s=e;if(i<t)return s;if(i===t){for(;s;){const t=s.qrt();if(!t)break;if(t.rSt()!==s.rSt())break;s=t}return s}}}}wc(t,s,e,i){let n=t/i;if(this.Zyt){const n=this.nSt(0),r=this.nSt(1),h=s+(s+e)*n.oSt(),o=(s+e)*r.oSt()-h;return 0===i?h+o:My.Tc(t,h,o,i)}0===i&&(n=1);let r=this.hSt(n),h=r.$rt();if(!h){const t=r.qrt(),s=r;r=t,h=s}const o=h.rSt()-r.rSt(),a=by.Xn(n,r.rSt(),h.rSt(),0,o);if(r.aSt()||0===o){const t=s+(s+e)*r.oSt(),i=(s+e)*h.oSt()-t;return 0===o?1===a?t+i:t:My.Tc(a,t,i,o)}const l=r.rSt(),u=r.oSt(),c=r.rSt()+r.lSt(),f=r.oSt()+r.uSt(),d=h.rSt()+h.cSt(),p=h.oSt()+h.fSt(),m=h.rSt(),g=h.oSt();let y=My.rc("spline")(a,l,u,c,f,d,p,m,g,this.sSt.get(r));return y+=r.oSt(),(1-y)*s+y*(s+e)}iSt(){this.sSt.clear();for(let t=0;t<this.Qyt.length-1;t++){const s=this.Qyt[t];if(!s.bmt())continue;const e=s,i=this.Qyt[t+1];if(!i.Mmt())continue;const n=e.rSt(),r=e.rSt()+e.lSt(),h=i.rSt()+i.cSt(),o=i.rSt();this.sSt.set(e,My.Gc(n,r,h,o))}}}}{const Ty=self._s;Ty.tSt=class extends Ty.Wn{constructor(t,s){super(),this.dSt=t,this.pSt=s[0],this.mSt=s[1],this.gSt=s[2],this.ySt=s[3],this.SSt=s[4],this.wSt=s[5],this.Vgt=s[6],this.zgt=s[7],this.vSt=s[8],this.dgt=null,this.Cgt=null}Hn(){this.dSt=null}static e_(t,s){return Ty.jn(Ty.tSt,t,s)}mgt(t){this.dgt=t}$rt(){return this.dgt}Pgt(t){this.Cgt=t}qrt(){return this.Cgt}rSt(){return this.pSt}oSt(){return this.mSt}lSt(){return this.gSt}uSt(){return this.ySt}cSt(){return this.SSt}fSt(){return this.wSt}bmt(){return this.Vgt}Mmt(){return this.zgt}aSt(){return"linear"===this.vSt}xSt(){return"cubic"===this.vSt}}}{const Gy=self._s;Gy.bSt=class extends Gy.Wn{constructor(t){super(),this.Nc=t,this.MSt=[]}Hn(){for(const t of this.MSt)t.Hn();Gy.wh(this.MSt),this.MSt=null}e_(t){this.MSt.push(Gy.vc.e_(t))}}}{const _y=self._s;_y.TSt=class extends _y.Wn{constructor(t){super(),this.Nc=t,this.GSt=null,this._St=null,this.dnt=t=>this.pnt(t.S0)}Hn(){if(this.Mnt(),this.GSt){for(const t of this.GSt.values())t.clear();this.GSt.clear()}this.GSt=null,this.Nc=null}e_(t){if(this.GSt||(this.GSt=new Map),!t)return;const s=t[0][16][0],e=t[1];this.GSt.has(e)||this.GSt.set(e,new Map),this.GSt.get(e).set(s,t)}Tnt(){const t=this.Nc.Sf();t&&t.addEventListener("instancedestroy",this.dnt)}Mnt(){const t=this.Nc.Sf();t&&t.removeEventListener("instancedestroy",this.dnt)}ISt(){return!!this.GSt&&0!==this.GSt.size}CSt(t,s){let e=0;if(e=t instanceof _y.RSt?t.Ej():t,!this.GSt.has(e))return;const i=this.GSt.get(e).get(s);return i?JSON.parse(JSON.stringify(i)):void 0}PSt(t,s){this._St||(this._St=new WeakMap),this._St.has(t)||this._St.set(t,s)}ESt(t){if(!this._St)return"";return this._St.get(t)||""}pnt(t){this._St&&this._St.has(t)&&this._St.delete(t)}}}{const Iy=self._s;Iy.FSt=class{constructor(t){this.Nc=t,this.ASt=new Iy.OSt}Hn(){this.ASt.Hn(),this.ASt=null,this.Nc=null}m$(){return this.Nc}e_(t){this.ASt.Bu(t)}DSt(t){return this.ASt.Hs(t)}kSt(){return this.ASt.kSt()}}}{const Cy=self._s;Cy.LSt=class{constructor(t,s,e,i,n,r,h){this.Nc=n.m$(),this.NSt=n,this.BSt=t,this.USt=e,this.VSt=i,this.VS=s,this.qit=r,this.WSt=h??r.N1().PK(),this.zSt(),this.jSt=this.JSt?.HSt()??-1,this.$St=[],this.qSt=null,this.XSt=NaN,this.YSt=null,this.KSt=null,this.ZSt=null,this.QSt="",this.twt=null,this.swt="",this.ewt="",this.iwt=0,this.nwt=!1,this.Tot=!1}Hn(){this.Tot||(Cy.wh(this.$St),this.$St=null,this.Nc=null,this.NSt=null,this.VSt=null,this.qit=null,this.qSt=null,this.XSt=NaN,this.YSt&&this.YSt.clear(),this.YSt=null,this.KSt=null,this.ZSt=null,this.QSt="",this.twt=null,this.swt="",this.ewt="",this.Tot=!0)}Jn(){return this.Tot}rwt(){return this.NSt}m$(){return this.Nc}Rc(){return this.BSt}hwt(){return this.VSt}o1(){return this.VS}Unt(){return this.qit||(this.qit=this.Nc.LJ(this.WSt).o0()),this.qit}owt(){return this.awt(this.jSt)}lwt(){const t=this.owt();return t?t.o1():""}uwt(){const t=this.owt();return t?t.G1():[]}cwt(t){const s=this.uwt();if(!s)return!1;if(!s.length)return!1;const e=Cy.LSt.uat(t);return!(!e||!e.length)&&e.every(Cy.LSt.fat,s)}fwt(t,s){const e=this.uwt();if(!e)return!1;if(!e.length)return!1;const i=Cy.LSt.uat(t);return!(!i||!i.length)&&i.every(t=>Cy.LSt.dwt.call(e,t,s))}static fat(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static uat(t){return t.trim().split(" ")}static dwt(t,s){const e=this;return""===t?1===e.length&&""===e[0]:e.some(e=>Cy.compare(e.trim(),s,t.trim()))}pwt(t){const s=this.owt();if(s){if(Cy.Ye(t)){const e=s.mwt(),i=e?e[t]:void 0;if(Cy.Ye(i))return this.awt(i)}if("string"==typeof t)for(const e of s.mwt()){const s=this.awt(e);if(s.f1(t))return this.awt(s.HSt())}}}gwt(t){const s=this.pwt(t);return s?s.o1():""}ywt(t){const s=this.pwt(t);return s?s.G1():""}Swt(t){const s=this.owt();if(!s)return-1;const e=s.mwt();if(!e)return-1;const i=this.pwt(t);return i?e.indexOf(i.HSt()):-1}wwt(){const t=this.owt();if(!t)return 0;const s=t.mwt();return s?s.length:0}awt(t){return this.VSt.awt(t)}Bf(){this.xwt().vwt(!0)}vwt(t){if(this.bwt()){for(const[t,s]of this.bwt().entries())s.vwt(!1);this.bwt().clear()}if(this.YSt=null,this.qSt=null,this.Mwt=null,this.KSt=null,this.QSt="",this.twt=null,this.swt="",this.ewt="",this.$St=[],t){this.NSt.Twt(this);const t=this.JSt.HSt();t!==this.jSt&&this.Gwt(t)}else this.jSt=this.JSt.HSt()}_wt(){const t=this.VSt.awt(this.jSt);return t?t.Cwt().Iwt():0}Rwt(t){return!(t<0)&&t===this.Pwt()}Pwt(){const t=this.VSt.awt(this.jSt);if(!t)return-1;let s=t.Cwt().Ewt();return s?t.Cwt().Fwt().indexOf(s):-1}Awt(t){const s=this.Owt(t);return s?s.Rc():""}Dwt(t){let s;return Cy.Ye(t)&&(s=this.Owt(t)),"string"==typeof t&&(s=this.kwt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Dct():""}Lwt(t,s){if(t.yut())return t.HSt();{const e=t.Cwt().Ewt();if(!e)return s.HSt();const i=e.Nwt();if(!Cy.Ye(i))return s.HSt();const n=this.awt(i);return n?this.Lwt(n,s):s.HSt()}}Bwt(t,s){if(t.yut()){if("reference"===t.oI()){const s=t.Uwt(),e=t.Vwt(),i=this.NSt.DSt(s);if(!i)return[-1,null];const n=i.Wwt(e);return n?this.Bwt(n,i):this.Bwt(i.zwt(),i)}return[t.HSt(),s]}{const e=t.Cwt().Ewt();if(!e)return[-1,null];const i=e.Nwt();if(!Cy.Ye(i))return[-1,null];const n=s.awt(i);return n?this.Bwt(n,s):[-1,null]}}jwt(t,s){let e=this.awt(t);if(e){if(!e.yut()){const s=this.awt(this.jSt);t=this.Lwt(e,s)}if(Cy.Ye(t)&&t!==this.jSt)if(e=this.awt(t),"reference"===e.oI()){const i=e.Uwt(),n=e.Vwt(),r=this.NSt.DSt(i);let h=r.Wwt(n);if(h){const e=this.Bwt(h,r);if(-1===e[0])return;s(this.jSt,t,e[1],e[0])}else s(this.jSt,t)}else s(this.jSt,t)}}Hwt(t){let s;if(Cy.Ye(t)&&(s=this.Owt(t)),"string"==typeof t&&(s=this.kwt(t)),!s)return;let e=s.Nwt();Cy.Ye(e)&&this.jwt(e,(t,s,e,i)=>{this.$St.push(t),this.Gwt(s,e,i)})}Jwt(){const t=this.$wt();if(!t)return;const s=t.Nwt();Cy.Ye(s)&&this.jwt(s,(t,s,e,i)=>{this.$St.push(t),this.Gwt(s,e,i)})}qwt(t){const s=this.VSt.Wwt(t);if(!s)return;const e=s.HSt();Cy.Ye(e)&&this.jwt(e,(t,s,e,i)=>{this.$St.push(t),this.Gwt(s,e,i)})}Xwt(){const t=this.$St.pop();Cy.Ye(t)?this.Gwt(t):this.Ywt()&&(this.NSt.Twt(this.Ywt(),!0,!1,!1),this.Ywt().Gwt(this.Kwt()),this.xwt().Zwt(this.Ywt()))}Qwt(t){if(!this.owt())return;const s=this.pwt(t);if(s){if(!s.yut())return;const t=s.HSt();if(!Cy.Ye(t))return;this.$St.push(this.jSt),this.Gwt(s.HSt())}}tvt(t){if(Cy.Ye(t))return!!this.VSt.awt(this.jSt).Cwt().Fwt()[t];if("string"==typeof t){const s=this.VSt.awt(this.jSt).Cwt().Fwt();for(let e=0;e<s.length;e++)if(s[e].Rc()===t)return!0;return!1}return!1}svt(){this.nwt=!0}evt(){return this.iwt>0}ivt(){this.iwt++}nvt(){this.iwt--,0===this.iwt&&this.nwt&&this.NSt.rvt(this)}Gwt(t,s,e){const i=this.jSt,n=this.Unt().N1();this.ivt(),this.NSt.hvt(this),this.Nc.tZ(Cy.a$.avt.h$.ovt,n),this.Nc.tZ(Cy.a$.avt.h$.lvt,n),this.Nc.tZ(Cy.a$.avt.h$.uvt,n),this.Nc.tZ(Cy.a$.avt.h$.cvt,n),this.jSt=t;let r=this.awt(this.jSt);if("dictionary"===r.oI()&&(this.Nc.tZ(Cy.a$.avt.h$.fvt,n),this.Nc.tZ(Cy.a$.avt.h$.dvt,n),this.Nc.tZ(Cy.a$.avt.h$.pvt,n),this.Nc.tZ(Cy.a$.avt.h$.mvt,n)),this.NSt.gvt(),this.nvt(),!this.Jn()&&(r=this.awt(this.jSt),"reference"===r.oI())){const t=s?s.Rc():r.Uwt();if(this.yvt(r)){this.$St.pop();const t=this.Svt(r);this.NSt.Twt(t,!0,!0,!1),t.wvt(this,i),this.xwt().Zwt(t)}else{const s="number"==typeof e?e:r.Vwt();if(t){this.$St.pop();let e=r.vvt();if(e){let t=this.NSt.xvt(e);for(;t;)e=Cy._m(e),t=this.NSt.xvt(e)}else{e=`${t}-ref`;let s=this.NSt.xvt(e);for(;s;)e=Cy._m(e),s=this.NSt.xvt(e)}const n=this.NSt.bvt(t,s,e,this.qit,!0);n.wvt(this,i),this.Mvt(r,n);const h=this.xwt();n.Tvt(h),h.Zwt(n)}}}}$wt(){const t=this.VSt.awt(this.jSt);return t?t.Cwt().Ewt():null}Owt(t){const s=this.VSt.awt(this.jSt);if(!s)return null;const e=s.Cwt().Fwt();if(!e)return null;return e[t]||null}kwt(t){const s=this.VSt.awt(this.jSt);if(!s)return null;return s.Cwt().Gvt(t)||null}zSt(t){if("number"==typeof t){let s=this.awt(t);s||(s=this.VSt.zwt()),this.JSt=s}else if("number"==typeof this.USt){let t=this.awt(this.USt);t||(t=this.VSt.zwt()),this.JSt=t}else{let t=this.VSt.Wwt(this.USt);t||(t=this.VSt.zwt()),this.JSt=t}}ust(){return this.nwt?null:{flowchartName:this.BSt,flowchartTag:this.VS,startNodeTag:this.USt,currentNodeId:this.jSt,previousNodeIds:this.$St,pluginUID:this.qit.N1().PK(),reference:{previousFlowchartTag:this.Ywt()?this.Ywt().o1():"",previousStartNodeId:Cy.Ye(this.Kwt())?this.Kwt():NaN,referencesJson:this._vt(),currentReferenceFlowchartTag:this.Ivt()?this.Ivt().o1():"",rootFlowchartTag:this.xwt()?this.xwt().o1():""}}}_vt(){if(!this.Cvt())return null;const t=[];for(const[s,e]of this.bwt().entries())t.push({flowchartElementId:s.HSt(),flowchartStateTag:e.o1()});return t.length?t:null}cst(t){if(t){if(this.BSt=t.flowchartName,this.VS=t.flowchartTag,this.USt=t.startNodeTag,this.jSt=t.currentNodeId,this.$St=t.previousNodeIds,this.WSt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.QSt=s.previousFlowchartTag,this.XSt=s.previousStartNodeId,this.twt=s.referencesJson,this.swt=s.currentReferenceFlowchartTag,this.ewt=s.rootFlowchartTag}this.zSt()}}Ywt(){return"string"==typeof this.QSt&&this.QSt&&(this.qSt=this.NSt.xvt(this.QSt),this.QSt=""),this.qSt}Kwt(){return this.XSt}wvt(t,s){this.qSt=t,this.XSt=s}Ivt(){return"string"==typeof this.swt&&this.swt&&(this.KSt=this.NSt.xvt(this.swt),this.swt=""),this.KSt}Zwt(t){this.KSt=t,this.KSt===this&&(this.KSt=null)}xwt(){return"string"==typeof this.ewt&&this.ewt&&(this.ZSt=this.NSt.xvt(this.ewt),this.ewt=""),this.ZSt?this.ZSt:this}Tvt(t){this.ZSt=t}Cvt(){return this.Rvt(),!!this.YSt}yvt(t){return this.Rvt(),this.YSt&&this.YSt.has(t)}Rvt(){if(this.twt){this.YSt&&this.YSt.clear(),this.YSt||(this.YSt=new Map);for(const t of this.twt){const s=this.NSt.xvt(t.flowchartStateTag),e=s.awt(t.flowchartElementId);this.YSt.set(e,s)}this.twt=null}}bwt(){return this.Rvt(),this.YSt}Svt(t){return this.Rvt(),this.YSt.get(t)}Mvt(t,s){this.YSt||(this.YSt=new Map),this.YSt.set(t,s)}}}{const Ry=self._s;Ry.Pvt=class{constructor(t){this.Nc=t,this.Evt=new Map,this.Fvt=null,this.Avt=[],this.Ovt=()=>this.Snt(),this.Dvt=null}Hn(){Ry.wh(this.Avt),this.Avt=null,this.Evt.clear(),this.Evt=null,this.Fvt=null,this.Nc=null,this.Dvt=null}m$(){return this.Nc}DSt(t){return this.Nc.rwt().DSt(t)}bvt(t,s,e,i,n,r){const h=this.Nc.rwt().DSt(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.Evt.has(e)){const t=this.Evt.get(e);t&&this.rvt(t)}const o=new Ry.LSt(t,e,s,h,this,i,r);return this.Evt.set(e,o),n&&this.Twt(o,!0),o}rvt(t){if(t.svt(),t.evt())return;const s=t.o1();this.Evt.delete(s),t.Hn(),this.Fvt===t&&(this.Fvt=null)}kvt(t){t.Bf()}xvt(t){return this.Evt.get(t)}hvt(t){this.Avt.push(t)}gvt(){this.Avt.pop()}Twt(t,s=!1,e=!1,i=!0){if(i){const s=t.Ivt();t=s||t}t!==this.Fvt&&(this.Lvt(),this.Nvt(t,s,e))}Bvt(t){return"string"==typeof t?this.xvt(t):this.Avt.length?this.Avt[this.Avt.length-1]:this.Fvt}Lvt(){if(!this.Fvt)return;if(this.Fvt.Jn())return;const t=this.Fvt.Unt().N1();this.Fvt.ivt(),this.hvt(this.Fvt),this.Nc.tZ(Ry.a$.avt.h$.Uvt,t),this.gvt(),this.Fvt.nvt()}Nvt(t,s=!1,e=!1){if(this.Fvt=t,!this.Fvt)return;if(this.Fvt.Jn())return;const i=this.Fvt.Unt().N1();this.Fvt.ivt(),this.hvt(this.Fvt),this.Nc.tZ(Ry.a$.avt.h$.Vvt,i),!0!==e&&"number"!=typeof e||this.Fvt.zSt(e),s&&(this.Nc.tZ(Ry.a$.avt.h$.fvt,i),this.Nc.tZ(Ry.a$.avt.h$.dvt,i),this.Nc.tZ(Ry.a$.avt.h$.pvt,i),this.Nc.tZ(Ry.a$.avt.h$.mvt,i)),this.gvt(),this.Fvt.nvt()}ust(){return{flowchartJsonObjects:[...this.Evt.values()].map(t=>t.ust()),currentFlowchartTag:this.Fvt?this.Fvt.o1():null}}cst(t){if(!t)return;this.Dvt=t;const s=new Map;for(const t of this.Dvt.flowchartJsonObjects){const e=t.flowchartTag;if(this.Evt.has(e)){const i=this.Evt.get(e);i.cst(t),s.set(e,i)}else{const e=this.bvt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);e.cst(t),s.set(t.flowchartTag,e)}}for(const[t,e]of this.Evt.entries())s.has(t)||e.Hn();this.Evt.clear(),this.Evt=s,this.Nc.Het()?this.Nc.Sf().addEventListener("afterload",this.Ovt):this.Snt()}Snt(){this.Nc.Sf().removeEventListener("afterload",this.Ovt);const t=this.Evt.get(this.Dvt.currentFlowchartTag);t&&this.Twt(t,!0),this.Dvt=null}}}{const Py=self._s;Py.OSt=class{constructor(){this.Wvt=new Map}Hn(){for(const t of this.Wvt.values())t.Hn();this.Wvt.clear(),this.Wvt=null}Bu(t){const s=new Py.zvt(t),e=s.Rc();this.Wvt.set(e,s)}Hs(t){return this.Wvt.get(t)}kSt(){return!!this.Wvt.size}static jvt(t,s,e,i){if(s)for(const n of s){const s=new e(n,i);t.push(s)}}}}{const Ey=self._s;Ey.zvt=class{constructor(t){this.qn=t[0],this.Hvt=new Ey.Jvt(t[1],this)}Hn(){this.Hvt.Hn(),this.Hvt=null}$vt(){return this.Hvt}awt(t){return this.Hvt.awt(t)}Wwt(t){return this.Hvt.Wwt(t)}zwt(){return this.Hvt.zwt()}Rc(){return this.qn}}}{const Fy=self._s;class Ay{constructor(t,s){this.Hvt=s,this.Jc=t[7],this.qvt=t[0],this.VS=t[1],this.VS?this.Fot=this.VS.trim().split(" ").map(t=>t.trim()):this.Fot=[],this.Xvt=t[2],this.Yvt=null,this.Kvt=null,this.cgt=!1,"dictionary"===this.Jc&&(this.Yvt=t[3],this.Kvt=t[4],this.cgt=t[8]),this.Zvt=t[6],this.Qvt=null,this.txt=null,this.sxt=null,"reference"===this.Jc&&(this.Qvt=t[8],this.txt=t[9],this.sxt=t[10],this.cgt=t[11]),this.ixt=new Fy.nxt(t[5],this)}Hn(){this.Hvt=null}$vt(){return this.Hvt}Cwt(){return this.ixt}HSt(){return this.qvt}o1(){return this.VS}G1(){return this.Fot}f1(t){if(!this.Fot)return!1;if(!this.Fot.length)return!1;const s=Fy.LSt.uat(t);return!(!s||!s.length)&&s.every(Fy.LSt.fat,this.Fot)}rxt(){return this.Zvt}hxt(t){this.Zvt=!!t}oxt(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}mwt(){return this.Xvt}axt(){return this.Yvt}lxt(){return this.Kvt}oI(){return this.Jc}yut(){return this.cgt}Uwt(){return this.Qvt}Vwt(){return this.txt}vvt(){return this.sxt}}Fy.Jvt=class{constructor(t,s){this.VSt=s,this.uxt=[],this.cxt=new Map,this.fxt=new Map,this.dxt=null,Fy.OSt.jvt(this.uxt,t,Ay,this);for(const t of this.uxt){const s=t.HSt(),e=t.o1(),i=t.G1(),n=t.rxt();if(this.cxt.set(s,t),e)for(const s of i)this.fxt.has(s)||this.fxt.set(s,new Set),this.fxt.get(s).add(t);n&&(this.dxt=t);const r=t.Cwt();for(const t of r.pxt()){const s=t.HSt();this.cxt.set(s,t)}}this.dxt||this.mxt()}Hn(){this.VSt=null;for(const t of this.uxt)t.Hn();Fy.wh(this.uxt),this.uxt=null}hwt(){return this.VSt}awt(t){return this.cxt.get(t)}Wwt(t){if(!t||!t.length)return null;const s=[];for(const e of t.trim().split(" ")){let t=this.fxt.get(e.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}zwt(){return this.dxt}*gxt(){for(const t of this.uxt)yield t}mxt(){let t=0;for(const s of this.gxt())s.rxt()&&t++;if(0===t){for(const t of this.gxt())if(t.oxt()&&!t.rxt())return void t.hxt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.gxt())s.oxt()&&(s.rxt()&&t?t=!1:s.rxt()&&!t&&s.hxt(!1))}}for(const t of this.gxt())if(t.oxt()&&t.rxt())return void(this.dxt=t)}}}{const Oy=self._s;class Dy{constructor(t,s){this.ixt=s,this.qvt=t[0],this.qn=t[1],this.ldt=t[2],this.yxt=t[3],this.cgt=t[4],this.Sxt=t[5]}Hn(){this.ixt=null}Cwt(){return this.ixt}HSt(){return this.qvt}Rc(){return this.qn}Dct(){return this.ldt}Nwt(){return this.yxt}yut(){return this.cgt}wxt(){return this.Sxt}}Oy.nxt=class{constructor(t,s){this.vxt=s,this.xxt=[],this.bxt=new Map,Oy.OSt.jvt(this.xxt,t,Dy,this),this.Mxt=this.xxt.filter(t=>t.yut());for(const t of this.Mxt)this.bxt.set(t.Rc(),t)}Hn(){this.vxt=null;for(const t of this.xxt)t.Hn();Oy.wh(this.xxt),this.xxt=null,Oy.wh(this.Mxt),this.Mxt=null}Txt(){return this.vxt}Iwt(){return this.Mxt.length}Fwt(){return this.Mxt}Gvt(t){return this.bxt.get(t)}Ewt(){for(const t of this.Mxt)if(t.wxt())return t}*pxt(){for(const t of this.Mxt)yield t}}}{const ky=self._s;ky.Gxt=class extends ky.Wn{constructor(t){super(),this._xt=t,this.Ixt=[],this.Ixt.push(ky.jn(ky.Cxt,this)),this.US=0,this.Rxt=this.Ixt[0]}Hn(){for(const t of this.Ixt)t.Hn();ky.wh(this.Ixt),this.Rxt=null,this._xt=null}yK(){return this._xt}uX(){return this.Rxt}Pxt(){return this.Ixt[this.US-1]}Ru(){this.uX().Ru()}Ext(){const t=this.Ixt,s=++this.US;if(s===t.length){const s=ky.jn(ky.Cxt,this);t.push(s),this.Rxt=s}else{const e=t[s];e.Bf(),this.Rxt=e}}Fxt(){const t=this.Ixt,s=++this.US;s===t.length&&t.push(ky.jn(ky.Cxt,this));const e=t[s];e.rd(t[s-1]),this.Rxt=e}D3(){this.Rxt=this.Ixt[--this.US]}Axt(t){const s=this.Ixt;for(let e=0,i=s.length;e<i;++e)s[e].Axt(t)}}}{const Ly=self._s;Ly.Cxt=class extends Ly.Wn{constructor(t){super(),this.Ixt=t,this._xt=this.Ixt.yK(),this.Oxt=this._xt.m$().GH(),this.Dxt=!0,this.E6=[],this.kxt=[]}Hn(){this.Lxt(),this.Ixt=null,this._xt=null,this.Oxt=null}Lxt(){Ly.wh(this.E6),Ly.wh(this.kxt)}yK(){return this._xt}Nxt(){return this.Dxt}Bxt(){return this.Dxt?!!this._xt.dX():!!this.E6.length}lX(){return this.Dxt?this._xt.lX():this.E6}Uxt(){return!!this.kxt.length}Vxt(){return this.kxt}Wxt(){const t=this.lX();return t.length?t:this.kxt}Bf(){this.Dxt=!0,Ly.wh(this.kxt)}Ru(){this.Dxt=!0}rd(t){t.Nxt()?this.Bf():(this.Dxt=!1,Ly.Th(this.E6,t.E6),Ly.wh(this.kxt))}zxt(t){this.E6.push(t)}jxt(t){this.kxt.push(t)}Hxt(t){this.Dxt=!!t}Jxt(){return this.E6}$xt(){return this.kxt}qxt(t){this.Dxt=!1,Ly.wh(this.E6),this.E6.push(t)}Xxt(t){this.Dxt=!1,Ly.Th(this.E6,t)}Yxt(t){this.Dxt=!1,Ly.wh(this.E6);for(const s of t)this.E6.push(s)}Kxt(t,s){for(const e of s)t.has(e)||this.kxt.push(e)}Zxt(t){for(const s of t)this.E6.push(s);Ly.Rh(this.kxt,t)}Qxt(){Ly.wh(this.kxt)}tbt(t){if(t)if(this.Oxt.M3().SH().sbt()){this.Nxt()&&(Ly.wh(this.E6),Ly.Th(this.kxt,t.yK().lX()),this.Dxt=!1);const s=this.kxt.indexOf(t);-1!==s&&(this.E6.push(this.kxt[s]),this.kxt.splice(s,1))}else this.qxt(t)}Axt(t){Ly.Rh(this.E6,t),Ly.Rh(this.kxt,t)}}}{const Ny=self._s;Ny.ebt=class extends Ny.Wn{constructor(t){super(),this.ibt=t,this.Nc=this.ibt.m$(),this.Ixt=[],this.Ixt.push(Ny.jn(Ny.nbt,this,null)),this.US=0,this.rbt=[]}Hn(){for(const t of this.Ixt)t.Hn();Ny.wh(this.Ixt),Ny.wh(this.rbt),this.ibt=null,this.Nc=null}fH(){return this.ibt}m$(){return this.Nc}M3(){return this.Ixt[this.US]}hbt(){return this.Ixt}obt(){return this.US}T3(t){const s=this.Ixt,e=++this.US;if(e===s.length){const e=Ny.jn(Ny.nbt,this,t);return s.push(e),e}{const i=s[e];return i.Bf(t),i}}D3(){--this.US}abt(t){this.rbt.push(t)}lbt(){this.rbt.pop()}TH(){const t=this.rbt;return 0===t.length?null:t.at(-1)}}}{const By=self._s;By.nbt=class extends By.Wn{constructor(t,s){super(),this.Ixt=t,this.Nc=this.Ixt.m$(),this.ubt=s,this.cbt=0,this.fbt=0,this.dbt=!1,this.pbt=!1,this.mbt=null,this.gbt=0,this.ybt=0,this.Sbt=null}Hn(){this.Bf(null),this.Ixt=null,this.Nc=null}Bf(t){this.ubt=t,this.cbt=0,this.fbt=0,this.dbt=!1,this.pbt=!1,this.Sbt=null}wbt(t,s){this.ubt=t,this.cbt=0,this.fbt=s}vbt(){this.cbt=0,this.fbt=0}SH(){return this.ubt}xbt(t){this.ubt=t}bbt(){return this.cbt}Mbt(t){this.cbt=t}Tbt(){return this.fbt}Gbt(t){this.fbt=t}_bt(t){this.dbt=!!t}Ibt(){return this.dbt}Cbt(t){this.pbt=!!t}Rbt(){return this.pbt}Pbt(t){this.mbt=t}Ebt(){return this.mbt}Fbt(t,s){this.gbt=t,this.ybt=s}_H(){return this.gbt}IH(t){this.ybt=t}Abt(){return this.ybt}Obt(){const t=this.ubt;return!!t.Dbt()||this.cbt<t.kbt()-1&&!!t.b3().length}Lbt(t){this.Sbt=t}Nbt(){return this.Sbt}}}{const Uy=self._s;Uy.Bbt=class extends Uy.Wn{constructor(t){super(),this.ibt=t,this.Nc=this.ibt.m$(),this.Ixt=[],this.US=-1,this.Rxt=null,this.Ubt=[]}Hn(){Uy.wh(this.Ixt),this.ibt=null,this.Nc=null}Vbt(t){this.Ubt=t;const s=this.Ubt.slice(0);this.Ixt.push(s),this.US=0,this.Rxt=s}fH(){return this.ibt}m$(){return this.Nc}Wbt(){return this.Rxt}T3(){const t=++this.US,s=this.Ixt;t===s.length?s.push(this.Ubt.slice(0)):Uy.Th(s[t],this.Ubt),this.Rxt=s[t]}D3(){this.Rxt=this.Ixt[--this.US]}}}{const Vy=self._s;Vy.zbt=class extends Vy.Wn{constructor(t){super(),this.ibt=t,this.Nc=this.ibt.m$(),this.Ixt=[],this.US=-1}Hn(){Vy.wh(this.Ixt),this.ibt=null,this.Nc=null}fH(){return this.ibt}m$(){return this.Nc}jbt(){return this.US>=0}Wbt(){return this.Ixt[this.US]}T3(){if(++this.US,this.US===this.Ixt.length){const t=Vy.jn(Vy.Hbt,this);return this.Ixt.push(t),t}{const t=this.Ixt[this.US];return t.Bf(),t}}D3(){--this.US}Jbt(t){const s=this.Ixt;for(let e=this.US;e>=0;--e){const i=s[e];if(i.Rc()===t)return i}return null}$bt(){return this.Ixt.slice(0,this.US+1)}}}{const Wy=self._s;Wy.Hbt=class extends Wy.Wn{constructor(t){super(),this.qbt=t,this.qn="",this.US=0,this.Xbt=!1,this.Ybt=NaN}Bf(){this.qn="",this.US=0,this.Xbt=!1,this.Ybt=NaN}_3(t){this.qn=t}Rc(){return this.qn}F3(t){this.US=t}Ej(){return this.US}u1(){this.Xbt=!0}O3(){return this.Xbt}Kbt(t){this.Ybt=t}Zbt(){return this.Ybt}}}{const zy=self._s;zy.Qbt=class extends zy.Wn{constructor(){super(),this.Ixt=[],this.US=-1}Hn(){zy.wh(this.Ixt)}Wbt(){return this.Ixt[this.US]}T3(){if(++this.US,this.US===this.Ixt.length){const t=[];return this.Ixt.push(t),t}return this.Ixt[this.US]}D3(){--this.US}}}{let jy=function(t,s){return t.Ej()-s.Ej()},Hy=function(t,s){for(let e=0,i=t.length;e<i;++e)if(t[e]!==s[e])return!1;return!0};0;const Jy=self._s;self.assert;Jy.tMt=class extends Jy.Wn{constructor(t){super(),this.Nc=t,this.sMt=[],this.eMt=new Map,this.iMt=[],this.nMt=new Map,this.rMt=new Map,this.hMt=new Map,this.oMt=new Map,this.aMt=new Map,this.lMt=new Map,this.uMt=0,this.cMt=[],this.fMt=[],this.dMt=[],this.pMt=new Map,this.mMt=new Map,this.Oxt=Jy.jn(Jy.ebt,this),this.gMt=Jy.jn(Jy.Bbt,this),this.qbt=Jy.jn(Jy.zbt,this),this.yMt=[],this.SMt=[],this.wMt=[],this.vMt=0,this.xMt=0,this.bMt=0,this.MMt=[],this.TMt=[],this.GMt=[],this._Mt=new Map,this.IMt=new Map,self.c3_callFunction=(t,s)=>this.CMt(t,s)}Hn(){this.lit(),this.Oxt.Hn(),this.Oxt=null,this.gMt.Hn(),this.gMt=null,Jy.wh(this.SMt),Jy.wh(this.wMt),this.Nc=null,Jy.wh(this.sMt),this.eMt.clear()}e_(t){const s=Jy.jn(Jy.RMt,this,t);this.sMt.push(s),this.eMt.set(s.Rc().toLowerCase(),s)}PMt(t){this.yMt.push(t)}EMt(){for(const t of this.mMt.values())t.FMt();for(const t of this.pMt.values())t.EMt();for(const t of this.mMt.values())t.EMt();for(const t of this.sMt)t.EMt();for(const t of this.sMt)t.Oet();for(const t of this.yMt)t.EMt(!1);Jy.wh(this.yMt),this.gMt.Vbt(this.dMt)}m$(){return this.Nc}Aet(t){return this.eMt.get(t.toLowerCase())||null}AMt(t){this.iMt.push(t),this.nMt.set(t.OMt(),t)}DMt(t){this.rMt.set(t.H7(),t)}kMt(t){this.hMt.set(t.H7(),t)}LMt(t){this.oMt.set(t.H7(),t)}NMt(t){switch(t.BMt()){case 0:this.pMt.set(t.UMt().toLowerCase(),t);break;case 1:this.mMt.set(t.UMt().toLowerCase(),t)}}VMt(t){this.lMt.set(t.H7(),t),t.h8()?this.cMt.push(t):this.fMt.push(t)}WMt(t){t.length>=2&&t.sort(jy);let s=this.aMt.get(t.length);s||(s=[],this.aMt.set(t.length,s));for(let e=0,i=s.length;e<i;++e){const i=s[e];if(Hy(t,i))return i}return s.push(t),t}zMt(t){return this.dMt.push(t.jMt()),this.uMt++}GH(){return this.Oxt}HMt(){return this.GH().M3()}SH(){return this.HMt().SH()}JMt(){const t=this.HMt();return t.SH().$Mt(t.bbt())}qMt(){const t=this.HMt();return t.SH().XMt(t.Tbt())}YMt(){return this.gMt}G3(){return this.qbt}KMt(t){const s=[];for(t=t.ZMt();t;)Jy.Fn(s,t.QMt()),t=t.ZMt();return s}tTt(t){const s={};for(const e of this.KMt(t))s[e.sTt()]=e.eTt();return Object.create(Object.prototype,s)}iTt(t){return this.lMt.get(t)||null}nTt(t){return this.rMt.get(t)||null}rTt(t){return this.hMt.get(t)||null}hTt(t){return this.oMt.get(t)||null}dH(t){return this.pMt.get(t.toLowerCase())||null}oTt(t,s){let e=this.mMt.get((t.Rc()+"."+s).toLowerCase());if(e)return e;if(!t.N7())for(const i of t.MX())if(e=this.mMt.get((i.Rc()+"."+s).toLowerCase()),e)return e;return null}aTt(){return this.cMt}lTt(){return this.fMt}uTt(t){for(const t of this.cMt)t.cTt();if(t)for(const t of this.fMt)t.nG()&&t.cTt()}fTt(t){return this.nMt.get(t.toLowerCase())||null}dTt(t){const s=this.rMt.get(t);return s&&s.pTt()?s:null}mTt(){return this.iMt}gTt(){for(const t of this.iMt)t.yTt()}STt(){for(const t of this.sMt)t.wTt()}vTt(t){this.STt(),this.vMt++;for(const s of t.Uit()){const t=s.ret();t&&(this.Nc.xTt(s),t.IR(),this.Nc.bTt())}this.vMt--}async MTt(t){this.STt(),this.vMt++;for(const s of this.TTt(t))await this.Nc.GTt(s);this.vMt--}*TTt(t){for(const s of t.Uit()){const t=s.ret();t&&(this.Nc.xTt(s),yield*t._Tt(),this.Nc.bTt())}}ITt(t,s,e,i){let n=!1;if(!t.SJ())return this.CTt(s,e,i);this.xMt++;for(const r of t.Uit()){const t=r.ret();if(!t)continue;this.Nc.xTt(r);for(const r of t.RTt()){const t=r.ITt(s,e,i);n=n||t}const h=t.ITt(s,e,i);n=n||h,this.Nc.bTt()}return this.xMt--,n}*PTt(t,s,e,i){let n=!1;if(!t.SJ())return this.CTt(s,e,i);this.xMt++;for(const r of t.Uit()){const t=r.ret();if(!t)continue;this.Nc.xTt(r);for(const r of t.RTt()){const t=yield*r.PTt(s,e,i);n=n||t}const h=yield*t.PTt(s,e,i);n=n||h,this.Nc.bTt()}return this.xMt--,n}CTt(t,s,e){return this.SMt.push([t,s,e]),!1}ETt(t,s,e){let i=null;const n=new Promise(t=>i=t);return this.wMt.push([t,s,e,i]),n}*FTt(){if(this.Nc.ATt())throw new Error("should not be in breakpoint");const t=this.Nc.xJ();for(;this.wMt.length;){const[s,e,i,n]=this.wMt.shift();n(yield*this.PTt(t,s,e,i))}}async OTt(){for(const t of this.FTt())await this.Nc.GTt(t)}DTt(t,s,e,i){let n=!1;const r=t.SJ(),h=r.ret();if(!h)return;this.xMt++,this.Nc.xTt(r);const o=h.RTt();for(let t=0,r=o.length;t<r;++t){const r=o[t].DTt(s,e,i);n=n||r}const a=h.DTt(s,e,i);return n=n||a,this.Nc.bTt(),this.xMt--,n}*kTt(t,s,e,i){let n=!1;const r=t.SJ(),h=r.ret();if(!h)return;this.xMt++,this.Nc.xTt(r);const o=h.RTt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].kTt(s,e,i);n=n||r}const a=yield*h.kTt(s,e,i);return n=n||a,this.Nc.bTt(),this.xMt--,n}LTt(){return this.xMt}NTt(){return this.LTt()>0}BTt(){return++this.xMt}UTt(){--this.xMt}VTt(){return this.vMt>0}wX(){return this.VTt()||this.NTt()}tit(t){for(const[s,e,i]of this.SMt)this.ITt(t,s,e,i);Jy.wh(this.SMt)}yX(t){t?this.bMt++:this.bMt--}TK(){return this.bMt>0}WTt(t){for(let s=0,e=t.length;s<e;++s)t[s].zTt().Ru()}jTt(t){for(let s=0,e=t.length;s<e;++s)t[s].zTt().Ext()}R3(t){for(let s=0,e=t.length;s<e;++s)t[s].zTt().Fxt()}E3(t){for(let s=0,e=t.length;s<e;++s)t[s].zTt().D3()}wH(t){const s=new Set,e=this.Oxt.hbt(),i=this.Oxt.obt();for(let n=0;n<=i;++n){const i=e[n].Nbt();if(i)for(const e of i)t&&t.has(e)||s.add(e)}return s}HTt(t){const s=new Set([...t]),e=this.wH(s);if(e.size>0){for(const t of e)t.zTt().Ext();return[...e]}return null}JTt(){const t=Jy.jn(Jy.$Tt,this);return this.MMt.push(t),t}qTt(){return this.MMt}XTt(){if(!this.MMt.length)return;const t=this.HMt();let s=!1;this.vMt++;for(let e=0,i=this.MMt.length;e<i;++e){const i=this.MMt[e];i.YTt()&&i.KTt(t),i.ZTt()&&(s=!0)}s&&(this.QTt(),t.Bf(null)),this.vMt--}async tGt(){if(!this.MMt.length)return;const t=this.HMt();let s=!1;this.vMt++;for(let e=0,i=this.MMt.length;e<i;++e){const i=this.MMt[e];i.YTt()&&await i.sGt(t),i.ZTt()&&(s=!0)}s&&(this.QTt(),t.Bf(null)),this.vMt--}QTt(){const t=Jy.Ch(this.MMt,t=>t.ZTt());for(const s of t)s.Hn()}lit(){for(const t of this.MMt)t.Hn();Jy.wh(this.MMt)}eGt(t){for(const s of this.MMt)s.Axt(t);for(const s of t){const t=this.IMt.get(s);if(this.IMt.delete(s),t)for(const{resolve:s}of t.iGt.values())s(!0)}}nGt(t){this.TMt.push({promise:t,rGt:this.LTt()})}hGt(){Jy.wh(this.TMt)}oGt(){const t=this.LTt(),s=Promise.all(this.TMt.filter(s=>s.rGt===t).map(t=>t.promise));return this.TMt=this.TMt.filter(s=>s.rGt<t),s}CH(t){const s=t.toLowerCase();this.GMt.push(s),this.Nc.tZ(Jy.a$.o$.h$.aGt,null),this.GMt.pop();for(const t of this.Nc.fH().qTt())t.lGt()&&t.uGt()===s&&t.cGt();const e=this._Mt.get(s);e&&(e.resolve(),this._Mt.delete(s))}PH(t){const s=t.toLowerCase(),e=this._Mt.get(s);if(e)return e.promise;{let t=null;const e=new Promise(s=>t=s);return this._Mt.set(s,{promise:e,resolve:t}),e}}fGt(){if(0===this.GMt.length)throw new Error("not in a signal");return this.GMt.at(-1)}dGt(t){let s=this.IMt.get(t);return s||(s={pGt:[],iGt:new Map},this.IMt.set(t,s)),s}jK(t,s){const e=this.dGt(t),i=s.toLowerCase();e.pGt.push(i),this.Nc.tZ(t.Zq().gGt().h$.mGt,t),e.pGt.pop();for(const s of this.Nc.fH().qTt())s.yGt()&&s.uGt()===i&&s.SGt(t);const n=e.iGt.get(i);n&&(n.resolve(!1),e.iGt.delete(i)),0===e.pGt.length&&0===e.iGt.size&&this.IMt.delete(t)}HK(t,s){const e=this.dGt(t),i=s.toLowerCase(),n=e.iGt.get(i);if(n)return n.promise;{let t=null;const s=new Promise(s=>t=s);return e.iGt.set(i,{promise:s,resolve:t}),s}}wGt(t){const s=this.dGt(t);if(!s||0===s.pGt.length)throw new Error("not in a signal");return s.pGt.at(-1)}ust(){return{groups:this.vGt(),cnds:this.xGt(),acts:this.bGt(),vars:this.MGt(),waits:this.TGt()}}cst(t){this.GGt(t.groups),this._Gt(t.cnds),this.IGt(t.acts),this.CGt(t.vars),this.RGt(t.waits)}vGt(){const t={};for(const s of this.mTt())t[s.H7().toString()]=s.PGt();return t}GGt(t){for(const[s,e]of Object.entries(t)){const t=parseInt(s,10),i=this.dTt(t);i&&i.EGt(e)}}xGt(){const t={};for(const[s,e]of this.hMt){const i=e.ust();i&&(t[s.toString()]=i)}return t}_Gt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[t,e]of this.hMt)e.cst(s.get(t)||null)}bGt(){const t={};for(const[s,e]of this.oMt){const i=e.ust();i&&(t[s.toString()]=i)}return t}IGt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[t,e]of this.oMt)e.cst(s.get(t)||null)}MGt(){const t={};for(const[s,e]of this.lMt)e.FGt()||!e.h8()&&!e.nG()||(t[s.toString()]=e.Dct());return t}CGt(t){for(const[s,e]of Object.entries(t)){const t=parseInt(s,10),i=this.iTt(t);i&&i.yft(e)}}TGt(){return this.MMt.filter(t=>!t.AGt()).map(t=>t.ust())}RGt(t){this.lit();for(const s of t){const t=Jy.$Tt.OGt(this,s);t&&this.MMt.push(t)}}DGt(){return[...this.Nc.xJ().Uit()].map(t=>t.ret()).filter(t=>t).map(t=>t.kGt())}LGt(t){for(;t;){const s=t.ZMt();if(s instanceof Jy.NGt)return s;t=s}return null}CMt(t,s){Array.isArray(s)||(s=[]);const e=this.dH(t.toLowerCase());if(!e)return null;if(!e._u())return e.pH();const i=e.BGt();if(s.length<i.length){s=s.slice(0);do{s.push(i[s.length].jMt())}while(s.length<i.length)}const n=e.gH();return n.vH(n.yH(),!1,e.bH(),e.pH(),...s)}}}{const $y=self._s;$y.RMt=class extends $y.Wn{constructor(t,s){super(),this.ibt=t,this.Nc=t.m$(),this.qn=s[0],this.UGt=[],this.VGt=new Map,this.WGt=new Map,this.zGt=new Map,this.jGt=!1,this.HGt=[],this.JGt=[],this.$Gt=new Set;for(const t of s[1])this.qGt(t,null,this.UGt);this.XGt=this.Nc.aZ()?{type:"sheet",name:this.qn,YGt:0,children:[]}:null}Hn(){this.ibt=null,this.Nc=null}qGt(t,s,e){switch(t[0]){case 0:case 3:this.KGt(t,s,e);break;case 1:this.ZGt(t,s,e);break;case 2:this.QGt(t,s,e);break;case 4:this.t_t(t,s);break;case 5:this.s_t(t,s,e);break;case 6:this.e_t(t,s);break;default:throw new Error("invalid event type")}}KGt(t,s,e){const i=$y.i_t.e_(this,s,t);if(i.sbt()){e.push(i);const t=i.n_t();for(let s=0,e=t.length;s<e;++s)t[s].r_t()&&this.h_t(i,s)}else i.r_t()?this.h_t(i,0):e.push(i)}t_t(t,s){const e=$y.NGt.o_t(this,s,t);this.ibt.NMt(e)}e_t(t,s){const e=$y.NGt.a_t(this,s,t);this.ibt.NMt(e)}ZGt(t,s,e){const i=$y.l_t.e_(this,s,t);e.push(i)}QGt(t,s,e){const i=$y.u_t.e_(this,s,t);e.push(i)}s_t(t,s,e){const i=$y.c_t.e_(this,s,t);e.push(i)}h_t(t,s){t.sbt()||this.ibt.PMt(t);const e=t.$Mt(s),i=e.f_t(),n=e.yK();if(e.d_t()){let r=this.WGt.get(n);r||(r=new Map,this.WGt.set(n,r));const h=e.p_t().toLowerCase();let o=r.get(i);o||(o=new Map,r.set(i,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.VGt.get(n);r||(r={m_t:new Map,g_t:new Map},this.VGt.set(n,r));const h=e.y0();let o;h?(o=r.g_t.get(h),o||(o=new Map,r.g_t.set(h,o))):o=r.m_t;let a=o.get(i);a||(a=[],o.set(i,a)),a.push([t,s])}}EMt(){const t=this.UGt;for(let s=0,e=t.length;s<e;++s){const i=s<e-1&&t[s+1]instanceof $y.i_t&&t[s+1].y_t();t[s].EMt(i)}}S_t(t){this.HGt.push(t)}Oet(){$y.wh(this.JGt),this.w_t(this),this.$Gt.clear()}w_t(t){const s=t.JGt,e=t.$Gt;for(const i of this.HGt){const n=i.v_t();i.x_t()&&t!==n&&!e.has(n)&&(e.add(n),n.w_t(t),s.push(n))}}RTt(){return this.JGt}fH(){return this.ibt}m$(){return this.Nc}Rc(){return this.qn}b_t(t,s){this.zGt.set(s,t)}M_t(t){return this.zGt.get(t)||null}wTt(){this.jGt=!1}IR(){if(this.jGt)return;const t=this.Nc,s=t.T_t(),e=s?performance.now():0;this.jGt=!0;const i=this.fH(),n=i.HMt();for(const s of this.UGt)s.IR(n),i.WTt(s.b3()),i.hGt(),t.xX();n.Bf(null),s&&(this.XGt.YGt+=performance.now()-e)}*_Tt(){if(this.jGt)return;this.jGt=!0;const t=this.Nc,s=this.fH(),e=s.HMt();for(const i of this.UGt)yield*i._Tt(e),s.WTt(i.b3()),s.hGt(),t.xX();e.Bf(null)}ITt(t,s,e){if(!s)return this.G_t(t,s,null,null);{const i=s.yK();let n=!1,r=this.G_t(t,s,i,e);n=n||r;for(const h of i.MX())r=this.G_t(t,s,h,e),n=n||r}}G_t(t,s,e,i){const n=this.VGt.get(e);if(!n)return!1;const r=i?n.g_t.get(i):n.m_t;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,e]of h){const i=this.__t(s,t,e);o=o||i}return o}*PTt(t,s,e){if(!s)return yield*this.I_t(t,s,null,null);{const i=s.yK();let n=!1,r=yield*this.I_t(t,s,i,e);n=n||r;for(const h of i.MX())r=yield*this.I_t(t,s,h,e),n=n||r}}*I_t(t,s,e,i){const n=this.VGt.get(e);if(!n)return!1;const r=i?n.g_t.get(i):n.m_t;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,e]of h){let i;i=t.C_t()?this.__t(s,t,e):yield*this.R_t(s,t,e),o=o||i}return o}DTt(t,s,e){const i=s.yK(),n=this.WGt.get(i);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],e=this.__t(null,s[0],s[1]);o=o||e}return o}*kTt(t,s,e){const i=s.yK(),n=this.WGt.get(i);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],e=s[0],i=s[1];let n;n=e.C_t()?this.__t(null,e,i):yield*this.R_t(null,e,i),o=o||n}return o}__t(t,s,e){const i=this.Nc,n=this.ibt,r=n.SH(),h=n.GH(),o=n.LTt();let a=!1;r&&n.jTt(r.yH()),n.jTt(s.yH());const l=o>1;l&&n.YMt().T3();const u=h.T3(s);t&&(s.n_t()[e].yK().uX().qxt(t),t.CK()&&t.P_t());let c=!0;if(s.cQ()){const t=s.E_t();for(let s=0,e=t.length;s<e;++s)if(!t[s].F_t(u)){c=!1;break}}return c&&(s.sbt()?s.A_t(u,e):s.IR(u),a=u.Ibt()),h.D3(),l&&n.YMt().D3(),n.E3(s.yH()),r&&n.E3(r.yH()),r||1!==o||(n.hGt(),n.TK()||i.xX()),a}*R_t(t,s,e){const i=this.Nc,n=this.ibt,r=n.SH(),h=n.GH(),o=n.LTt();let a=!1;r&&n.jTt(r.yH()),n.jTt(s.yH());const l=o>1;l&&n.YMt().T3();const u=h.T3(s);t&&(s.n_t()[e].yK().uX().qxt(t),t.CK()&&t.P_t());let c=!0;if(s.cQ()){const t=s.E_t();for(let s=0,e=t.length;s<e;++s)if(!(yield*t[s].O_t(u))){c=!1;break}}return c&&(s.sbt()?yield*s.D_t(u,e):yield*s._Tt(u),a=u.Ibt()),h.D3(),l&&n.YMt().D3(),n.E3(s.yH()),r&&n.E3(r.yH()),r||1!==o||(n.hGt(),n.TK()||i.xX()),a}kGt(){return this.XGt}}}{let qy=function(t,s){return!0};0;const Xy=self._s,Yy=[];function*Ky(t,s){return!0}Xy.i_t=class extends Xy.Wn{constructor(t,s,e){super(),this.Tst=t,this.Nc=t.m$(),this.k_t=s,this.L_t=null,this.Oxt=this.Nc.fH().GH(),this.N_t=[],this.B_t=[],this.U_t=!1,this.V_t=!1,this.W_t=!1,this.z_t=!1,this.j_t=!!e[2],this.H_t=!1,this.J_t=null,this.$_t=[],this.ddt=[],this.q_t=[],this.X_t=qy,this.Y_t=Ky,this.K_t=!1,this.Z_t=!1,this.Q_t="",this.tIt=!1,this.sIt=null,this.XGt=null,this.f8=e[4],this.eIt=e[5],this.Tst.b_t(this,this.eIt),this.iIt=this.Nc.aZ()?{nIt:e[3][0],rIt:e[3][1],hIt:!1,oIt:!1,aIt:!1,lIt:!1}:null,this.fH().DMt(this),3===e[0]&&this.uIt(e[1]);let i=0;for(const t of e[6]){const s=Xy.cIt.e_(this,t,i++);this.$_t.push(s),this.fIt(s.yK())}i=0;for(const t of e[7]){const s=Xy.dIt.e_(this,t,i++);this.ddt.push(s)}if(9===e.length){const t=e[8];for(const s of t)this.Tst.qGt(s,this,this.q_t)}this.$_t.length&&(this.H_t=null===this.$_t[0].yK()&&this.$_t[0].f_t()===Xy.a$.o$.h$.pIt),0===this.$_t.length&&(this.$_t=Yy),0===this.ddt.length&&(this.ddt=Yy),0===this.q_t.length&&(this.q_t=Yy)}static e_(t,s,e){return Xy.jn(Xy.i_t,t,s,e)}uIt(t){this.K_t=!0,this.Z_t=!!t[0],this.tIt=this.Z_t,this.Q_t=t[1].toLowerCase(),this.sIt=[],this.fH().AMt(this),this.Nc.aZ()&&(this.XGt={type:"group",name:t[1],YGt:0,children:[]})}mIt(t){this.sIt.push(t)}gIt(t,s){for(const e of t.vet().PX())s.includes(e)||s.push(e)}yIt(t,s){if(t)if(s.includes(t)||s.push(t),t.N7())for(const e of t.RX())e.CK()&&this.gIt(e,s);else t.CK()&&this.gIt(t,s)}fIt(t){this.yIt(t,this.N_t)}SIt(t){this.yIt(t,this.B_t)}wIt(){this.N_t=this.Nc.L7()}EMt(t){this.z_t=!!t,this.vIt(),this.xIt();for(const t of this.$_t)t.EMt();if(this.ddt.length>0){let t=!1;for(const s of this.ddt)s.EMt(),s.bIt()&&(t=!0);t?(this.X_t=this.MIt,this.Y_t=this.TIt):(this.X_t=this.GIt,this.Y_t=this._It)}const s=this.q_t;for(let t=0,e=s.length;t<e;++t){const i=t<e-1&&s[t+1]instanceof Xy.i_t&&s[t+1].y_t();s[t].EMt(i)}this.iIt&&this.IIt(),this.XGt&&this.CIt().kGt().children.push(this.XGt)}kGt(){return this.XGt}CIt(){let t=this.cQ();for(;t;){if(t.pTt())return t;t=t.cQ()}return this.Tst}IIt(){const t=this.iIt;t.hIt=this.$_t.every(t=>t.C_t()),t.oIt=this.ddt.every(t=>t.C_t()),t.aIt=this.q_t.every(t=>t.C_t()),t.lIt=t.hIt&&t.oIt&&t.aIt}RIt(){let t=this;do{t.IIt(),t=t.cQ()}while(t)}vIt(){if(!this.pTt())return;let t=this.cQ();for(this.W_t=!0;t;){if(!t.pTt()){this.W_t=!1;break}t=t.cQ()}}PIt(){const t=this.Nc.L7();if(this.N_t===t)this.B_t=t;else{this.B_t=Xy.Fh(this.N_t);let t=this.cQ();for(;t;){for(const s of t.N_t)this.SIt(s);t=t.cQ()}const s=this.fH();this.N_t=s.WMt(this.N_t),this.B_t=s.WMt(this.B_t)}}xIt(){if(!this.EIt())return;this.J_t=[];let t=this.cQ();for(;t;)this.J_t.push(t),t=t.cQ();this.J_t.reverse()}FIt(){this.V_t=!0,this.k_t&&this.k_t.FIt()}Dbt(){return this.V_t}b3(){return this.N_t}yH(){return this.U_t||(this.U_t=!0,this.PIt()),this.B_t}AIt(t){return this.N_t.includes(t)}E_t(){return this.J_t}ret(){return this.Tst}fH(){return this.Tst.fH()}m$(){return this.Nc}cQ(){return this.k_t}OIt(t){this.L_t=t}ZMt(){return this.L_t||this.k_t}DIt(){return this.eIt}kIt(){return this.iIt&&this.iIt.rIt}LIt(){return this.kIt()&&this.iIt.nIt}NIt(t){this.iIt.nIt=!!t,this.RIt()}pTt(){return this.K_t}BIt(){return this.W_t}y_t(){return this.H_t}UIt(){return this.z_t}OMt(){return this.Q_t}PGt(){return this.tIt}yTt(){this.EGt(this.Z_t)}EGt(t){if(t=!!t,!this.K_t)throw new Error("not a group");if(this.tIt!==t){this.tIt=t;for(const t of this.sIt)t.VIt();if(this.sIt.length){const t=this.Nc.UJ().ret();t&&t.Oet()}}}H7(){return this.f8}sbt(){return this.j_t}r_t(){return this.$_t.length&&this.$_t[0].r_t()}WIt(){return this.L_t&&this.L_t instanceof Xy.NGt}EIt(){return this.WIt()||this.$_t.some(t=>t.r_t())}n_t(){return this.$_t}kbt(){return this.$_t.length}$Mt(t){if((t=Math.floor(t))<0||t>=this.$_t.length)throw new RangeError("invalid condition index");return this.$_t[t]}zIt(t){return this.$Mt(t)}jIt(t){let s=t.Ej();if(0===s)return!0;--s;const e=t.HIt()?t.JIt():t.yK();for(;s>=0;--s){const t=this.$_t[s];if(e===t.yK()||t.HIt()&&t.JIt()===e)return!1}return!0}$It(){return this.ddt}qIt(){return this.ddt.length}XMt(t){if((t=Math.floor(t))<0||t>=this.ddt.length)throw new RangeError("invalid action index");return this.ddt[t]}XIt(t){t=Math.floor(t);const s=this.ddt.find(s=>s.YIt()===t);if(!s)throw new RangeError("invalid action debug index");return s}KIt(t){return(t=Math.floor(t))>=0&&t<this.ddt.length}ZIt(){return this.q_t}QMt(){return this.q_t.filter(t=>t instanceof Xy.l_t)}F_t(t){t.xbt(this);const s=this.$_t;let e=0===s.length;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(t.Mbt(i),n.E0())throw new Error("trigger cannot be used as sub-event to a loop");if(n.IR())e=!0;else if(!this.j_t)return!1}return!this.j_t||e}A_t(t,s){t.xbt(this),t.Mbt(s),this.$_t[s].IR()&&(this.X_t(t,0)&&this.QIt(t),t._bt(!0))}*O_t(t){t.xbt(this);const s=this.$_t;let e=0===s.length;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(t.Mbt(i),n.E0())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.C_t()?n.IR():yield*n._Tt(),r)e=!0;else if(!this.j_t)return!1}return!this.j_t||e}*D_t(t,s){t.xbt(this),t.Mbt(s);const e=this.$_t[s];let i;if(i=e.C_t()?e.IR():yield*e._Tt(),i){let s;s=this.tCt()?this.X_t(t,0):yield*this.Y_t(t,0),s&&(this.sCt()?this.QIt():yield*this.eCt()),t._bt(!0)}}IR(t){t.xbt(this),this.H_t||t.Cbt(!1),this.j_t?this.iCt(t):this.nCt(t)}*_Tt(t){(this.LIt()||this.Nc.rCt())&&(yield this),t.xbt(this),this.H_t||t.Cbt(!1),this.j_t?yield*this.hCt(t):yield*this.oCt(t)}iCt(t){const s=this.$_t;let e=0===s.length;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(n.r_t())continue;t.Mbt(i);const r=n.IR();e=e||r}t._bt(e),e&&(this.X_t(t,0)&&this.QIt(t),this.z_t&&t.Cbt(!0))}*hCt(t){const s=this.$_t;let e=0===s.length;for(let i=0,n=s.length;i<n;++i){const n=s[i];if(n.r_t())continue;let r;t.Mbt(i),r=n.C_t()?n.IR():yield*n._Tt(),e=e||r}if(t._bt(e),e){let s;s=this.tCt()?this.X_t(t,0):yield*this.Y_t(t,0),s&&(this.sCt()?this.QIt():yield*this.eCt()),this.z_t&&t.Cbt(!0)}}nCt(t){const s=this.$_t;for(let e=0,i=s.length;e<i;++e){const i=s[e];if(t.Mbt(e),!i.IR())return void t._bt(!1)}t._bt(!0),this.X_t(t,0)&&this.QIt(t),t.Ibt()&&this.z_t&&t.Cbt(!0)}*oCt(t){const s=this.$_t;for(let e=0,i=s.length;e<i;++e){const i=s[e];let n;if(t.Mbt(e),n=i.C_t()?i.IR():yield*i._Tt(),!n)return void t._bt(!1)}let e;t._bt(!0),e=this.tCt()?this.X_t(t,0):yield*this.Y_t(t,0),e&&(this.sCt()?this.QIt():yield*this.eCt()),t.Ibt()&&this.z_t&&t.Cbt(!0)}GIt(t,s){const e=this.ddt;for(let i=s,n=e.length;i<n;++i){const s=e[i];t.Gbt(i),s.IR()}return!0}*_It(t,s){const e=this.ddt;for(let i=s,n=e.length;i<n;++i){const s=e[i];t.Gbt(i),s.C_t()?s.IR():yield*s._Tt()}return!0}MIt(t,s){const e=this.fH(),i=this.ddt;for(let n=s,r=i.length;n<r;++n){const s=i[n];t.Gbt(n);const r=s.IR();if(s.aCt()&&!0===r)return!1;s.lCt()&&r instanceof Promise&&e.nGt(r)}return!0}*TIt(t,s){const e=this.fH(),i=this.ddt;for(let n=s,r=i.length;n<r;++n){const s=i[n];let r;if(t.Gbt(n),r=s.C_t()?s.IR():yield*s._Tt(),s.aCt()&&!0===r)return!1;s.lCt()&&r instanceof Promise&&e.nGt(r)}return!0}uCt(t){this.X_t(t,t.Tbt())&&this.QIt()}*cCt(t){(yield*this.Y_t(t,t.Tbt()))&&(yield*this.eCt())}QIt(){if(!this.q_t.length)return;const t=this.pTt()&&this.Nc.T_t(),s=t?performance.now():0,e=this.Oxt,i=e.T3(this);this.V_t?this.fCt(i):this.dCt(i),e.D3(),t&&(this.XGt.YGt+=performance.now()-s)}fCt(t){const s=this.K_t,e=this.W_t,i=this.fH(),n=this.q_t;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.b3(),l=!e||!s&&r<o;l&&i.R3(a),h.IR(t),l?i.E3(a):i.WTt(a)}}dCt(t){const s=this.q_t;for(let e=0,i=s.length;e<i;++e)s[e].IR(t)}*eCt(){if(!this.q_t.length)return;const t=this.Oxt,s=t.T3(this);this.V_t?yield*this.pCt(s):yield*this.mCt(s),t.D3()}*pCt(t){const s=this.K_t,e=this.W_t,i=this.fH(),n=this.q_t;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.b3(),l=!e||!s&&r<o;l&&i.R3(a),yield*h._Tt(t),l?i.E3(a):i.WTt(a)}}*mCt(t){const s=this.q_t;for(let e=0,i=s.length;e<i;++e)yield*s[e]._Tt(t)}P3(t,s){s.vbt();const e=this.$_t;if(!this.sbt())for(let i=t.bbt()+1,n=e.length;i<n;++i){const t=e[i];if(s.Mbt(i),!t.IR())return!1}return this.X_t(s,0)&&this.QIt(s),!0}*gCt(t,s){s.vbt();const e=this.$_t;if(!this.sbt())for(let i=t.bbt()+1,n=e.length;i<n;++i){const t=e[i];let n;if(s.Mbt(i),n=t.C_t()?t.IR():yield*t._Tt(),!n)return!1}let i;return i=this.tCt()?this.X_t(s,0):yield*this.Y_t(s,0),i&&(this.sCt()?this.QIt():yield*this.eCt()),!0}C_t(){return!this.LIt()&&!this.Nc.rCt()&&this.iIt.lIt}tCt(){return!this.Nc.rCt()&&this.iIt.oIt}sCt(){return!this.Nc.rCt()&&this.iIt.aIt}yCt(t){if(this.cQ()){const s=this.E_t();for(let e=0,i=s.length;e<i;++e)if(!s[e].F_t(t))return!1}return!0}*SCt(t){if(this.cQ()){const s=this.E_t();for(let e=0,i=s.length;e<i;++e)if(!(yield*s[e].O_t(t)))return!1}return!0}wCt(t,s,e){if(s.length>0)if(e){const e=s.map(t=>t.Hs(0));t.YMt().T3(),this.L_t.vCt(e)}else this.L_t.xCt(s);else e&&t.YMt().T3()}bCt(t,s,e,i){let n,r;const h=t.length>0;let o=null;const a=this.Nc,l=this.Oxt,u=a.fH(),c=this.L_t,f=c.lCt(),d=u.BTt()>1;if(this.wCt(u,s,d),h&&(e?u.R3(t):u.jTt(t)),null!==i){if(i.MCt){const t=e?i.MCt.uX():i.MCt.zTt().Pxt(),s=i.TCt.uX();s.Xxt(t.lX()),s.Qxt(),e||i.TCt.GCt()}else if(i._Ct){const t=i._Ct.uX();t.Xxt(i.ICt),t.Qxt()}i.CCt&&(o=u.HTt(t))}const p=l.T3(this);return e&&p.Lbt(t),this.yCt(p)&&(p.xbt(this),f&&([r,n]=c.RCt()),this.nCt(p),f&&c.PCt(r)),l.D3(),d&&u.YMt().D3(),null!==o&&u.E3(o),h&&u.E3(t),u.UTt(),n}*ECt(t,s,e,i){let n,r;(this.LIt()||this.Nc.rCt())&&(yield this);const h=t.length>0;let o=null;const a=this.Nc,l=this.Oxt,u=a.fH(),c=this.L_t,f=c.lCt(),d=u.BTt()>1;if(this.wCt(u,s,d),h&&(e?u.R3(t):u.jTt(t)),null!==i){if(i.MCt){const t=e?i.MCt.uX():i.MCt.zTt().Pxt(),s=i.TCt.uX();s.Xxt(t.lX()),s.Qxt(),e||i.TCt.GCt()}else if(i._Ct){const t=i._Ct.uX();t.Xxt(i.ICt),t.Qxt()}i.CCt&&(o=u.HTt(t))}const p=l.T3(this);return e&&p.Lbt(t),(yield*this.SCt(p))&&(p.xbt(this),f&&([r,n]=c.RCt()),yield*this.oCt(p),f&&c.PCt(r)),l.D3(),d&&u.YMt().D3(),null!==o&&u.E3(o),h&&u.E3(t),u.UTt(),n}FCt(t,s){const e=this.yH(),i=e.length>0,n=this.Nc,r=this.Oxt,h=n.fH(),o=h.BTt()>1;o&&h.YMt().T3(),this.L_t.vCt(t),i&&(s?h.R3(e):h.jTt(e));const a=r.T3(this);this.yCt(a)&&(a.xbt(this),this.nCt(a)),r.D3(),o&&h.YMt().D3(),i&&h.E3(e),h.UTt()}*ACt(t,s){(this.LIt()||this.Nc.rCt())&&(yield this);const e=this.yH(),i=e.length>0,n=this.Nc,r=this.Oxt,h=n.fH(),o=h.BTt()>1;o&&h.YMt().T3(),this.L_t.vCt(t),i&&(s?h.R3(e):h.jTt(e));const a=r.T3(this);(yield*this.SCt(a))&&(a.xbt(this),yield*this.oCt(a)),r.D3(),o&&h.YMt().D3(),i&&h.E3(e),h.UTt()}vH(t,s,e,i,...n){let r,h;const o=t.length>0,a=this.Nc,l=this.Oxt,u=a.fH(),c=this.L_t,f=c.lCt(),d=u.BTt()>1;d&&u.YMt().T3(),n.length>0&&this.L_t.vCt(n),o&&(s?u.R3(t):u.jTt(t));const p=l.T3(this);return p.Fbt(e,i),l.abt(p),a.I3(!1),this.yCt(p)&&(p.xbt(this),f&&([h,r]=c.RCt()),this.nCt(p),f&&c.PCt(h)),a.I3(!0),l.D3(),l.lbt(),d&&u.YMt().D3(),o&&u.E3(t),u.UTt(),r||p.Abt()}}}{const Zy=self._s,Qy=[];let tS=!1;Zy.c_t=class extends Zy.Wn{constructor(t,s,e){super();const i=t.m$(),n=t.fH();this.Tst=t,this.ibt=n,this.Nc=t.m$(),this.k_t=s;const r=i.OCt(e[1]);this.DCt=r,this.eIt=e[2],this.Tst.b_t(this,this.eIt),this.iIt=i.aZ()?{nIt:e[3][0],rIt:e[3][1]}:null}static e_(t,s,e){return Zy.jn(Zy.c_t,t,s,e)}EMt(){const t=this.DCt,s=this.Nc.fH().tTt(this);this.DCt=t.bind(null,this.Nc.Mq(),s)}cQ(){return this.k_t}ZMt(){return this.k_t}ret(){return this.Tst}DIt(){return this.eIt}kIt(){return this.iIt&&this.iIt.rIt}LIt(){return this.kIt()&&this.iIt.nIt}NIt(t){this.iIt.nIt=!!t}y_t(){return!1}b3(){return Qy}yH(){return this.k_t?this.k_t.yH():Qy}IR(t){t.xbt(this),this.ibt.nGt(this.kCt())}async kCt(){try{await this.DCt()}catch(t){console.error(`Unhandled exception running script %c${this.ret().Rc()}, event ${this.DIt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.lZ&&self.lZ.LCt(this),tS||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),tS=!0)}}*_Tt(t){t.xbt(this),(this.LIt()||this.Nc.rCt())&&(yield this),this.IR(t)}C_t(){return!this.LIt()&&!this.Nc.rCt()}static NCt(){return tS}static BCt(){tS=!0}}}{const sS=self._s;self.assert;sS.NGt=class extends sS.Wn{constructor(t,s,e){super(),this.Tst=t,this.Nc=t.m$(),this.k_t=s,this.UCt=0,this.VCt="",this.WCt=0,this.zCt=[],this.jCt=!0,this.HCt="",this._xt=null,this.JCt=!1,this.$Ct=[],this.qCt=!1,this.XCt=!1,this.YCt=0,this.KCt=-1,this.ZCt=new Map,this.QCt=sS.i_t.e_(t,s,e),this.QCt.OIt(this)}tRt(t){this.UCt=0,this.VCt=t[0],this.WCt=t[1],this.zCt=t[2].map(t=>sS.l_t.e_(this.Tst,this,t)),this.jCt=t[3],this.XCt=t[4],this.qCt=t[5]}sRt(t){this.UCt=1,this.HCt=t[1],this._xt=this.Nc.m7(t[2]),this.QCt.fIt(this._xt),this.VCt=this._xt.Rc()+"."+this.HCt,this.WCt=t[3],this.zCt=t[4].map(t=>sS.l_t.e_(this.Tst,this,t)),this.jCt=t[5],this.XCt=t[6],this.qCt=t[7],this._xt.eRt(this)}static o_t(t,s,e){const i=sS.jn(sS.NGt,t,s,e),n=e[1];return i.tRt(n),i}static a_t(t,s,e){const i=sS.jn(sS.NGt,t,s,e),n=e[1];return i.sRt(n),i}FMt(){if(this._xt&&this._xt.N7())for(const t of this._xt.RX())if(t.iRt(this.HCt)){this.JCt=!0;break}}EMt(){for(const t of this.zCt)t.EMt();this.QCt.EMt(!1)}BMt(){return this.UCt}QMt(){return this.zCt}BGt(){return this.zCt}mH(){return this.zCt.length}nRt(t){this.$Ct.push(t)}rRt(){return this.$Ct}xCt(t){const s=this.zCt;for(let e=0,i=s.length;e<i;++e)s[e].yft(t[e].Hs(0))}vCt(t){const s=this.zCt;for(let e=0,i=s.length;e<i;++e)s[e].yft(t[e])}hRt(){return this.zCt.map(t=>t.Dct())}cQ(){return this.k_t}ZMt(){return this.k_t}UMt(){return this.VCt}oRt(){return this.HCt}aRt(){return this.JCt}bH(){return this.WCt}yK(){return this._xt}_u(){return this.jCt}pH(){switch(this.WCt){case 0:return null;case 2:return"";default:return 0}}gH(){return this.QCt}xH(){return this.qCt}lCt(){return this.XCt}RCt(){const t=this.YCt++;let s;this.KCt=t;const e=new Promise(t=>s=t);return this.ZCt.set(t,{resolve:s,lRt:0}),[t,e]}PCt(t){const s=this.ZCt.get(t);0===s.lRt&&(s.resolve(),this.ZCt.delete(t)),this.KCt=-1}uRt(){return this.ZCt.get(this.KCt).lRt++,this.KCt}cRt(t){this.KCt=t,this.ZCt.get(t).lRt--}fRt(t,s){const e=new Map,i=[];for(const t of this._xt.uX().lX()){const s=t.yK();if(s.iRt(this.HCt)){const i=e.get(s);Array.isArray(i)?i.push(t):e.set(s,[t])}else i.push(t)}if(i.length>0&&this.QCt.bCt(t,s,this.qCt,{_Ct:this._xt,ICt:i}),e.size>0)for(const[i,n]of e){const e=i.dRt(this.HCt).gH(),r=[...new Set([...t,...e.b3()])];e.bCt(r,s,this.qCt,{_Ct:i,ICt:n})}}*pRt(t,s){const e=new Map,i=[];for(const t of this._xt.uX().lX()){const s=t.yK();if(s.iRt(this.HCt)){const i=e.get(s);Array.isArray(i)?i.push(t):e.set(s,[t])}else i.push(t)}if(i.length>0&&(yield*this.QCt.ECt(t,s,this.qCt,{_Ct:this._xt,ICt:i})),e.size>0)for(const[i,n]of e){const e=i.dRt(this.HCt).gH(),r=[...new Set([...t,...e.b3()])];yield*e.ECt(r,s,this.qCt,{_Ct:i,ICt:n})}}}}{const eS=self._s,iS=[];eS.l_t=class extends eS.Wn{constructor(t,s,e){super();const i=t.fH();this.Tst=t,this.ibt=i,this.Nc=t.m$(),this.k_t=s,this.gMt=i.YMt(),this.qn=e[1],this.Jc=e[2],this.mRt=e[3],this.PT=!!e[4],this.gRt=!!e[5],this.yRt=s instanceof eS.NGt,this.f8=e[6],this.SRt=this.Nc.sTt(e[8]),this.wRt=t=>this.yft(t),this.vRt=()=>this.xRt(),this.bRt=!this.k_t||this.PT||this.gRt,this.ldt=this.mRt,this.MRt=-1,this.TRt()&&(this.ldt=this.ldt?1:0),!this.GRt()||this.nG()||this.FGt()||(this.MRt=i.zMt(this)),i.VMt(this)}static e_(t,s,e){return eS.jn(eS.l_t,t,s,e)}EMt(){if(this.GRt()&&!this.nG()&&!this.FGt()&&!this._Rt()){const t=this.ibt.LGt(this);t&&t.nRt(this)}}Rc(){return this.qn}sTt(){return this.SRt}cQ(){return this.k_t}ZMt(){return this.cQ()}h8(){return!this.cQ()}GRt(){return!this.h8()}_Rt(){return this.yRt}nG(){return this.PT}FGt(){return this.gRt}Xe(){return 0===this.Jc}ri(){return 1===this.Jc}TRt(){return 2===this.Jc}y_t(){return!1}H7(){return this.f8}jMt(){return this.mRt}b3(){return iS}IR(t){!this.GRt()||this.nG()||this.FGt()||this.yft(this.jMt())}C_t(){return!0}*_Tt(t){this.IR(t)}yft(t){this.Xe()?"number"!=typeof t&&(t=parseFloat(t)):this.ri()?"string"!=typeof t&&(t=t.toString()):this.TRt()&&(t=t?1:0),this.bRt?this.ldt=t:this.gMt.Wbt()[this.MRt]=t}Dct(){return this.bRt?this.ldt:this.gMt.Wbt()[this.MRt]}xRt(){let t=this.Dct();return this.TRt()&&(t=!!t),t}cTt(){this.ldt=this.mRt}eTt(){return{configurable:!1,enumerable:!0,get:this.vRt,set:this.wRt}}}}{const nS=self._s,rS=(self.assert,[]);nS.u_t=class extends nS.Wn{constructor(t,s,e){super();const i=t.fH();this.Tst=t,this.ibt=i,this.Nc=t.m$(),this.k_t=s,this.IRt=null,this.CRt=e[1],this.Nf=!0}static e_(t,s,e){return nS.jn(nS.u_t,t,s,e)}EMt(){this.IRt=this.ibt.Aet(this.CRt),this.Tst.S_t(this);let t=this.cQ();for(;t;)t instanceof nS.i_t&&t.pTt()&&t.mIt(this),t=t.cQ();this.VIt(),this.Nc.aZ()&&this.Tst.kGt().children.push(this.IRt.kGt())}cQ(){return this.k_t}b3(){return rS}v_t(){return this.IRt}IR(t){const s=!!this.cQ(),e=this.Nc.L7();s&&this.ibt.jTt(e),this.IRt.IR(),s&&this.ibt.E3(e)}*_Tt(t){const s=!!this.cQ(),e=this.Nc.L7();s&&this.ibt.jTt(e),yield*this.IRt._Tt(),s&&this.ibt.E3(e)}C_t(){return!1}x_t(){return this.Nf}VIt(){let t=this.cQ();for(;t;){if(t instanceof nS.i_t&&t.pTt()&&!t.PGt())return void(this.Nf=!1);t=t.cQ()}this.Nf=!0}}}{let hS=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};0;const oS=self._s;self.assert;oS.RRt=class extends oS.Wn{constructor(t){super(),this.OM=t,this.Nc=t.m$()}EMt(){}static PRt(t,s){const e=s[0],i=[fS,uS,cS,dS,aS,lS];return oS.jn(i[e],t,s)}};class aS extends oS.RRt{constructor(t,s){super(t),this.ERt=this.Nc.Y5(),this.DCt=this.Nc.OCt(s[1]),this.DCt!==oS.a$.o$._dt.random&&this.DCt!==oS.a$.o$._dt.FRt||this.OM.ARt()}ORt(){return this.ERt.DRt(this.DCt,this.ERt)}}class lS extends oS.RRt{constructor(t,s){super(t),this.kRt=null,this.VCt=s[1],this.OM.ARt()}EMt(){const t=this.Nc.fH();this.kRt=t.dH(this.VCt),this.VCt=null;const s=this.OM.gH(),e=this.kRt.gH();this.LRt=[...new Set([...s.yH(),...e.yH()])],this.LRt=t.WMt(this.LRt)}ORt(){const t=this.kRt;if(t._u()){const s=t.gH();return oS.i_t.prototype.vH.bind(s,this.LRt,t.xH(),t.bH(),t.pH())}{const s=t.pH();return()=>s}}}class uS extends oS.RRt{constructor(t,s){super(t),this._xt=this.Nc.m7(s[1]),this.DCt=this.Nc.OCt(s[2]),this.NRt=!!s[3],this.Oxt=this.Nc.fH().GH(),this.OM.BRt(this._xt)}ORt(){return this._xt.Zq().DRt(this.DCt,this._xt.Xq().o0())}URt(...t){const s=this._xt,e=s.uX().Wxt(),i=e.length;if(0===i)return this.NRt?"":0;const n=hS(this.OM.VRt(),i);return this.Oxt.M3().Pbt(s),this.DCt.apply(e[n].o0(),t)}WRt(t,...s){const e=this._xt,i=e.lX(),n=i.length;if(0===n||"number"!=typeof t)return this.NRt?"":0;const r=hS(t,n);return this.Oxt.M3().Pbt(e),this.DCt.apply(i[r].o0(),s)}}class cS extends oS.RRt{constructor(t,s){super(t),this._xt=this.Nc.m7(s[1]),this.zRt=s[3],this.NRt=!!s[2],this.OM.BRt(this._xt)}jRt(){const t=this._xt.uX().Wxt(),s=t.length;return 0===s?this.NRt?"":0:t[hS(this.OM.VRt(),s)].HRt(this.zRt)}JRt(){const t=this._xt,s=t.uX().Wxt(),e=s.length;if(0===e)return this.NRt?"":0;const i=s[hS(this.OM.VRt(),e)],n=i.yK().$Rt(t.qRt());return i.HRt(this.zRt+n)}XRt(t){const s=this._xt,e=s.lX(),i=e.length;if(0===i||"number"!=typeof t)return this.NRt?"":0;const n=e[hS(t,i)];let r=0;return s.N7()&&(r=n.yK().$Rt(s.qRt())),n.HRt(this.zRt+r)}}class fS extends oS.RRt{constructor(t,s){super(t),this._xt=this.Nc.m7(s[1]),this.YRt=this._xt.Vft(s[2]),this.KRt=this._xt.aut(s[2]),this.DCt=this.Nc.OCt(s[3]),this.NRt=!!s[4],this.Oxt=this.Nc.fH().GH(),this.OM.BRt(this._xt)}ZRt(...t){const s=this._xt,e=s.uX().Wxt(),i=e.length;if(0===i)return this.NRt?"":0;const n=hS(this.OM.VRt(),i);this.Oxt.M3().Pbt(s);const r=e[n];let h=0;return s.N7()&&(h=r.yK().QRt(s.qRt())),this.DCt.apply(r.Uft()[this.KRt+h].o0(),t)}tPt(t,...s){const e=this._xt,i=e.lX(),n=i.length;if(0===n||"number"!=typeof t)return this.NRt?"":0;const r=hS(t,n);this.Oxt.M3().Pbt(e);const h=i[r];let o=0;return e.N7()&&(o=h.yK().QRt(e.qRt())),this.DCt.apply(h.Uft()[this.KRt+o].o0(),s)}}class dS extends oS.RRt{constructor(t,s){super(t),this.sPt=null,this.ePt=s[1]}EMt(){this.sPt=this.Nc.fH().iTt(this.ePt)}iPt(){return this.sPt}}}{let pS=function(t){const s=self.nPt[t];if(!s)throw new Error("invalid expression number");return s};0;const mS=self._s;self.assert;mS.rPt=class extends mS.Wn{constructor(t,s,e){super(),this.OM=t,this.US=e,this.Jc=s,this.Hs=null,this.hPt=!1,this.gRt=!1}static e_(t,s,e){const i=s[0],n=[gS,yS,TS,wS,xS,SS,bS,gS,wS,wS,GS,_S,TS,CS,yS,MS,vS,IS,RS,PS,ES,FS];return mS.jn(n[i],t,i,e,s)}EMt(){}ARt(){this.hPt=!0}BRt(t){this.hPt||t&&(t.Zq()._q()||(this.hPt=!0))}oPt(){return this.hPt}Ej(){return this.US}m$(){return this.OM.m$()}gH(){return this.OM.gH()}FGt(){return this.gRt}aPt(){return 4===this.Jc}};class gS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.lPt=0;const n=i[1];this.uPt=n[0],this.cPt=[],this.fPt=null;for(let t=1,s=n.length;t<s;++t)this.cPt.push(mS.RRt.PRt(this,n[t]));this.cPt.length?this.Hs=this.dPt:(this.Hs=pS(this.uPt),this.gRt=!0)}pPt(t){if(t<0||t>=this.cPt.length)throw new RangeError("invalid numbered node");return this.cPt[t]}EMt(){for(const t of this.cPt)t.EMt();const t=pS(this.uPt);this.cPt.length?this.fPt=t(this):this.fPt=t}VRt(){return this.lPt}dPt(t){return this.lPt=t,this.fPt()}}class yS extends gS{constructor(t,s,e,i){super(t,s,e,i),this.Hs=this.mPt,14===s&&(this.gH().wIt(),this.OM instanceof mS.dIt&&this.gH().FIt())}mPt(t){this.lPt=t;const s=this.fPt();return"string"==typeof s?s:""}gPt(){return pS(this.uPt)()}}class SS extends gS{constructor(t,s,e,i){super(t,s,e,i),t.yPt()>=2?this.Hs=this.XX:this.Hs=this.zJ,this.gRt=!1}zJ(t){this.lPt=t;const s=this.fPt();return this.m$().UJ().zJ(s)}XX(t){const s=this.zJ(t);return s?s.XX():null}}class wS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.SPt=i[1],this.Hs=this.wPt,this.gRt=!0}wPt(){return this.SPt}}class vS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.vPt=i[1],this.Hs=this.xPt,this.gRt=!0}xPt(){return this.vPt}}class xS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this._xt=this.m$().m7(i[1]),t.yPt()>=2?this.Hs=this.Jq:this.Hs=this.yK;const n=this.gH();n.fIt(this._xt),this.OM instanceof mS.dIt?n.FIt():n.cQ()&&n.cQ().FIt(),this.gRt=!0}yK(){return this._xt}Jq(){return this._xt?this._xt.Jq():null}}class bS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.a8=this.m$().xJ().Dit(i[1]),t.yPt()>=2?this.Hs=this.wJ:this.Hs=this.bJ,this.gRt=!0}bJ(){return this.a8}wJ(){return this.a8?this.a8.wJ():null}}class MS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.Urt=this.m$().Hot().qnt(i[1]),t.yPt()>=2?this.Hs=this._lt:this.Hs=this.$lt,this.gRt=!0}$lt(){return this.Urt}_lt(){return this.Urt?this.Urt._lt():null}}class TS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.bPt=i[1],this.Hs=this.MPt,this.gRt=!0}MPt(){return this.bPt}}class GS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.TPt=i[1];const n=this.OM.yK();this.OM instanceof mS.cIt&&this.OM.nG()?(this.Hs=this.GPt,this.gRt=!0):n&&n.N7()?(this.Hs=this._Pt,this.ARt()):(this.Hs=this.GPt,this.gRt=!0)}GPt(){return this.TPt}_Pt(t){t=t||0;const s=this.OM.yK(),e=s.uX(),i=e.lX();let n=null;if(i.length)n=i[t%i.length].yK();else if(e.Uxt()){const s=e.Vxt();n=s[t%s.length].yK()}else{if(!(s.dX()>0))return 0;{const e=s.lX();n=e[t%e.length].yK()}}return this.TPt+n.$Rt(s.qRt())}}class _S extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.ePt=i[1],this.sPt=null,t.yPt()>=2?this.Hs=this.IPt:this.Hs=this.CPt,this.gRt=!0}EMt(){this.sPt=this.m$().fH().iTt(this.ePt)}CPt(){return this.sPt}IPt(){return null}}class IS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.RPt=i[1],this.kRt=null,t.yPt()>=2?this.Hs=this.PPt:this.Hs=this.EPt,this.gRt=!0}EMt(){this.kRt=this.m$().fH().dH(this.RPt),this.RPt=null}EPt(){return this.kRt}PPt(){return null}}class CS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.FPt=[],this.APt=[],this.gRt=!0;for(let t=1,s=i.length;t<s;++t){const s=mS.rPt.e_(this.OM,i[t],0);this.FPt.push(s),this.APt.push(0),s.FGt()||(this.gRt=!1)}this.Hs=this.OPt}EMt(){for(const t of this.FPt)t.EMt()}OPt(){const t=this.FPt,s=this.APt;for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0);return s}}class RS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.DPt=i[1],this.Hs=this.gft,this.gRt=!0}gft(){return this.DPt}}class PS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.kPt=i[1],this.Hs=this.LPt,this.gRt=!0}LPt(){return this.kPt}}class ES extends gS{constructor(t,s,e,i){super(t,s,e,i),this.Hs=this.DK,this.gRt=!1}DK(){return this.fPt()}}class FS extends mS.rPt{constructor(t,s,e,i){super(t,s,e),this.VSt=this.m$().rwt().DSt(i[1]),this.Hs=this.NPt,this.gRt=!0}NPt(){return this.VSt.Rc()}}}{let AS=function(t,s){for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0)};0;const OS=self._s,DS=(self.assert,[]),kS=function(){};OS.cIt=class extends OS.Wn{constructor(t,s,e){if(super(),this.QCt=t,this.Nc=t.m$(),this.US=e,this.DCt=this.Nc.OCt(s[1]),this.BPt=s[3]>0,this.UPt=2===s[3],this.VPt=!!s[4],this.WPt=!!s[5],this.PT=!!s[6],this.f8=s[7],this.zPt=this.QCt.sbt(),this._xt=null,this.YRt=null,this.KRt=-1,this.ERt=null,this.IR=kS,this._Tt=kS,this.Us=[],this.jPt=[],this.HPt=!1,this.JPt=null,this.$Pt=null,this.iIt=this.Nc.aZ()?{nIt:s[8][0],qPt:s[8][1]}:null,-1===s[0]?this.ERt=this.Nc.Y5():(this._xt=this.Nc.m7(s[0]),s[2]&&(this.YRt=this._xt.Vft(s[2]),this.KRt=this._xt.aut(s[2])),this.QCt.cQ()&&this.QCt.cQ().FIt()),10===s.length){let t=s[9];for(let s of t)this.Us.push(OS.rPt.e_(this,s,this.Us.length)),this.jPt.push(0)}0===this.Us.length&&(this.Us=DS,this.jPt=DS),this.QCt.fH().kMt(this)}static e_(t,s,e){return OS.jn(OS.cIt,t,s,e)}EMt(){for(const t of this.Us)t.EMt(),t.oPt()&&(this.HPt=!0);this.UPt?(this.IR=this.XPt,this._Tt=this.YPt):this.ERt?(this.KPt(),this._Tt=this.ZPt):this._xt.Zq()._q()?(this.QPt(),this._Tt=this.tEt):this.PT?(this.IR=this.sEt,this._Tt=this.eEt):(this.IR=this.iEt,this._Tt=this.nEt)}KPt(){const t=this.ERt,s=this.ERt;this.rEt(t,s,this.hEt)}QPt(){const t=this._xt.Zq(),s=this._xt.Xq().o0();this.rEt(t,s,this.oEt)}rEt(t,s,e){const i=this.DCt,n=this.WPt,r=this.Us;if(0===r.length){const e=t.DRt(i,s);this.IR=n?function(){return OS.xor(e(),n)}:e}else if(1===r.length){const e=r[0];if(!n&&e.FGt())this.IR=t.aEt(i,s,e.Hs(0));else{const r=t.DRt(i,s);this.IR=function(){return OS.xor(r(e.Hs(0)),n)}}}else if(2===r.length){const e=r[0],h=r[1];if(!n&&e.FGt()&&h.FGt())this.IR=t.lEt(i,s,e.Hs(0),h.Hs(0));else{const r=t.DRt(i,s);this.IR=function(){return OS.xor(r(e.Hs(0),h.Hs(0)),n)}}}else if(3===r.length){const e=r[0],h=r[1],o=r[2];if(!n&&e.FGt()&&h.FGt()&&o.FGt())this.IR=t.uEt(i,s,e.Hs(0),h.Hs(0),o.Hs(0));else{const r=t.DRt(i,s);this.IR=function(){return OS.xor(r(e.Hs(0),h.Hs(0),o.Hs(0)),n)}}}else this.IR=e}H7(){return this.f8}f_t(){return this.DCt}yK(){return this._xt}y0(){return this.YRt}cEt(){return this.YRt?this.YRt.p0():this._xt?this._xt.Zq():null}yPt(){const t=this.cEt();return t?t.fEt():1}gH(){return this.QCt}m$(){return this.Nc}Ej(){return this.US}YIt(){return this.Ej()}r_t(){return this.BPt}d_t(){return this.UPt}dEt(){return this.WPt}E0(){return this.VPt}nG(){return this.PT}pEt(){return this.iIt.nIt}mEt(){return!!this.ERt}HIt(){return this.mEt()||this._xt.Zq()._q()}JIt(){for(const t of this.Us)if(t.aPt())return t.yK();return null}gEt(t){this.iIt.nIt=!!t,this.QCt.RIt()}yEt(){return this.iIt.qPt}C_t(){return!this.pEt()&&!this.Nc.rCt()&&!this.yEt()}SEt(){return this.JPt||(this.JPt=new Map),this.JPt}wEt(){return this.$Pt||(this.$Pt=new Map),this.$Pt}hEt(){const t=this.jPt;return AS(this.Us,t),OS.xor(this.DCt.apply(this.ERt,t),this.WPt)}*ZPt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.jPt;AS(this.Us,t);let s=this.DCt.apply(this.ERt,t);return OS.xo(s)&&(s=yield*s),OS.xor(s,this.WPt)}return this.IR()}oEt(){const t=this.jPt;AS(this.Us,t);const s=this._xt.Xq().o0();return OS.xor(this.DCt.apply(s,t),this.WPt)}*tEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.jPt;AS(this.Us,t);const s=this._xt.Xq().o0();let e=this.DCt.apply(s,t);return OS.xo(e)&&(e=yield*e),OS.xor(e,this.WPt)}return this.IR()}XPt(){return!0}*YPt(){return(this.pEt()||this.Nc.rCt())&&(yield this),!0}vEt(){return this.YRt?this.YRt.p0().fEt()>=2?this.YRt.g0():this.YRt:this._xt.Zq().fEt()>=2?this._xt.Jq():this._xt}sEt(){const t=this.jPt;AS(this.Us,t);const s=this.DCt.apply(this.vEt(),t);return this._xt.GCt(),s}*eEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.jPt;AS(this.Us,t);let s=this.DCt.apply(this.vEt(),t);return OS.xo(s)&&(s=yield*s),this._xt.GCt(),s}return this.IR()}iEt(){const t=this.Us,s=this.jPt,e=this._xt.uX();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.oPt()||(s[e]=i.Hs(0))}return e.Nxt()?this.xEt(e):this.bEt(e)}*nEt(){return(this.pEt()||this.Nc.rCt())&&(yield this),this.iEt()}MEt(t){const s=this.Us,e=this.jPt;for(let i=0,n=s.length;i<n;++i){const n=s[i];n.oPt()&&(e[i]=n.Hs(t))}}xEt(t){const s=this._xt,e=s.N7(),i=s.qRt(),n=this.KRt,r=n>=0,h=s.lX(),o=this.HPt,a=this.jPt,l=this.DCt,u=this.WPt,c=this.zPt&&!this.BPt;t.Lxt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.MEt(s),r){const t=e?f.yK().QRt(i):0;d=l.apply(f.Uft()[n+t].o0(),a)}else d=l.apply(f.o0(),a);OS.xor(d,u)?t.zxt(f):c&&t.jxt(f)}return s.TEt(!0),t.Hxt(!1),s.GCt(),t.Bxt()}bEt(t){const s=this._xt,e=s.N7(),i=s.qRt(),n=s.CK(),r=this.KRt,h=r>=0,o=this.HPt,a=this.jPt,l=this.DCt,u=this.WPt,c=this.zPt&&!this.BPt,f=t.Jxt(),d=t.$xt(),p=c&&!this.QCt.jIt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let S;if(o&&this.MEt(t),h){const t=e?s.yK().QRt(i):0;S=l.apply(s.Uft()[r+t].o0(),a)}else S=l.apply(s.o0(),a);OS.xor(S,u)?(y=!0,p?(f.push(s),n&&s.GEt()):(m[g]=s,n&&s._Et(g),++g)):p?(m[g]=s,n&&s.IEt(g),++g):c&&(d.push(s),n&&s.CEt())}OS.Sh(m,g),n&&s.REt(p,g);const S=y;return p&&!y&&(y=this.PEt(f)),s.TEt(S||c),c?y:t.Bxt()}PEt(t){const s=this._xt,e=s.N7(),i=s.qRt(),n=this.HPt,r=this.KRt,h=r>=0,o=this.jPt,a=this.DCt,l=this.WPt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.MEt(s),h){const t=e?u.yK().QRt(i):0;c=a.apply(u.Uft()[r+t].o0(),o)}else c=a.apply(u.o0(),o);if(OS.xor(c,l))return!0}return!1}EEt(t,s){return this.Us[t].Hs(s)}p_t(){const t=this.Us;if(!t.length)throw new Error("no parameters");return t[0].gPt()}ust(){if(!this.JPt||!this.JPt.size)return null;const t={};for(const[s,e]of this.JPt.entries()){let i=e;"collmemory"===s&&(i=[...e.entries()].map(t=>[t[0].PK(),t[1].PK(),t[2]])),t[s]=i}return{ex:t}}cst(t){if(this.JPt&&(this.JPt.clear(),this.JPt=null),!t)return;const s=this.Nc,e=t.ex;if(e){const t=this.SEt();t.clear();for(const[i,n]of Object.entries(e)){let e=n;"collmemory"===i&&(e=OS.jn(OS.Iu,n.map(t=>[s.LJ(t[0]),s.LJ(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(i,e)}}}}}{let LS=function(t,s){for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(0)};0;const NS=self._s,BS=(self.assert,[]),US=function(){},VS=function*(){};NS.dIt=class extends NS.Wn{constructor(t,s,e){super(),this.QCt=t;const i=t.m$();this.Nc=i,this.US=e,this.f8=s.length>=4?s[3]:-1,this.FEt=s.length>=5?255&s[4]:0,this.KD=s.length>=5?s[4]>>8:0,this.DCt=null,this._xt=null,this.YRt=null,this.KRt=-1,this.ERt=null,this.AEt="",this.OEt=null,this.DEt=null,this.IR=US,this._Tt=US,this.Us=[],this.jPt=[],this.HPt=!1,this.JPt=null,this.$Pt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.iIt=i.aZ()||n?{nIt:r[0],qPt:r[1],index:r[2]}:null,-1===s[0])this.ERt=i.Y5(),this.DCt=i.OCt(s[1]);else if(-2===s[0])this.AEt=s[1];else if(n){const t=i.OCt(s[1]);this.DCt=t,this.IR=this.kEt,this._Tt=this.LEt,this.KD|=8}else this._xt=i.m7(s[0]),4&this.KD?(this.AEt=s[1],this.OEt=i.m7(s[2])):(s[2]&&(this.YRt=this._xt.Vft(s[2]),this.KRt=this._xt.aut(s[2])),this.DCt=i.OCt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Us.push(NS.rPt.e_(this,s,this.Us.length)),this.jPt.push(0)}0===this.Us.length&&(this.Us=BS,this.jPt=BS),this.NEt()&&(this.QCt.wIt(),this.QCt.FIt()),this.QCt.fH().LMt(this)}static e_(t,s,e){return NS.jn(NS.dIt,t,s,e)}EMt(){for(const t of this.Us)t.EMt(),t.oPt()&&(this.HPt=!0);if(this.ERt)this.KPt(),this._Tt=this.ZPt;else if(this.AEt)4&this.KD?this.BEt():this.UEt(),this.AEt="",this.OEt=null;else if(this.IR===this.kEt){const t=this.DCt,s=this.Nc.fH().tTt(this.QCt);this.DCt=t.bind(null,this.Nc.Mq(),s)}else this.YRt?this.lCt()?(this.IR=this.VEt,this._Tt=this.WEt):(this.IR=this.zEt,this._Tt=this.jEt):this._xt.Zq()._q()?(this.QPt(),this._Tt=this.tEt):this.nG()?(this.IR=this.HEt,this._Tt=this.JEt):this.lCt()?(this.IR=this.$Et,this._Tt=this.qEt):this.XEt()?(this.IR=this.YEt,this._Tt=this.KEt):this.Us.length?this.Us.every(t=>t.oPt())?(this.IR=this.ZEt,this._Tt=this.QEt):this.HPt?(this.IR=this.tFt,this._Tt=this.sFt):this.Us.every(t=>t.FGt())?(LS(this.Us,this.jPt),this.IR=this.eFt,this._Tt=this.iFt):(this.IR=this.nFt,this._Tt=this.rFt):(this.IR=this.eFt,this._Tt=this.iFt)}KPt(){const t=this.ERt,s=this.ERt;this.rEt(t,s,this.hEt)}QPt(){const t=this._xt.Zq(),s=this._xt.Xq().o0();this.rEt(t,s,this.oEt)}UEt(){const t=this.QCt.fH(),s=t.dH(this.AEt);if(s._u()){const e=!!(2&this.KD);this.DEt=s.gH();let i=[...new Set([...this.QCt.yH(),...this.DEt.yH()])];i=t.WMt(i);const n=!s.xH()&&this.hFt()?{CCt:!0}:null;if(this.IR=NS.i_t.prototype.bCt.bind(this.DEt,i,this.Us,e,n),this.Nc.aZ()){const t=this;this._Tt=function*(){return(t.pEt()||t.Nc.rCt())&&(yield t),yield*t.DEt.ECt(i,t.Us,e,n)}}else this._Tt=VS}else this.IR=US,this._Tt=VS}BEt(){const t=this.QCt.fH(),s=t.oTt(this.OEt,this.AEt);if(s._u()){const e=!!(2&this.KD);this.DEt=s.gH();let i=[...new Set([...this.QCt.yH(),...this.DEt.yH(),this._xt,s.yK()])];i=t.WMt(i);const n=!this._xt.N7()&&!s.yK().N7(),r=!this._xt.N7()&&s.yK().N7(),h=this._xt.N7();let o=null;if(!s.xH()&&this.hFt()&&(o=o||{},o.CCt=!0),!r&&e||(o=o||{},o.MCt=this._xt,o.TCt=s.yK()),n||r||h&&!s.aRt()?this.IR=NS.i_t.prototype.bCt.bind(this.DEt,i,this.Us,e,o):h&&(this.IR=NS.NGt.prototype.fRt.bind(s,i,this.Us)),this.Nc.aZ()){const t=this;n||r||h&&!s.aRt()?this._Tt=function*(){return(t.pEt()||t.Nc.rCt())&&(yield t),yield*t.DEt.ECt(i,t.Us,e,o)}:h&&(this._Tt=function*(){return(t.pEt()||t.Nc.rCt())&&(yield t),yield*s.pRt(i,t.Us)})}else this._Tt=VS}else this.IR=US,this._Tt=VS}rEt(t,s,e){const i=this.DCt,n=this.Us;if(0===n.length)this.IR=t.DRt(i,s);else if(1===n.length){const e=n[0];if(e.FGt())this.IR=t.aEt(i,s,e.Hs(0));else{const n=t.DRt(i,s);this.IR=function(){return n(e.Hs(0))}}}else if(2===n.length){const e=n[0],r=n[1];if(e.FGt()&&r.FGt())this.IR=t.lEt(i,s,e.Hs(0),r.Hs(0));else{const n=t.DRt(i,s);this.IR=function(){return n(e.Hs(0),r.Hs(0))}}}else if(3===n.length){const e=n[0],r=n[1],h=n[2];if(e.FGt()&&r.FGt()&&h.FGt())this.IR=t.uEt(i,s,e.Hs(0),r.Hs(0),h.Hs(0));else{const n=t.DRt(i,s);this.IR=function(){return n(e.Hs(0),r.Hs(0),h.Hs(0))}}}else this.IR=e}H7(){return this.f8}lCt(){return!!(8&this.KD)}aCt(){return!!(16&this.KD)}XEt(){return 1===this.FEt}nG(){return 2===this.FEt}NEt(){return!!(1&this.KD)}bIt(){return this.lCt()||this.aCt()}yK(){return this._xt}cEt(){return this.YRt?this.YRt.p0():this._xt?this._xt.Zq():null}yPt(){const t=this.cEt();return t?t.fEt():1}gH(){return this.QCt}hFt(){let t=this.QCt;do{if(t instanceof NS.NGt&&t.xH())return!0;t=t.ZMt()}while(t);return!1}m$(){return this.Nc}Ej(){return this.US}YIt(){return this.iIt.index}pEt(){return this.iIt.nIt}gEt(t){this.iIt.nIt=!!t,this.QCt.RIt()}yEt(){return this.iIt.qPt}C_t(){return!this.pEt()&&!this.Nc.rCt()&&!this.yEt()}SEt(){return this.JPt||(this.JPt=new Map),this.JPt}wEt(){return this.$Pt||(this.$Pt=new Map),this.$Pt}hEt(){const t=this.jPt;return LS(this.Us,t),this.DCt.apply(this.ERt,t)}*ZPt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.jPt;return LS(this.Us,t),yield*this.DCt.apply(this.ERt,t)}return this.IR()}oEt(){const t=this.jPt;return LS(this.Us,t),this.DCt.apply(this._xt.Xq().o0(),t)}*tEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.jPt;return LS(this.Us,t),yield*this.DCt.apply(this._xt.Xq().o0(),t)}return this.IR()}eFt(){const t=this.jPt,s=this._xt.uX().lX();for(let e=0,i=s.length;e<i;++e)this.DCt.apply(s[e].o0(),t)}*iFt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.jPt,s=this._xt.uX().lX();for(let e=0,i=s.length;e<i;++e)yield*this.DCt.apply(s[e].o0(),t)}else this.eFt()}nFt(){const t=this.jPt;LS(this.Us,t);const s=this._xt.uX().lX();for(let e=0,i=s.length;e<i;++e)this.DCt.apply(s[e].o0(),t)}*rFt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.jPt;LS(this.Us,t);const s=this._xt.uX().lX();for(let e=0,i=s.length;e<i;++e)yield*this.DCt.apply(s[e].o0(),t)}else this.nFt()}ZEt(){const t=this.Us,s=this.jPt,e=this.DCt,i=this._xt.uX().lX();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(n);e.apply(r.o0(),s)}}*QEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.Us,s=this.jPt,e=this.DCt,i=this._xt.uX().lX();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(n);yield*e.apply(r.o0(),s)}}else this.ZEt()}tFt(){const t=this.Us,s=this.jPt,e=this.DCt,i=this._xt.uX().lX();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.oPt()||(s[e]=i.Hs(0))}for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let e=0,i=t.length;e<i;++e){const i=t[e];i.oPt()&&(s[e]=i.Hs(n))}e.apply(r.o0(),s)}}*sFt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.Us,s=this.jPt,e=this.DCt,i=this._xt.uX().lX();for(let e=0,i=t.length;e<i;++e){const i=t[e];i.oPt()||(s[e]=i.Hs(0))}for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let e=0,i=t.length;e<i;++e){const i=t[e];i.oPt()&&(s[e]=i.Hs(n))}yield*e.apply(r.o0(),s)}}else this.tFt()}YEt(){const t=this.Us,s=this.jPt,e=this.DCt,i=this._xt,n=i.oFt(),r=i.uX().lX();n.aFt(e);for(let i=0,n=r.length;i<n;++i){const n=r[i];for(let e=0,n=t.length;e<n;++e)s[e]=t[e].Hs(i);e.apply(n.o0(),s)}n.lFt(e)}*KEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.Us,s=this.jPt,e=this.DCt,i=this._xt,n=i.oFt(),r=i.uX().lX();n.aFt(e);for(let i=0,n=r.length;i<n;++i){const n=r[i];for(let e=0,n=t.length;e<n;++e)s[e]=t[e].Hs(i);yield*e.apply(n.o0(),s)}n.lFt(e)}else this.YEt()}uFt(){return this.YRt?this.YRt.p0().fEt()>=2?this.YRt.g0():this.YRt:this._xt.Zq().fEt()>=2?this._xt.Jq():this._xt}HEt(){const t=this.jPt;return LS(this.Us,t),this.DCt.apply(this.uFt(),t)}*JEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.jPt;LS(this.Us,t);let s=this.DCt.apply(this.uFt(),t);return NS.xo(s)&&(s=yield*s),s}return this.HEt()}zEt(){const t=this._xt,s=t.N7(),e=t.qRt(),i=this.Us,n=this.HPt,r=this.jPt,h=this.DCt,o=this.KRt,a=t.uX().lX();for(let t=0,s=i.length;t<s;++t){const s=i[t];s.oPt()||(r[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,e=i.length;s<e;++s){const e=i[s];e.oPt()&&(r[s]=e.Hs(t))}const u=s?l.yK().QRt(e):0;h.apply(l.Uft()[o+u].o0(),r)}}*jEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this._xt,s=t.N7(),e=t.qRt(),i=this.Us,n=this.HPt,r=this.jPt,h=this.DCt,o=this.KRt,a=t.uX().lX();for(let t=0,s=i.length;t<s;++t){const s=i[t];s.oPt()||(r[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,e=i.length;s<e;++s){const e=i[s];e.oPt()&&(r[s]=e.Hs(t))}const u=s?l.yK().QRt(e):0;yield*h.apply(l.Uft()[o+u].o0(),r)}}else this.zEt()}$Et(){const t=this.Us,s=this.jPt,e=this.DCt,i=this._xt.uX().lX(),n=[];for(let r=0,h=i.length;r<h;++r){const h=i[r];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(r);n.push(e.apply(h.o0(),s))}return Promise.all(n)}*qEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this.Us,s=this.jPt,e=this.DCt,i=this._xt.uX().lX(),n=[];for(let r=0,h=i.length;r<h;++r){const h=i[r];for(let e=0,i=t.length;e<i;++e)s[e]=t[e].Hs(r);n.push(yield*e.apply(h.o0(),s))}return Promise.all(n)}return this.$Et()}VEt(){const t=this._xt,s=t.N7(),e=t.qRt(),i=this.Us,n=this.jPt,r=this.DCt,h=this.KRt,o=t.uX().lX(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,e=i.length;s<e;++s)n[s]=i[s].Hs(t);const u=s?l.yK().QRt(e):0;a.push(r.apply(l.Uft()[h+u].o0(),n))}return Promise.all(a)}*WEt(){if((this.pEt()||this.Nc.rCt())&&(yield this),this.yEt()){const t=this._xt,s=t.N7(),e=t.qRt(),i=this.Us,n=this.jPt,r=this.DCt,h=this.KRt,o=t.uX().lX(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,e=i.length;s<e;++s)n[s]=i[s].Hs(t);const u=s?l.yK().QRt(e):0;a.push(yield*r.apply(l.Uft()[h+u].o0(),n))}return Promise.all(a)}return this.VEt()}async kEt(){try{await this.DCt()}catch(t){console.error(`Unhandled exception running script %c${this.QCt.ret().Rc()}, event ${this.QCt.DIt()}, action ${this.YIt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.lZ&&self.lZ.LCt(this),NS.c_t.NCt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),NS.c_t.BCt())}}*LEt(){return(this.pEt()||this.Nc.rCt())&&(yield this),this.kEt()}ust(){return this.JPt&&this.JPt.size?{ex:NS.So(this.JPt)}:null}cst(t){if(this.JPt&&(this.JPt.clear(),this.JPt=null),!t)return;const s=t.ex;s&&(this.JPt=NS.wo(s))}}}{let WS=function(t){return t instanceof lw?aw.sY(t):t.N1()},zS=function(t){return WS(t).WJ()},jS=function(t){return aw.sY(t)},HS=function(t){return jS(t).WJ()},JS=function(t){return t instanceof uw?aw.sY(t):t},$S=function(t){return t instanceof cw?aw.sY(t):t},qS=function(t,s,e,i){s.PK()<e.PK()?t.Set(s,e,i):t.Set(e,s,i)},XS=function(t,s,e){s.PK()<e.PK()?t.Eu(s,e):t.Eu(e,s)},YS=function(t,s){t.Fu(s)},KS=function(t,s,e){return s.PK()<e.PK()?t.Hs(s,e):t.Hs(e,s)},ZS=function(t,s,e,i){if(!s)return!1;const n=0!==e||0!==i,r=t.WJ(),h=aw.Nj(),o=aw.JMt(),a=o.gH().sbt(),l=o.yK(),u=o.dEt(),c=s.uX(),f=l!==s;let d;gw=s,mw=f&&!u,yw=!1;let p=0,m=0,g=!1;c.Nxt()?(fw.m(r.HZ()),fw.offset(e,i),h.cFt(r.zJ(),s,fw,pw),d=pw):a?aw.fFt()&&!c.$xt().length&&c.Jxt().length?d=c.Jxt():(d=c.$xt(),yw=!0):d=c.Jxt(),n&&(p=r.dM(),m=r.gM(),r.FZ(e,i),r.RZ());for(const s of d)if(h.L$(t,s)){if(g=!0,u)break;f&&Sw.add(s)}return n&&(r.PZ(p,m),r.RZ()),iw.wh(pw),g},QS=function(t){const s=aw.SH().sbt(),e=gw.uX(),i=e.Jxt(),n=e.$xt();e.Nxt()?(e.Yxt(Sw),s&&(iw.wh(n),e.Kxt(Sw,gw.lX()))):s?yw?e.Zxt(Sw):(e.Kxt(Sw,i),e.Yxt(Sw)):e.Yxt(Sw),gw.GCt()},tw=function(t,s){mw&&(s&&QS(t),Sw.clear(),gw=null,mw=!1)},sw=function(t,s){const e=aw.LJ(s);if(!e)return!1;const i=t.uX();if(!i.Nxt()&&!i.Jxt().includes(e))return!1;if(t.N7()){if(e.yK().dFt(t))return i.tbt(e),t.GCt(),!0}else if(e.yK()===t)return i.tbt(e),t.GCt(),!0;return!1},ew=function(t,s){const e=t.uX();if(e.Nxt()){e.Hxt(!1),e.Lxt();const i=t.lX();for(let t=0,n=i.length;t<n;++t){const n=i[t];n.PK()===s?e.jxt(n):e.zxt(n)}return t.GCt(),!!e.Jxt().length}{const i=e.Jxt();let n=0;for(let t=0,r=i.length;t<r;++t){const r=i[t];i[n]=r,r.PK()===s?e.jxt(r):++n}return iw.Sh(i,n),t.GCt(),!!i.length}};0;const iw=self._s,nw=new iw.Mo,rw={},hw={},ow={};let aw=null;iw.pFt=function(t){aw=t};const lw=self.gK,uw=self.Yq,cw=self.tY;hw.mFt=function(t,s){return iw.compare(this.WJ().dM(),t,s)},ow.mFt=function(t,s){return iw.compare(this.x,t,s)},hw.gFt=function(t,s){return iw.compare(this.WJ().gM(),t,s)},ow.gFt=function(t,s){return iw.compare(this.y,t,s)},hw.yFt=function(){return this.WJ().XZ()},ow.yFt=function(){return this.qZ()},rw.SFt=function(){const t=zS(this),s=t.bJ(),e=t.HZ();return e.tl()<0||e.sl()<0||e.Za()>s.by()||e.Qa()>s.Ty()},rw.wFt=function(t,s,e){const i=JS(this).uX(),n=i.lX();if(!n.length)return!1;let r=n[0],h=r.WJ(),o=r,a=iw.ir(h.dM(),h.gM(),s,e);for(let i=1,l=n.length;i<l;++i){r=n[i],h=r.WJ();const l=iw.ir(h.dM(),h.gM(),s,e);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return i.tbt(o),!0},hw.pM=function(t){const s=this.WJ();s.dM()!==t&&(s.pM(t),s.RZ())},ow.pM=function(t){this.x=+t},hw.yM=function(t){const s=this.WJ();s.gM()!==t&&(s.yM(t),s.RZ())},ow.yM=function(t){this.y=+t},hw.vFt=function(t,s){const e=this.WJ();e.xFt(t,s)||(e.PZ(t,s),e.RZ())},ow.vFt=function(t,s){this.setPosition(t,s)},rw.bFt=function(t,s){if(!(t=JS(t)))return;const e=WS(this),i=t.oX(e);if(!i)return;const[n,r]=i.MFt(s),h=e.WJ();h.dM()===n&&h.gM()===r||(h.PZ(n,r),h.RZ())},rw.TFt=function(t){if(0===t)return;const s=zS(this);s.FZ(s.GFt()*t,s._Ft()*t),s.RZ()},hw.IFt=function(t,s){if(0===s)return;const e=this.WJ();t=iw.Zn(t),e.FZ(Math.cos(t)*s,Math.sin(t)*s),e.RZ()},ow.IFt=function(t,s){0!==s&&(t=iw.Zn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},hw.dM=function(){return this.WJ().dM()},ow.dM=function(){return this.x},hw.gM=function(){return this.WJ().gM()},ow.gM=function(){return this.y},rw.DH=function(){return aw.DH(WS(this))},hw.CFt=function(t,s){return iw.compare(this.WJ().by(),t,s)},ow.CFt=function(t,s){return iw.compare(this.width,t,s)},hw.RFt=function(t,s){return iw.compare(this.WJ().Ty(),t,s)},ow.RFt=function(t,s){return iw.compare(this.height,t,s)},hw.ny=function(t){const s=this.WJ();s.by()!==t&&(s.ny(t),s.RZ())},ow.ny=function(t){this.width=t},hw.hy=function(t){const s=this.WJ();s.Ty()!==t&&(s.hy(t),s.RZ())},ow.hy=function(t){this.height=t},hw.nE=function(t,s){const e=zS(this);e.by()===t&&e.Ty()===s||(e.nE(t,s),e.RZ())},ow.nE=function(t,s){this.kX(t,s)},hw.by=function(){return this.WJ().by()},ow.by=function(){return this.width},hw.Ty=function(){return this.WJ().Ty()},ow.Ty=function(){return this.height},rw.PFt=function(){return zS(this).HZ().Za()},rw.EFt=function(){return zS(this).HZ().Qa()},rw.FFt=function(){return zS(this).HZ().tl()},rw.AFt=function(){return zS(this).HZ().sl()},rw.OFt=function(){const t=zS(this).HZ();return(t.Za()+t.tl())/2},rw.DFt=function(){const t=zS(this).HZ();return(t.Qa()+t.sl())/2},rw.kFt=function(t,s){return iw.rr(zS(this).UX(),iw.Zn(s))<=iw.Zn(t)},rw.LFt=function(t){return iw.ar(zS(this).UX(),iw.Zn(t))},rw.NFt=function(t,s){const e=iw.Zn(t),i=iw.Zn(s),n=zS(this).UX();return iw.ar(i,e)?iw.ar(n,e)&&!iw.ar(n,i):!(!iw.ar(n,e)&&iw.ar(n,i))},hw.BX=function(t){const s=this.WJ(),e=iw.Kn(iw.Zn(t));isNaN(e)||s.UX()===e||(s.BX(e),s.RZ())},ow.BX=function(t){this.zZ=t},rw.BFt=function(t){if(isNaN(t)||0===t)return;const s=zS(this);s.BX(s.UX()+iw.Zn(t)),s.RZ()},rw.UFt=function(t){if(isNaN(t)||0===t)return;const s=zS(this);s.BX(s.UX()-iw.Zn(t)),s.RZ()},rw.VFt=function(t,s){const e=zS(this),i=e.UX(),n=iw.hr(i,iw.Zn(s),iw.Zn(t));isNaN(n)||i===n||(e.BX(n),e.RZ())},rw.WFt=function(t,s,e){const i=zS(this),n=i.UX(),r=s-i.dM(),h=e-i.gM(),o=Math.atan2(h,r),a=iw.hr(n,o,iw.Zn(t));isNaN(a)||n===a||(i.BX(a),i.RZ())},rw.zFt=function(t,s){const e=zS(this),i=e.UX(),n=t-e.dM(),r=s-e.gM(),h=Math.atan2(r,n);isNaN(h)||i===h||(e.BX(h),e.RZ())},hw.UX=function(){return iw.Qn(this.WJ().UX())},ow.UX=function(){return this.zZ},rw.jFt=function(t,s){return iw.compare(iw.Tr(100*zS(this).NA(),6),t,s)},hw._Y=function(){return this.WJ()._Y()},ow._Y=function(){return this.isVisible},rw.TY=function(t){const s=zS(this);t=2===t?!s._Y():0!==t,s._Y()!==t&&(s.TY(t),aw.XJ())},rw.UA=function(t){const s=iw.Yn(t/100,0,1),e=zS(this);if(e.BQ()){if(e.Kft().HFt()===s)return}else if(e.NA()===s)return;e.UA(s),aw.XJ()},rw.JFt=function(t){nw.Qo(t);const s=zS(this);s.KZ().Ho(nw)||(s.ZZ(nw),aw.XJ())},rw.WA=function(){const t=zS(this).KZ();return iw.Ir(t.Lo(),t.No(),t.Bo(),t.Uo())},rw.NA=function(){return iw.Tr(100*zS(this).NA(),6)},rw.$Ft=function(t){return!!(t=$S(t))&&zS(this).zJ()===t},rw.qFt=function(t){const s=JS(this).uX(),e=s.lX();if(!e.length)return!1;let i=e[0];for(let s=1,n=e.length;s<n;++s){const n=e[s],r=n.WJ(),h=i.WJ(),o=r.zJ().Ej(),a=h.zJ().Ej();0===t?(o>a||o===a&&r.jJ()>h.jJ())&&(i=n):(o<a||o===a&&r.jJ()<h.jJ())&&(i=n)}return s.tbt(i),!0},hw.XFt=function(t,s,e){const i=this.WJ(),n=0===t?i.SM():i.WZ();return iw.compare(n,s,e)},ow.XFt=function(t,s,e){const i=0===t?this.qN:this.VZ;return iw.compare(i,s,e)},hw.YFt=function(){this.WJ().tQ()},ow.YFt=function(){this.QZ()},hw.KFt=function(){this.WJ().eQ()},ow.KFt=function(){this.sQ()},rw.ZFt=function(t){(t=$S(t))&&zS(this).nQ(t)},rw.QFt=function(t,s){const e=0===t;if(!(s=JS(s)))return;const i=WS(this),n=s.tAt(i);n&&i.WJ().hQ(n,e)},hw.wM=function(t){const s=this.WJ();s.SM()!==t&&(s.wM(t),aw.XJ())},ow.wM=function(t){this.qN=t},rw.sAt=function(){return zS(this).zJ().Ej()},rw.eAt=function(){return zS(this).zJ().Rc()},hw.iAt=function(){return this.WJ().jJ()},ow.iAt=function(){return this.zIndex},hw.nAt=function(){return this.WJ().SM()},ow.nAt=function(){return this.qN},hw.rAt=function(){return this.WJ().WZ()},ow.rAt=function(){return this.VZ},rw.hAt=function(t){const s=WS(this),e=s.yK().AX().zft(t);if(!e)return;const i=e.Ej();return s.WJ().IZ().M0(i)},rw.oAt=function(t,s){const e=WS(this),i=e.yK().AX().zft(s);if(!i)return;const n=i.Ej(),r=1===t,h=e.WJ().IZ();h.M0(n)!==r&&(h.T0(n,r),h.G0(),aw.XJ())},rw.aAt=function(t,s,e){const i=WS(this),n=i.yK().AX().zft(t);if(!n)return;s=Math.floor(s);const r=n.nI().hI(s);if(!r)return;"color"===r?(nw.Qo(e),e=nw):"percent"===r&&(e/=100);const h=n.Ej(),o=i.WJ().IZ();o.I0(h,s,e)&&o.M0(h)&&aw.XJ()};const fw=iw.jn(iw.Rect),dw=[],pw=[];let mw=!1,gw=null,yw=!1;const Sw=new Set;function*ww(t){if(!t)return!1;const s=this.m$(),e=s.Nj(),i=s.fH(),n=i.GH(),r=i.JMt(),h=r.yK(),o=r.SEt(),a=r.wEt(),l=n.M3(),u=s.VH(),c=u-1,f=l.SH(),d=n.T3(f);let p=o.get("collmemory");p||(p=iw.jn(iw.Iu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Sf().addEventListener("instancedestroy",t=>YS(p,t.S0)));const m=h.uX(),g=t.uX(),y=m.lX();let S=null;for(let s=0;s<y.length;++s){const n=y[s];g.Nxt()?(e.cFt(n.WJ().zJ(),t,n.WJ().HZ(),dw),S=dw,e.lAt(n,t,S)):S=g.lX();for(let s=0;s<S.length;++s){const r=S[s];if(e.L$(n,r)||e.uAt(n,r)){const s=KS(p,n,r);let e=!1,o=-2;"number"==typeof s&&(e=!0,o=s);const a=!e||o<c;if(qS(p,n,r,u),a){const s=f.b3();i.R3(s);const e=h.uX(),o=t.uX();if(e.Hxt(!1),o.Hxt(!1),h===t){const t=e.Jxt();iw.wh(t),t.push(n),t.push(r),h.GCt()}else{const s=e.Jxt(),i=o.Jxt();iw.wh(s),iw.wh(i),s.push(n),i.push(r),h.GCt(),t.GCt()}yield*f.gCt(l,d),i.E3(s)}}else XS(p,n,r)}iw.wh(dw)}return n.D3(),!1}rw.cAt=function(t){const s=JS(this);t=JS(t);const e=s.m$();if(e.fAt())return ww.call(s,t);if(!t)return!1;const i=e.Nj(),n=e.fH(),r=n.GH(),h=n.JMt(),o=h.yK(),a=h.SEt(),l=h.wEt(),u=r.M3(),c=e.VH(),f=c-1,d=u.SH(),p=r.T3(d);let m=a.get("collmemory");m||(m=iw.jn(iw.Iu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),e.Sf().addEventListener("instancedestroy",t=>YS(m,t.S0)));const g=o.uX(),y=t.uX(),S=g.lX();let w=null;for(let s=0;s<S.length;++s){const e=S[s];y.Nxt()?(i.cFt(e.WJ().zJ(),t,e.WJ().HZ(),dw),w=dw,i.lAt(e,t,w)):w=y.lX();for(let s=0;s<w.length;++s){const r=w[s];if(i.L$(e,r)||i.uAt(e,r)){const s=KS(m,e,r);let i=!1,h=-2;"number"==typeof s&&(i=!0,h=s);const a=!i||h<f;if(qS(m,e,r,c),a){const s=d.b3();n.R3(s);const i=o.uX(),h=t.uX();if(i.Hxt(!1),h.Hxt(!1),o===t){const t=i.Jxt();iw.wh(t),t.push(e),t.push(r),o.GCt()}else{const s=i.Jxt(),n=h.Jxt();iw.wh(s),iw.wh(n),s.push(e),n.push(r),o.GCt(),t.GCt()}d.P3(u,p),n.E3(s)}}else XS(m,e,r)}iw.wh(dw)}return r.D3(),!1},rw.dAt=function(t){return t=JS(t),ZS(WS(this),t,0,0)},rw.pAt=function(t,s,e){return t=JS(t),ZS(WS(this),t,s,e)},rw.mAt=function(){return!0},rw.TQ=function(){return zS(this).TQ()},rw.pst=function(){return zS(this).pst()},rw.gAt=function(t,s){const e=JS(this);t=JS(t);const i=e.m$(),n=this.uX().lX();if(0===n.length)return!1;const r=t.uX();let h=r.lX();if(r.Nxt()){const s=[...i.yAt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.Nxt()?null:new Set(h),a=new Set;for(let e=0,i=n.length;e<i;++e){const i=n[e];if(1===s)for(const s of i.pQ())s.SAt(t)&&(null===o||o.has(s))&&a.add(s);else{let e;if(0===s){if(e=i.cQ(),null===e)continue}else e=i.dQ();e.SAt(t)&&(null===o||o.has(e))&&a.add(e)}}return 0!==a.size&&(r.Yxt(a),t.GCt(),!0)},rw.wAt=function(t,s){const e=JS(this);t=JS(t);const i=e.m$(),n=e.uX().lX();if(0===n.length)return!1;const r=t.uX();let h=r.lX();if(r.Nxt()){const s=[...i.yAt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.Nxt()?null:new Set(h),a=new Set;for(let e=0,i=n.length;e<i;++e){const i=n[e];2!==s||i.pst()||!i.SAt(t)||null!==o&&!o.has(i)||a.add(i);for(const e of 0===s?i.children():i.wQ())2===s&&e.pst()||e.SAt(t)&&(null===o||o.has(e))&&a.add(e)}return 0!==a.size&&(r.Yxt(a),t.GCt(),!0)},rw.vAt=function(t,s,e){const i=JS(this);t=JS(t);const n=i.m$(),r=i.uX().lX();if(0===r.length)return!1;const h=t.uX();let o=h.lX();if(h.Nxt()){const s=[...n.yAt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.Nxt()?null:new Set(o),l=[];for(let i=0,n=r.length;i<n;++i){const n=r[i];if(0===s){const s=n.SQ(e);null!==s&&s.SAt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.SAt(t)){if(0===e){(null===a||a.has(s))&&l.push(s);break}--e}}return 0!==l.length&&(h.Xxt(l),t.GCt(),!0)},rw.xAt=function(t,s,e){const i=WS(this);switch(t){case 0:default:return iw.compare(i.gQ(),s,e);case 1:return iw.compare(i.bAt(),s,e)}},rw.xQ=function(t,s,e,i,n,r,h,o,a,l){t=JS(t);const u=WS(this),c=aw.qMt().yK();for(const f of t.MAt(u,c)){if(!f.Zq().Nq())return;u.xQ(f,{_Q:s,CQ:e,PQ:i,FQ:n,OQ:r,NQ:h,kQ:o,UQ:a,WQ:l})}},rw.bQ=function(t){t=JS(t);const s=WS(this),e=aw.qMt().yK();for(const i of t.MAt(s,e))s.bQ(i)},rw.TAt=function(){const t=WS(this);t.TQ()&&t.cQ().bQ(t)},rw.GAt=function(){const t=WS(this).cQ();return t?t.PK():-1},rw._At=function(){return WS(this).gQ()},rw.IAt=function(){return WS(this).bAt()},rw.CAt=function(t,s){t=Math.floor(t),s=Math.floor(s);const e=zS(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(e.$Q(),e.RZ()):e.HQ(t,s)},rw.XQ=function(t,s,e,i,n,r,h,o){const a=zS(this);a.XQ(t,s,{mode:0===e?"absolute":"relative",x:i,y:n,qN:r,QQ:h,t0:o})&&a.RZ()},rw.RAt=function(){const t=zS(this);return t.KQ()?t.ZQ().HM():0},rw.PAt=function(){const t=zS(this);return t.KQ()?t.ZQ().JM():0},rw.EAt=function(t){const s=zS(this);t=2===t?!s._Y():0!==t,s._Y()!==t&&s.TY(t)},rw.c0=function(t,s){this instanceof self.gK?this.V2(t,s):this.c0(t,s)},rw.FAt=function(t,s){this instanceof self.gK?this.z2(t,""+s):this.FAt(t,""+s)},rw.AAt=function(t){this instanceof self.gK?this.j2(t):this.AAt(t)},rw.OAt=function(){this instanceof self.gK?this.N2():this.a0()},rw.DAt=function(){this instanceof self.gK?this.B2():this.l0()},rw.kAt=function(){return this instanceof self.gK?this.U2():this.kAt()},rw.LAt=function(t){this instanceof self.gK?this.NAt(0!==t):this.BAt(0!==t)},rw.UAt=function(){return this instanceof self.gK?this.jCt():this.VAt()},hw.WAt=function(t,s,e){return iw.compare(this.N1().ypt(t),s,e)},ow.WAt=function(t,s,e){return iw.compare(jS(this).ypt(t),s,e)},hw.zAt=function(t){return!!this.N1().ypt(t)},ow.zAt=function(t){return!!jS(this).ypt(t)},rw.jAt=function(t,s){const e=JS(this),i=e.uX(),n=i.lX();if(!n.length)return!1;const r=e.N7();let h=null,o=0;for(let i=0,a=n.length;i<a;++i){const a=n[i],l=r?a.yK().$Rt(e.qRt()):0,u=a.ypt(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return i.tbt(h),!0},rw.HAt=function(t){const s=JS(this);return s.m$().JMt().dEt()?ew(s,t):sw(s,t)},rw.f1=function(t){const s=new Set(iw.Dh(t)),e=WS(this).UK();return s.isSubsetOf(e)},rw.JAt=function(){return WS(this).Out()},rw.$At=function(){return WS(this).UK().size},rw.qAt=function(t){return WS(this).XAt(t)},rw.YAt=function(t,s){const e=iw.Dh(s);if(0===e.length)return;const i=WS(this),n=new Set(i.UK());if(0===t)for(const t of e)n.add(t);else if(1===t)for(const t of e)n.delete(t);i.WK(n)},rw.KAt=function(){aw.MK(WS(this))},rw.ZAt=function(){return!0},rw.QAt=function(){return!0},hw.tOt=function(t,s){this.N1().Spt(t,s)},ow.tOt=function(t,s){jS(this).Spt(t,s)},hw.sOt=function(t,s){const e=this.N1(),i=e.ypt(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.Spt(t,i+s)},ow.sOt=function(t,s){const e=jS(this),i=e.ypt(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.Spt(t,i+s)},hw.eOt=function(t,s){const e=this.N1(),i=e.ypt(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.Spt(t,i-s))},ow.eOt=function(t,s){const e=jS(this),i=e.ypt(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.Spt(t,i-s))},hw.iOt=function(t,s){this.N1().Spt(t,s?1:0)},ow.iOt=function(t,s){jS(this).Spt(t,s?1:0)},hw.nOt=function(t){const s=this.N1();s.Spt(t,0===s.ypt(t)?1:0)},ow.nOt=function(t){const s=jS(this);s.Spt(t,0===s.ypt(t)?1:0)},rw.rOt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const e=WS(this),i="state";aw.hOt(),e.gnt(i),e.IM(s,i),aw.oOt(i,{aOt:!0})},rw.lOt=function(){return JSON.stringify(WS(this)._M("state"))},rw.uOt=function(){return WS(this).yK().Rc()},rw.cOt=function(){const t=aw.HMt().Ebt();let s=t.dX();for(const e of aw.yAt(t))++s;return s},rw.fOt=function(){return aw.HMt().Ebt().uX().lX().length},hw.FK=function(){return this.N1().FK()},ow.FK=function(){return jS(this).FK()},hw.PK=function(){return this.N1().PK()},ow.PK=function(){return jS(this).PK()},rw.mGt=function(t){const s=WS(this);return t.toLowerCase()===aw.fH().wGt(s)},rw.jK=function(t){const s=WS(this);aw.fH().jK(s,t)},rw.dOt=function(t){const s=JS(this);return aw.fH().JTt().pOt(s.uX().lX(),t),!0},rw.mOt=function(){return WS(this).DK()},iw.gOt=function(t,s,e){const i=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.h$,S=s.Gdt,w=s._dt,v=Object.assign({},rw,e>=2?ow:hw);n&&(y.mFt=v.mFt,y.gFt=v.gFt,y.yFt=v.yFt,y.SFt=v.SFt,y.wFt=v.wFt,S.pM=v.pM,S.yM=v.yM,S.vFt=v.vFt,S.bFt=v.bFt,S.TFt=v.TFt,S.IFt=v.IFt,w.yOt=v.dM,w.SOt=v.gM,w.OH=v.DH),r&&(y.CFt=v.CFt,y.RFt=v.RFt,S.ny=v.ny,S.hy=v.hy,S.nE=v.nE,w.wOt=v.by,w.vOt=v.Ty,w.xOt=v.PFt,w.bOt=v.EFt,w.MOt=v.FFt,w.TOt=v.AFt,w.GOt=v.OFt,w._Ot=v.DFt),h&&(y.IOt=v.kFt,y.COt=v.LFt,y.NFt=v.NFt,S.BX=v.BX,S.BFt=v.BFt,S.UFt=v.UFt,S.VFt=v.VFt,S.WFt=v.WFt,S.zFt=v.zFt,w.ROt=v.UX),o&&(y._Y=v._Y,y.jFt=v.jFt,S.TY=v.TY,S.UA=v.UA,S.JFt=v.JFt,w.Opacity=v.NA,w.ColorValue=v.WA),a&&(y.$Ft=v.$Ft,y.qFt=v.qFt,y.XFt=v.XFt,S.YFt=v.YFt,S.KFt=v.KFt,S.ZFt=v.ZFt,S.QFt=v.QFt,S.wM=v.wM,w.sAt=v.sAt,w.eAt=v.eAt,w.iAt=v.iAt,w.nAt=v.nAt,w.rAt=v.rAt),l&&(y.hAt=v.hAt,S.oAt=v.oAt,S.aAt=v.aAt),d&&(y.mAt=v.mAt,y.TQ=v.TQ,y.pst=v.pst,y.gAt=v.gAt,y.wAt=v.wAt,y.vAt=v.vAt,y.xAt=v.xAt,S.xQ=v.xQ,S.bQ=v.bQ,S.TAt=v.TAt,w.GAt=v.GAt,w._At=v._At,w.IAt=v.IAt),p&&(S.CAt=v.CAt,S.XQ=v.XQ,w.RAt=v.RAt,w.PAt=v.PAt),u&&(y._Y=v._Y,S.TY=v.EAt,S.POt=v.c0,S.EOt=v.FAt,S.FOt=v.AAt),c&&(y.AOt=v.kAt,S.OOt=v.OAt,S.DOt=v.DAt),f&&(y._u=v.UAt,S.kOt=v.LAt),m&&(y.cAt=v.cAt,y.dAt=v.dAt,y.pAt=v.pAt,s.LOt=tw),i||(y.WAt=v.WAt,y.zAt=v.zAt,y.jAt=v.jAt,y.HAt=v.HAt,y.f1=v.f1,S.tOt=v.tOt,S.sOt=v.sOt,S.eOt=v.eOt,S.iOt=v.iOt,S.nOt=v.nOt,S.YAt=v.YAt,y.ZAt=v.ZAt,y.QAt=v.QAt,S.KAt=v.KAt,S.rOt||(S.rOt=v.rOt),w.lOt||(w.lOt=v.lOt),w.cOt=v.cOt,w.fOt=v.fOt,w.NOt=v.FK,w.BOt=v.PK,w.uOt=v.uOt,w.JAt=v.JAt,w.$At=v.$At,w.qAt=v.qAt,y.mGt=v.mGt,S.jK=v.jK,S.dOt=v.dOt),g&&(w.mOt=v.mOt)}}{const vw=self._s;vw.$Tt=class extends vw.Wn{constructor(t){super(),this.ibt=t,this.Jc="",this.oz=-1,this.UOt="",this.VOt=!1,this.WOt=null,this.fbt=0,this.N_t=[],this.Sbt=null,this.zOt=new Map,this.jOt=null,this.HOt=null,this.JOt=-1,this.zCt=null,this.$Ot=null,this.qOt=!1}Hn(){this.Jc="",this.oz=-1,this.UOt="",this.WOt=null,this.HOt=null,this.zCt=null,this.$Ot=null,this.JOt=-1,vw.wh(this.N_t),this.Sbt&&(this.Sbt.clear(),this.Sbt=null);for(const t of this.zOt.values())t.Hn();this.zOt.clear(),this.jOt=null}fM(){const t=this.ibt,s=t.m$().L7(),e=t.HMt();this.WOt=e.SH(),this.fbt=e.Tbt()+1;const i=t.LGt(this.WOt);i&&(this.HOt=i,this.zCt=i.hRt(),this.$Ot=i.rRt().map(t=>t.Dct()),i.lCt()&&(this.JOt=i.uRt()));for(const t of s){const s=t.uX();s.Nxt()&&!this.WOt.AIt(t)||(this.N_t.push(t),this.zOt.set(t,vw.jn(vw.XOt,s)))}const n=t.wH();this.Sbt=n.size>0?n:null}YOt(t){this.Jc="timer",this.fM(),this.oz=this.ibt.m$().BH()+t}KOt(t){this.Jc="walltimer",this.fM(),this.oz=this.ibt.m$().zH()+t}ZOt(t){this.Jc="signal",this.fM(),this.UOt=t.toLowerCase()}pOt(t,s){this.Jc="instance-signals",this.fM(),this.UOt=s.toLowerCase(),this.jOt=new Set(t)}QOt(t){this.Jc="promise",this.fM(),t.then(()=>this.cGt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.cGt()})}tDt(){return"timer"===this.Jc}sDt(){return"walltimer"===this.Jc}lGt(){return"signal"===this.Jc}yGt(){return"instance-signals"===this.Jc}AGt(){return"promise"===this.Jc}uGt(){return this.UOt}eDt(){return this.VOt}cGt(){this.VOt=!0}SGt(t){this.jOt.delete(t),0===this.jOt.size&&this.cGt()}YTt(){return this.tDt()?this.oz<=this.ibt.m$().BH():this.sDt()?this.oz<=this.ibt.m$().zH():this.eDt()}iDt(t){t.wbt(this.WOt,this.fbt);for(const[t,s]of this.zOt.entries()){const e=t.uX();s.wbt(e)}this.Sbt&&t.Lbt([...this.Sbt]);const s=this.HOt;s&&(s.vCt(this.zCt),s.rRt().map((t,s)=>t.yft(this.$Ot[s])),s.lCt()&&s.cRt(this.JOt))}KTt(t){this.iDt(t),this.WOt.uCt(t),this.HOt&&this.HOt.lCt()&&this.HOt.PCt(this.JOt),this.ibt.WTt(this.N_t),this.qOt=!0}async sGt(t){this.iDt(t);for(const s of this.WOt.cCt(t))await this.ibt.m$().GTt(s);this.HOt&&this.HOt.lCt()&&this.HOt.PCt(this.JOt),this.ibt.WTt(this.N_t),this.qOt=!0}ZTt(){return this.qOt}Axt(t){for(const s of this.zOt.values())s.Axt(t);if("instance-signals"===this.Jc){for(const s of t)this.jOt.delete(s);0===this.jOt.size&&this.cGt()}}ust(){const t={},s={wt:this.Jc,t:this.oz,st:this.UOt,s:this.VOt,ev:this.WOt.H7(),sm:this.N_t.map(t=>t.H7()),dsm:this.Sbt?[...this.Sbt].map(t=>t.H7()):null,sols:t};this.WOt.KIt(this.fbt)&&(s.act=this.WOt.XMt(this.fbt).H7());for(const[s,e]of this.zOt)t[s.H7().toString()]=e.ust();return"instance-signals"===this.Jc&&(s.pi=[...this.jOt].map(t=>t.PK())),s}static OGt(t,s){const e=t.m$(),i=t.nTt(s.ev);if(!i)return null;let n=0;if(s.hasOwnProperty("act")){const e=t.hTt(s.act);if(!e)return null;n=e.Ej()}const r=vw.jn(vw.$Tt,t);r.oz=s.t,s.hasOwnProperty("wt")?r.Jc=s.wt:r.Jc=-1===r.oz?"signal":"timer",r.UOt=s.st,r.VOt=s.s,r.WOt=i,r.fbt=n;for(const t of s.sm){const s=e.x3(t);s&&r.N_t.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=e.x3(t);s&&(r.Sbt||(r.Sbt=new Set),r.Sbt.add(s))}for(const[i,n]of Object.entries(s.sols)){const s=parseInt(i,10),h=e.x3(s);if(!h)continue;const o=vw.jn(vw.XOt,null);o.cst(t,n),r.zOt.set(h,o)}if("instance-signals"===r.Jc){r.jOt=new Set;for(const t of s.pi){const s=e.LJ(t);s&&r.jOt.add(s)}}return r}}}{const xw=self._s;xw.XOt=class extends xw.Wn{constructor(t){super(),this._xt=null,this.nDt=!0,this.E6=[],t&&(this._xt=t.yK(),this.nDt=t.Nxt(),xw.Th(this.E6,t.Jxt()))}Hn(){this._xt=null,xw.wh(this.E6)}wbt(t){t.Hxt(this.nDt),xw.Th(t.Jxt(),this.E6)}Axt(t){xw.Rh(this.E6,t)}ust(){return{sa:this.nDt,insts:this.E6.map(t=>t.PK())}}cst(t,s){const e=t.m$();this.nDt=!!s.sa,xw.wh(this.E6);for(const t of s.insts){const s=e.LJ(t);s&&this.E6.push(s)}}}}{let bw=function(t,s){let e=t.get(s);return e||(e=new Map,t.set(s,e)),e};0;const Mw=self._s;Mw.rDt=class extends Mw.Wn{constructor(t){super(),this.Nc=t.runtime,this.Uc=t.id,this.qn=t.name??"",this.hDt=!!t.Gq,this.oDt=!!t.aDt,this.lDt=!!t.Eq,this.uDt=!!t.cDt,this.fDt=!!t.Aq,this.dDt=!!t.pDt,this.mDt=!!t.Bq,this.gDt=!!t.Rq,this.yDt=!!t.Dq,this.SDt=t.wDt,this.vDt=t.xDt,this.bDt=null,this.MDt=new Map,this.TDt=new Map,this.GDt=new Map,this._Dt=new Map,this.IDt=t.CDt,this.RDt=null}Hn(){this.Nc=null}m$(){return this.Nc}Tq(){return this.Uc}Rc(){return this.qn}PDt(){}gGt(){return this.fEt()>=2?this.RDt.constructor:this.constructor}fEt(){return this.SDt}EDt(t=!1){let s=this.IDt;return t&&"function"!=typeof s&&this.fEt()>=2&&(s=globalThis.q1),s}FDt(){return this.vDt}_q(){return this.hDt}Cq(){return this.oDt}Pq(){return this.gDt}kq(){return this.yDt}Fq(){return this.lDt}Bb(){return this.uDt}Oq(){return this.fDt}Nq(){return this.dDt}Uq(){return this.mDt}DRt(t,s){if(!s)throw new Error("missing 'this' binding");let e=this.MDt.get(t);return e||(e=t.bind(s),this.MDt.set(t,e),e)}aEt(t,s,e){if(!s)throw new Error("missing 'this' binding");const i=bw(this.TDt,t);let n=i.get(e);return n||(n=t.bind(s,e),i.set(e,n),n)}lEt(t,s,e,i){if(!s)throw new Error("missing 'this' binding");const n=bw(this.GDt,t),r=bw(n,e);let h=r.get(i);return h||(h=t.bind(s,e,i),r.set(i,h),h)}uEt(t,s,e,i,n){if(!s)throw new Error("missing 'this' binding");const r=bw(this._Dt,t),h=bw(r,e),o=bw(h,i);let a=o.get(n);return a||(a=t.bind(s,e,i,n),o.set(n,a),a)}ADt(t){if(!this._q())throw new Error("must be single-global plugin");this.bDt=t}$q(){if(!this._q())throw new Error("must be single-global plugin");return this.bDt}Xq(){if(!this._q())throw new Error("must be single-global plugin");return this.bDt.Xq()}ODt(){const t=this.fEt();Mw.bq.DDt(this,t);const s=this.EDt(!0);if(s){if(this.RDt=new s,!(this.RDt instanceof self.vq))throw new TypeError("plugin class must derive from IPlugin")}else this.RDt=new self.vq;Mw.bq.kDt(t)}jq(){return this.RDt}}}{const Tw=self._s;Tw.LDt=class extends Tw.rDt{constructor(t,s){super(t),this.NDt=s,this.BDt=0,this.UDt=new Map,this.VDt("elem-focused",t=>t.WDt()),this.VDt("elem-blurred",t=>{t&&t.zDt()})}Hn(){super.Hn()}jDt(t){const s=this.BDt++;return this.UDt.set(s,t),s}HDt(t){this.UDt.delete(t)}VDt(t,s){this.Nc.iZ(this.NDt,t,t=>{const e=this.UDt.get(t.elementId);s(e,t)})}}}{const Gw=self._s;Gw.JDt=class extends Gw.Wn{constructor(t){super(),this._xt=t,this.Nc=t.m$(),this.$Dt=t.Zq()}Hn(){this._xt=null,this.Nc=null,this.$Dt=null}yK(){return this._xt}m$(){return this.Nc}Zq(){return this.$Dt}J0(){return this._xt.J0()}PDt(){}TEt(t){}aFt(t){}lFt(t){}Met(t){}Ret(){}_et(){}Yet(t){}qDt(){}EDt(){return null}XDt(t,s,e){const i=Gw.jn(Gw.Event,t,s);i.YDt=this,e&&Object.assign(i,e),this.yK().q5(i)}}}{const _w=self._s;_w.KDt=class extends _w.Wn{constructor(t,s){super(),this.ce=t,this.NDt=s,this.ZDt=null,this.Nc=t.m$(),this._xt=this.ce.yK(),this.QDt=this._xt.oFt(),this.rnt=null,this.ont=null,this.fZ=!1,this.pZ=!1,this.Yf=null,this.CP=!1}Hn(){this.CP=!0,this.tkt(),this.skt(),this.rnt=null,this.ont=null,this.Yf&&(this.Yf.Hn(),this.Yf=null),this.ce=null,this.Nc=null,this._xt=null,this.QDt=null}Jn(){return this.CP}N1(){return this.ce}m$(){return this.Nc}yK(){return this._xt}Zq(){return this.QDt.Zq()}oFt(){return this.QDt}ekt(){return this.ce.NJ()}tZ(t){return this.Nc.tZ(t,this.ce,null)}ikt(t){return this.Nc.ikt(t,this.ce,null)}n$(t){return this.Nc.n$(t,this.ce,null)}nkt(t,s){return this.Nc.nkt(t,this.ce,s)}rkt(t,s){return this.Nc.rkt(t,this.ce,s)}hkt(t){return this.Nc.hkt(t)}okt(t,s){this.Nc.iZ(this.NDt,t,s)}akt(t){for(const[s,e]of t)this.okt(s,e)}lkt(t,s){this.Nc.Vc(this.NDt,t,s)}ukt(t,s){return this.Nc.KJ(this.NDt,t,s)}ckt(t,s){if(!this.Nc.Qj())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.NDt,handler:t,data:s,responseId:null});this.lkt(t,s)}fkt(t){if(!t)throw new Error("cannot set empty component id");this.ZDt=t}dkt(){if(!this.ZDt)throw new Error("wrapper extension component id not set");return this.Nc.wZ(this.ZDt)}xZ(t,s){if(!this.ZDt)throw new Error("wrapper extension component id not set");this.Nc.xZ(this.ZDt,t,s)}pkt(t){for(const[s,e]of t)this.xZ(s,e)}u3(t,s){if(!this.ZDt)throw new Error("wrapper extension component id not set");this.Nc.u3(this.ZDt,t,s)}c3(t,s){if(!this.ZDt)throw new Error("wrapper extension component id not set");return this.Nc.c3(this.ZDt,t,s)}yrt(){}mkt(){}gkt(){if(!this.fZ){if(!this.rnt)if(this.Nc.aZ()){const t=globalThis.lZ,s=this.Zq();this.rnt=()=>{const e=performance.now();this.yrt(),t.cZ(s,performance.now()-e)}}else this.rnt=()=>this.yrt();this.Nc.Sf().addEventListener("tick",this.rnt),this.fZ=!0}}tkt(){this.fZ&&(this.Nc.Sf().removeEventListener("tick",this.rnt),this.fZ=!1)}ykt(){return this.fZ}Skt(){if(!this.pZ){if(!this.ont)if(this.Nc.aZ()){const t=globalThis.lZ,s=this.Zq();this.ont=()=>{const e=performance.now();this.mkt(),t.cZ(s,performance.now()-e)}}else this.ont=()=>this.mkt();this.Nc.Sf().addEventListener("tick2",this.ont),this.pZ=!0}}skt(){this.pZ&&(this.Nc.Sf().removeEventListener("tick2",this.ont),this.pZ=!1)}wkt(){return this.pZ}vkt(){return[]}_M(){return null}IM(t){}apt(t){}ppt(t,s){}omt(t,s,e){if(0===s)return;const i=this.apt(t);if("number"!=typeof i)throw new Error("expected number");this.ppt(t,i+s,e)}xkt(t,s,e,i){}bkt(t,...s){t.call(this,...s)}Mkt(t,...s){return t.call(this,...s)}EDt(){return null}XDt(t,s,e){if(!this.ce.Tkt())return;const i=this.ekt(),n=_w.jn(_w.Event,t,s);n.S0=i,e&&Object.assign(n,e),i.dispatchEvent(n)}Bb(){return!1}}}{const Iw=self._s;Iw.Gkt=class extends Iw.KDt{constructor(t,s){super(t,s),this.Flt=t.WJ(),this._kt=null,this.Ikt=null}Hn(){if(this._kt){const t=this.Nc.Sf();t.removeEventListener("renderercontextlost",this._kt),t.removeEventListener("renderercontextrestored",this.Ikt),this._kt=null,this.Ikt=null}this.Flt=null,super.Hn()}Ckt(){this.Rkt()}Pkt(){}Ekt(){}Rkt(){if(this._kt)return;this._kt=()=>this.M6(),this.Ikt=()=>this.Fkt();const t=this.Nc.Sf();t.addEventListener("renderercontextlost",this._kt),t.addEventListener("renderercontextrestored",this.Ikt)}M6(){this.Pkt()}Fkt(){this.Ekt()}WJ(){return this.Flt}but(){return!1}xut(){if(!this.but())throw new Error("original size not known");const t=this.Akt();if(t)return t.by()}Tut(){if(!this.but())throw new Error("original size not known");const t=this.Akt();if(t)return t.Ty()}Akt(){return null}Okt(){const t=this.Akt();if(t){const s=t.kG();if(s)return[s.by(),s.Ty()]}return[100,100]}Dkt(){const t=this.Akt();return t?t.kE():null}kkt(){const t=this.Akt();return t?t.Lkt():null}Nkt(){const t=this.Akt();return!!t&&t.Bkt()}MFt(t){const s=this.ce.WJ();return[s.dM(),s.gM(),s.WZ()]}qDt(t,s,e){}Ukt(t,s){}Vtt(){return!0}}}{const Cw=self._s,Rw=Cw.jn(Cw.Rect);Cw.Vkt=class extends Cw.Gkt{constructor(t,s){super(t,s),this.Wkt=this.Zq().jDt(this),this.zkt=!0,this.jkt=!1,this.Hkt=!1,this.Jkt=-.2,this.$kt=Cw.jn(Cw.Rect,0,0,-1,-1);const e=this.Nc.AJ();this.qkt=e.v2(),this.Xkt=e.b2(),this.Ykt=-1,this.Kkt=-1,this.Zkt=!1,this.gkt()}Hn(){this.Zq().HDt(this.Wkt),this.Qkt("destroy"),this.Wkt=-1,super.Hn()}h0(){if(this.Nc.Qj())throw new Error("not valid in worker mode");return this.tLt("get-element")}Qkt(t,s){s||(s={}),s.elementId=this.Wkt,this.lkt(t,s)}tLt(t,s){return s||(s={}),s.elementId=this.Wkt,this.ckt(t,s)}sLt(t,s){return s||(s={}),s.elementId=this.Wkt,this.ukt(t,s)}eLt(t){t||(t={});const s=this.WJ();t.elementId=this.Wkt,t.isVisible=s._Y(),t.htmlIndex=s.zJ().C2(),t.htmlZIndex=s.R2(),Object.assign(t,this.iLt()),this.zkt=!!t.isVisible,this.ckt("create",t),this.nLt(!0)}EAt(t){t=!!t,this.zkt!==t&&(this.zkt=t,this.Qkt("set-visible",{isVisible:t}))}yrt(){this.nLt(!1)}rLt(){const t=this.Nc.AJ().O2();return"Android"===Cw.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}nLt(t){if(this.N1().D2())return;const s=this.WJ(),e=s.zJ(),i=s.HZ();let[n,r]=e.lK(i.Za(),i.Qa()),[h,o]=e.lK(i.tl(),i.sl());const a=this.Nc.AJ(),l=a.lq(),u=a.cq();if(!s._Y()||!e._Y())return void this.EAt(!1);if(!this.rLt()&&(h<=0||o<=0||n>=l||r>=u))return void this.EAt(!1);Rw.set(n,r,h,o);const c=a.v2(),f=a.b2(),d=e.C2(),p=s.R2();if(!t&&Rw.equals(this.$kt)&&this.qkt===c&&this.Xkt===f&&this.Ykt===d&&this.Kkt===p)return void this.EAt(!0);this.$kt.m(Rw),this.qkt=c,this.Xkt=f,this.Ykt=d,this.Kkt=p,this.EAt(!0);let m=null;this.Hkt&&(m=e.L2()+this.Jkt),this.tLt("update-position",{left:Math.round(this.$kt.Za()),top:Math.round(this.$kt.Qa()),width:Math.round(this.$kt.width()),height:Math.round(this.$kt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}a0(){this.tLt("focus",{focus:!0})}l0(){this.tLt("focus",{focus:!1})}WDt(){this.jkt=!0}zDt(){this.jkt=!1}kAt(){return this.jkt}c0(t,s){this.Qkt("set-css-style",{prop:Cw.vo(t),val:s})}FAt(t,s){this.Qkt("set-attribute",{name:t,val:s})}AAt(t){this.Qkt("remove-attribute",{name:t})}hLt(){this.Zkt||(this.Zkt=!0,Promise.resolve().then(()=>{this.Zkt=!1,this.Qkt("update-state",this.iLt())}))}iLt(){}oLt(){return this.Wkt}}}{const Pw=self._s,Ew=self.x0;Pw.aLt=class extends Pw.Wn{constructor(t){super(),this.Nc=t.runtime,this.Uc=t.id,this.qn=t.name??"",this.lLt=Pw.jn(Pw.Du),this.uLt=Pw.jn(Pw.Du),this.SDt=t.wDt,this.IDt=t.CDt,this.cLt=null}Hn(){this.uLt.Hn(),this.lLt.Hn(),this.Nc=null}m$(){return this.Nc}Tq(){return this.Uc}Rc(){return this.qn}PDt(){}fEt(){return this.SDt}EDt(t=!1){let s=this.IDt;return t&&"function"!=typeof s&&this.fEt()>=2&&(s=globalThis.q2),s}fLt(t){this.lLt.Bu(t)}jnt(){return this.lLt.Uu()}G7(t){this.uLt.Bu(t)}C7(t){this.uLt.Eu(t)}lX(){return this.uLt.Uu()}ODt(){const t=this.fEt();Pw.bq.DDt(this,t);const s=this.EDt(!0);if(s){if(this.cLt=new s,!(this.cLt instanceof Ew))throw new TypeError("behavior class must derive from IBehavior")}else this.cLt=new Ew;Pw.bq.kDt(t)}d0(){return this.cLt}}}{const Fw=self._s;Fw.dLt=class extends Fw.Wn{constructor(t){super(),this.Nc=t.m$(),this.YRt=t,this._xt=t.yK(),this.pLt=t.p0(),this.pLt.fLt(this._xt)}Hn(){this.Nc=null,this.YRt=null,this._xt=null,this.pLt=null}PDt(){}y0(){return this.YRt}yK(){return this._xt}m$(){return this.Nc}p0(){return this.pLt}}}{const Aw=self._s;Aw.mLt=class extends Aw.Wn{constructor(t,s){super(),this.eyt=t,this.NDt=s,this.ce=t.w0(),this.Nc=t.m$(),this.YRt=t.y0(),this.QDt=this.YRt.oFt(),this.fZ=!1,this.pZ=!1,this.r3=!1,this.Yf=null}Hn(){this.tkt(),this.skt(),this.gLt(),this.Yf&&(this.Yf.Hn(),this.Yf=null),this.eyt=null,this.ce=null,this.Nc=null,this.YRt=null,this.QDt=null}p0(){return this.YRt.p0()}yLt(){return this.eyt}w0(){return this.ce}yK(){return this.ce.yK()}WJ(){return this.ce.WJ()}m$(){return this.Nc}y0(){return this.YRt}oFt(){return this.QDt}ekt(){return this.eyt.ekt()}tZ(t){return this.Nc.tZ(t,this.ce,this.YRt)}ikt(t){return this.Nc.ikt(t,this.ce,this.YRt)}n$(t){return this.Nc.n$(t,this.ce,this.YRt)}SLt(){}yrt(){}mkt(){}wLt(){}gkt(){this.fZ||(this.Nc.Q2(this),this.fZ=!0)}tkt(){this.fZ&&(this.Nc.t3(this),this.fZ=!1)}ykt(){return this.fZ}Skt(){this.pZ||(this.Nc.s3(this),this.pZ=!0)}skt(){this.pZ&&(this.Nc.e3(this),this.pZ=!1)}wkt(){return this.pZ}vLt(){this.r3||(this.Nc.i3(this),this.r3=!0)}gLt(){this.r3&&(this.Nc.n3(this),this.r3=!1)}xLt(){return this.r3}vkt(){return[]}okt(t,s){this.Nc.iZ(this.NDt,t,s)}bLt(t,s){}_M(){return null}IM(t){}apt(t){}ppt(t,s){}omt(t,s){if(0===s)return;const e=this.apt(t);if("number"!=typeof e)throw new Error("expected number");this.ppt(t,e+s)}xkt(t,s,e,i){}bkt(t,...s){t.call(this,...s)}Mkt(t,...s){return t.call(this,...s)}EDt(){return null}XDt(t,s,e){if(!this.eyt.Tkt())return;const i=this.ekt(),n=Aw.jn(Aw.Event,t,s);n.MLt=i,n.S0=i.S0,e&&Object.assign(n,e),i.dispatchEvent(n)}}}{let Ow=function(t){if(t!==kw)throw new Error("invalid internal API token")};0;const Dw=self._s;Dw.a$={},Dw.oyt={};const kw=Dw.Is();let Lw=[],Nw=[],Bw=[],Uw=null,Vw=null,Ww=null,zw=null;const jw=new Map,Hw=new Map;Dw.bq=class extends Dw.Wn{#s=null;#t=[];#i=null;#e=[];#n=new Map;#h=null;#a=null;#r;constructor(t,s){super(),this.#s=t,this.#r=new Set(s)}TLt(t){const s=t[19],e=this.#s.OCt(t[0]);if(!e)throw new Error("missing plugin");Dw.gOt(t,e,s);const i=s>=2?Dw.rDt:e,n=Dw.jn(i,{runtime:this.#s,Gq:t[1],aDt:t[2],Eq:t[5],Aq:t[8],cDt:t[9],pDt:t[13],Bq:t[14],Rq:t[17],Dq:t[18],wDt:s,id:t[20],name:t[21],CDt:s>=2?e:null,xDt:t[22]});n.PDt(),this.#t.push(n),jw.set(e,n)}GLt(){this.#i=Dw.jn(Dw.a$.o$,{runtime:this.#s,Gq:!0}),this.#i.PDt()}_Lt(t){const s=t[1],e=t[2],i=t[3],n=this.#s.OCt(t[0]);if(!n)throw new Error("missing behavior");this.#n.set(n,()=>{const t=s>=2?Dw.aLt:n,r=Dw.jn(t,{runtime:this.#s,id:e,name:i,wDt:s,CDt:s>=2?n:null});r.PDt(),this.#e.push(r),Hw.set(n,r),!this.#h&&Dw.oyt.ILt&&r instanceof Dw.oyt.ILt?this.#h=r:!this.#a&&Dw.oyt.CLt&&r instanceof Dw.oyt.CLt&&(this.#a=r),r.ODt()})}RLt(t){const s=this.#n.get(t);s&&(s(),this.#n.delete(t))}static DDt(t,s=1){if(Dw.bq.DDt!==Uw)throw new Error("invalid method");1===s&&Lw.push(t),Nw.push(t)}static kDt(t=1){if(Dw.bq.kDt!==Vw)throw new Error("invalid method");1===t&&Lw.pop(),Nw.pop()}static xK(){if(Dw.bq.xK!==Ww)throw new Error("invalid method");if(0===Lw.length)throw new Error("no init object set");return Lw.at(-1)}static xq(t){if(Dw.bq.xq!==zw)throw new Error("invalid method");if(Ow(t),0===Nw.length)throw new Error("no init object set");return Nw.at(-1)}static PLt(t){Bw.push(t)}static ELt(){Bw.pop()}static ZK(){if(0===Bw.length)throw new Error("no init properties set");return Bw.at(-1)}FLt(){for(const t of this.#t)t.ODt()}static zq(t){return jw.get(t)||null}static b0(t){return Hw.get(t)||null}Y5(){return this.#i}ALt(){return this.#h}OLt(){return this.#a}wZ(t){return this.#r.has(t)}},Uw=Dw.bq.DDt,Vw=Dw.bq.kDt,Ww=Dw.bq.xK,zw=Dw.bq.xq}{const Jw=self._s,$w=new Set;Jw.DLt=class extends Jw.Wn{constructor(){super(),this.kLt=0,this.f6="",this.yU=0,this.LLt=0,this.NLt=0,this.Vy=0,this.Wy=0,this.BLt=!1,this.ULt=!1,this.VLt=null,this.WLt="",this.xP=Jw.jn(Jw.Rect),this.zLt=Jw.jn(Jw.Cl),this.jLt="",this.HLt=new self.d$(this),$w.add(this)}Hn(){this.TP(),this.VLt&&0===this.VLt._6()&&this.VLt.Hn(),this.VLt=null,$w.delete(this),this.JLt()}static M6(){for(const t of $w)t.WLt="",t.xP.set(0,0,0,0),t.zLt.Xl(t.xP)}$Lt(t){this.f6=t[0],this.yU=t[1],this.LLt=t[2],this.NLt=t[3],this.Vy=t[4],this.Wy=t[5],this.BLt=t[6],this.ULt=!0}qLt(t,s,e){if(e=!!e,this.VLt)throw new Error("already loaded asset");this.f6=s;const i={k5:e};return Jw.Yh(s)&&(i.L5="remote"),this.p$(t,i),this.VLt.B5()}XLt(t,s){if(this.VLt)throw new Error("already loaded asset");this.f6="",this.yU=s.size,this.VLt=Jw.jn(Jw.N5,t.Dj(),{blob:s,size:this.yU,L5:"local"})}YLt(t){if(t===this)throw new Error("cannot replace with self");this.kLt++,this.TP(),this.f6=t.f6,this.yU=t.yU,this.LLt=t.LLt,this.NLt=t.NLt,this.Vy=t.Vy,this.Wy=t.Wy,this.BLt=t.BLt,this.ULt=t.ULt,this.VLt=t.VLt,this.WLt=t.WLt,this.xP=t.xP,this.zLt=t.zLt,this.JLt()}W5(){return this.f6}Au(){return this.yU}KLt(){return this.LLt}ZLt(){return this.NLt}Bkt(){return this.BLt}by(){return this.Vy}Ty(){return this.Wy}QLt(){return this.VLt.by()}tNt(){return this.VLt.Ty()}p$(t,s){if(this.VLt)throw new Error("already got asset");s=Object.assign({},s,{url:this.W5(),size:this.Au()}),this.VLt=t.D5(s)}g6(){return this.VLt&&this.VLt.g6()}async b4(t,s){if(!this.VLt)throw new Error("no asset");if(this.WLt)throw new Error("already loaded texture");const e=this.kLt;this.WLt="loading";const i=await this.VLt.b4(t,s);if(this.kLt!==e)return null;if(!i)return this.WLt="",null;this.WLt="loaded",this.ULt||(this.Vy=i.by(),this.Wy=i.Ty(),this.ULt=!0);const n=this.BLt?this.Wy:this.Vy,r=this.BLt?this.Vy:this.Wy;return this.xP.set(this.LLt,this.NLt,this.LLt+n,this.NLt+r),this.xP.St(i.by(),i.Ty()),this.zLt.Xl(this.xP),this.BLt&&this.zLt.su(),i}TP(){this.WLt&&(this.VLt&&this.VLt.TP(),this.WLt="",this.xP.set(0,0,0,0),this.zLt.Xl(this.xP))}kG(){return this.VLt&&"loaded"===this.WLt?this.VLt.kG():null}kE(){return this.xP}Lkt(){return this.zLt}h2(){return this.HLt}sNt(){return this.VLt}async eNt(t){t||(t=await this.VLt.I6()),this.ULt||(this.Vy=t.width,this.Wy=t.height,this.ULt=!0);const s=Jw.uo(this.Vy,this.Wy),e=s.getContext("2d");return this.BLt?(e.rotate(Math.PI/-2),e.translate(-this.Wy,0),e.drawImage(t,this.LLt,this.NLt,this.Wy,this.Vy,0,0,this.Wy,this.Vy)):e.drawImage(t,this.LLt,this.NLt,this.Vy,this.Wy,0,0,this.Vy,this.Wy),s}async iNt(t){if(this.jLt)return this.jLt;const s=await this.eNt(t),e=await Jw.co(s);return this.jLt=URL.createObjectURL(e),this.jLt}JLt(){this.jLt&&(URL.revokeObjectURL(this.jLt),this.jLt="")}}}{const qw=self._s;qw.nNt=class extends qw.Wn{constructor(t){super(),this.qn=t[0],this.rNt=t[1],this.VPt=!!t[2],this.Nmt=t[3],this.hNt=t[4],this.oNt=!!t[5],this.f8=t[6],this.aNt=t[7].map(t=>qw.jn(qw.lNt,t)),this.uNt=new self.C0(this)}static cNt(t,s){const e=qw.jn(qw.nNt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return e.aNt.push(qw.lNt.cNt(t)),e}Hn(){for(const t of this.aNt)t.Hn();qw.wh(this.aNt)}fNt(t){for(const s of this.aNt)s.J0().p$(t)}dNt(t,s){return Promise.all(this.aNt.map(e=>e.J0().b4(t,s)))}pNt(){for(const t of this.aNt)t.J0().TP()}Rc(){return this.qn}H7(){return this.f8}N0(){return this.aNt.length}U0(){return this.aNt}mNt(t){if((t=Math.floor(t))<0||t>=this.aNt.length)throw new RangeError("invalid frame");return this.aNt[t]}gNt(t,s){(s=Math.floor(s))<0?this.aNt.unshift(t):s>=this.aNt.length?this.aNt.push(t):this.aNt.splice(s,0,t)}yNt(t){if((t=Math.floor(t))<0||t>=this.aNt.length)throw new RangeError("invalid frame");this.aNt[t].Hn(),this.aNt.splice(t,1)}SNt(t){for(let s=0,e=this.aNt.length;s<e;++s)if(qw.Ki(this.aNt[s].o1(),t))return s;return-1}wNt(t){if("string"==typeof t){const s=this.SNt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}R0(){return this.rNt}E0(){return this.VPt}A0(){return this.Nmt}D0(){return this.hNt}L0(){return this.oNt}vNt(){return this.uNt}}}{const Xw=self._s,Yw=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let e=0,i=t.length;e<i;++e)s[e]=t.charCodeAt(e);return new Blob([s],{type:"image/png"})})();Xw.lNt=class extends Xw.Wn{constructor(t){super(),this.xNt=Xw.jn(Xw.DLt),this.xNt.$Lt(t),this.bNt=t[7],this.MNt=Xw.jn(Xw.Ca,t[8],t[9]),this.TNt=t[10].map(t=>Xw.jn(Xw.GNt,this,t)),this._Nt=new Map;for(const t of this.TNt)this._Nt.set(t.Rc().toLowerCase(),t);this.INt=null;const s=t[11];s.length>=6&&(this.INt=Xw.jn(Xw.au,s)),this.VS=t[12]?t[12]:"",this.CNt=new self.H0(this)}static cNt(t){const s=Xw.jn(Xw.lNt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.xNt.XLt(t,Yw),s}Hn(){this.INt&&(this.INt.Hn(),this.INt=null),this.xNt.Hn(),this.xNt=null}J0(){return this.xNt}$0(){return this.bNt}OZ(){return this.MNt.Aa()}LZ(){return this.MNt.Da()}e1(){return this.INt}t1(t){return this._Nt.get(t.toLowerCase())||null}Q0(t){return(t=Math.floor(t))<0||t>=this.TNt.length?null:this.TNt[t]}X0(){return this.TNt.length}o1(){return this.VS}V0(){return this.CNt}}}{const Kw=self._s;Kw.GNt=class extends Kw.Wn{constructor(t,s){super(),this.RNt=t,this.qn=s[0],this.PNt=Kw.jn(Kw.Ca,s[1],s[2])}Hn(){}Rc(){return this.qn}dM(){return this.PNt.Aa()}gM(){return this.PNt.Da()}ENt(){return this.PNt}}}{const Zw=globalThis._s,Qw=globalThis.lZ,tv=(globalThis.Yq,globalThis.cX),sv=globalThis._X;globalThis.assert;Zw.RSt=class extends Zw.Wn{constructor(t,s,e){super();const i=t.OCt(e[1]);this.Nc=t,this.$Dt=Zw.bq.zq(i),this.QDt=null,this.FNt=i.Instance,this.US=s,this.f8=e[11],this.qn=e[0],this.SRt=this.Nc.sTt(e[14]),this.ANt=!!e[9],this.ONt=!!e[2],this.DNt=!!e[10],this.kNt=e[3].map(s=>({K6:s[0],type:s[1],name:s[2],LNt:t.sTt(s[3])})),this.NNt=e[4],this.BNt=e[5],this.oDt=this.$Dt.Cq(),this.UNt=Zw.jn(Zw.Event.Sf),this.X8=null;const[n,r]=t.Nj().j$();if(this.VNt=Zw.jn(Zw.WNt,n,r),this.zNt=!0,this.jNt=null,this.HNt=null,this.JNt=-1,this.$Nt=null,this.qNt=null,this.XNt=null,this.YNt=null,this.KNt=null,this.ZNt=!1,this.QNt=null,this.tBt=e[8].map(t=>Zw.sBt.e_(this,t)),this.eBt=[],this.iBt=new Map,this.nBt=new Map,this.rBt=new Set,this.hBt=new Map,this.oBt=Zw.jn(Zw.Gxt,this),this.aBt=null,this.lBt=0,this.uBt=!1,this.QNt=null,this.xNt=null,this.cBt=null,this.fBt=null,this.dBt=null,this.pBt=0,this.JPt=new Map,this.$Pt=new Map,this.E6=[],this.mBt=new Map,this.gBt=!0,this.$Dt.Oq()&&(this.X8=Zw.jn(Zw.Y8,this,e[12])),e[6]&&(this.xNt=Zw.jn(Zw.DLt),this.xNt.$Lt(e[6])),e[7]){this.cBt=e[7].map(t=>Zw.jn(Zw.nNt,t)),this.fBt=new Map,this.dBt=new Map;for(const t of this.cBt)this.fBt.set(t.Rc().toLowerCase(),t),this.dBt.set(t.H7(),t)}this.ONt?(this.jNt=[],this.HNt=new Set,this.JNt=this.Nc.yBt()):(this.$Nt=[],this.qNt=new Set,this.XNt=[],this.YNt=[],this.KNt=[]);const h=this.$Dt.fEt();if(h<2&&(this.QDt=Zw.jn(i.SBt,this,e[15]),!(this.QDt instanceof Zw.JDt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.wBt=null,this.vBt=null,this.l7=Zw.jn(Zw.Event.Sf),Zw.bq.DDt(this,h),h>=2?(o=i.SBt,o||(o=globalThis.e2)):o=this.QDt.EDt(),o&&!this.ONt){if(this.wBt=new o(h<2?this:null),h<2&&!(this.wBt instanceof tv))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.wBt instanceof globalThis.e2))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.ONt?sv:tv;this.wBt=new t}if(Zw.bq.kDt(h),e[13]){const t=e[13];if(t){const s=t[0],e=t[1],i=t[2];this.QDt.qDt(s,e,i)}}this.Nc.xBt()&&!this.ONt&&!this.DNt&&this.oDt||this.PDt(),this.$Dt._q()&&(this.$Dt.ADt(this),this.bBt(e)),this.MBt=null}static e_(t,s,e){return Zw.jn(Zw.RSt,t,s,e)}Hn(){if(this.UNt.Hn(),this.UNt=null,this.xNt&&(this.xNt.Hn(),this.xNt=null),this.cBt){for(const t of this.cBt)t.Hn();Zw.wh(this.cBt),this.fBt.clear(),this.dBt.clear()}this.MBt=null,this.oBt.Hn(),this.oBt=null,this.JPt.clear(),this.$Pt.clear(),this.QNt=null,this.Nc=null}TBt(t){for(let s=1,e=t.length;s<e;++s){const e=this.Nc.m7(t[s]);this.jNt.push(e),this.HNt.add(e),e.$Nt.push(this),e.qNt.add(this)}}GBt(t){this.ZNt=!0,this.QNt=t}CK(){return this.ZNt}vet(){return this.QNt}_Bt(){let t=0;if(!this.ONt)for(const s of this.$Nt)for(const e of s.IBt()){const s=e.Rc().toLowerCase();this.iBt.set(s,e),this.nBt.set(s,t),this.eBt.push(e),++t}for(const s of this.IBt()){const e=s.Rc().toLowerCase();this.iBt.set(e,s),this.nBt.set(e,t),this.eBt.push(s),++t}for(const t of this.eBt)this.rBt.add(t.p0().constructor);if(!this.ONt&&this.$Nt.length){const t=this.Nc.CBt();Zw.bh(this.XNt,t,0),Zw.bh(this.YNt,t,0),Zw.bh(this.KNt,t,0);const s=[];let e=0,i=0,n=0;for(const t of this.$Nt){const r=t.qRt();this.XNt[r]=e,e+=t.RBt(),this.YNt[r]=i,i+=t.PBt(),this.KNt[r]=n,n+=t.EBt();const h=t.AX();if(h&&this.X8)for(const t of h.OX())s.push(t.FBt(this.X8))}this.X8&&this.X8.ABt(s)}}bBt(t){const s=Zw.Ye(t[17])?t[17]:this.Nc.OBt(),e=Zw.jn(Zw.Instance,{runtime:this.Nc,objectType:this,uid:s});e.DBt(t[16],[]),this.Nc.kBt(s,e),this.E6.push(e)}oFt(){return this.QDt}LBt(){return this.DNt}Sf(){return this.UNt}PDt(){this.ONt||(this.QDt?this.QDt.PDt():this.wBt.i2())}NBt(){return this.pBt>0}async Met(t){this.ONt||(this.pBt++,1===this.pBt&&(this.QDt?await this.QDt.Met(t):await this.wBt.o2(this.Nc.AJ().FJ())))}Ret(){if(!this.ONt){if(this.pBt--,this.pBt<0)throw new Error("released textures too many times");0===this.pBt&&(this.QDt?this.QDt.Ret():this.wBt.a2(this.Nc.AJ().FJ()))}}_et(){if(this.ONt)throw new Error("not applicable to family");this.QDt?this.QDt._et():this.wBt.l2()}async Yet(t){this.ONt||(this.QDt?await this.QDt.Yet(t):await this.wBt.u2(this.Nc.AJ().FJ()))}m$(){return this.Nc}Zq(){return this.$Dt}BBt(){return this.FNt}Rc(){return this.qn}sTt(){return this.SRt}Ej(){return this.US}H7(){return this.f8}N7(){return this.ONt}h8(){return this.ANt}Cq(){return this.oDt}qRt(){return this.JNt}IBt(){return this.tBt}PBt(){return this.NNt}UBt(t){return t&&this.rBt.has(t)}RBt(){return this.kNt.length}VBt(){return this.kNt.map(t=>t.K6)}WBt(t){return this.kNt.findIndex(s=>s.K6===t)}nut(t){return this.kNt.findIndex(s=>s.name===t)}zBt(){return this.kNt.map(t=>t.name)}jBt(){return this.kNt.map(t=>t.LNt)}hut(t){if((t=Math.floor(t))<0||t>=this.kNt.length)throw new RangeError("invalid instance variable index");return this.kNt[t].type}rut(t){if((t=Math.floor(t))<0||t>=this.kNt.length)throw new RangeError("invalid instance variable index");return this.kNt[t].name}EBt(){return this.BNt}HBt(){return this.eBt}Vft(t){return this.iBt.get(t.toLowerCase())||null}aut(t){const s=this.nBt.get(t.toLowerCase());return void 0===s?-1:s}AX(){return this.X8}Oq(){return this.$Dt.Oq()}JBt(){return this.X8&&this.X8.$Bt()}zTt(){return this.oBt}uX(){return this.oBt.uX()}J0(){return this.xNt}S7(t){this.aBt=t}y7(){return this.aBt}w7(t){this.lBt=t}qBt(){return this.lBt}XBt(){return this.cBt}YBt(){return this.cBt.length}MX(){return this.$Nt}dFt(t){return this.qNt.has(t)}RX(){return this.jNt}EX(t){return this.HNt.has(t)}QRt(t){return this.YNt[t]}$Rt(t){return this.XNt[t]}eRt(t){this.hBt.set(t.oRt().toLowerCase(),t)}iRt(t){return!!this.dRt(t)}dRt(t){const s=this.hBt.get(t.toLowerCase());return s&&s._u()?s:null}KBt(){return this.cBt}ZBt(t){if(!this.cBt)throw new Error("no animations");return this.fBt.get(t.toLowerCase())||null}QBt(t){if(!this.cBt)throw new Error("no animations");return this.dBt.get(t)||null}tUt(t){if(this.ZBt(t))throw new Error(`animation name '${t}' already exists`);const s=Zw.nNt.cNt(this.m$(),t);return this.cBt.push(s),this.fBt.set(s.Rc().toLowerCase(),s),this.dBt.set(s.H7(),s),s}sUt(t){const s=this.ZBt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.cBt.length)throw new Error("cannot remove last animation");const e=this.cBt.indexOf(s);this.cBt.splice(e,1),this.fBt.delete(s.Rc().toLowerCase()),this.dBt.delete(s.H7()),s.Hn()}eUt(){if(!this.cBt)throw new Error("no animations");return this.cBt[0]}iUt(){return this.eUt().mNt(0)}nUt(){if(this.cBt){const t=this.iUt().J0();return[t.by(),t.Ty()]}return this.xNt?[this.xNt.by(),this.xNt.Ty()]:[100,100]}Xq(){if(!this.$Dt._q())throw new Error("not a single-global plugin");return this.E6[0]}lX(){return this.E6}*tX(){yield*this.E6}*aX(){yield*this.E6,yield*this.Nc.yAt(this)}dX(){return this.E6.length}G7(t){this.E6.push(t)}rUt(){this.gBt=!0}iit(){if(!this.gBt||this.ONt)return;const t=this.E6;let s=0;for(let e=t.length;s<e;++s)t[s].hUt(s);const e=this.Nc.oUt();for(const t of e)t.yK()===this&&t.hUt(s++);this.gBt=!1}aUt(t){const s=this.E6;if(t<s.length)return s[t];t-=s.length;const e=this.Nc.oUt();for(const s of e)if(s.yK()===this){if(0===t)return s;--t}return null}tAt(t){if(t&&t.CK()&&t.yK()!==this)for(const s of t.RK())if(s.yK()===this)return s;const s=this.uX().lX();return s.length?s[0]:null}oX(t){const s=this.uX().lX();return s.length>0?s[t.FK()%s.length]:null}*MAt(t,s){const e=this.uX().lX(),i=e.length,n=s.uX(),r=s.uX().lX(),h=r.length;let o=t.FK();!s.N7()&&n.Nxt()||(o=r.indexOf(t));const a=Math.ceil(i/h),l=i%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield e[t]}TEt(t){this.QDt?.TEt(t)}GCt(){if(!this.ZNt||this.ONt)return;this.iit();const t=this.uX(),s=t.Jxt(),e=t.Nxt(),i=this.Nc.HMt(),n=i&&i.SH()&&i.SH().sbt();for(const i of this.QNt.PX()){if(i===this)continue;i.iit();const r=i.uX();if(r.Hxt(e),!e){const e=r.Jxt();Zw.wh(e);for(const t of s)e.push(i.aUt(t.FK()));if(n){const s=t.$xt(),e=r.$xt();Zw.wh(e);for(const t of s)e.push(i.aUt(t.FK()))}}}}REt(t,s){for(const e of this.vet().PX()){const i=e.uX();t?Zw.Sh(i.$xt(),s):Zw.Sh(i.Jxt(),s)}}lUt(){return this.VNt}uUt(t){this.zNt=!!t}cUt(){if(this.zNt&&this.oDt){for(const t of this.E6)t.WJ().fUt();for(const t of this.Nc.oUt())t.yK()===this&&t.WJ().fUt();this.zNt=!1}}dUt(t,s,e){if(s){const e=this.mBt.get(s);e&&(e.delete(t),0===e.size&&this.mBt.delete(s))}if(e){let s=this.mBt.get(e);s||(s=new Set,this.mBt.set(e,s)),s.add(t)}}*pUt(){if(this.N7()){const t=new Set;for(const s of this.jNt)for(const e of s.pUt())t.add(e);yield*t.values()}else for(const t of this.mBt.keys())t.Jn()||(yield t)}SEt(){return this.JPt||(this.JPt=new Map),this.JPt}wEt(){return this.$Pt||(this.$Pt=new Map),this.$Pt}mUt(){return this.UBt(Zw.oyt.ILt)}gUt(){return this.UBt(Zw.oyt.CLt)}yUt(){return this.UBt(Zw.oyt.SUt)}M7(){return this.UBt(Zw.oyt.wUt)}ust(){const t={instances:this.E6.map(t=>t._M())};return this.JPt&&this.JPt.size&&(t.ex=Zw.So(this.JPt)),t}cst(t,s){this.JPt&&(this.JPt.clear(),this.JPt=null);const e=t.ex;e&&(this.JPt=Zw.wo(e));const i=this.E6,n=t.instances;for(let t=0,s=Math.min(i.length,n.length);t<s;++t)i[t].IM(n[t]);for(let t=n.length,s=i.length;t<s;++t)this.Nc.MK(i[t]);for(let t=i.length,e=n.length;t<e;++t){const e=n[t];let i=null;if(this.Cq()&&(i=this.Nc.SJ().aet(e.w.l),!i))continue;const r=this.Nc.T7(this.aBt||this,i,!1,0,0,!0);r.IM(e),s&&s.add(r)}this.MBt=n,this.rUt()}vUt(){return this.MBt}xUt(){this.MBt=null}bUt(){for(let t=0,s=this.E6;t<s;++t)this.E6[t].bUt()}Jq(){return this.wBt}aH(){return this.l7}MUt(){return this.vBt}pX(t){this.vBt=t}q5(t){const s=this.Nc,e=s.aZ()&&!s.fH().wX();e&&Qw.Cit(),this.l7.dispatchEvent(t),e&&Qw.Rit()}}}{const ev=self._s;ev.TUt=class extends ev.Wn{constructor(t,s){super(),this.Nc=t,this.GUt=s;for(const t of this.GUt)t.GBt(this)}Hn(){this.Nc=null}m$(){return this.Nc}wet(){return this.GUt}PX(){return this.GUt}rit(){return this.GUt.some(t=>t.Cq())}}}{const iv=self._s,nv=self.lZ,rv=(self.gK,iv.bq),hv=[];let ov=0;const av=new WeakMap,lv=new WeakMap;iv.Instance=class extends iv.Wn{constructor(t){if(iv.bq!==rv)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this._Ut=t.objectType,this.Flt=null,this.IUt=null,this.CUt=null,this.RUt=0,this.PUt=t.uid,this.EUt=ov++,this.KD=0,this.FUt=null;const s=iv.Dh(t.tags);s.length>0&&(this.FUt=new Set(s)),this.AUt=hv,this.OUt=hv;const e=this._Ut.HBt();e.length>0&&(this.OUt=e.map((t,s)=>iv.jn(iv.DUt,{runtime:this.Nc,m0:t,S0:this,index:s}))),this.kUt=this._Ut.CK()?[]:null,this.LUt=-1,this.UNt=null;const i=this.Zq();if(i.Bb()&&(this.KD|=4),i.Cq())if(this.Flt=iv.jn(iv.NUt,this,t.CZ),t.BUt)this.Flt.UUt(t.BUt);else{this.Flt.VUt();const[t,s]=this._Ut.nUt();this.Flt.nE(t,s),this.yK().JBt()&&this.Flt.IZ().WUt()}t.zUt?this.jUt(t.zUt):this.HUt()}Hn(){if(this.CUt&&(this.CUt.bK(),this.CUt=null),this.OUt.length>0){for(const t of this.OUt)t.Hn();iv.wh(this.OUt)}this.IUt&&(this.IUt.Hn(),this.IUt=null);const t=av.get(this);t&&(t.clear(),av.delete(this));const s=lv.get(this);s&&(s.clear(),lv.delete(this)),this.kUt&&iv.wh(this.kUt),this.UNt&&(this.UNt.Hn(),this.UNt=null),this.FUt&&this.FUt.clear(),this.FUt=null,this.Nc=null,this._Ut=null,this.AUt.length>0&&iv.wh(this.AUt),this.Flt&&(this.Flt.Hn(),this.Flt=null)}jUt(t){t.length>0&&(this.AUt=[],iv.Th(this.AUt,t))}HUt(){const t=this._Ut.RBt();if(0===t)return;this.AUt=[];const s=[0,0,""];for(let e=0;e<t;++e)this.AUt.push(s[this._Ut.hut(e)])}DBt(t,s){if(this.IUt)throw new Error("already got sdk instance");for(let t=0,e=this.OUt.length;t<e;++t)this.OUt[t].DBt(s?s[t]:null);if(this.Zq().fEt()<2){if(this.IUt=iv.jn(this._Ut.BBt(),this,t),!(this.IUt instanceof iv.KDt))throw new Error("sdk type must derive from SDKInstanceBase");!this.Zq().Cq()&&this._Ut.MUt()&&this.NJ()}else{const s=this.Zq().EDt();this.JUt(s.Instance,t)}}o0(){return this.IUt??this.CUt}WJ(){return this.Flt}m$(){return this.Nc}HH(){return this.LUt}kK(){const t=this.LUt;return-1===t?this.m$().HH():t}JH(t){((t=+t)<0||!isFinite(t))&&(t=0),this.LUt=t,this.yK().JBt()&&this.Nc.$Ut(this,!0)}NK(){this.LUt=-1,this.yK().JBt()&&this.Nc.$Ut(this,!1)}Ztt(){return this.Nc.qUt(this)}Sf(){return this.UNt||(this.UNt=iv.jn(iv.Event.Sf)),this.UNt}lT(t){this.IUt?this.IUt.lT(t):this.CUt.g2(this.Nc.AJ().FJ())}PDt(t){this.IUt.PDt(t)}XUt(){this.KD|=2}YUt(){return!!(2&this.KD)}KUt(){this.KD|=1}D2(){return!!(1&this.KD)}Bb(){return!!(4&this.KD)||(this.IUt?this.IUt.Bb():this.CUt.xb())}ZUt(){this.KD|=32}ztt(){return!!(32&this.KD)}QUt(){return!!(8&this.KD)}tVt(t){t?this.KD|=8:this.KD&=-9}sVt(){return!!(16&this.KD)}eVt(t){t?this.KD|=16:this.KD&=-17}iVt(){return!!(64&this.KD)}nVt(t){t?this.KD|=64:this.KD&=-65}rVt(t,s){t<<=16,s?this.KD|=t:this.KD&=~t}hVt(t){return!!(this.KD&t<<16)}Akt(){return this.IUt?this.IUt.Akt():null}Okt(){return this.IUt?this.IUt.Okt():null}Dkt(){return this.IUt?this.IUt.Dkt():null}kkt(){return this.IUt?this.IUt.kkt():null}Nkt(){return!!this.IUt&&this.IUt.Nkt()}MFt(t){return this.IUt?this.IUt.MFt(t):[this.CUt.x,this.CUt.y,this.CUt.VZ]}yK(){return this._Ut}Vtt(){return this.IUt?this.IUt.Vtt():this.CUt.S2()}SAt(t){return t.N7()?t.EX(this.yK()):this.yK()===t}oVt(t,s,e){const i=(s,e)=>{const i=e||s.yK(),n=t.get(i);n?n.add(s):t.set(i,new Set([s]))};if(i(this,s),this.CK())for(const t of this.RK())i(t);if(e)for(const t of this.wQ())i(t)}aVt(){if(!this.Zq().Nq())throw new Error("object does not support scene graph")}TQ(){return null!==this.cQ()}cQ(){const t=this.WJ();if(!t)return null;const s=t.cQ();return s?s.N1():null}dQ(){const t=this.WJ();if(!t)return null;const s=t.dQ();return s?s.N1():null}*pQ(){const t=this.WJ();if(t)for(const s of t.pQ())yield s.N1()}lVt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}pst(){const t=this.WJ();return!!t&&t.pst()}uVt(t){const s=this.WJ();if(!s)return[];const e=t.Rc();return s.dit().map(t=>t.N1()).filter(t=>t.yK().Rc()===e)}dit(){const t=this.WJ();return t?t.dit().map(t=>t.N1()):[]}*children(){const t=this.WJ();if(t)for(const s of t.children())yield s.N1()}*wQ(){const t=this.WJ();if(t)for(const s of t.wQ())yield s.N1()}gQ(){const t=this.WJ();return t?t.gQ():0}cVt(){return[...this.pQ()].length}bAt(){const t=this.WJ();return t?t.bAt():0}SQ(t){const s=this.WJ();if(!s)return null;const e=s.SQ(t);return e?e.N1():null}fVt(){const t=this.WJ();if(!t)return NaN;const s=t.cQ();return s?s.dVt(t):NaN}pVt(t){for(const s of this.WJ().dit())if(s.N1().PK()===t)return!0;return!1}xQ(t,s){this.aVt(),t.aVt(),this.WJ().xQ(t.WJ(),s||{})}bQ(t){const s=this.WJ();s&&s.bQ(t.WJ())}zQ(){const t=this.WJ();return!!t&&t.zQ()}Jet(){const t=this.WJ();if(!t)return;const s=t.mVt();if(s)for(const t of s){const s=this.Nc.LJ(t[2]);if(s){const e=t[3];this.xQ(s,{_Q:!!(1&e),CQ:!!(e>>1&1),PQ:!!(e>>2&1),FQ:!!(e>>3&1),OQ:!!(e>>4&1),WQ:!!(e>>5&1),kQ:!!(e>>6&1),NQ:!!(e>>7&1),UQ:!!(e>>8&1)})}}}$et(t,s){const e=t.get(this);if(e)for(const t of e.sceneGraphJson.children){const e=s.get(t.index);if(!e)continue;const i=t.flags;this.xQ(e,{_Q:!!(1&i),CQ:!!(i>>1&1),PQ:!!(i>>2&1),FQ:!!(i>>3&1),OQ:!!(i>>4&1),WQ:!!(i>>5&1),kQ:!!(i>>6&1),NQ:!!(i>>7&1),UQ:!!(i>>8&1)})}}DK(){const t=this.Nc.gVt();return t?t.ESt(this):""}CK(){return null!==this.kUt}yVt(){iv.wh(this.kUt)}eit(t){this.kUt.push(t)}_K(){return this.kUt}SVt(t){return!!this.wVt(t)}wVt(t){const s=this.RK();if(null===s||0===s.length)return!1;for(const e of s)if(e.yK()===t)return e;return null}RK(){return this.kUt}P_t(){for(const t of this.RK())t.yK().uX().qxt(t)}GEt(){for(const t of this.RK())t.yK().uX().zxt(t)}_Et(t){for(const s of this.RK())s.yK().uX().Jxt()[t]=s}CEt(){for(const t of this.RK())t.yK().uX().jxt(t)}IEt(t){for(const s of this.RK())s.yK().uX().$xt()[t]=s}Zq(){return this._Ut.Zq()}hUt(t){this.RUt=t}FK(){return this._Ut.iit(),this.RUt}PK(){return this.PUt}vVt(t){this.PUt=t}xVt(){return this.EUt}bVt(t){t?this.WK(new Set(t)):this.FUt=null}WK(t){if(0===t.size)this.FUt=null;else{this.FUt?this.FUt.clear():this.FUt=new Set;for(const s of t)this.FUt.add(s)}}UK(){return this.FUt??new Set}Out(){return Array.from(this.UK()).join(" ")}XAt(t){t=Math.floor(t);for(const s of this.UK()){if(0===t)return s;--t}return""}Uft(){return this.OUt}MVt(t){if(!t)return null;for(const s of this.OUt)if(s.p0()instanceof t)return s;return null}TVt(t){if(!t)return null;const s=this.MVt(t);return s?s.o0():null}Bft(t){const s=this.OUt;for(let e=0,i=s.length;e<i;++e)if(s[e].y0().H7()===t)return e;return-1}GVt(){return this.AUt}zBt(){return this._Ut.zBt()}_Vt(){return this.AUt.length}ypt(t){t|=0;const s=this.AUt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}HRt(t){return this.AUt[t]}IVt(t){const s=this.AUt[t];return 0===this._Ut.hut(t)?!!s:s}Spt(t,s){t|=0;const e=this.AUt;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");switch(this._Ut.hut(t)){case 0:e[t]=s?1:0;break;case 1:e[t]="number"==typeof s?s:parseFloat(s);break;case 2:e[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}amt(t,s){if(0===s)return;t|=0;const e=this.AUt;if(t<0||t>=e.length)throw new RangeError("invalid instance variable");const i=e[t];if("number"!=typeof i)throw"boolean"==typeof i?new Error("can not set offset of boolean variable"):"string"==typeof i?new Error("can not set offset of string variable"):new Error("unknown instance variable type");e[t]+="number"==typeof s?s:parseFloat(s)}SEt(){let t=av.get(this);return t||(t=new Map,av.set(this,t),t)}wEt(){let t=lv.get(this);return t||(t=new Map,lv.set(this,t),t)}CVt(t){const s=this.yK();if(s.aH().Mf(t))return!0;for(const e of s.MX())if(e.aH().Mf(t))return!0;return!!this.Nc.aH().Mf(t)}SX(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const e=this.WJ();if(e&&e.pst())for(const t of this.wQ())if(s.add(t),t.CK())for(const e of t.RK())s.add(e);if(this.CK())for(const t of this.RK())t.SX(s);if(!t){for(const t of s.values())t.qet();this.Xet()}}RVt(){this._Ut.MUt()&&this.NJ();for(const t of this.OUt)t.SLt()}PVt(){this.RVt()}qet(){if(this.RVt(),this.CVt("instancecreate")){const t=this.yK(),s=new iv.Event("instancecreate");s.S0=this.NJ(),t.q5(s);for(const e of t.MX())e.q5(s);this.Nc.q5(s)}this.Nc.tZ(this.Zq().gGt().h$.ZAt,this,null)}Xet(){if(this.Zq().Nq()){if(this.q5(new iv.Event("hierarchyready")),this.CVt("hierarchyready")){const t=this.yK(),s=new iv.Event("hierarchyready");s.S0=this.NJ(),t.q5(s);for(const e of t.MX())e.q5(s);this.Nc.q5(s)}this.Nc.tZ(this.Zq().gGt().h$.mAt,this,null)}}EVt(){this.Nc.tZ(this.Zq().gGt().h$.QAt,this,null)}FVt(t){if(this.CUt){const s=new iv.Event("destroy");s.AVt=t,this.q5(s)}if(!this.CVt("instancedestroy"))return;const s=this.yK(),e=new iv.Event("instancedestroy");e.S0=this.NJ(),e.AVt=t,s.q5(e);for(const t of s.MX())t.q5(e);this.Nc.q5(e)}OVt(){return this.IUt?this.IUt.vkt():this.CUt.mZ()}_M(t="full",s=null){const e={};"full"===t?e.uid=this.PK():e.c3=!0;const i=this.UK();if(i.size>0&&(e.tags=Array.from(i)),"visual-state"!==t){const s=av.get(this);if(s&&s.size&&(e.ex=iv.So(s)),-1!==this.HH()&&(e.mts=this.HH()),this._Ut.RBt()>0){const t={},s=this._Ut.VBt();for(let e=0,i=this.AUt.length;e<i;++e)t[s[e].toString()]=this.AUt[e];e.ivs=t}if(this.OUt.length){const s={};for(const e of this.OUt){const i=e._M(t);i&&(s[e.y0().H7().toString()]=i)}e.behs=s}}this.Flt&&(e.w=this.Flt.ust(t,s));const n=this.IUt?this.IUt._M():this.CUt.gZ();return n&&(e.data=n),e}gnt(t="full",s=null){this.Flt&&this.Flt.gnt(t)}Snt(t,s="full",e=null){this.Flt&&this.Flt.Snt(t,s,e)}DVt(t,s="full",e=null){this.Flt&&this.Flt.DVt(t,s,e)}bUt(){this.Zq().Cq()&&this.Flt.bUt()}IM(t,s="full",e=null){if("full"===s)this.PUt=t.uid;else if(!t.c3)return;if(this.bVt(t.tags),"visual-state"!==s){let s=av.get(this);s&&(s.clear(),av.delete(this));const e=t.ex;e&&(s=iv.wo(e),av.set(this,s)),this.LUt=t.hasOwnProperty("mts")?t.mts:-1;const i=t.ivs;if(i)for(const[t,s]of Object.entries(i)){const e=parseInt(t,10),i=this._Ut.WBt(e);if(i<0||i>=this.AUt.length)continue;let n=s;null===n&&(n=NaN),this.AUt[i]=n}}if(this.Zq().Cq()){const i=t.w;if(i){const t=i.l;if(this.Flt.zJ().H7()!==t){const e=this.Flt.zJ(),i=e.bJ().aet(t);i?(this.Flt.$J(i),e.C7(this,!0),i.G7(this,!0),i.qJ(this),this.Flt.RZ()):"full"===s&&this.Nc.MK(this)}this.Flt.cst(i,s,e)}}if("visual-state"!==s){const e=t.behs;if(e)for(const[t,i]of Object.entries(e)){const e=parseInt(t,10),n=this.Bft(e);n<0||n>=this.OUt.length||this.OUt[n].IM(i,s)}}const i=t.data;i&&(this.IUt?this.IUt.IM(i,s):this.CUt.yZ(i))}kVt(t){if(this.Flt.zJ().H7()===t)return;const s=this.Flt.zJ(),e=s.bJ().aet(t);e&&(this.Flt.$J(e),s.C7(this,!0),e.G7(this,!0),e.qJ(this),this.Flt.RZ())}NJ(){return this.CUt||this.JUt()}Tkt(){return!!this.CUt}JUt(t,s){const e=this.Flt?t?self.c2:self.e0:t?self.JK:self.gK,i=t||this.IUt.EDt(),n=this._Ut.MUt(),r=n||i||e,h=this.Zq().fEt();if(iv.bq.DDt(this,h),iv.bq.PLt(s),this.CUt=new r,iv.bq.ELt(),iv.bq.kDt(h),i&&!(this.CUt instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);if(n){const t=i||e;if(!(this.CUt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.CUt}SK(t){if(0===this.AUt.length)return;const s={},e=this._Ut.jBt();for(let t=0,i=e.length;t<i;++t)s[e[t]]={configurable:!1,enumerable:!0,get:iv.Instance.prototype.IVt.bind(this,t),set:iv.Instance.prototype.Spt.bind(this,t)};const i=Object.create(Object.prototype,s);t.LVt={value:i,writable:!1}}wK(t){const s=this.OUt;if(0===s.length)return;const e={};for(const t of s)e[t.y0().sTt()]={value:t.ekt(),writable:!1};const i=Object.create(Object.prototype,e);t.g_t={value:i,writable:!1}}q5(t){if(!this.Tkt())return;const s=this.NJ();t.S0=s;const e=this.Nc,i=e.aZ()&&!e.fH().wX();i&&nv.Cit(),s.dispatchEvent(t),i&&nv.Rit()}}}{const uv=self._s,cv=new Map;uv.mit=class extends uv.Wn{constructor(t){super(),this.OM=t,this.k_t=null,this.NVt=[],this.BVt=t.by(),this.UVt=t.Ty(),this.VVt=1,this.WVt=1,this.zVt=0,this.jVt=1,this.HVt=t.NA(),this.JVt=null,this.$Vt=null,this.qVt=NaN,this.XVt=!1,this.yst=NaN,this.Sst=NaN,this.YVt=s=>{if(s.S0!==this.k_t.N1())return;t.m$().Sf().removeEventListener("instancecreate",this.YVt);const e=this.k_t.N1().o0();this.XVt=!!e.but(),this.yst=this.XVt?e.xut():NaN,this.Sst=this.XVt?e.Tut():NaN}}Hn(){this.k_t=null,this.JVt=null,this.$Vt=null,this.qVt=NaN,this.XVt=!1,this.yst=NaN,this.Sst=NaN,uv.wh(this.NVt)}KVt(t){if(this.jVt=this.OM.NA(),this.HVt=this.jVt,this.k_t=t,this.zVt=t?t.UX():0,this.k_t){const t=this.OM.m$();if(this.k_t.N1().Zq().fEt()<2){const s=this.k_t.N1().o0();s?(this.XVt=!!s.but(),this.yst=this.XVt?s.xut():NaN,this.Sst=this.XVt?s.Tut():NaN):this.k_t.N1().D2()||t.Sf().addEventListener("instancecreate",this.YVt)}else this.XVt=!1,this.yst=NaN,this.Sst=NaN}else this.XVt=!1,this.yst=NaN,this.Sst=NaN}cQ(){return this.k_t}pst(){return this.NVt.length>0}dit(){return this.NVt}ZVt(){this.pst()&&1!==this.NVt.length&&(this.$Vt?this.NVt.sort((t,s)=>{const e=this.$Vt.get(t.N1()),i=this.$Vt.get(s.N1());return uv.Ye(e)&&uv.Ye(i)?e-i:0}):this.NVt.sort((t,s)=>{const e=t.Kft().QVt(),i=s.Kft().QVt();return uv.Ye(e)&&uv.Ye(i)?e-i:0}))}QVt(){return this.qVt}tWt(){return this.VVt}sWt(t){this.VVt=t}eWt(){return this.WVt}iWt(t){this.WVt=t}Lpt(){return this.HVt}HFt(){return this.jVt}nWt(t){this.jVt=t}Yft(){return 0===this.BVt?Number.EPSILON:this.BVt}sdt(){return 0===this.UVt?Number.EPSILON:this.UVt}rWt(){if(this.OM.EQ()){const t=this.k_t;let s=t.by(),e=t.Kft().Yft();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.XVt?1+s/this.yst:s/e}return 1}hWt(){if(this.OM.AQ()){const t=this.k_t;let s=t.Ty(),e=t.Kft().sdt();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.XVt?1+s/this.Sst:s/e}return 1}oWt(){return 0}aWt(){return{sw:this.BVt,sh:this.UVt,sx:this.VVt,sy:this.WVt,psa:this.zVt,oo:this.jVt,so:this.HVt,pi:this.OM.N1().fVt()}}ust(t,s=null){const e=this.aWt();return s&&s.selfOnly?Object.assign(e,{p:null,c:[]}):Object.assign(e,{p:this.lWt(t),c:this.uWt(t)})}cWt(t){let s="";return t.IQ()&&(s+="x"),t.RQ()&&(s+="y"),t.EQ()&&(s+="w"),t.AQ()&&(s+="h"),t.DQ()&&(s+="a"),t.LQ()&&(s+="z"),t.zQ()&&(s+="d"),t.BQ()&&(s+="o"),t.VQ()&&(s+="v"),s}lWt(t){return this.k_t?!this.k_t.N1()||this.k_t.N1().D2()?null:this.fWt(this.k_t,this.OM,t):null}uWt(t){return this.NVt.map(s=>this.fWt(s,s,t)).filter(t=>t)}fWt(t,s,e){const i=t.N1();if(i&&i.D2())return null;const n={};return n.uid=i.PK(),n.f=this.cWt(s),n.offsets=s.dWt(),n.data=uv.mit.pWt(i),n.oci=i.yK().Ej(),"state"===e?(n.inst=i._M("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=i.yK().lX().indexOf(i),n.inst=null),n}cst(t){this.BVt=t.sw,this.UVt=t.sh,this.VVt=t.sx,this.WVt=t.sy,this.zVt=t.psa,this.jVt=t.oo,this.HVt=t.so,this.qVt=uv.Ye(t.pi)?t.pi:NaN}mWt(t,s,e,i){if(!t&&!s)if(i?.aOt){if(this.JVt)for(const t of this.JVt)t.D2()||t.TQ()||t.m$().MK(t)}else if(this.JVt)for(const t of this.JVt)if(e.c&&e.c.length){if(!e.c.some(s=>s.uid===t.PK()))continue;t.D2()||t.TQ()||t.m$().MK(t)}this.JVt=t,this.$Vt=s}gWt(t){const s=this.OM.m$();return cv.has(t)?cv.get(t):s.LJ(t)}Snt(t,s){const e=this.OM,i=e.m$(),n=s?.yWt??new Set;if(t.p&&!this.k_t){const r=t.p.uid,h=this.gWt(r);if(h){const r=h.WJ();h.lVt(e.N1())?this.k_t=r:(h.pVt(e.N1().PK())?(i.MK(e.N1()),i.SWt(e.N1().PK()),cv.delete(e.N1().PK())):h.xQ(e.N1(),this.wWt(t.p.f)),n.has(e)||(e.vWt(t.p.offsets),this.xWt(h,t.p,s),this.bWt(h,h.PK(),e.m$(),s)),n.add(e),h.WJ().Kft().ZVt())}else if(uv.Ye(t.p.oci)){const n=i.mX(i.m7(t.p.oci),e.zJ(),0,0,!0);if(n){const r=this.MWt(t.p,i);r&&n.IM(r);const h=n.WJ(),o=!!s?.aOt;h.zJ().gX(n,!1,o),n.xQ(e.N1(),this.wWt(t.p.f)),cv.set(n.PK(),n),this.bWt(n,n.PK(),i,s),n.WJ().Kft().ZVt()}}}const r=[];for(const s of t.c){const t=s.uid,e=this.gWt(t);e&&r.push(e)}let h=0;for(const o of t.c){const a=o.uid,l=this.gWt(a);if(l){if(this.JVt){if(this.JVt.includes(l)){const i=l;if(i.yK()!==l.yK()){h++;continue}if(i.D2()){h++;continue}const o=t.c[h];if(!s?.aOt&&this.TWt(i,r,e)){if(e.N1().SQ(h)){const r=i.yK().Ej(),a=o.oci,l=e.N1().SQ(h).yK().Ej();if(r!==a||a!==l){this.GWt(t.c,e,n,s);break}this._Wt(h,o,e,n,s)}else this._Wt(h,o,e,n,s);h++;continue}if(i.TQ()&&i.cQ()!==e.N1()){const t=this.IWt(o,s);this.CWt(t,o,n,s),h++;continue}this.CWt(i.WJ(),o,n,s,!0),h++;continue}if(this.JVt[h]){const i=this.JVt[h];if(i.yK()!==l.yK()){h++;continue}if(i.D2()){h++;continue}const o=t.c[h];if(!s?.aOt&&this.TWt(i,r,e)){if(e.N1().SQ(h)){const r=i.yK().Ej(),a=o.oci,l=e.N1().SQ(h).yK().Ej();if(r!==a||a!==l){this.GWt(t.c,e,n,s);break}this._Wt(h,o,e,n,s)}else this._Wt(h,o,e,n,s);h++;continue}if(i.TQ()&&i.cQ()!==e.N1()){const t=this.IWt(o,s);this.CWt(t,o,n,s),h++;continue}this.CWt(i.WJ(),o,n,s,!0),h++;continue}}const i=l.yK();if(this.RWt(r,i)===e.N1().uVt(i).length){for(const t of e.N1().dit()){if(t.yK()!==i)continue;const e=t.WJ();if(e&&!n.has(e)){n.add(e),e.vWt(o.offsets),this.xWt(t,o,s);break}}h++;continue}if(l.TQ()&&l.cQ()!==e.N1()){const t=this.IWt(o,s);this.CWt(t,o,n,s),h++;continue}this.CWt(l.WJ(),o,n,s)}else if(this.JVt&&this.JVt[h]){const a=this.JVt[h],l=i.m7(this.PWt(o));if(a.yK()!==l){h++;continue}if(a.D2()){h++;continue}const u=t.c[h];if(!s?.aOt&&this.TWt(a,r,e)){if(e.N1().SQ(h)){const i=a.yK().Ej(),r=u.oci,o=e.N1().SQ(h).yK().Ej();if(i!==r||r!==o){this.GWt(t.c,e,n,s);break}this._Wt(h,u,e,n,s)}else this._Wt(h,u,e,n,s);h++;continue}if(a.TQ()&&a.cQ()!==e.N1()){const t=this.IWt(u,s);this.CWt(t,u,n,s),h++;continue}this.CWt(a.WJ(),u,n,s)}else{const t=this.IWt(o,s);this.CWt(t,o,n,s)}h++}}GWt(t,s,e,i){const n=s.m$();for(const t of s.N1().children())t&&!t.D2()&&(n.MK(t),n.SWt(t.PK()),cv.delete(t.PK()));this.JVt&&(this.JVt=[]),this.$Vt&&(this.$Vt=new WeakMap),Object.assign({},i,{assignZIndex:!1});for(const s of t){const t=this.IWt(s,i);this.CWt(t,s,e,i),this.JVt.push(t.N1()),this.$Vt.set(t.N1(),this.JVt.length-1)}s.Kft().ZVt()}TWt(t,s,e){const i=t.yK();return this.RWt(s,i)===e.N1().uVt(i).length}_Wt(t,s,e,i,n){const r=e.N1().SQ(t);if(!r)return;const h=r.WJ();h&&(i.has(h)||(h.vWt(s.offsets),this.xWt(r,s,n)),i.add(h))}wWt(t){const s={};return s._Q=t.includes("x"),s.CQ=t.includes("y"),s.PQ=t.includes("w"),s.FQ=t.includes("h"),s.OQ=t.includes("a"),s.kQ=t.includes("z"),s.WQ=t.includes("d"),s.NQ=t.includes("o"),s.UQ=t.includes("v"),s}PWt(t){return uv.Ye(t.oci)?t.oci:t[1]}IWt(t,s){if(!uv.Ye(t.oci))return;const e=this.OM,i=e.m$();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?i.T7(t.data,e.zJ(),!1,0,0,!1,r):i.mX(i.m7(t.oci),e.zJ(),0,0,r),!n)return;const h=this.MWt(t,i);h&&n.IM(h);const o=n.WJ(),a=!!s?.aOt;return o.zJ().gX(n,!0,a),o}bWt(t,s,e,i){if(this.gWt(s)&&!i?.aOt){const i=this.gWt(s);i!==t&&e.MK(i)}e.SWt(s),e.kBt(s,t)}CWt(t,s,e,i,n=!0){const r=this.OM,h=r.xQ(t,this.wWt(s.f));h&&n?(e.has(t)||(t.vWt(s.offsets),this.xWt(t.N1(),s,i)),e.add(t)):h&&(cv.set(t.N1().PK(),t.N1()),this.bWt(t.N1(),s.uid,r.m$(),i)),this.ZVt()}xWt(t,s,e){let i=this.MWt(s,this.OM.m$());if(!i)return;const n=!e.hasOwnProperty("clearChildren")||e.clearChildren,r=!e.hasOwnProperty("assignZIndex")||e.assignZIndex,h=t.m$();if(cv.set(t.PK(),t),i=JSON.parse(JSON.stringify(i)),n&&t.PK()!==i.uid){for(const s of t.children())s&&!s.D2()&&(h.MK(s),h.SWt(s.PK()),cv.delete(s.PK()));if(i.w?.sgi&&i.w.sgi.c?.length)for(const s of i.w.sgi.c){const i=Object.assign({},e,{clearChildren:!1,createHierarchy:!1}),n=this.IWt(s,i);cv.set(n.N1().PK(),n.N1()),t.xQ(n.N1(),this.wWt(s.f)),n.vWt(s.offsets),this.xWt(n.N1(),s,i)}}const o=i.w?.zi,a=i.w?.l;i.w=null,t.IM(i),e?.aOt||(uv.Ye(o)&&r&&t.WJ().A7(o),uv.Ye(a)&&t.kVt(a)),this.bWt(t,i.uid,h,e)}RWt(t,s){return t.filter(t=>t.yK().Rc()===s.Rc()).length}MWt(t,s){if(uv.Ye(t.instIndex)){const e=s.m7(t.oci).vUt();return e?e[t.instIndex]:null}return uv.ri(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static pWt(t){let s=t.WJ().zJ().v7(t.PK());if(!s)return null;s=JSON.parse(JSON.stringify(s));const e=[];for(const s of[...t.dit()]){const t=s.WJ();e.push([t.bJ().H7(),t.zJ().Ej(),s.PK(),uv.mit.pit(t),s.yK().CK()?1:0,t.jJ(),uv.mit.pWt(s)])}return uv.bi(s[0][14])?s[0][14][1]=e:(s[0][14]=[],s[0][14][0]=uv.mit.EWt(),s[0][14][1]=e,s[0][14][2]=t.WJ().jJ()),s}static pit(t){let s=0;return s|=Number(t.VQ())<<8,s|=Number(t.BQ())<<7,s|=Number(t.LQ())<<6,s|=Number(t.zQ())<<5,s|=Number(t.DQ())<<4,s|=Number(t.AQ())<<3,s|=Number(t.EQ())<<2,s|=Number(t.RQ())<<1,s|=0|Number(t.IQ()),s}static EWt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static FWt(){cv.clear()}}}{const fv=self._s,dv=self.hs,pv=(dv.ys,dv.Ss,fv.jn(fv.Rect)),mv=fv.jn(fv.Cl),gv=fv.jn(fv.Event,"bboxchange",!1),yv=fv.jn(fv.Mo,0,0,0,0),Sv=fv.jn(fv.au),wv=fv.jn(fv.Mo,1,1,1,1),vv=fv.jn(fv.Rect,0,0,-1,-1),xv=fv.jn(fv.Rect,0,0,-1,-1),bv=new Set(["absolute","relative"]),Mv=[];let Tv=!0;const Gv=new WeakMap,_v=new WeakMap;fv.NUt=class extends fv.Wn{constructor(t,s){super(),this.ce=t,this._xt=t.yK(),this.Nc=t.m$(),this.AWt=s,this._xt.dUt(this,null,s),this.OWt=-1,this.DWt=-1,this.KD=196635,this._xt.Zq().Fq()&&(this.KD|=128),this.Ra=NaN,this.Pa=NaN,this.Zb=NaN,this.kWt=NaN,this.LWt=NaN,this.gG=NaN,this.Io=NaN,this.NWt=NaN,this.BWt=NaN,this.UWt=NaN,this.VWt=NaN,this.WWt=fv.jn(fv.Rect),this.zWt=fv.jn(fv.Cl),this.jWt=xv,this.HWt=vv,this.JWt=null,this.$Wt=null,this.qWt=null,this.Kb=wv,this.XWt=wv,this.YWt=null,this.KWt=null,this.ce.yK().JBt()&&(this.KWt=fv.jn(fv.ZWt,this.ce,this)),this.QWt=null,this.JVt=null,this.$Vt=null,this.tzt=-1,this.szt=null}KUt(){this.KD|=256}Hn(){if(this._xt.dUt(this,this.AWt,null),this.YWt&&(this.Nc.Ob().Vv(this.YWt),this.YWt=null),this.JWt=null,this.$Wt&&(this.$Wt.ezt.Hn(),this.$Wt=null),this.qWt&&(this.qWt.clear(),this.qWt=null),this.$Q(),this.KWt&&this.KWt.Hn(),this.TQ()&&this.cQ().bQ(this),this.pst()){const t=[...this.dit()];for(const s of t)this.bQ(s)}this.izt(),this.nzt(),Gv.delete(this),_v.delete(this),this.ce=null,this._xt=null,this.Nc=null,this.AWt=null}UUt(t){if(Tv=!1,this.PZ(t[0],t[1]),this.wM(t[2]),this.nE(t[3],t[4]),this.gG=0,this.Fq()?this.BX(t[6]):this.Io=0,yv.Sa(t[7]),this.rzt(yv),this.DZ(t[8]),this.NZ(t[9]),this.eM(t[10]),this.KWt&&this.KWt.hzt(t[12]),t[14]&&Gv.set(this,{ozt:t[14][1],azt:t[14][2]}),t[15]){const s=t[15];this.HQ(s[0],s[1]);const e=this.ZQ(),i=s[2];for(let t=0,s=i.length;t<s;++t){const s=i[t];for(let i=0,n=s.length;i<n;++i){const n=s[i],r=e.eT(i,t);r.pM(n[0]),r.yM(n[1]),r.wM(n[2]),r.xM(n[3]),r.MM(n[4])}}}if(t[16]){const s=t[16][0],e=t[16][1],i=!!e,n=!i,r=this.Nc.gVt();i&&r&&r.PSt(this.N1(),e),n&&r&&r.PSt(this.N1(),s)}Tv=!0,this.lzt()}VUt(){this.Ra=0,this.Pa=0,this.Zb=0,this.kWt=0,this.LWt=0,this.gG=0,this.Io=0,this.NWt=0,this.BWt=1,this.UWt=0,this.VWt=0,this.lzt()}m$(){return this.Nc}yK(){return this._xt}N1(){return this.ce}uzt(){return this.DQ()?this.czt(this.cQ().fzt()-this.QWt.oWt()):0}pM(t){if(t=+t,this.IQ()){const s=this.QWt,e=t-this.dM(),i=-this.uzt();0===i?this.Ra+=e/s.rWt():(this.Ra+=Math.cos(i)*e/s.rWt(),this.RQ()&&(this.Pa+=Math.sin(i)*e/s.hWt()))}else this.Ra=t}Mpt(t,s=!1){t=+t,s?this.Ra+=t:this.IQ()?this.pM(this.dM()+t):this.Ra+=t}dM(){if(this.IQ()){let t=this.Ra;const s=this.QWt,e=this.cQ(),i=this.uzt();return 0===i?t*=s.rWt():(t=t*s.rWt()*Math.cos(i),this.RQ()&&(t-=this.Pa*s.hWt()*Math.sin(i))),e.dM()+t}return this.Ra}yM(t){if(t=+t,this.RQ()){const s=this.QWt,e=t-this.gM(),i=-this.uzt();0===i?this.Pa+=e/s.hWt():(this.IQ()&&(this.Ra-=Math.sin(i)*e/s.rWt()),this.Pa+=Math.cos(i)*e/s.hWt())}else this.Pa=t}Tpt(t,s=!1){t=+t,s?this.Pa+=t:this.RQ()?this.yM(this.gM()+t):this.Pa+=t}gM(){if(this.RQ()){let t=this.Pa;const s=this.QWt,e=this.cQ(),i=this.uzt();return 0===i?t*=s.hWt():(t=t*s.hWt()*Math.cos(i),this.IQ()&&(t+=this.Ra*s.rWt()*Math.sin(i))),e.gM()+t}return this.Pa}PZ(t,s){if(t=+t,s=+s,this.dzt()){const e=this.IQ(),i=this.RQ(),n=this.QWt,r=t-this.dM(),h=s-this.gM(),o=-this.uzt();if(0===o)e?this.Ra+=r/n.rWt():this.Ra=t,i?this.Pa+=h/n.hWt():this.Pa=s;else{const a=Math.sin(o),l=Math.cos(o);e?this.Ra+=i?(l*r-a*h)/n.rWt():l*r/n.rWt():this.Ra=t,i?this.Pa+=e?(a*r+l*h)/n.hWt():l*h/n.hWt():this.Pa=s}}else this.Ra=t,this.Pa=s}pzt(){return[this.dM(),this.gM()]}FZ(t,s){t=+t,s=+s,this.dzt()?this.PZ(this.dM()+t,this.gM()+s):(this.Ra+=t,this.Pa+=s)}xFt(t,s){return this.dM()===t&&this.gM()===s}wM(t){if(t=+t,this.LQ()&&(t-=this.cQ().SM()),this.Zb===t)return;this.Zb=t,this.mzt();const s=this.zJ();0!==this.Zb&&s.E7(),s.qJ(this)}mzt(){if(this.lzt(),this.pst()){const t=this.dit();for(let s=0,e=t.length;s<e;s++){const e=t[s];e.LQ()&&e.mzt()}}}Upt(t){this.wM(this.SM()+t)}SM(){return this.LQ()?this.cQ().SM()+this.Zb:this.Zb}WZ(){return this.zJ().SM()+this.SM()}but(){return this.N1().Zq().fEt()<2&&this.N1().o0().but()}ny(t){if(t=+t,this.EQ()){const s=this.by();0===s?this.kWt=Number.EPSILON:this.kWt*=t/s}else this.kWt=t;this.gzt()}Ly(t,s){t=+t,s?this.kWt+=t:this.EQ()?this.ny(this.by()+t):this.kWt+=t,this.gzt()}by(){if(this.EQ()){const t=this.cQ(),s=t.by();return t.Kft().Yft()===Number.EPSILON?(this.Kft().Yft()+s)*this.kWt:s*this.kWt}return this.kWt}hy(t){if(t=+t,this.AQ()){const s=this.Ty();0===s?this.LWt=Number.EPSILON:this.LWt*=t/s}else this.LWt=t;this.gzt()}Ppt(t,s){t=+t,s?this.LWt+=t:this.AQ()?this.hy(this.Ty()+t):this.LWt+=t,this.gzt()}Ty(){if(this.AQ()){const t=this.cQ(),s=t.Ty();return t.Kft().sdt()===Number.EPSILON?(this.Kft().sdt()+s)*this.LWt:s*this.LWt}return this.LWt}nE(t,s){if(t=+t,s=+s,this.EQ()){const s=this.by();0===s?this.kWt=Number.EPSILON:this.kWt*=t/s}else this.kWt=t;if(this.AQ()){const t=this.Ty();0===t?this.LWt=Number.EPSILON:this.LWt*=s/t}else this.LWt=s;this.gzt()}Au(){return[this.by(),this.Ty()]}Wtt(){return this.gG}yzt(t){if(t<0)throw new RangeError("invalid depth");this.gG=t}Szt(){if(this.TQ()){const t=this.QWt;return Math.min(t.rWt(),t.hWt())}return 1}Fq(){return!!(128&this.KD)}BX(t){t=+t,this.Fq()&&(this.DQ()&&(t-=this.cQ().UX()),t=fv.Kn(t),this.Io!==t&&(this.Io=t,this.gzt()))}Ept(t){0!==(t=+t)&&this.Fq()&&(this.Io=fv.Kn(this.Io+t),this.gzt())}gzt(){if(this.KD|=262144,this.pst()){const t=this.dit();for(let s=0,e=t.length;s<e;s++)t[s].gzt()}}UX(){return this.DQ()&&this.Fq()?this.czt(fv.Kn(this.cQ().fzt()+this.Io)):this.Io}fzt(){return this.DQ()&&this.Fq()?fv.Kn(this.cQ().fzt()+this.Io):this.Io}czt(t){return this.EQ()&&this.dQ().by()<0&&(t=fv.Kn(fv.dr(t,this.dQ().UX()+Math.PI))),this.AQ()&&this.dQ().Ty()<0&&(t=fv.dr(t,this.dQ().UX())),t}wzt(){const t=this.cQ();return!!(this.EQ()&&t.by()<0)||!!(this.AQ()&&t.Ty()<0)}vzt(){const t=this.cQ();return!!(this.EQ()&&t.by()<0&&this.AQ()&&t.Ty()<0)}xzt(){const t=this.KD;if(!(262144&t))return;const s=this.UX();this.NWt=Math.sin(s),this.BWt=Math.cos(s),this.KD=-262145&t}_Ft(){return this.xzt(),this.NWt}GFt(){return this.xzt(),this.BWt}DZ(t){this.UWt=+t}Npt(t){this.UWt+=+t}OZ(){return this.UWt}NZ(t){this.VWt=+t}Bpt(t){this.VWt+=+t}LZ(){return this.VWt}rzt(t){this.Kb.equals(t)||(this.Kb===wv?(this.Kb=fv.jn(fv.Mo,t),this.XWt=fv.jn(fv.Mo,t),this.XWt.Ko()):t.$o(1,1,1,1)?(this.Kb=wv,this.XWt=wv):(this.Kb.set(t),this.XWt.set(t),this.XWt.Ko()),this.lzt())}UA(t){if(t=fv.Yn(+t,0,1),this.BQ()){if(this.Kft().HFt()===t)return;this.Kft().nWt(t),t=this.NA()}else if(this.Kb.a===t)return;this.bzt(t)}Mzt(){if(!this.pst())return;const t=this.dit();for(let s=0,e=t.length;s<e;s++){const e=t[s];e.bzt(e.NA())}}bzt(t){yv.ko(this.Kb),yv.a=t,this.rzt(yv),this.Mzt()}Opt(t){this.BQ()?this.UA(this.Kft().HFt()+t):this.UA(this.NA()+t)}NA(){return this.BQ()?this.cQ().NA()*this.Kft().HFt():this.Kb.a}ZZ(t){this.Kb.Ho(t)||(yv.ko(t),yv.a=this.NA(),this.rzt(yv))}mpt(t,s,e){yv.Ro(t,s,e),this.ZZ(yv)}Tzt(t,s,e){0===t&&0===s&&0===e||(yv.ko(this.Kb),yv.r+=t,yv.g+=s,yv.b+=e,this.ZZ(yv))}KZ(){return this.Kb}Z8(){return this.XWt}zQ(){return!!(512&this.KD)}Gzt(t){this.tL(512,t)}IQ(){return!!(1024&this.KD)}_zt(t){this.tL(1024,t)}RQ(){return!!(2048&this.KD)}dzt(){return!!(3072&this.KD)}Izt(t){this.tL(2048,t)}EQ(){return!!(4096&this.KD)}Czt(t){this.tL(4096,t)}AQ(){return!!(8192&this.KD)}Rzt(t){this.tL(8192,t)}DQ(){return!!(16384&this.KD)}Pzt(t){this.tL(16384,t)}LQ(){return!!(32768&this.KD)}Ezt(t){this.tL(32768,t)}BQ(){return!!(4194304&this.KD)}Fzt(t){this.tL(4194304,t)}VQ(){return!!(8388608&this.KD)}Azt(t){this.tL(8388608,t)}Ozt(){this.KD&=-12647937}xQ(t,s){if(t===this)return!1;if(t.TQ())return!1;if(this.Dzt(t))return!1;if(this.kzt(t))return!1;const e=t.dM(),i=t.gM(),n=t.by(),r=t.Ty(),h=t.UX(),o=t.SM(),a=t.NA();t.Lzt(this),t._zt(s._Q),t.Izt(s.CQ),t.Czt(s.PQ),t.Rzt(s.FQ),t.Pzt(s.OQ),t.Ezt(s.kQ),t.Fzt(s.NQ),t.Azt(s.UQ),t.Gzt(s.WQ);const l=e-this.dM(),u=i-this.gM(),c=-this.UX(),f=Math.cos(c),d=Math.sin(c);if(s._Q&&(s.OQ?t.Ra=l*f-u*d:t.Ra=l,s.PQ)){const s=this.by()/this.QWt.Yft();0!==s&&(t.Ra/=s)}if(s.CQ&&(s.OQ?t.Pa=l*d+u*f:t.Pa=u,s.FQ)){const s=this.Ty()/this.QWt.sdt();0!==s&&(t.Pa/=s)}if(s.PQ){const s=this.by();0===s||s===Number.EPSILON?(t.kWt=1,t.QWt.sWt(1)):(t.kWt=n/this.by(),t.QWt.sWt(t.kWt))}if(s.FQ){const s=this.Ty();0===s||s===Number.EPSILON?(t.LWt=1,t.QWt.iWt(1)):(t.LWt=r/this.Ty(),t.QWt.iWt(t.LWt))}return s.OQ&&(t.Io=h-this.UX()),s.kQ&&(t.Zb=o-this.SM()),s.NQ&&t.QWt.nWt(a),s.UQ&&t.TY(this._Y()),this.Nzt(t),this.RZ(),this.Mzt(),!0}bQ(t){if(t.cQ()!==this)return;const s=t.dM(),e=t.gM(),i=t.by(),n=t.Ty(),r=t.UX(),h=t.SM(),o=t.NA();t.Lzt(null),t.Ozt(),t.PZ(s,e),t.nE(i,n),t.BX(r),t.wM(h),t.UA(o),this.Bzt(t),this.RZ()}Uzt(){return this.tzt}Vzt(){this.Wzt();const t=[...this.children()];for(const s of t)this.bQ(s);const s=this.cQ();s&&s.bQ(this),this.Ozt()}Wzt(){if(this.zzt(),!this.JVt){const t=[...this.children()];t.length&&(this.JVt=[],this.$Vt=new WeakMap);let s=0;for(const e of t){const t=e.N1();this.JVt.push(t),this.$Vt.set(t,s),s++}}const t=this.cQ();t&&t.Wzt()}zzt(){if(-1!==this.tzt)return;const t=[...this.pQ()];this.tzt=t.length;for(const s of t)s.zzt();const s=[...this.children()];for(const t of s)t.zzt()}nzt(){this.JVt&&(this.JVt.length=0),this.JVt=null,this.$Vt=null;const t=this.cQ();t&&t.nzt(),this.tzt=-1}TQ(){return null!==this.cQ()}cQ(){const t=this.QWt;return null!==t?t.cQ():null}dQ(){let t=this;for(;t.TQ();)t=t.cQ();return t}*pQ(){let t=this.cQ();for(;t;)yield t,t=t.cQ()}lVt(t){return this.dit().includes(t)}pst(){const t=this.QWt;return null!==t&&t.pst()}dit(){const t=this.QWt;return null!==t?t.dit():Mv}children(){return this.dit()}*wQ(){for(const t of this.children())yield t,yield*t.wQ()}gQ(){return this.dit().length}bAt(){return[...this.wQ()].length}SQ(t){const s=this.dit();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}dVt(t){if(!t)return NaN;const s=this.dit();if(!s)return NaN;for(let e=0;e<s.length;e++)if(t===s[e])return e;return NaN}jzt(t){this.QWt||(this.QWt=fv.jn(fv.mit,this)),t&&this.QWt.KVt(t)}Kft(){return this.QWt}izt(){this.QWt&&(this.QWt.Hn(),this.QWt=null)}Lzt(t){t?(t.jzt(null),this.jzt(t)):(this.QWt&&this.QWt.KVt(null),this.pst()||this.izt())}kzt(t){if(!this.TQ())return!1;const s=this.cQ();return s===t||s.kzt(t)}Dzt(t){if(this.lVt(t))return!0;for(const s of this.dit())if(s.Dzt(t))return!0;return!1}Nzt(t){this.QWt.dit().push(t)}Bzt(t){const s=this.QWt.dit(),e=s.indexOf(t);-1!==e&&s.splice(e,1),0!==s.length||this.TQ()||this.izt(),t.pst()||t.izt()}mVt(){const t=Gv.get(this);return t?t.ozt:null}Hzt(){const t=Gv.get(this);return t?t.azt:NaN}dst(){const t=_v.get(this);return fv.Ye(t)?t:NaN}Jzt(t){_v.set(this,t)}$zt(){this.tL(524288,!0),this.lzt()}lzt(){if(!Tv)return;const t=this.Nc.Ob();let s;this.YWt&&t.Vv(this.YWt),s=524288&this.KD?t.Mv()||"<point>":t.vv()||"<default>",this.YWt=t.Lv(s,this.sK(),this.XWt,this.SM(),this.qzt()?1:0,0)}Xtt(){return this.YWt}Y7(){return this.Kb===wv}eM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.sK()!==t&&(this.KD=-2080374785&this.KD|t<<26,this.lzt())}sK(){return(2080374784&this.KD)>>26}$J(t,s){const e=s&&this.AWt!==t;e&&this.R7(),this._xt.dUt(this,this.AWt,t),this.AWt=t,e&&this.Xzt(),0!==this.SM()&&this.AWt.E7()}zJ(){return this.AWt}bJ(){return this.zJ().bJ()}A7(t){this.OWt=0|t}jJ(){return this.AWt.V9(),this.OWt}H9(t){this.DWt=0|t}R2(){return this.AWt.z9(),this.DWt}C6(){return this.OWt}tL(t,s){s?this.KD|=t:this.KD&=~t}_Y(){return!!(1&this.KD)}TY(t){if(this.tL(1,t),this.pst())for(const s of this.dit())s.VQ()&&s.TY(t)}aQ(){return!!(8&this.KD)}lQ(t){t=!!t,this.aQ()!==t&&(this.tL(8,t),t?this.RZ():this.Yzt())}Kzt(t,s){if(this.tL(32,t),this.qWt&&this.qWt.clear(),s.trim()){this.qWt||(this.qWt=new Set);for(const t of s.split(" "))t&&this.qWt.add(t.toLowerCase())}else this.qWt=null}Zzt(t){const s=!!(32&this.KD),e=this.qWt;if(!t||!e)return!s;for(const i of e)if(t.has(i))return s;return!s}RZ(){if(this.KD|=65554,this._xt.uUt(!0),this.Nc.XJ(),this.AWt.c7()&&(this.jZ(this.WWt,this.zWt,!0),this.KD&=-3,this.Xzt()),4&this.KD&&this.ce.Sf().dispatchEvent(gv),null!==this.QWt){const t=this.QWt.dit();for(let s=0,e=t.length;s<e;++s)t[s].RZ()}}jZ(t,s,e){const i=this.dM(),n=this.gM(),r=this.by(),h=this.Ty(),o=this.UX();t.ja(i-this.UWt*r,n-this.VWt*h,r,h),e&&this.KQ()&&this.Qzt(t),0===o?s.Xl(t):(t.offset(-i,-n),s.Kl(t,this._Ft(),this.GFt()),s.offset(i,n),s.Zl(t)),t.normalize()}tjt(){const t=this.KD;2&t&&(this.jZ(this.WWt,this.zWt,!0),this.KD=-3&t)}HZ(){return this.tjt(),this.WWt}$Z(){return this.tjt(),this.zWt}sjt(t){const s=this.dM(),e=this.gM(),i=Math.round(s)-s,n=Math.round(e)-e;return 0===i&&0===n?t:(mv.m(t),mv.offset(i,n),mv)}ejt(t){this.WWt.m(t),this.zWt.Xl(this.WWt),this.KD&=-3,this.fUt(),this.Xzt()}ijt(t){this.tL(4,t)}njt(){return!!(4&this.KD)}Ltt(t,s,e){return s&&0!==this.Wtt()?this.Utt(this.zJ().Btt()):0===this.SM()||e?t.bl(this.HZ()):this.rjt()}rjt(){const t=this.zJ(),s=this.WZ();return!(s>=t.d9())&&(t.c9(s,pv),pv.bl(this.HZ()))}Utt(t){const s=this.HZ(),e=s.Za(),i=s.tl(),n=s.Qa(),r=s.sl(),h=this.WZ(),o=h+this.Wtt();return t.hw(e,n,h,i,r,o)}XZ(){const t=this.zJ();if(t.G9())return this.Utt(t.Btt());{const s=t.bJ();return this.Ltt(t.rK(),s.ktt(),s.mY())}}Jtt(t){this.tL(1048576,t)}Htt(t){this.tL(2097152,t)}hjt(){return!!(1048576&this.KD)}ojt(){return!!(2097152&this.KD)}ajt(t){(t=!!t)!==this.qzt()&&(this.tL(16777216,t),this.lzt())}qzt(){return!!(16777216&this.KD)}ljt(t){this.JWt=t,this.ujt(),this.KQ()&&(this.szt.cjt=null)}fjt(){return this.JWt}djt(){return null!==this.JWt||this.KQ()}pjt(){return this.mjt(this.by(),this.Ty(),this.UX(),this._Ft(),this.GFt())}gjt(t,s,e){let i=0,n=1;return 0!==e&&(i=Math.sin(e),n=Math.cos(e)),this.mjt(t,s,e,i,n)}mjt(t,s,e,i,n){let r=this.$Wt;null===r&&(r={ezt:fv.jn(fv.au),width:NaN,height:NaN,angle:NaN},this.$Wt=r);const h=r.ezt;if(r.width===t&&r.height===s&&r.angle===e)return h;const o=this.JWt;if(this.KQ()){const e=this.OZ(),r=this.LZ(),a=this.ZQ();let l=this.szt.cjt;l||(o?(Sv.m(o),Sv.offset(e,r)):Sv.gu(),l=a.fT(Sv),this.szt.cjt=l),a.dT(l,h),h.offset(-e,-r),h.vu(t,s,i,n)}else o?(h.m(o),h.vu(t,s,i,n)):h.wu(this.$Z(),-this.dM(),-this.gM());return r.width=t,r.height=s,r.angle=e,h}ujt(){this.yjt(!0);const t=this.$Wt;null!==t&&(t.width=NaN)}HQ(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.N1().Zq().Uq())throw new Error("object does not support mesh");this.$Q(),this.szt={Sjt:fv.jn(fv.$S.EM,t,s),wjt:fv.jn(fv.$S.EM,t,s),cjt:null}}KQ(){return null!==this.szt}ZQ(){if(!this.KQ())throw new Error("no mesh");return this.szt.Sjt}vjt(){if(!this.KQ())throw new Error("no mesh");return this.szt.wjt}xjt(t){this.tL(65536,t)}bjt(){return!!(65536&this.KD)}yjt(t){this.tL(131072,t)}Mjt(){return!!(131072&this.KD)}Qzt(t){const s=this.szt.Sjt,e=Math.min(s.YM(),0),i=Math.min(s.KM(),0),n=Math.max(s.ZM(),1),r=Math.max(s.QM(),1),h=t.width(),o=t.height();t.offsetLeft(e*h),t.offsetTop(i*o),t.al((n-1)*h),t.ll((r-1)*o),this.gG=s.tT()}$Q(){this.szt&&(this.szt.Sjt.Hn(),this.szt.wjt.Hn(),this.szt=null,this.ujt())}XQ(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=e.mode||"absolute";if(!bv.has(i))throw new Error("invalid mode");const n="relative"===i;let r=e.x,h=e.y;const o=e.qN;let a="number"==typeof e.QQ?e.QQ:n?0:-1,l="number"==typeof e.t0?e.t0:n?0:-1;if(!this.KQ())return!1;const u=this.ZQ(),c=u.eT(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.SM()!==o&&(c.wM(o),f=!0),n&&(r+=t/(u.HM()-1),h+=s/(u.JM()-1)),-1!==a||n?(n&&(a+=t/(u.HM()-1)),a=fv.Yn(a,0,1)):a=c.vM(),-1!==l||n?(n&&(l+=s/(u.JM()-1)),l=fv.Yn(l,0,1)):l=c.bM(),c.dM()===r&&c.gM()===h&&c.vM()===a&&c.bM()===l?f:(c.pM(r),c.yM(h),c.xM(a),c.MM(l),this.ujt(),!0)}YUt(){return this.ce.YUt()}uQ(t,s){return!!this.HZ().Tl(t,s)&&!!this.$Z().Tl(t,s)&&(this.YUt()?this.ce.o0().Ukt(t,s):!this.djt()||this.pjt().Tl(t-this.dM(),s-this.gM()))}Tjt(){return!!(16&this.KD)}fUt(){if(!this.Tjt()||!this.aQ()||256&this.KD)return;const t=this.HZ(),s=this._xt.lUt(),e=this.jWt;if(pv.set(s.H6(t.Za()),s.J6(t.Qa()),s.H6(t.tl()),s.J6(t.sl())),e.equals(pv))return;const i=this.ce;e===xv?(s.q6(i,null,pv),this.jWt=fv.jn(fv.Rect,pv)):(s.q6(i,e,pv),e.m(pv)),this.KD&=-17}Gjt(){this.KD|=16}Yzt(){const t=this.jWt;t!==xv&&(this._xt.lUt().q6(this.ce,t,null),this.jWt=xv)}Xzt(){const t=this.zJ();if(!t.c7()||256&this.KD)return;const s=t.Z7(),e=this.HZ(),i=this.HWt;if(pv.set(s.H6(e.Za()),s.J6(e.Qa()),s.H6(e.tl()),s.J6(e.sl())),i.equals(pv))return;const n=this.ce;i===vv?(s.q6(n,null,pv),this.HWt=fv.jn(fv.Rect,pv)):(s.q6(n,i,pv),i.m(pv)),t.Q7()}R7(){const t=this.HWt;t!==vv&&(this.zJ().Z7().q6(this.ce,t,null),this.HWt=vv)}W9(){return this.HWt}tQ(){const t=this.ce,s=this.AWt,e=s.JJ();e.length&&e.at(-1)===t||(s.C7(t,!1),s.G7(t,!1),this.Nc.XJ())}eQ(){const t=this.ce,s=this.AWt,e=s.JJ();e.length&&e[0]===t||(s.C7(t,!1),s.I7(t,!1),this.Nc.XJ())}nQ(t){const s=this.ce,e=this.AWt;if(e.bJ()!==t.bJ())throw new Error("layer from different layout");t!==e&&(e.C7(s,!0),this.$J(t),t.G7(s,!0),this.Nc.XJ())}hQ(t,s){const e=this.ce;let i=!1;const n=this.AWt;if(t.PK()===e.PK())return;const r=t.WJ();if(!r)throw new Error("expected world instance");const h=r.zJ();n.Ej()!==h.Ej()&&(n.C7(e,!0),this.$J(h),h.G7(e,!0),i=!0);const o=h.X9(e,t,!!s);(i||o)&&this.Nc.XJ()}IZ(){return this.KWt}_jt(t){this.tL(64,t)}ett(){return!!(64&this.KD)}ust(t,s=null){const e={x:this.dM(),y:this.gM(),w:this.by(),h:this.Ty(),l:this.zJ().H7(),zi:this.jJ()};0!==this.SM()&&(e.ze=this.SM()),0!==this.UX()&&(e.a=this.fzt()),this.Y7()||(e.c=this.Kb.toJSON()),.5!==this.OZ()&&(e.oX=this.OZ()),.5!==this.LZ()&&(e.oY=this.LZ()),0!==this.sK()&&(e.bm=this.sK()),this._Y()||(e.v=this._Y()),this.aQ()||(e.ce=this.aQ()),this.njt()&&(e.be=this.njt()),this.KWt&&(e.fx=this.KWt.ust());const i=!!(32&this.KD);return i&&(e.sfi=i),this.qWt&&(e.sft=[...this.qWt].join(" ")),this.QWt&&"visual-state"!==t&&(e.sgi=this.QWt.ust(t,s),Gv.has(this)&&(e.sgcd=Gv.get(this).ozt,e.sgzid=Gv.get(this).azt)),this.KQ()&&(e.mesh=this.ZQ()._M()),e}dWt(){return{x:this.Ra,y:this.Pa,z:this.Zb,w:this.kWt,h:this.LWt,a:this.Io,sgi:this.Kft()?this.Kft().aWt():null}}vWt(t){t&&(this.Ra=t.x,this.Pa=t.y,this.Zb=t.z,this.kWt=t.w,this.LWt=t.h,this.Io=t.a,t.sgi&&this.Kft()&&this.Kft().cst(t.sgi),this.gzt(),this.RZ())}bUt(){this.nzt(),this.Vzt(),this.jzt(null),this.QWt&&this.QWt.mWt(this.JVt,this.$Vt)}gnt(t){"visual-state"!==t&&this.Vzt()}Snt(t,s="full",e=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.KD)return;this.QWt.Snt(t.sgi,e)}}DVt(t,s="full",e=null){if("visual-state"!==s)if(256&this.KD)this.nzt();else{if(t.hasOwnProperty("sgi"))this.QWt.mWt(null,null,t.sgi,e);else if(e?.aOt&&this.JVt)for(const t of this.JVt)t.D2()||this.Nc.MK(t);this.nzt(),this.RZ()}}cst(t,s,e=null){if(Tv=!1,this.pM(t.x),this.yM(t.y),this.ny(t.w),this.hy(t.h),this.A7(t.zi),this.wM(t.hasOwnProperty("ze")?t.ze:0),this.BX(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?yv.Sa(t.c):t.hasOwnProperty("o")?(yv.ko(this.Kb),yv.a=t.o):yv.Co(1,1,1,1),this.rzt(yv),this.DZ(t.hasOwnProperty("oX")?t.oX:.5),this.NZ(t.hasOwnProperty("oY")?t.oY:.5),this.eM(t.hasOwnProperty("bm")?t.bm:0),this.TY(!t.hasOwnProperty("v")||t.v),this.lQ(!t.hasOwnProperty("ce")||t.ce),this.ijt(!!t.hasOwnProperty("be")&&t.be),this.Kzt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.KWt&&t.hasOwnProperty("fx")&&this.KWt.cst(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.jzt(null);const s=this.QWt,e=t.sgi;s.cst(e),s.mWt(this.JVt,this.$Vt),this.Ijt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.HQ(s.cols,s.rows),this.ZQ().IM(s)}else this.$Q();this.RZ(),Tv=!0,this.lzt(),"visual-state"!==s&&this.Nc.Cjt(this.N1(),t)}Ijt(t,s){t&&fv.Ye(s)&&Gv.set(this,{ozt:t,azt:s})}}}{const Iv=self._s;Iv.sBt=class extends Iv.Wn{constructor(t,s){super();const e=t.m$(),i=e.OCt(s[1]);e.Rjt().RLt(i),this.Nc=e,this._xt=t,this.pLt=Iv.bq.b0(i),this.QDt=null,this.Pjt=null,this.FNt=i.Instance,this.f8=s[2],this.qn=s[0],this.SRt=this.Nc.sTt(s[3]);const n=this.pLt.fEt();if(n<2&&(this.QDt=Iv.jn(i.SBt,this),!(this.QDt instanceof Iv.dLt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Iv.bq.DDt(this,n),n>=2){const t=i.SBt??globalThis.X2;if(this.Pjt=new t,!(this.Pjt instanceof globalThis.X2))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.Pjt=new globalThis.v0;Iv.bq.kDt(n),this.PDt()}static e_(t,s){return Iv.jn(Iv.sBt,t,s)}Hn(){this.Nc=null,this.pLt=null,this.QDt&&(this.QDt.Hn(),this.QDt=null),this.FNt=null}oFt(){return this.QDt}PDt(){this.QDt?this.QDt.PDt():this.Pjt&&this.Pjt.i2()}m$(){return this.Nc}yK(){return this._xt}p0(){return this.pLt}BBt(){return this.FNt}Rc(){return this.qn}H7(){return this.f8}g0(){return this.Pjt}sTt(){return this.SRt}}}{const Cv=self._s,Rv=self.f0;Cv.DUt=class extends Cv.Wn{constructor(t){super(),this.Nc=t.runtime,this.YRt=t.m0,this.pLt=this.YRt.p0(),this.ce=t.S0,this.US=t.index,this.IUt=null,this.CUt=null,this.pLt.G7(this.ce)}Hn(){this.CUt&&(this.CUt.bK(),this.CUt=null),this.pLt.C7(this.ce),this.IUt&&(this.IUt.Hn(),this.IUt=null),this.Nc=null,this.YRt=null,this.pLt=null,this.ce=null}DBt(t){if(this.IUt)throw new Error("already got sdk instance");if(this.p0().fEt()<2){if(this.IUt=Cv.jn(this.YRt.BBt(),this,t),!(this.IUt instanceof Cv.mLt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.p0().EDt();this.ODt(s.Instance,t)}}o0(){return this.IUt??this.CUt}w0(){return this.ce}m$(){return this.Nc}y0(){return this.YRt}p0(){return this.pLt}spt(){return this.US}SLt(){this.IUt?this.IUt.SLt():this.CUt.Z2()}bLt(t,s){this.IUt&&this.IUt.bLt(t,s)}OVt(){return this.IUt?this.IUt.vkt():this.CUt.mZ()}_M(t="full"){return this.IUt?this.IUt._M(t):this.CUt.gZ(t)}IM(t,s="full"){if(this.IUt)return this.IUt.IM(t,s);this.CUt.yZ(t,s)}static Ejt(t,s,e){const i=globalThis.Y2;let n,r;n=s instanceof i?t.sY(s):s.yLt(),r=e instanceof i?t.sY(e):e.yLt();const h=n.w0(),o=r.w0(),a=h.yK().Ej(),l=o.yK().Ej();if(a!==l)return a-l;const u=h.xVt(),c=o.xVt();return u!==c?u-c:n.spt()-r.spt()}ODt(t,s){const e=Rv,i=t??this.IUt.EDt(),n=i||e,r=this.p0().fEt();if(Cv.bq.DDt(this,r),Cv.bq.PLt(s),this.CUt=new n,Cv.bq.ELt(),Cv.bq.kDt(r),i&&!(this.CUt instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);return this.CUt}ekt(){return this.CUt||this.ODt()}Tkt(){return!!this.CUt}}}{const Pv=self._s;Pv.Y8=class extends Pv.Wn{constructor(t,s){super(),this.OM=t,this.Fjt=[],this.Ajt=[],this.Ojt=new Map,this.Djt=[],this.kjt=[],this.Ljt=new Set,this.Mb=!0;for(const t of s){const s=Pv.jn(Pv.Njt,this,t,this.Fjt.length);this.Fjt.push(s),this.Ojt.set(s.Rc().toLowerCase(),s),t.length>=3&&this.Djt.push(this.Bjt(s,t[2]))}this.m$().Ujt(this)}Hn(){this.m$().Vjt(this);for(const t of this.kjt)t.Hn();Pv.wh(this.kjt),Pv.wh(this.Fjt),Pv.wh(this.Ajt),this.Ojt.clear(),Pv.wh(this.Djt),this.OM=null}Wjt(t){this.Ljt.add(t)}zjt(t){this.Ljt.delete(t)}jjt(t){t.dv()&&(this.kjt=this.Fjt.map(t=>{const s=t.nI();return s.MU()>0?Pv.jn(Pv.$S.xU,s):null}),this.Hjt());for(const s of this.Ljt)s.jjt(t)}ABt(t){if(t.length){this.Fjt=t.concat(this.Fjt);for(const s of t)this.Ojt.set(s.Rc().toLowerCase(),s);for(let t=0,s=this.Fjt.length;t<s;++t)this.Fjt[t].U7(t)}}Bjt(t,s){t.Jjt(s[0]);const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const s=e[t];if(Array.isArray(s)){const i=Pv.jn(Pv.Mo);i.Sa(s),e[t]=i}}return e}$M(){return this.OM}m$(){return this.OM.m$()}G0(){Pv.wh(this.Ajt);let t=!0;for(const s of this.Fjt)s.x_t()&&(this.Ajt.push(s),s.nI().Ub()||(t=!1));this.Mb=t}OX(){return this.Fjt}$Bt(){return this.Fjt.length>0}zft(t){return this.Ojt.get(t.toLowerCase())||null}$jt(t){if((t=Math.floor(+t))<0||t>=this.Fjt.length)throw new RangeError("invalid effect type index");return this.Fjt[t]}M0(t){return this.$jt(t).x_t()}T0(t,s){this.$jt(t).Jjt(s)}K7(){return this.Ajt}ett(){return this.Ajt.length>0}Ub(){return this.Mb}Wft(t){return this.Djt[t]}t7(t){return t<this.kjt.length?this.kjt[t]:this.Djt[t]}_0(t,s){if(t<0||t>=this.Djt.length)return null;const e=this.Djt[t];return s<0||s>=e.length?null:e[s]}I0(t,s,e){if(t<0||t>=this.Djt.length)return!1;const i=this.Djt[t];if(s<0||s>=i.length)return!1;const n=i[s];if(n instanceof Pv.Mo){if(n.Ho(e))return!1;n.ko(e)}else{if(n===e)return!1;i[s]=e}return t<this.kjt.length&&this.kjt[t].CU(s,e),!0}Hjt(){const t=this.Djt,s=this.kjt;for(let e=0,i=Math.min(t.length,s.length);e<i;++e){const i=s[e],n=t[e];for(let t=0,s=n.length;t<s;++t)i.CU(t,n[t])}}static qjt(t){return t&&t instanceof Pv.Mo?{t:"color",v:t.toJSON()}:t}static Xjt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Pv.jn(Pv.Mo);return s.Sa(t.v),s}throw new Error("invalid effect parameter type")}return t}static Yjt(t){return t.map(Pv.Y8.qjt)}static Kjt(t){return t.map(Pv.Y8.Xjt)}_M(){return this.Fjt.map(t=>({name:t.Rc(),active:t.x_t(),params:Pv.Y8.Yjt(this.Djt[t.Ej()])}))}IM(t){for(const s of t){const t=this.zft(s.name);t&&(t.Jjt(s.active),this.Djt[t.Ej()]=Pv.Y8.Kjt(s.params))}this.G0(),this.Hjt()}}}{const Ev=self._s;Ev.Njt=class extends Ev.Wn{constructor(t,s,e){super(),this.X8=t,this.Uc=s[0],this.qn=s[1],this.US=e,this.qb=null,this.Nf=!0}Hn(){this.X8=null,this.qb=null}FBt(t){const s=Ev.jn(Ev.Njt,t,[this.Uc,this.qn],-1);return s.qb=this.qb,s.Nf=this.Nf,s}jjt(t){const s=t.wv(this.Uc);if(!s)throw new Error("failed to find shader program '"+this.Uc+"'");this.qb=s}AX(){return this.X8}Rc(){return this.qn}U7(t){this.US=t}Ej(){return this.US}$M(){return this.X8.$M()}m$(){return this.X8.m$()}Jjt(t){this.Nf=!!t}x_t(){return this.Nf}nI(){return this.qb}Zjt(){const t=[];for(let s=0,e=this.qb.rI();s<e;++s){const e=this.qb.hI(s);if("float"===e||"percent"===e)t.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");t.push(Ev.jn(Ev.Mo,1,1,1,1))}}return t}}}{const Fv=self._s;Fv.ZWt=class extends Fv.Wn{constructor(t,s){super(),this.ce=t,this.Qjt=s,this.X8=t.yK().AX(),this.tHt=!0,this.e7=!0,this.sHt=!1,this.eHt=!1,this.iHt=!1,this.nHt=!1,this.Ij=Fv.jn(Fv.$S.MW,t.m$().AJ().K8(),{fW:(t,s)=>{const e=s.wj(),i=e.WJ();t.iM(i.Z8()),t.sx(i.WZ()),e.lT(t),t.sx(0)},dW:t=>{const s=t.Dkt(),[e,i]=t.Okt();return{fj:s,dj:e,pj:i}},pW:t=>this.t7(t)}),this.rHt=[],this.Ajt=[],this.Mb=!0,this.Djt=[],this.kjt=[],this.jjt(t.m$().Ob());for(let t=0,s=this.X8.OX().length;t<s;++t)this.rHt.push(!0);this.G0(),this.X8.Wjt(this)}Hn(){this.X8.zjt(this);for(const t of this.kjt)t&&t.Hn();Fv.wh(this.kjt),this.Ij.Hn(),this.Ij=null,Fv.wh(this.rHt),Fv.wh(this.Ajt),Fv.wh(this.Djt),this.ce=null,this.X8=null}jjt(t){t.dv()&&(this.kjt=this.X8.OX().map(t=>{const s=t.nI();return s.MU()>0?Fv.jn(Fv.$S.xU,s):null}))}hzt(t){let s=0;for(const e of t)this.Djt.push(this.Bjt(s,e)),++s;this.Hjt(),this.G0()}Bjt(t,s){this.rHt[t]=s[0];const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const s=e[t];if(Array.isArray(s)){const i=Fv.jn(Fv.Mo);i.Sa(s),e[t]=i}}return e}WUt(){for(const t of this.X8.OX())this.Djt.push(t.Zjt());this.Hjt()}$M(){return this.OM}AX(){return this.X8}Pj(){return this.X7(),this.Ij}m$(){return this.ce.m$()}G0(){Fv.wh(this.Ajt);const t=this.Qjt,s=this.X8.OX(),e=this.Ajt,i=this.rHt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(i[t]){const i=s[t];e.push(i),i.nI().Ub()||(n=!1)}this.Mb=n,t._jt(!!e.length),this.tHt=!0}X7(){const t=this.ce,s=this.Qjt,e=s.Y7(),i=t.Zq().kq(),n=0!==s.UX()||0!==s.zJ().UX()||s.by()<0||s.Ty()<0,r=t.Nkt(),h=t.Bb();(this.tHt||e!==this.e7||i!==this.sHt||n!==this.eHt||r!==this.iHt||h!==this.nHt||this.Ij.gz())&&(this.Ij.yz(this.Ajt.map(t=>t.nI()),{gW:this.Ajt.map(t=>t.Ej()),yW:!e||h,wW:i,vW:r,xW:n}),this.tHt=!1,this.e7=e,this.sHt=i,this.eHt=n,this.iHt=r,this.nHt=h)}K7(){return this.Ajt}Wft(t){return this.Djt[t]}t7(t){return t<this.kjt.length?this.kjt[t]:this.Djt[t]}_0(t,s){if(t<0||t>=this.Djt.length)return null;const e=this.Djt[t];return s<0||s>=e.length?null:e[s]}I0(t,s,e){if(t<0||t>=this.Djt.length)return!1;const i=this.Djt[t];if(s<0||s>=i.length)return!1;const n=i[s];if(n instanceof Fv.Mo){if(n.Ho(e))return!1;n.ko(e)}else{if(n===e)return!1;i[s]=e}return t<this.kjt.length&&this.kjt[t].CU(s,e),!0}Hjt(){const t=this.Djt,s=this.kjt;for(let e=0,i=s.length;e<i;++e){const i=s[e],n=t[e];for(let t=0,s=n.length;t<s;++t)i.CU(t,n[t])}}Ub(){return this.Mb}hHt(){return this.Ajt.some(t=>t.nI().zb())}M0(t){return this.rHt[t]}T0(t,s){this.rHt[t]=!!s}OX(){return this.X8.OX()}ust(){return this.X8.OX().map(t=>({name:t.Rc(),active:this.rHt[t.Ej()],params:Fv.Y8.Yjt(this.Djt[t.Ej()])}))}cst(t){for(const s of t){const t=this.X8.zft(s.name);t&&(this.rHt[t.Ej()]=s.active,this.Djt[t.Ej()]=Fv.Y8.Kjt(s.params))}this.G0(),this.Hjt()}}}{const Av=self._s,Ov=[],Dv=[],kv=[],Lv=Av.jn(Av.au),Nv=Av.jn(Av.au),Bv=Av.jn(Av.Cl),Uv=Av.jn(Av.Rect),Vv=Av.jn(Av.Rect);let Wv=null,zv=null,jv=null;Av.oHt=class extends Av.Wn{constructor(t){super(),this.Nc=t,this.aHt=0,this.lHt=0,this.uHt=[],this.cHt=0,this.fHt=0,this.dHt=0,this.pHt=0,this.mHt=new self.D$(this)}Hn(){this.Nc=null}m$(){return this.Nc}Lj(){return this.mHt}gHt(){this.fHt=this.cHt,this.cHt=0,this.pHt=this.dHt,this.dHt=0}yHt(){return this.fHt}SHt(){return this.pHt}wHt(t,s){const e=t.WJ(),i=s.WJ();e&&i&&e.aQ()&&i.aQ()&&this.uHt.push([t,s])}lAt(t,s,e){for(const[i,n]of this.uHt){let r=null;if(t===i)r=n;else{if(t!==n)continue;r=i}r.SAt(s)&&(e.includes(r)||e.push(r))}}uAt(t,s){if(!this.uHt.length)return!1;for(const[e,i]of this.uHt)if(t===e&&s===i||t===i&&s===e)return!0;return!1}vHt(){Av.wh(this.uHt)}L$(t,s){if(!t||!s||t===s)return!1;const e=t.WJ(),i=s.WJ();if(!e.aQ()||!i.aQ())return!1;this.cHt++;const n=e.zJ(),r=i.zJ();return n.L9(r)?this.xHt(e,i):this.bHt(e,i)}xHt(t,s){if(!t.HZ().bl(s.HZ()))return!1;if(this.dHt++,!t.$Z().tu(s.$Z()))return!1;if(t.YUt()&&s.YUt())return!1;if(t.YUt())return this.MHt(t,s);if(s.YUt())return this.MHt(s,t);if(!t.djt()&&!s.djt())return!0;const e=t.pjt(),i=s.pjt();return e.xu(i,s.dM()-t.dM(),s.gM()-t.gM())}bHt(t,s){const e=t.YUt(),i=s.YUt();if(e&&!i)return this.THt(t,s);if(i&&!e)return this.THt(s,t);if(i||e)return!1;{const e=t.zJ(),i=s.zJ();Lv.m(t.pjt()),Nv.m(s.pjt());const n=Lv.du();for(let s=0,i=n.length;s<i;s+=2){const i=s+1,r=n[s],h=n[i],[o,a]=e.lK(r+t.dM(),h+t.gM());n[s]=o,n[i]=a}const r=Nv.du();for(let t=0,e=r.length;t<e;t+=2){const e=t+1,n=r[t],h=r[e],[o,a]=i.lK(n+s.dM(),h+s.gM());r[t]=o,r[e]=a}return Lv.yu(),Nv.yu(),this.dHt++,Lv.xu(Nv,0,0)}}THt(t,s){const e=t.zJ(),i=s.zJ();Wv||(Wv=Av.jn(Av.au)),zv||(zv=Av.jn(Av.Rect)),jv||(jv=Av.jn(Av.Cl));const n=s.dM(),r=s.gM(),[h,o]=i.lK(n,r),[a,l]=e.oK(h,o),u=a-n,c=l-r;if(zv.m(s.HZ()),zv.offset(u,c),!t.HZ().bl(zv))return!1;if(jv.m(s.$Z()),jv.offset(u,c),this.dHt++,!t.$Z().tu(jv))return!1;Wv.m(s.pjt());const f=Wv.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return Wv.yu(),this.MHt(t,s,a,l,Wv,zv,jv)}MHt(t,s,e,i,n,r,h){const o=void 0!==r?r:s.HZ(),a=t.dM(),l=t.gM(),u=t.N1().o0(),c=void 0!==e?e:s.dM(),f=void 0!==i?i:s.gM(),d=s.djt(),p=void 0!==h?h:s.$Z(),m=Dv;u.GHt(o,m);for(let t=0,e=m.length;t<e;++t){const e=m[t],i=e._Ht();if(this.cHt++,o.Ml(i,a,l)&&(Bv.Xl(i),Bv.offset(a,l),Bv.tu(p)))if(d){const t=void 0!==n?n:s.pjt();let r=c,h=f;void 0!==n&&(r=s.dM(),h=s.gM());const o=e.IHt();if(o){if(this.dHt++,o.xu(t,r-(a+i.Za()),h-(l+i.Qa())))return Av.wh(m),!0}else if(Lv.wu(Bv,0,0),Lv.xu(t,r,h))return Av.wh(m),!0}else{const t=e.IHt();if(!t)return Av.wh(m),!0;if(Lv.wu(p,0,0),t.xu(Lv,-(a+i.Za()),-(l+i.Qa())))return Av.wh(m),!0}}return Av.wh(m),!1}CHt(t,s,e){const i=t.uX(),n=this.Nc.SH();if(!n)throw new Error("cannot call outside event");const r=n.sbt(),h=new Av.RHt;if(i.Nxt()){e||(i.Hxt(!1),Av.wh(i.Jxt())),r&&Av.wh(i.$xt());for(const n of t.lX()){const t=n.WJ(),o=t.zJ();let a=!1;if(h.CY(o)&&t.XZ()&&(a=s.some(([s,e])=>{const[i,n]=h.oK(o,s,e,t.WZ());return t.uQ(i,n)})),a){if(e)return!1;i.zxt(n)}else r&&i.jxt(n)}}else{let t,o=!1;r&&!n.jIt(this.Nc.JMt())?this.Nc.fFt()&&!i.$xt().length&&i.Jxt().length?t=i.Jxt():(t=i.$xt(),o=!0):t=i.Jxt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.WJ(),c=u.zJ();let f=!1;if(h.CY(c)&&u.XZ()&&(f=s.some(([t,s])=>{const[e,i]=h.oK(c,t,s,u.WZ());return u.uQ(e,i)})),f){if(e)return!1;o?i.zxt(l):t[a++]=l}else o?t[a++]=l:r&&i.jxt(l)}e||(t.length=a)}return t.GCt(),h.Hn(),!!e||i.Bxt()}PHt(t,s){if(!t)return!0;for(const e of s.pUt())if(!t.L9(e))return!1;return!0}cFt(t,s,e,i){if(s.N7())for(const n of s.RX())this.PHt(t,n)?(n.cUt(),n.lUt().X6(e,i)):Av.Fn(i,n.lX());else this.PHt(t,s)?(s.cUt(),s.lUt().X6(e,i)):Av.Fn(i,s.lX())}$$(t,s,e,i){for(const n of s)this.cFt(t,n,e,i)}EHt(t,s,e){const i=this.Nc.ALt();i&&this.$$(t,i.jnt(),s,e)}FHt(t,s,e){const i=this.Nc.OLt();i&&this.$$(t,i.jnt(),s,e)}Zzt(t,s){return t.QUt()&&(!s||s.WJ().Zzt(t.SEt().get("solidTags")))}U$(t){const s=t.WJ();this.EHt(s.zJ(),s.HZ(),Ov);for(const s of Ov)if(this.Zzt(s,t)&&this.L$(t,s))return Av.wh(Ov),s;return Av.wh(Ov),null}AHt(t,s){this.EHt(null,t,Ov);for(const e of Ov)if(this.Zzt(e,s)&&this.OHt(t,e))return Av.wh(Ov),e;return Av.wh(Ov),null}DHt(t,s){let e=null;s&&(e=kv,Av.wh(e));const i=t.WJ();this.FHt(i.zJ(),i.HZ(),Ov);for(const i of Ov)if(i.sVt()&&this.L$(t,i)){if(!s)return Av.wh(Ov),i;e.push(i)}return Av.wh(Ov),e}kHt(t,s,e,i,n){i=i||50;const r=t.WJ(),h=r.dM(),o=r.gM();for(let a=0;a<i;++a)if(r.PZ(h+s*a,o+e*a),r.RZ(),!this.L$(t,n))return!0;return r.PZ(h,o),r.RZ(),!1}LHt(t,s,e,i,n,r){i=i||50;const h=t.WJ(),o=h.dM(),a=h.gM();let l=null,u=null;for(let c=0;c<i;++c)if(h.PZ(o+s*c,a+e*c),h.RZ(),!this.L$(t,l))if(l=this.U$(t),l)u=l;else if(n&&(l=r?this.L$(t,r)?r:null:this.DHt(t),l&&(u=l)),!l)return u&&this.NHt(t,s,e,u,16,!0),!0;return h.PZ(o,a),h.RZ(),!1}BHt(t,s,e,i){i=i||50;const n=t.WJ(),r=n.dM(),h=n.gM();let o=null,a=null;for(let l=0;l<i;++l)for(let i=0;i<2;++i){const u=2*i-1;if(n.PZ(r+s*l*u,h+e*l*u),n.RZ(),!this.L$(t,o)){if(o=this.U$(t),!o)return a&&this.NHt(t,s*u,e*u,a,16,!0),!0;a=o}}return n.PZ(r,h),n.RZ(),!1}NHt(t,s,e,i,n,r){let h=2,o=!1,a=!1;const l=t.WJ();let u=l.dM(),c=l.gM();for(;h<=n;){const n=1/h;h*=2,l.FZ(s*n*(o?1:-1),e*n*(o?1:-1)),l.RZ(),this.L$(t,i)||r&&this.U$(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.dM(),c=l.gM())}a&&(l.PZ(u,c),l.RZ())}UHt(t,s=100){let e=0;const i=t.WJ(),n=i.dM(),r=i.gM();let h=0,o=this.U$(t);if(!o)return!0;for(;e<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,e++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,i.PZ(Math.floor(n+s*e),Math.floor(r+a*e)),i.RZ(),!this.L$(t,o)&&(o=this.U$(t),!o))return!0}return i.PZ(n,r),i.RZ(),!1}VHt(t,s,e,i){const n=t.WJ(),r=n.dM(),h=n.gM(),o=Math.max(10,Av.er(s,e,r,h)),a=Av.nr(s,e,r,h),l=i||this.U$(t);if(!l)return Av.Kn(a+Math.PI);let u=l,c=0,f=0;const d=Av.Zn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.PZ(s+Math.cos(r)*o,e+Math.sin(r)*o),n.RZ(),!this.L$(t,u)&&(u=i?null:this.U$(t),!u)){c=r;break}}for(36===p&&(c=Av.Kn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.PZ(s+Math.cos(r)*o,e+Math.sin(r)*o),n.RZ(),!this.L$(t,u)&&(u=i?null:this.U$(t),!u)){f=r;break}}if(36===p&&(f=Av.Kn(a+Math.PI)),n.PZ(r,h),n.RZ(),f===c)return f;const m=Av.rr(f,c)/2;let g;g=Av.ar(f,c)?Av.Kn(c+m+Math.PI):Av.Kn(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),v=Math.sin(g),x=y*w+S*v,b=y-2*x*w,M=S-2*x*v;return Av.nr(0,0,b,M)}WHt(t,s,e,i,n){if(!n)return!1;const r=n.WJ();return!!r.aQ()&&(this.cHt++,Uv.set(Math.min(t,e),Math.min(s,i),Math.max(t,e),Math.max(s,i)),!!r.HZ().bl(Uv)&&(n.YUt()?this.zHt(t,s,e,i,n,r):(this.dHt++,!!r.$Z().Ql(t,s,e,i)&&(!r.djt()||r.pjt().Ql(r.dM(),r.gM(),t,s,e,i)))))}zHt(t,s,e,i,n,r){const h=r.dM(),o=r.gM(),a=n.o0(),l=Dv;Vv.set(t,s,e,i),Vv.normalize(),a.GHt(Vv,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r._Ht();if(this.cHt++,Uv.Ml(a,h,o)&&(Bv.Xl(a),Bv.offset(h,o),Bv.Ql(t,s,e,i))){const n=r.IHt();if(!n)return Av.wh(l),!0;if(this.dHt++,n.Ql(h+a.Za(),o+a.Qa(),t,s,e,i))return Av.wh(l),!0}}return Av.wh(l),!1}OHt(t,s){if(!s)return!1;const e=s.WJ();if(!e.aQ())return!1;if(this.cHt++,!e.HZ().bl(t))return!1;if(s.YUt())return this.jHt(t,s,e);if(this.dHt++,Bv.Xl(t),!e.$Z().tu(Bv))return!1;if(!e.djt())return!0;const i=Lv;i.Xl(t,e.dM(),e.gM());const n=e.pjt();return i.xu(n,0,0)}jHt(t,s,e){const i=e.dM(),n=e.gM(),r=s.o0(),h=Dv;r.GHt(t,h);for(let s=0,e=h.length;s<e;++s){const e=h[s],r=e._Ht();if(this.cHt++,t.Ml(r,i,n)){const s=e.IHt();if(!s)return Av.wh(h),!0;if(this.dHt++,Lv.Xl(t,0,0),s.xu(Lv,-(i+r.Za()),-(n+r.Qa())))return Av.wh(h),!0}}return Av.wh(h),!1}HHt(t,s){if(!t)return;const e=t.WJ();e.aQ()&&(this.cHt++,e.HZ().bl(s.rect)&&(t.YUt()?this.JHt(t,e,s):(this.dHt++,e.djt()?s.$Ht(t,e.dM(),e.gM(),e.pjt()):s.qHt(t,e.$Z()))))}JHt(t,s,e){const i=s.dM(),n=s.gM(),r=Dv;t.o0().GHt(e.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o._Ht();if(this.cHt++,e.rect.Ml(a,i,n)){const r=o.IHt();this.dHt++,r?e.$Ht(t,i+a.Za(),n+a.Qa(),r):e.XHt(t,s.dM(),s.gM(),a)}}Av.wh(r)}W$(t,s){if(t===this.aHt&&s===this.lHt)return;this.aHt=t,this.lHt=s;const e=this.Nc.L7();for(const i of e)if(i.Cq()){for(const t of i.aX())t.WJ().Yzt();i.lUt().YHt(t,s),i.uUt();for(const t of i.aX()){const s=t.WJ();s.Gjt(),s.fUt()}}}j$(){return[this.aHt,this.lHt]}KHt(t,s){this.aHt=t,this.lHt=s}}}{const Hv=self._s;Hv.WNt=class extends Hv.Wn{constructor(t,s){super(),this.V6=t,this.W6=s,this.z6=Hv.jn(Hv.Iu)}Hn(){this.z6.Hn(),this.z6=null}YHt(t,s){if(!this.z6.Pu())throw new Error("grid not empty");this.V6=t,this.W6=s}j6(t,s,e){let i=this.z6.Hs(t,s);return i||(e?(i=Hv.jn(Hv.ZHt,this,t,s),this.z6.Set(t,s,i),i):null)}H6(t){const s=Math.floor(t/this.V6);return isFinite(s)?s:0}J6(t){const s=Math.floor(t/this.W6);return isFinite(s)?s:0}q6(t,s,e){if(s)for(let i=s.Za(),n=s.tl();i<=n;++i)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(e&&e.Tl(i,n))continue;const s=this.j6(i,n,!1);s&&(s.Kf(t),s.Pu()&&this.z6.Eu(i,n))}if(e)for(let i=e.Za(),n=e.tl();i<=n;++i)for(let n=e.Qa(),r=e.sl();n<=r;++n)s&&s.Tl(i,n)||this.j6(i,n,!0).L6(t)}X6(t,s){let e=this.H6(t.Za());const i=this.J6(t.Qa()),n=this.H6(t.tl()),r=this.J6(t.sl());if(isFinite(n)&&isFinite(r))for(;e<=n;++e)for(let t=i;t<=r;++t){const i=this.j6(e,t,!1);i&&i.B6(s)}}}}{const Jv=self._s;Jv.ZHt=class extends Jv.Wn{constructor(t,s,e){super(),this.P6=t,this.Ra=s,this.Pa=e,this.E6=Jv.jn(Jv.Du)}Hn(){this.E6.Hn(),this.E6=null,this.P6=null}Pu(){return this.E6.Pu()}L6(t){this.E6.Bu(t)}Kf(t){this.E6.Eu(t)}B6(t){Jv.Fn(t,this.E6.Uu())}}}{const $v=self._s,qv=1e-6;$v.QHt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new $v.Rect,this.tJt=2,this.sJt=null,this.eJt=0,this.iJt=0,this.nJt=0,this.rJt=0,this.hJt=0,this.vt=0,this.oJt=1,this.aJt=0,this.lJt=1,this.uJt=0}cJt(){return this.tJt<1.000001}Bf(){this.tJt=2}Set(t,s,e,i){return this.x1=t,this.y1=s,this.x2=e,this.y2=i,this.dx=e-t,this.dy=i-s,this.rect.set(t,s,e,i),this.rect.normalize(),this.tJt=2,this.sJt=null,this.eJt=0,this.iJt=0,this.nJt=0,this.rJt=0,this.hJt=0,this.vt=0,this.oJt=1,this.aJt=0,this.lJt=1,this.uJt=0,this}fJt(){if(!1===this.cJt())return;const t=this.dx*this.tJt,s=this.dy*this.tJt,e=$v.tr(t,s),i=t/e,n=s/e;this.vt=e-qv,this.rJt=this.x1+i*this.vt,this.hJt=this.y1+n*this.vt,this.eJt=Math.atan2(this.nJt,this.iJt)+Math.PI/2,this.oJt=Math.cos(this.eJt),this.aJt=Math.sin(this.eJt);const r=i*this.oJt+n*this.aJt;if(this.lJt=i-2*this.oJt*r,this.uJt=n-2*this.aJt*r,r>0){const t=Math.PI;this.eJt=$v.Kn(this.eJt+t),this.oJt=-this.oJt,this.aJt=-this.aJt}}dJt(t,s,e,i,n){const r=$v.$r(this.x1,this.y1,this.x2,this.y2,s,e,i,n);r>=0&&r<this.tJt&&(this.tJt=r,this.sJt=t.PK(),this.iJt=s-i,this.nJt=e-n)}XHt(t,s,e,i){const n=s+i.Za(),r=s+i.tl(),h=e+i.Qa(),o=e+i.sl();this.dJt(t,n,h,r,h),this.dJt(t,r,h,r,o),this.dJt(t,r,o,n,o),this.dJt(t,n,o,n,h)}qHt(t,s){const e=s.Nr(),i=s.Br(),n=s.Ur(),r=s.Vr(),h=s.Wr(),o=s.zr(),a=s.jr(),l=s.Hr();this.dJt(t,e,i,n,r),this.dJt(t,n,r,h,o),this.dJt(t,h,o,a,l),this.dJt(t,a,l,e,i)}$Ht(t,s,e,i){const n=i.du();for(let i=0,r=n.length;i<r;i+=2){const h=(i+2)%r,o=n[i]+s,a=n[i+1]+e,l=n[h]+s,u=n[h+1]+e;this.dJt(t,o,a,l,u)}}}}{const Xv=self._s;Xv.RHt=class{constructor(){this.pJt=new Map}Hn(){for(const t of this.pJt.values())t.mJt.Ru();this.pJt.clear()}gJt(t){let s=this.pJt.get(t);return void 0===s&&(s={IY:null,mJt:new Xv.Iu},this.pJt.set(t,s)),s}CY(t){const s=this.gJt(t);return null===s.IY&&(s.IY=t.OY()),s.IY}oK(t,s,e,i){if(0!==i)return t.oK(s,e,i);const n=this.gJt(t);let r=n.mJt.Hs(s,e);return void 0===r&&(r=t.oK(s,e,i),n.mJt.Set(s,e,r)),r}}}{const Yv=self._s,Kv=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Zv=new Set(["high","low"]),Qv=self.hs,tx=Qv.fs,sx=(Qv.ys,tx.create()),ex=Yv.jn(Yv.Cl),ix=Yv.jn(Yv.Rect);Yv.yJt=class extends Yv.Wn{constructor(t){super(),this.Nc=t,this.SJt=[],this.wJt=!1,this.vJt=null,this.xJt=null,this.bJt=null,this.MJt="high-performance",this.TJt=!1,this.GJt="auto",this._Jt=0,this.IJt=0,this.CJt="",this.RJt=0,this.PJt=0,this.EJt=0,this.FJt=0,this.AJt=0,this.OJt=0,this.mw="normalized",this.DJt=0,this.kJt=1,this.LJt=1e4,this.Jw=!0,this.NJt=0,this.XW=0,this.YW=0,this.BJt="letterbox-scale",this.UJt="letterbox-scale",this.VJt=0,this.WJt=0,this.zJt=tx.create(),this.jJt="high",this.HJt=this.jJt,this.JJt=!1,this.$Jt=[],this.qJt=new Set,this.XJt=self.C3_Shaders,this.YJt=Yv.jn(Yv.$S.ZV,{qV:()=>[this.wtt(),this.vtt()],XV:()=>this.KJt(),YV:t=>this.ZJt(t),getTime:()=>this.m$().BH(),KV:()=>this.m$().XJ()}),this.QJt=0,this.t$t=0,this.s$t=NaN,this.e$t=null,this.i$t=new Map,this.n$t=NaN,this.r$t=new Map,this.h$t="",this.o$t=1,this.a$t=Yv.jn(Yv.Rect),this.l$t="",this.u$t=null,this.c$t=null,this.f$t=0,this.d$t=0,this.p$t=-1,this.m$t=0,this.g$t=t=>this.m$t=t.progress,this.y$t=null,this.S$t={w$t:null,v$t:null,x$t:null},this.b$t=0,this.M$t=0,this.T$t=0,this.G$t="fade-in",this._$t=null,this.I$t=new Promise(t=>this._$t=t)}C$t(t){this.MJt=t}R$t(t){this.wJt=!!t}P$t(t){this.mw=t}E$t(){return this.mw}F$t(t){this.DJt=t}A$t(t,s){this.kJt=t,this.LJt=s}O$t(t){this.TJt=!!t}D$t(t){this.GJt=t}async uo(t){let s=t.canvas;this.SJt.push({canvas:s,k$t:null}),this.Nc.iZ("runtime","window-resize",t=>this.L$t(t)),this.Nc.iZ("runtime","fullscreenchange",t=>this.N$t(t)),this.Nc.iZ("runtime","fullscreenerror",t=>this.B$t(t)),s.addEventListener("webglcontextlost",t=>this.U$t(t)),s.addEventListener("webglcontextrestored",t=>this.V$t(t)),this.JJt=!!t.isFullscreen,this.CJt=t.cssDisplayMode;const e=navigator.gpu&&this.wJt;let i=!1;if(e)try{await this.W$t(!0)}catch(t){this.z$t("WebGPU",t),this.xJt=null}if(!this.Ob())try{await this.j$t(!0)}catch(t){this.z$t("WebGL",t),this.vJt=null}if(this.Ob()||(i=!0),!this.Ob()&&e)try{await this.W$t(!1)}catch(t){this.z$t("WebGPU",t),this.xJt=null}if(!this.Ob())try{await this.j$t(!1)}catch(t){this.z$t("WebGL",t),this.vJt=null}const n=this.Ob();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.eb(i),this.xJt&&(this.xJt.Zk=()=>this.H$t(),this.xJt.Qk=()=>this.J$t()),"normalized"===this.mw?n.lv():(n.uv(),n.ov(this.DJt)),this.nE(t.windowInnerWidth,t.windowInnerHeight,!0),await this.jjt()}z$t(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async W$t(t){const s={aw:this.kJt,lw:this.LJt};let e=!0;"no"===this.GJt?e=!1:"auto"===this.GJt&&(e=Yv.Ks.re);let i="nearest";this.Nc.$$t()&&"nearest"!==this.Nc.OV()&&(i="bilinear");const n={powerPreference:this.MJt,depth:this.Nc.T9(),failIfMajorPerformanceCaveat:t,tD:this.Nc.Ctt(),ZO:this.Nc.$$t(),QO:i,pF:this.Nc.q$t(),sD:e};this.xJt=Yv.jn(Yv.$S.eD,s),await this.xJt.e_(this.SJt[0].canvas,n)}async j$t(t){const s={alpha:!0,powerPreference:this.MJt,dF:"xbox-uwp-webview2"!==this.Nc.Q$(),depth:this.Nc.T9(),pF:this.Nc.q$t(),failIfMajorPerformanceCaveat:t,aw:this.kJt,lw:this.LJt};this.TJt&&(s.mF=1),this.vJt=Yv.jn(Yv.$S.SF,this.SJt[0].canvas,s),await this.vJt.Yw()}async X$t(){if(this.XJt){const t=[];for(const[s,e]of Object.entries(this.XJt)){e.src=e.Y$t;const i=Yv.$S.CD.GI(this.xJt.l_());t.push(this.xJt.TA(Object.assign({QG:i,name:s},e)))}await Promise.all(t)}}async K$t(){if(this.XJt){const t=[];for(const[s,e]of Object.entries(this.XJt)){let i;if(e.Z$t&&this.vJt.VT()>=2)e.src=e.Z$t,i=Yv.$S.KG._I();else{if(!e.Q$t)throw new Error(`shader '${s}' does not support WebGL 1`);e.src=e.Q$t,i=Yv.$S.KG.GI()}t.push(this.vJt.TA(Object.assign({QG:i,name:s},e)))}await Promise.all(t),this.vJt.GA(),this.vJt.xv()}this.vJt.VO()&&(this.e$t=Yv.jn(Yv.$S.iF,this.vJt))}async jjt(){this.xJt?await this.X$t():this.vJt&&await this.K$t();const t=this.Ob();t.tb(this.Jw),t.VO()&&(this.s$t=0);for(const s of this.Nc.tqt()){for(const e of s.OX())e.jjt(t);s.jjt(t),s.G0()}this.bJt=new self.L3(this.Nc,t)}Hn(){this.Nc=null,this.vJt=null,this.SJt.length=0}Qj(){return this.Nc.Qj()}L$t(t){const s=this.Nc;if(s.sqt())return;const e=t.devicePixelRatio;this.Qj()&&(self.devicePixelRatio=e),s.eqt(e),this.JJt=!!t.isFullscreen,this.CJt=t.cssDisplayMode,this.nE(t.innerWidth,t.innerHeight),s.XJ();const i=new Yv.Event("window-resize");i.data=t,s.Sf().Cf(i);const n=new Yv.Event("resize");n.iqt=this.lq(),n.nqt=this.cq(),n.rqt=this.pq(),n.hqt=this.gq(),s.q5(n),this.Nc.UJ()?.sst(),s.aZ()&&(s.ATt()||self.lZ.oqt())&&s.Iz()}N$t(t){this.JJt=!!t.isFullscreen,this.nE(t.innerWidth,t.innerHeight,!0),this.Nc.XJ()}B$t(t){this.JJt=!!t.isFullscreen,this.nE(t.innerWidth,t.innerHeight,!0),this.Nc.XJ()}nE(t,s,e=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this._Jt===t&&this.IJt===s&&!e)return;this._Jt=t,this.IJt=s;const i=this.aqt();"letterbox-scale"===i?this.lqt(t,s):"letterbox-integer-scale"===i?this.uqt(t,s):"off"===i?this.cqt(t,s):this.fqt(t,s),this.dqt(i);for(const{canvas:t}of this.SJt)t.width=this.EJt,t.height=this.FJt;this.Nc.Vc("canvas","update-size",{marginLeft:this.AJt,marginTop:this.OJt,styleWidth:this.RJt,styleHeight:this.PJt,displayScale:this.L2()});const n=this.Ob();n.nE(this.EJt,this.FJt,!0);for(const t of this.$Jt)n.DO(t);Yv.wh(this.$Jt),this.pqt();const r=this.Nc.xJ();r.zit(),r.jit()}pqt(){this.Ob().fv(this.zJt,this.wtt()/this.vtt())}xtt(){return this.zJt}lqt(t,s){const e=this.Nc.yq(),i=this.Nc.sH(),n=this.Nc.iH(),r=i/n;if(t/s>r){const e=s*r;this.RJt=Math.round(e),this.PJt=s,this.AJt=Math.floor((t-this.RJt)/2),this.OJt=0}else{const e=t/r;this.RJt=t,this.PJt=Math.round(e),this.AJt=0,this.OJt=Math.floor((s-this.PJt)/2)}this.EJt=Math.round(this.RJt*e),this.FJt=Math.round(this.PJt*e),this.Nc.mqt(i,n)}uqt(t,s){const e=this.Nc.yq();1!==e&&(t+=1,s+=1);const i=this.Nc.sH(),n=this.Nc.iH(),r=i/n;let h;h=t/s>r?s*r*e/i:t/r*e/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.EJt=Math.round(i*h),this.FJt=Math.round(n*h),this.RJt=this.EJt/e,this.PJt=this.FJt/e,this.AJt=Math.max(Math.floor((t-this.RJt)/2),0),this.OJt=Math.max(Math.floor((s-this.PJt)/2),0),this.Nc.mqt(i,n)}fqt(t,s){const e=this.Nc.yq();this.RJt=t,this.PJt=s,this.EJt=Math.round(this.RJt*e),this.FJt=Math.round(this.PJt*e),this.AJt=0,this.OJt=0;const i=this.L2();this.Nc.mqt(this.RJt/i,this.PJt/i)}cqt(t,s){const e=this.Nc.yq();this.RJt=this.Nc.p9(),this.PJt=this.Nc.m9(),this.EJt=Math.round(this.RJt*e),this.FJt=Math.round(this.PJt*e),this.gqt()?(this.AJt=Math.floor((t-this.RJt)/2),this.OJt=Math.floor((s-this.PJt)/2)):(this.AJt=0,this.OJt=0),this.Nc.mqt(this.Nc.p9(),this.Nc.m9())}dqt(t){if("high"===this.jJt)this.XW=this.EJt,this.YW=this.FJt,this.HJt="high";else{let s,e;if("off"===this.aqt()?(s=this.Nc.p9(),e=this.Nc.m9()):(s=this.Nc.sH(),e=this.Nc.iH()),this.EJt<s||this.FJt<e)this.XW=this.EJt,this.YW=this.FJt,this.HJt="high";else if(this.XW=s,this.YW=e,this.HJt="low","scale-inner"===t){const t=s/e,i=this._Jt/this.IJt;i<t?this.XW=this.YW*i:i>t&&(this.YW=this.XW/i)}else if("scale-outer"===t){const t=s/e,i=this._Jt/this.IJt;i>t?this.XW=this.YW*i:i<t&&(this.YW=this.XW/i)}}}m$(){return this.Nc}yqt(){return this.SJt[0].canvas}K8(){return this.YJt}gqt(){return this.JJt}Sqt(){return this.CJt}wqt(t){if(!Kv.has(t))throw new Error("invalid fullscreen mode");this.BJt=t;const s=this.Nc.xJ();s.zit(),s.jit()}O2(){return this.BJt}vqt(t){if(!Kv.has(t))throw new Error("invalid fullscreen mode");this.UJt=t;const s=this.Nc.xJ();s.zit(),s.jit()}xqt(){return this.UJt}aqt(){return this.gqt()?this.xqt():this.O2()}bqt(t){if(!Zv.has(t))throw new Error("invalid fullscreen scaling quality");this.jJt=t,this.Nc.xJ().zit()}Mqt(){return this.jJt}Rtt(){return this.HJt}static Tqt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}v2(){return this._Jt}b2(){return this.IJt}wtt(){return this.XW}vtt(){return this.YW}tb(t){this.Jw=!!t}Gqt(){return this.Jw}_qt(t){this.NJt=t}T6(){return this.NJt}Iqt(){return this.Ob().OE()}U$t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.$Jt=[],this.qJt.clear(),this.YJt.nM(),this.vJt.nM(),this.Nc.Eet()}H$t(){console.log("[Construct] WebGPU device lost"),this.$Jt=[],this.qJt.clear(),this.YJt.nM(),this.Nc.Eet()}async V$t(t){await this.vJt.rM(),await this.jjt(),await this.Nc.Cqt(),console.log("[Construct] WebGL context restored")}async J$t(){await this.jjt(),await this.Nc.Cqt(),console.log("[Construct] WebGPU device restored")}Rqt(){return this.vJt}Pqt(){return this.xJt}Ob(){return this.xJt||this.vJt}FJ(){return this.bJt}sq(){let t="";return t=this.Nc.Pqt()?"webgpu":"webgl"+this.Nc.Rqt().VT(),this.Nc.Ob().ib()&&(t+="-software"),t}iq(){return this.Nc.Pqt()?this.Nc.Pqt().qB():this.Nc.Rqt().qO()}mK(){return"low"===this.HJt?1/this.Nc.yq():this.L2()}L2(){const t=this.aqt();if("off"===t||"crop"===t)return 1;const s=this.Nc.sH(),e=this.Nc.iH(),i=s/e,n=this.EJt/this.FJt;return"scale-inner"!==t&&n>i||"scale-inner"===t&&n<i?this.PJt/e:this.RJt/s}Qtt(){return"low"===this.Rtt()?1:this.L2()}Ktt(){return"low"===this.Rtt()?1:this.Nc.yq()}Eqt(t,s){this.VJt=t,this.WJt=s}E4(t,s,e,i=!0){s=s||this.XW,e=e||this.YW;const n=s/2+this.VJt,r=e/2+this.WJt;if(i){let i=this.xtt();s===this.XW&&e===this.YW||(t.fv(sx,s/e),i=sx),t.IA(i)}const h=t.gv(n,r,t.Zw(e),n,r,0,e);t.AA(h)}Fqt(t,s=!0){const e=this.lq(),i=this.cq(),n=e/2,r=i/2;s&&t.IA(this.xtt());const h=t.gv(n,r,t.Zw(i),n,r,0,i);t.AA(h)}pq(){return this.EJt}gq(){return this.FJt}lq(){return this.RJt}cq(){return this.PJt}rq(){return this.AJt}oq(){return this.OJt}fet(){return this.SJt.length}Aqt(){return"undefined"!=typeof OffscreenCanvas&&this.yqt()instanceof OffscreenCanvas&&("Chromium"!==Yv.Ks.ie||Yv.Ks.ee>=124)}async ket(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.SJt.length===t)return;const e={count:t,layersDomState:this.Nc.xJ().SJ().j7().filter(t=>t.EY()).map(t=>t.q9()),immediate:s,marginLeft:this.AJt,marginTop:this.OJt,styleWidth:this.RJt,styleHeight:this.PJt};let i;if(i=this.Qj()?await this.Nc.KJ("canvas","set-html-layer-count",e):self.c3_runtimeInterface._OnSetHTMLLayerCount(e),t<this.SJt.length)this.SJt.length=t;else for(const t of i.addedCanvases){t.width=this.EJt,t.height=this.FJt;const s=this.Aqt()?"bitmaprenderer":"2d",e=t.getContext(s);if(!e)throw new Error(`failed to acquire '${s}' canvas context`);this.SJt.push({canvas:t,k$t:e})}this.Nc.XJ()}Tit(t){if(t>=this.SJt.length)return;const s=this.yqt(),e=this.SJt[t].k$t;this.Aqt()?e.transferFromImageBitmap(s.transferToImageBitmap()):(e.globalCompositeOperation="copy",e.drawImage(s,0,0))}Ptt(t){t.depth=this.Nc.T9();const s=this.$Jt,e=s.findIndex(s=>s.HG(t));let i;return-1!==e?(i=s[e],s.splice(e,1)):i=this.Ob().PO(t),this.qJt.add(i),i}Q8(t){if(!this.qJt.has(t))throw new Error("render target not in use");this.qJt.delete(t),this.$Jt.push(t)}KJt(){const t={xT:this.Nc.OV()};return"low"===this.Rtt()&&(t.width=this.wtt(),t.height=this.vtt()),this.Ptt(t)}ZJt(t){this.Q8(t)}*Oqt(){for(const t of this.Nc.xJ().Uit())for(const s of t.KX()){const t=this.i$t.get(s);t&&(yield t)}}Gtt(t){if(!this.Ob().VO())return null;let s=this.i$t.get(t);return s||(s={CZ:t,name:t.Rc(),Dqt:Yv.jn(Yv.$S.iF,this.vJt),kqt:0,Lqt:0,Nqt:0},this.i$t.set(t,s)),s.Dqt}Bqt(){const t=this.Ob();if(t.VO()&&0===this.t$t){this.t$t=t.Zx(),this.n$t=NaN;for(const t of this.Oqt())t.kqt=NaN}}Uqt(){this.vJt&&this.vJt.VO()&&this.Vqt(),this.xJt&&this.xJt.VO()&&this.Wqt()}Vqt(){if(isNaN(this.n$t)&&(this.n$t=this.e$t.uF(this.QJt,this.t$t),!isNaN(this.n$t))){if(this.Nc.aZ())for(const t of this.Oqt())if(t.kqt=t.Dqt.uF(this.QJt,this.t$t),isNaN(t.kqt))return;if(this.e$t.cF(this.t$t),this.s$t=Math.min(this.n$t,1),this.Nc.aZ()){const t=new Map;for(const s of this.Oqt())s.Dqt.cF(this.t$t),s.Lqt=Math.min(s.kqt,1),t.set(s.CZ,s.Lqt);for(const s of this.Oqt()){const e=s.CZ,i=(t.get(e)||0)-e.vY().reduce((s,e)=>s+(t.get(e)||0),0);s.Nqt=Yv.Yn(i,0,1)}const s=this.Nc.SJ(),e=this.s$t-s.j7().reduce((s,e)=>s+(t.get(e)||0),0);self.lZ.zqt(Yv.Yn(e,0,1),this.s$t,[...this.Oqt()])}this.QJt=this.t$t,this.t$t=0}}jqt(){return this.e$t}Wqt(){if(0===this.t$t)return;for(let t=this.QJt;t<this.t$t;++t){const s=this.r$t.get(t);if(s&&!s.JE())return}const t=this.Nc.SJ(),s=Yv.bo(t.het()+1,0);let e=0;for(let t=this.QJt;t<this.t$t;++t){const i=this.r$t.get(t);if(!i)continue;const n=i.$E();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,e=Math.min(s.length,n.length/2);t<e;++t){const e=n[2*t],i=n[2*t+1];e!==o&&(r===o||e<r)&&(r=e),i>h&&(h=i);const a=Number(i-e)/1e9;s[t]+=a}e+=Number(h-r)/1e9}if(this.s$t=Yv.Yn(e,0,1),this.Nc.aZ()){const e=t.KX(),i=new Map;for(let t=0,n=Math.min(e.length,s.length-1);t<n;++t){const n=s[t+1];i.set(e[t],n)}const n=[],r=new Map;for(const[t,s]of i){const e=[...t.bY()].reduce((t,s)=>t+(i.get(s)||0),0);r.set(t,e),n.push({name:t.Rc(),Nqt:Yv.Yn(s,0,1),Lqt:Yv.Yn(e,0,1)})}const h=this.s$t-t.j7().reduce((t,s)=>t+(r.get(s)||0),0);self.lZ.zqt(Yv.Yn(h,0,1),this.s$t,n)}for(let t=this.QJt;t<this.t$t;++t)this.r$t.delete(t);this.QJt=this.t$t,this.t$t=0}Hqt(t){this.r$t.set(this.xJt.Zx(),t)}tJ(){return this.s$t}i$(t,s,e,i,n,r){return this.h$t=t,this.o$t=s,this.a$t.ja(e,i,n,r),this.u$t||(this.u$t=new Promise(t=>{this.c$t=t})),this.u$t}Jqt(){if(!this.h$t)return;let t=this.yqt();const s=this.a$t,e=Yv.Yn(Math.floor(s.Za()),0,t.width),i=Yv.Yn(Math.floor(s.Qa()),0,t.height);let n=s.width();n=0===n?t.width-e:Yv.Yn(Math.floor(n),0,t.width-e);let r=s.height();if(r=0===r?t.height-i:Yv.Yn(Math.floor(r),0,t.height-i),(0!==e||0!==i||n!==t.width||r!==t.height)&&n>0&&r>0){const s=Yv.uo(n,r);s.getContext("2d").drawImage(t,e,i,n,r,0,0,n,r),t=s}Yv.co(t,this.h$t,this.o$t).then(t=>{this.l$t&&URL.revokeObjectURL(this.l$t),this.l$t=URL.createObjectURL(t),this.u$t=null,this.c$t(t)}),this.h$t="",this.o$t=1}$qt(){return this.l$t}qqt(t){t?this.f$t++:this.f$t--}Xqt(){return this.f$t>0}Yqt(t){const s=this.Ob();if(2===t)this.y$t=Yv.jn(Yv.$S.ub,this.Ob()),this.y$t.FP("Arial"),this.y$t.AP(16),this.y$t.$P("center"),this.y$t.XP("center"),this.y$t.nE(300,200);else if(0===t){const t=this.Nc.Kqt();t&&t.b4(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.Zqt("splash-images/splash-logo.svg").then(t=>{"done"===this.G$t?s.PG(t):this.S$t.w$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.Qqt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.G$t?s.PG(t):this.S$t.v$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.Qqt("splash-images/splash-website-512.png").then(t=>{"done"===this.G$t?s.PG(t):this.S$t.x$t=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async Zqt(t){t=new URL(t,this.Nc.tXt()).toString();const s=await Yv.io(t),e=await this.Nc.sXt(s,2048,2048);return await this.Ob().RO(e,{GT:"high"})}async Qqt(t){t=new URL(t,this.Nc.tXt()).toString();const s=await Yv.io(t);return await this.Ob().RO(s,{GT:"high"})}eXt(){this.Nc.Vc("runtime","hide-cordova-splash")}iXt(){this.d$t=Date.now(),this.Nc.Sf().addEventListener("loadingprogress",this.g$t),this.p$t=requestAnimationFrame(()=>this.nXt()),3!==this.Nc.rXt()&&this.eXt()}async hXt(){const t=this.Ob();this.m$t=1;const s=this.Nc.rXt();4===s&&await this.I$t,this._$t=null,this.I$t=null,-1!==this.p$t&&(cancelAnimationFrame(this.p$t),this.p$t=-1),this.Nc.Sf().removeEventListener("loadingprogress",this.g$t),this.g$t=null,this.y$t&&(this.y$t.Hn(),this.y$t=null),this.Nc.oXt(),t.wO(),this.S$t.w$t&&(t.PG(this.S$t.w$t),this.S$t.w$t=null),this.S$t.v$t&&(t.PG(this.S$t.v$t),this.S$t.v$t=null),this.S$t.x$t&&(t.PG(this.S$t.x$t),this.S$t.x$t=null),t.SO(0,0,0,0),t.Yx(),this.G$t="done",this.QJt=t.Zx(),3===s&&this.eXt()}nXt(){if(-1===this.p$t)return;const t=this.Ob();t.wO(),this.p$t=-1;const s=this.Nc.Dj().J5(),e=this.Nc.rXt();if(3!==e&&(this.Fqt(t),t.SO(0,0,0,0),t.VA(),t.xv(),t.zA(null)),0===e)this.aXt(s);else if(1===e)this.lXt(s,120,0);else if(2===e)this.uXt(s);else if(3===e)Yv.mh();else{if(4!==e)throw new Error("invalid loader style");this.cXt(s)}t.Yx(),this.p$t=requestAnimationFrame(()=>this.nXt())}uXt(t){t?this.y$t.JP(1,0,0):this.y$t.JP(.6,.6,.6),this.y$t.Wc(Math.round(100*this.m$t)+"%");const s=this.RJt/2,e=this.PJt/2;ex.Ll(s-150,e-100,s+150,e+100);const i=this.Ob();i.zA(this.y$t.kG()),i.wx(ex,this.y$t.kE())}lXt(t,s,e){const i=this.Ob();i.Iv(),t?i.BA(1,0,0,1):i.BA(.118,.565,1,1);const n=this.RJt/2,r=this.PJt/2,h=s/2;ix.ja(n-h,r-4+e,Math.floor(s*this.m$t),8),i.Rect(ix),ix.ja(n-h,r-4+e,s,8),ix.offset(-.5,-.5),ix.cl(.5,.5),i.BA(0,0,0,1),i.Tx(ix),ix.cl(1,1),i.BA(1,1,1,1),i.Tx(ix)}aXt(t){const s=this.Ob(),e=this.Nc.Kqt();if(!e)return void this.lXt(t,120,0);const i=e.kG();if(!i)return void this.lXt(t,120,0);const n=i.by(),r=i.Ty(),h=this.RJt/2,o=this.PJt/2,a=n/2,l=r/2;ex.Ll(h-a,o-l,h+a,o+l),s.zA(i),s.Cl(ex),this.lXt(t,n,l+16)}cXt(t){const s=this.Ob(),e=this.S$t.w$t,i=this.S$t.v$t,n=this.S$t.x$t,r=Date.now();0===this.b$t&&(this.d$t=r);const h=this.Nc.fXt()||this.Nc.dXt()&&!this.Nc.pXt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.G$t?l=Math.min((r-this.d$t)/300,1):"fade-out"===this.G$t&&(l=Math.max(1-(r-this.T$t)/300,0)),s.Iv(),s.BA(.231*l,.251*l,.271*l,l),ix.set(0,0,this.RJt,this.PJt),s.Rect(ix);const u=Math.ceil(this.RJt),c=Math.ceil(this.PJt);let f,d;this.PJt>256?(s.BA(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),ix.ja(0,.8*c-d/2,f,d),s.Rect(ix),t?s.BA(l,0,0,l):s.BA(.161*l,.953*l,.816*l,l),f=u*this.m$t,ix.ja(.5*u-f/2,.8*c-d/2,f,d),s.Rect(ix),s.BA(l,l,l,l),s.xv(),i&&(f=1.5*Yv.Yn(.22*c,105,.6*u),d=f/8,ix.ja(.5*u-f/2,.2*c-d/2,f,d),s.zA(i),s.Rect(ix)),e&&(f=Math.min(.395*c,.95*u),d=f,ix.ja(.5*u-f/2,.485*c-d/2,f,d),s.zA(e),s.Rect(ix)),n&&(f=1.5*Yv.Yn(.22*c,105,.6*u),d=f/8,ix.ja(.5*u-f/2,.868*c-d/2,f,d),s.zA(n),s.Rect(ix))):(s.BA(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),ix.ja(0,.85*c-d/2,f,d),s.Rect(ix),t?s.BA(l,0,0,l):s.BA(.161*l,.953*l,.816*l,l),f=u*this.m$t,ix.ja(.5*u-f/2,.85*c-d/2,f,d),s.Rect(ix),s.BA(l,l,l,l),s.xv(),e&&(f=.55*c,d=f,ix.ja(.5*u-f/2,.45*c-d/2,f,d),s.zA(e),s.Rect(ix))),this.b$t++,"fade-in"===this.G$t&&r-this.d$t>=300&&this.b$t>=2&&(this.G$t="wait",this.M$t=r),"wait"===this.G$t&&r-this.M$t>=a&&this.m$t>=1&&(this.G$t="fade-out",this.T$t=r),("fade-out"===this.G$t&&r-this.T$t>=300+o||h&&this.m$t>=1&&r-this.d$t<500)&&this._$t()}}}{const nx=self._s,rx=self.lZ,hx=(self.assert,self.Y2),ox={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let ax=!0;nx.mXt=class extends nx.Wn{constructor(t){t=Object.assign({},ox,t),super(),this.gXt=t.messagePort,this.yXt=t.runtimeBaseUrl,this.SXt=t.previewUrl,this.wXt=!!t.headless,this.vXt=!!t.hasDom,this.xXt=!!t.isInWorker,ax=t.ife,this.bXt=!!t.useAudio,this.MXt=t.exportType,this.Q4=!!t.isiOSCordova,this.TXt=!!t.isiOSWebView,this.GXt=!!t.isWindowsWebView2,this._Xt=!!t.isAnyWebView2Wrapper,this.IXt=!!t.isFBInstantAvailable,this.CXt=!("preview"!==this.MXt||!t.isDebug),this.RXt=this.CXt,this.PXt=this.CXt,this.EXt=0,this.FXt=[],this.AXt=[],this.OXt=!1,this.DXt="",this.kXt="",this.LXt="",this.NXt="",this.BXt=0,this.UXt=0,this.VXt=0,this.nz=self.devicePixelRatio,this.WXt=0,this.zXt=0,this.fD=0,this.dD=0,this.jXt=0,this.HXt=!1,this.RS=!0,this.JXt=!1,this.$Xt=!1,this.qXt=!1,this.XXt=null,this.c6=nx.jn(nx.Y4,this,t),this.gst=nx.jn(nx.Fit,this),this.ibt=nx.jn(nx.tMt,this),this.YXt=nx.jn(nx.bq,this,t.wrapperComponentIds),this.KXt=nx.jn(nx.oHt,this),this.rot=nx.jn(nx.Hit,this),this.ZXt=nx.jn(nx.bSt,this),this.QXt=nx.jn(nx.TSt,this),this.NSt=nx.jn(nx.FSt,this),this.TS=nx.jn(nx.fS,{mS:t=>this.tYt(t),yS:t=>this.sYt(t)}),this.eYt=new Map,this.iYt=[],this.nYt=new Map,this.rYt=new Map,this.hYt=0,this.oYt=[],this.aYt=new Set,this.lYt=[],this.uYt=[],this.cYt=new Map,this.fYt=!1,this.dYt=!1,this.pYt=0,this.mYt=0,this.gYt=new Map,this.yYt=new Set,this.SYt=new Set,this.wYt=[],this.vYt=[],this.xYt=null,this.bYt=!1,this.MYt="vsync",this.AT="trilinear",this.TYt=!1,this.GYt=!0,this._Yt=!1,this.IYt=!1,this.CYt=null,this.RYt={PYt:t=>{this.p$t=-1,this.EYt=-1,this.yrt(t)},FYt:t=>{this.EYt=-1,this.yrt(t,!1,"skip-render")},AYt:()=>{this.p$t=-1,this.Iz()}},this.p$t=-1,this.EYt=-1,this.OYt=0,this.DYt=0,this.kYt=!1,this.LYt=!1,this.NYt=!1,this.BYt=!0,this.UYt=!0,this.VYt=!1,this.WYt=0,this.zYt=new nx.jd(1),this.jYt=()=>Math.random(),this.HYt=0,this.JYt=0,this.$Yt=0,this.qYt=0,this.XYt=0,this.LUt=1,this.YYt=1/30,this.KYt=0,this.ZYt=nx.jn(nx.Qf),this.QYt=nx.jn(nx.Qf),this.tKt=nx.jn(nx.Qf),this.sKt=new Map,this.eKt=-1,this.iKt=0,this.nKt=0,this.rKt=-1,this.hKt=0,this.oKt=0,this.aKt=0,this.lKt=!1,this.uKt="",this.cKt=!1,this.fKt="",this.yZ=null,this.dKt="",this.pKt=null,this.mKt=null,this.UNt=nx.jn(nx.Event.Sf),this.gKt=new Map,this.yKt=new Map,this.SKt=0,this.wKt=!1,this.vKt=!1,this.xKt=!1,this.bKt=[],this.MKt={pretick:nx.jn(nx.Event,"pretick",!1),tick:nx.jn(nx.Event,"tick",!1),tick2:nx.jn(nx.Event,"tick2",!1),instancecreate:nx.jn(nx.Event,"instancecreate",!1),instancedestroy:nx.jn(nx.Event,"instancedestroy",!1),beforelayoutchange:nx.jn(nx.Event,"beforelayoutchange",!1),layoutchange:nx.jn(nx.Event,"layoutchange",!1),beforerender:nx.jn(nx.Event,"beforerender",!1),afterrender:nx.jn(nx.Event,"afterrender",!1)},this.MKt.instancecreate.S0=null,this.MKt.instancedestroy.S0=null,this.l7=nx.jn(nx.Event.Sf),this.TKt=null;const s=(t,s)=>nx.DUt.Ejt(this,t,s);this.GKt=nx.jn(nx.ld,s),this._Kt=nx.jn(nx.ld,s),this.IKt=nx.jn(nx.ld,s),this.CKt=nx.jn(nx.RKt,this,t.jobScheduler),t.canvas&&(this.xYt=nx.jn(nx.yJt,this)),this.gXt.onmessage=t=>this._OnMessageFromDOM(t.data),this.iZ("runtime","visibilitychange",t=>this.PKt(t)),this.iZ("runtime","wrapper-extension-message",t=>this.EKt(t)),this.iZ("runtime","get-remote-preview-status-info",()=>this.FKt()),this.iZ("runtime","js-invoke-function",t=>this.CMt(t)),this.iZ("runtime","go-to-last-error-script",self.goToLastErrorScript),this.iZ("runtime","offline-audio-render-completed",t=>this.AKt(t)),this.UNt.addEventListener("window-blur",t=>this.OKt(t)),this.UNt.addEventListener("window-focus",()=>this.DKt()),this.rot.Tnt(),this.QXt.Tnt(),this.kKt=null,this.LKt=0,this.NKt=new WeakMap,this.BKt={keyboard:null,RJ:null,PJ:null,EJ:null},this.UKt=new WeakMap,this.VKt=[]}static e_(t){return nx.jn(nx.mXt,t)}Hn(){nx.wh(this.iYt),this.nYt.clear(),this.rYt.clear(),this.gst.Hn(),this.gst=null,this.ibt.Hn(),this.ibt=null,this.YXt.Hn(),this.YXt=null,this.c6.Hn(),this.c6=null,this.KXt.Hn(),this.KXt=null,this.rot.Hn(),this.rot=null,this.ZXt.Hn(),this.ZXt=null,this.QXt.Hn(),this.QXt=null,this.NSt.Hn(),this.NSt=null,this.TS.Hn(),this.TS=null,this.xYt&&(this.xYt.Hn(),this.xYt=null),this.UNt.Hn(),this.UNt=null,this.WKt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.zKt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.jKt(t)}}zKt(t){if(!this.xKt)return void this.bKt.push(t);const s=t.component,e=t.handler,i=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new nx.Event(e);t.data=i,this.UNt.Cf(t)}if(h){const t=new nx.Event(e,!0);if(i)for(const[s,e]of Object.entries(i))t[s]=e;this.q5(t)}}const a=this.gKt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(e);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${e}' for component '${s}'`));let u=null;try{u=l(i)}catch(t){return console.error(`Exception in '${s}' handler '${e}':`,t),void(null!==o&&this.HKt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.HKt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${e}':`,t),this.HKt(o,!1,""+t)}):this.HKt(o,!0,u))}HKt(t,s,e){this.gXt.postMessage({type:"result",responseId:t,isOk:s,result:e})}jKt(t){const s=t.responseId,e=t.isOk,i=t.result,n=this.yKt.get(s);e?n.resolve(i):n.reject(i),this.yKt.delete(s)}iZ(t,s,e){let i=this.gKt.get(t);if(i||(i=new Map,this.gKt.set(t,i)),i.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);i.set(s,e)}Vc(t,s,e,i){this.gXt.postMessage({type:"event",component:t,handler:s,data:e,responseId:null},i)}KJ(t,s,e,i){const n=this.SKt++,r=new Promise((t,s)=>{this.yKt.set(n,{resolve:t,reject:s})});return this.gXt.postMessage({type:"event",component:t,handler:s,data:e,responseId:n},i),r}u3(t,s,e,i=-1){this.Vc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:e,asyncId:i})}JKt(t){this.Vc("runtime","send-raw-wrapper-extension-message",t)}c3(t,s,e){const i=this.SKt++,n=new Promise((t,s)=>{this.yKt.set(i,{resolve:t,reject:s})});return this.u3(t,s,e,i),n}EKt(t){if(-1!==t.asyncId){const s=t.asyncId;this.yKt.get(s).resolve(t.params),this.yKt.delete(s)}else this.zKt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}xZ(t,s,e){this.iZ("wrapper-extension:"+t,s,e)}wZ(t){return this.YXt.wZ(t)}$Kt(t){if(!this.aZ())throw new Error("not in debug mode");this.Vc("runtime","post-to-debugger",t)}async UUt(t){nx.pFt(this),this.aZ()?await rx.UUt(this):self.lZ&&self.lZ.qKt(this);const s=await this.c6.eo("data.json");if(await this.XKt(s),await this.YKt(t),this.fXt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.Rqt()){const t=this.Rqt();console.info(`[C3 runtime] Hosted in ${this.Qj()?"worker":"DOM"}, rendering with WebGL ${t.VT()} [${t.qO()}]`)}else this.Pqt()&&console.info(`[C3 runtime] Hosted in ${this.Qj()?"worker":"DOM"}, rendering with WebGPU [${this.Pqt().qB()}]`);this.Ob().ib()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.xKt=!0;for(const t of this.bKt)this.zKt(t);nx.wh(this.bKt),this.xYt&&this.xYt.iXt();for(const s of t.runOnStartupFunctions)this.FXt.push(this.KKt(s));if(await Promise.all([this.c6.j5(!1),...this.FXt]),nx.wh(this.FXt),!this.c6.J5())return this.xYt&&await this.xYt.hXt(),await this.UNt._f(new nx.Event("beforeruntimestart")),await this.wO(),this.gXt.postMessage({type:"runtime-ready"}),this;this.xYt&&this.xYt.eXt()}async KKt(t){try{await t(this.kKt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async XKt(t){const s=t.project;this.DXt=s[0],this.kXt=s[16],this.LXt=s[31],this.NXt=s[38],this.BXt=s[36];const e=s[39]||"loading-logo.png";this.TYt=!!s[9],this.UXt=this.fD=s[10],this.VXt=this.dD=s[11],this.KXt.KHt(this.UXt,this.VXt),this.WXt=this.UXt/2,this.zXt=this.VXt/2,this.MYt=s[37],this.bYt=!!s[40],this.AT=s[14],this.JXt=s[15],this.$Xt=s[42],this.qXt=s[17],this.HXt=!!s[18],this.jXt=s[19],this.mYt=s[21],this._Yt=s[22],this.LKt=s[51];const i=this.c6;i.s6(s[7],s[25]),i._5(s[8]),i.I5(s[32]),i.R5(s[28]),i.K5(s[29]),i.E5(s[45]),0===this.jXt&&e&&(this.XXt=i.D5({url:e})),this.xYt&&(this.xYt.wqt(nx.yJt.Tqt(s[12])),this.xYt.bqt(s[23]?"high":"low"),this.xYt.tb(0!==s[24]),this.xYt.C$t(s[34]),this.xYt._qt(s[41]),this.xYt.R$t(s[13]),this.xYt.P$t(s[30]),this.xYt.A$t(s[46],s[47]),this.xYt.F$t(s[26]),this.xYt.O$t(s[48]),this.xYt.D$t(s[50]));const n=s[43];n&&await this.ZKt(n),this.QKt(),this.YXt.GLt(),this.wYt=self.tZt();const r=s[2];for(const t of r[1])this.YXt._Lt(t);for(const t of r[0])this.YXt.TLt(t);this.wYt=self.tZt(),this.sZt(),this.YXt.FLt();for(const t of s[3]){const s=nx.RSt.e_(this,this.iYt.length,t);this.iYt.push(s),this.nYt.set(s.Rc().toLowerCase(),s),this.rYt.set(s.H7(),s)}for(const t of s[4])this.iYt[t[0]].TBt(t);for(const t of s[27]){const s=t.map(t=>this.iYt[t]);this.oYt.push(nx.jn(nx.TUt,this,s))}this.eZt();for(const t of this.iYt)t._Bt();for(const t of s[5])this.gst.e_(t);const h=s[1];if(h){const t=this.gst.Dit(h);t&&this.gst.Ait(t)}for(const t of s[35])this.ZXt.e_(t);for(const t of s[33])this.rot.e_(t);for(const t of s[44])this.QXt.e_(t);this.QXt.ISt()||(this.QXt.Hn(),this.QXt=null);for(const t of s[49])this.NSt.e_(t);this.NSt.kSt()||(this.NSt.Hn(),this.NSt=null);for(const t of s[6])this.ibt.e_(t);this.ibt.EMt(),this.iZt(),nx.wh(this.wYt),this.xX();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Vc("runtime","set-target-orientation",{targetOrientation:o})}async ZKt(t){const s=t.format;"image-sequence"===s?this.CYt=new self.nZt(this,t):"image-sequence-gif"===s?this.CYt=new self.rZt(this,t):"webm"===s?this.CYt=new self.hZt(this,t):"mp4"===s&&(this.CYt=new self.oZt(this,t)),this.MYt="unlimited-frame",this.xYt.wqt("off"),this.nz=1,self.devicePixelRatio=1,await this.KJ("runtime","set-exporting-to-video",{message:this.CYt.aZt(0),duration:this.CYt.$0()})}rXt(){return this.jXt}sqt(){return null!==this.CYt}lZt(){return this.CYt.$0()}uZt(){return this.CYt.cZt()}fZt(){return this.CYt.UUt({width:this.xYt.pq(),height:this.xYt.gq()})}dZt(){const t=this.OYt/this.uZt();return this.CYt.pZt(this.xYt.yqt(),t)}mZt(){this.CYt&&this.CYt.Jut()}AKt(t){this.CYt.gZt(t)}yZt(){return this.CYt.Yx()}dXt(){return this.IXt}OS(){return this.RS}s$(t){this.FXt.push(t)}Net(t){this.OXt=!!t}SZt(t){this.OXt&&this.AXt.push(t)}jet(){return this.AXt}yBt(){return this.hYt++}CBt(){return this.hYt}Ujt(t){this.aYt.add(t)}Vjt(t){this.aYt.delete(t)}tqt(){return this.aYt}async YKt(t){this.xYt&&(await this.xYt.uo(t),this.xYt.Yqt(this.jXt))}async wO(){this.kYt=!0,this.HYt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.HXt){for(const t of this.iYt)t.N7()||t.LBt()||!t.Cq()||t.PDt();(async()=>{await this.c6.j5(!0),await s,this.RS=!1,this.wZt()})()}else this.RS=!1;this.c6.H5(),this.aZ()&&rx.vZt(ax);for(const t of this.gst.TJ())t.nit();this.sqt()&&await this.fZt();const e=this.gst.Oit();await e.bet(null,this.Ob()),await e.Fet(!0),this.iKt=performance.now(),t(),this.HXt||this.wZt(),(await this.KJ("runtime","before-start-ticking")).isSuspended&&!this.sqt()?(this.WYt++,this.VYt=!0):this.yrt()}wZt(){this.tZ(nx.a$.o$.h$.xZt,null,null),this.Vc("runtime","register-sw")}OCt(t){t=Math.floor(t);const s=this.wYt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}sZt(){for(const t of self.bZt){const s=nx.Bh(Object.keys(t));this.vYt.push(s)}}sTt(t){t=Math.floor(t);const s=this.vYt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}MZt(){return this.vXt}TZt(){return this.wXt}Qj(){return this.xXt}tXt(){return this.yXt}GZt(){return this.SXt}fH(){return this.ibt}GH(){return this.ibt.GH()}HMt(){return this.ibt.HMt()}SH(){return this.ibt.SH()}JMt(){return this.ibt.JMt()}fFt(){return 0===this.HMt().bbt()}qMt(){return this.ibt.qMt()}Rjt(){return this.YXt}Y5(){return this.YXt.Y5()}m7(t){if((t=Math.floor(t))<0||t>=this.iYt.length)throw new RangeError("invalid index");return this.iYt[t]}_Zt(t){return this.nYt.get(t.toLowerCase())||null}x3(t){return this.rYt.get(t)||null}Tdt(t){const s=nx.bq.zq(t);return s?s.$q():null}L7(){return this.iYt}*IZt(){for(const t of this.iYt)t.N7()||(yield*t.tX())}Sf(){return this.UNt}aH(){return this.l7}q5(t){t.runtime=this.Mq();const s=this.aZ()&&!this.ibt.wX();s&&rx.Cit(),this.l7.dispatchEvent(t),s&&rx.Rit()}Ket(t){return t.runtime=this.Mq(),this.l7._f(t)}sH(){return this.UXt}iH(){return this.VXt}CZt(t,s){if(this.UXt===t&&this.VXt===s)return;this.UXt=t,this.VXt=s;const e=this.xJ();e.zit(),e.jit()}p9(){return this.fD}m9(){return this.dD}mqt(t,s){if(this.fD===t&&this.dD===s)return;this.fD=t,this.dD=s;const e=this.xJ();e.zit(),e.jit()}eqt(t){this.sqt()||(this.nz=t)}yq(){return this.nz}ftt(){return this.WXt}dtt(){return this.zXt}AJ(){return this.xYt}wtt(){return this.xYt?this.xYt.wtt():this.fD}vtt(){return this.xYt?this.xYt.vtt():this.dD}mK(){return this.xYt?this.xYt.mK():1}L2(){return this.xYt?this.xYt.L2():1}Qtt(){return this.xYt?this.xYt.Qtt():1}Ktt(){return this.xYt?this.xYt.Ktt():1}rq(){return this.xYt?this.xYt.rq():0}oq(){return this.xYt?this.xYt.oq():0}RZt(){return this.xYt?this.xYt.lq():0}PZt(){return this.xYt?this.xYt.cq():0}O2(){return this.xYt?this.xYt.O2():"off"}Ptt(t){return this.xYt?this.xYt.Ptt(t):null}Q8(t){this.xYt&&this.xYt.Q8(t)}Ctt(){return this.JXt}$$t(){return this.$Xt}q$t(){return this.qXt}tJ(){return this.xYt?this.xYt.tJ():NaN}NG(){return"nearest"!==this.OV()}eJ(){return this.MYt}iJ(t){this.MYt!==t&&(this.MYt=t,-1===this.p$t&&-1===this.EYt||(this.EZt(),this.FZt()))}OV(){return this.AT}xBt(){return this.HXt}Kqt(){return this.XXt}oXt(){this.XXt&&(this.XXt.TP(),this.XXt.Hn(),this.XXt=null)}xJ(){return this.gst}SJ(){return this.gst.SJ()}Hot(){return this.rot}AZt(){return this.ZXt}gVt(){return this.QXt}rwt(){return this.NSt}Dj(){return this.c6}D5(t){return this.c6.D5(t)}mX(t,s,e,i,n,r){if(r&&this.QXt){if(t instanceof nx.RSt&&t.N7()){const h=t.RX(),o=Math.floor(this.yJ()*h.length);return this.mX(h[o],s,e,i,n,r)}const h=this.QXt.CSt(t,r);if(h){const t=this.T7(h,s,!1,e,i,!1,n,void 0,n);return this.QXt.PSt(t,r),t}}return this.T7(t,s,!1,e,i,!1,n,void 0,n)}T7(t,s,e,i,n,r,h,o,a){let l=null,u=null;if(t instanceof nx.RSt){if(u=t,u.N7()){const t=u.RX();u=t[Math.floor(this.yJ()*t.length)]}l=u.y7()}else l=t,u=this.m7(l[1]);const c=u.Zq().Cq();if(this.RS&&c&&!u.LBt())return null;const f=s;let d;c||(s=null),d=e&&!r&&l&&!this.gYt.has(l[2])?l[2]:this.mYt++;const p=l?l[0]:null,m=nx.jn(nx.Instance,{runtime:this,objectType:u,CZ:s,BUt:p,zUt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.gYt.set(d,m);let g=null;if(c&&(g=m.WJ(),void 0!==i&&void 0!==n&&(g.pM(i),g.yM(n)),u.uUt(!0)),s&&(a||s.G7(m,!0),s.bJ().Tet(u)),this.pYt++,u.CK()&&!e&&!r){const t=new Set;for(const s of u.vet().PX()){if(s===u)continue;const e=this.OZt(s,g,t);if(e){const t=this.T7(e,f,!1,g?g.dM():i,g?g.gM():n,!0,!1,void 0,a);m.eit(t)}else{const t=this.T7(s,f,!1,g?g.dM():i,g?g.gM():n,!0,!1,void 0,a);m.eit(t)}}for(const t of m.RK()){t.eit(m);for(const s of m.RK())t!==s&&t.eit(s)}}if(c&&!e&&h&&this.DZt(m,p,g,s,i,n,a),u.CK()&&!e&&!r&&h)for(const t of m.RK()){const e=t.WJ();if(!e)continue;const i=t.Zq(),n=t.yK().y7()[0];i.Cq()?this.DZt(t,n,e,s,e.dM(),e.gM(),a):this.DZt(t,n,e,s,void 0,void 0,a)}if(!r&&h){void 0===i&&(i=p[0]),void 0===n&&(n=p[1]);const t=g.dQ(),s=i-g.dM()+t.dM(),e=n-g.gM()+t.gM();t.PZ(s,e)}u.rUt();const y=l?nx.Fh(l[5]):null,S=l?l[4].map(t=>nx.Fh(t)):null,w=c&&p&&p[13];if(w&&m.XUt(),m.DBt(y,S),w){const t=p[13];m.o0().qDt(t[2],t[0],t[1])}this.uYt.push(m),this.fYt=!0,this.aZ()&&rx.kZt(m);const v=this.MKt.instancecreate;return v.S0=m,this.UNt.dispatchEvent(v),m}MWt(t){const s=t[0],e=t[1],i=t[2],n=t[6];return n||this.gst.kit(s).zJ(e).v7(i)}OZt(t,s,e){const i=s?.mVt()??[];for(const s of i){const i=this.MWt(s),n=!!s[4],r=this.m7(i[1]);if(!e.has(i)&&t===r&&n)return e.add(i),i}}DZt(t,s,e,i,n,r,h){const o=e.Hzt(),a=e.mVt();if(t.WJ().Jzt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const e=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.gst.kit(e).zJ(o).v7(a);const y=this.m7(g[1]),S=t.SVt(y),w=l.has(y);if(S&&!w&&d){const s=t.wVt(y);s.WJ().UUt(g[0]);const e=n+g[0][0]-u,i=r+g[0][1]-c;s.WJ().PZ(e,i),s.WJ().Jzt(p),t.xQ(s,{_Q:!!(1&f),CQ:!!(f>>1&1),PQ:!!(f>>2&1),FQ:!!(f>>3&1),OQ:!!(f>>4&1),WQ:!!(f>>5&1),kQ:!!(f>>6&1),NQ:!!(f>>7&1),UQ:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,e=r+g[0][1]-c,o=this.T7(g,i,!1,s,e,!1,!0,t,h);o.WJ().Jzt(p),t.xQ(o,{_Q:!!(1&f),CQ:!!(f>>1&1),PQ:!!(f>>2&1),FQ:!!(f>>3&1),OQ:!!(f>>4&1),WQ:!!(f>>5&1),kQ:!!(f>>6&1),NQ:!!(f>>7&1),UQ:!!(f>>8&1)})}}}MK(t){if(this.yYt.has(t))return;const s=t.yK();let e=this.cYt.get(s);if(e){if(e.has(t))return;e.add(t)}else e=new Set,e.add(t),this.cYt.set(s,e);if(this.aZ()&&rx.LZt(t),t.KUt(),this.fYt=!0,t.CK())for(const s of t.RK())this.MK(s);for(const s of t.children())s.zQ()&&this.MK(s);if(!this.gst.vX()&&!this.lKt){const s=this.fH();s.yX(!0),t.EVt(),s.yX(!1)}t.FVt(this.gst.vX())}xX(){this.fYt&&(this.dYt=!0,this.NZt(),this.BZt(),this.dYt=!1,this.fYt=!1,this.XJ())}NZt(){for(const t of this.uYt){const s=t.yK();s.G7(t);for(const e of s.MX())e.G7(t),e.rUt()}nx.wh(this.uYt)}BZt(){this.UNt.cf(!0);for(const[t,s]of this.cYt.entries())this.UZt(t,s),s.clear();this.cYt.clear(),this.UNt.cf(!1)}UZt(t,s){for(const t of s){const s=this.MKt.instancedestroy;s.S0=t,this.UNt.dispatchEvent(s),this.gYt.delete(t.PK()),this.sKt.delete(t);const e=t.WJ();e&&(e.Yzt(),e.R7(),e.KUt()),this.yYt.add(t),this.pYt--}nx.Rh(t.lX(),s),t.rUt(),this.SYt.add(t);for(const e of t.MX())nx.Rh(e.lX(),s),e.rUt(),this.SYt.add(e);if(t.Zq().Cq()){const t=new Set([...s].map(t=>t.WJ().zJ()));for(const e of t)e.U9(s)}}oUt(){return this.uYt}*yAt(t){for(const s of this.oUt())t.N7()?s.yK().dFt(t)&&(yield s):s.yK()===t&&(yield s)}OBt(){return this.mYt++}kBt(t,s){this.gYt.set(t,s)}g3(t){t=!!t,this.UYt!==t&&(this.UYt=!!t,this.UYt&&this.VYt&&(this.w3(!1),this.VYt=!1))}y3(){return this.UYt}Eet(){this.UNt.dispatchEvent(nx.jn(nx.Event,"renderercontextlost")),this.w3(!0);for(const t of this.iYt)!t.N7()&&t.NBt()&&t.Ret();const t=this.SJ();t&&t.Eet(),nx.DLt.M6(),nx.N5.M6()}async Cqt(){await this.SJ().bet(null,this.Ob()),this.UNt.dispatchEvent(nx.jn(nx.Event,"renderercontextrestored")),this.w3(!1),this.XJ()}PKt(t){if(!this.UYt)return;const s=t.hidden;this.w3(s),this.VYt=s,s||this.XJ()}OKt(t){this.fXt()&&this._Yt&&!nx.Ks.he&&(t.data.parentHasFocus||(this.w3(!0),this.IYt=!0))}DKt(){this.IYt&&(this.w3(!1),this.IYt=!1)}FZt(){const t=this.RYt;"vsync"===this.MYt?-1===this.p$t&&(this.p$t=self.requestAnimationFrame(t.PYt)):"unlimited-tick"===this.MYt?(-1===this.EYt&&(this.EYt=nx.jh(t.FYt)),-1===this.p$t&&(this.p$t=self.requestAnimationFrame(t.AYt))):-1===this.EYt&&(this.EYt=nx.jh(t.PYt))}EZt(){-1!==this.p$t&&(self.cancelAnimationFrame(this.p$t),this.p$t=-1),-1!==this.EYt&&(nx.Hh(this.EYt),this.EYt=-1)}AH(){return this.WYt>0}w3(t){if(this.sqt())return;const s=this.AH();this.WYt+=t?1:-1,this.WYt<0&&(this.WYt=0);const e=this.AH();if(!s&&e)console.log("[Construct] Suspending"),this.EZt(),this.UNt.dispatchEvent(nx.jn(nx.Event,"suspend")),this.q5(nx.jn(nx.Event,"suspend")),this.tZ(nx.a$.o$.h$.VZt,null,null);else if(s&&!e){console.log("[Construct] Resuming");const t=performance.now();this.JYt=t,this.iKt=t,this.eKt=0,this.nKt=0,this.rKt=0,this.hKt=0,this.aKt=0,this.oKt=0,this.UNt.dispatchEvent(nx.jn(nx.Event,"resume")),this.q5(nx.jn(nx.Event,"resume")),this.tZ(nx.a$.o$.h$.WZt,null,null),this.ATt()||this.yrt(t)}}Q2(t){this.GKt.Bu(t)}i3(t){this._Kt.Bu(t)}s3(t){this.IKt.Bu(t)}t3(t){this.GKt.Kf(t)}n3(t){this._Kt.Kf(t)}e3(t){this.IKt.Kf(t)}zZt(t,s){const e=s?performance.now():0;let i;return t instanceof hx?(i=t.uZ(),s&&rx.jZt(t.behavior,performance.now()-e)):(i=t.yrt(),s&&rx.jZt(t.p0(),performance.now()-e)),i}HZt(){const t=this.aZ();this.GKt.Wd(!0);for(const s of this.GKt)this.zZt(s,t);this.GKt.Wd(!1)}JZt(t,s){const e=s?performance.now():0;let i;return t instanceof hx?(i=t.h3(),s&&rx.jZt(t.behavior,performance.now()-e)):(i=t.wLt(),s&&rx.jZt(t.p0(),performance.now()-e)),i}$Zt(){const t=this.aZ();this._Kt.Wd(!0);for(const s of this._Kt)this.JZt(s,t);this._Kt.Wd(!1)}qZt(t,s){const e=s?performance.now():0;let i;return t instanceof hx?(i=t.dZ(),s&&rx.jZt(t.behavior,performance.now()-e)):(i=t.mkt(),s&&rx.jZt(t.p0(),performance.now()-e)),i}XZt(){const t=this.aZ();this.IKt.Wd(!0);for(const s of this.IKt)this.qZt(s,t);this.IKt.Wd(!1)}*YZt(){const t=this.aZ();this.GKt.Wd(!0);for(const s of this.GKt){const e=this.zZt(s,t);nx.xo(e)&&(yield*e)}this.GKt.Wd(!1)}*KZt(){const t=this.aZ();this._Kt.Wd(!0);for(const s of this._Kt){const e=this.JZt(s,t);nx.xo(e)&&(yield*e)}this._Kt.Wd(!1)}*ZZt(){const t=this.aZ();this.IKt.Wd(!0);for(const s of this.IKt){const e=this.qZt(s,t);nx.xo(e)&&(yield*e)}this.IKt.Wd(!1)}async yrt(t,s,e){this.NYt=!0;const i="background-wake"===e,n="background-wake"!==e&&"skip-render"!==e,r=this.xJ(),h=this.AJ();if(!this.kYt||this.AH()&&!s&&!i)return;const o=performance.now();this.LYt=!0,this.QZt(t||0),this.rKt++,this.tQt();const a=this.sQt();this.fAt()&&await a;const l=this.UNt.If(this.MKt.pretick);l instanceof Promise&&await l,this.q5(this.TKt.pretick);const u=this.eQt();this.fAt()&&await u,this.iQt()&&await this.nQt(),r._J()&&await this.rQt();const c=this.hQt();this.fAt()&&await c;const f=r.SJ(),d=f.det();let p=!1;if(-1!==d&&(f.pet(),h.fet()!==d)){const t=this.AJ().ket(d);this.Qj()&&(p=!0,await t)}this.Vc("canvas","update-html-layer-dom-state",{layersDomState:f.j7().filter(t=>t.EY()).map(t=>t.q9())}),n&&this.Iz(),p&&this.Vc("canvas","cleanup-html-layers"),this.sqt()&&(await this.dZt(),this.BH()>=this.lZt())?this.yZt():(this.AH()||i||this.FZt(),this.OYt++,this.DYt++,this.LYt=!1,this.oKt+=performance.now()-o)}async sQt(){const t=this.ibt,s=this.aZ();this.xX(),t.yX(!0),this.xTt(this.SJ()),s&&rx.oQt(),this.fAt()?await t.tGt():t.XTt(),s&&rx.aQt(),this.bTt(),t.yX(!1),this.xX(),t.yX(!0)}async eQt(){const t=this.ibt,s=this.aZ(),e=this.fAt(),i=this.UNt,n=this.MKt,r=this.TKt;s&&rx.oQt(),e?await this.lQt(this.YZt()):this.HZt(),e?await this.lQt(this.KZt()):this.$Zt(),s&&rx.uQt(),s&&rx.oQt(),e?await this.cQt(n.tick):i.dispatchEvent(n.tick),s&&rx.fQt(),t.yX(!1),this.q5(r.tick)}async hQt(){const t=this.ibt,s=this.UNt,e=this.MKt,i=this.TKt,n=this.aZ(),r=this.fAt();n&&rx.oQt(),r?await t.MTt(this.gst):t.vTt(this.gst),n&&rx.aQt(),this.KXt.vHt(),this.tQt(),this.BYt=!1,t.yX(!0),n&&rx.oQt(),r?await this.lQt(this.ZZt()):this.XZt(),n&&rx.uQt(),n&&rx.oQt(),r?await this.cQt(e.tick2):s.dispatchEvent(e.tick2),n&&rx.fQt(),t.yX(!1),this.q5(i.tick2),r&&await t.OTt(),this.xX(),this.tQt()}tQt(){if(0===this.yYt.size)return;const t=this.UNt;t.cf(!0);for(const t of this.SYt)t.zTt().Axt(this.yYt);this.SYt.clear(),this.ibt.eGt(this.yYt);for(const t of this.yYt)t.Hn();this.yYt.clear(),t.cf(!1)}async rQt(){const t=this.xJ();let s=0;for(;t._J()&&s++<10;)await this.dQt(t.Wit())}QZt(t){let s=0;this.sqt()?(s=1/this.uZt(),this.$Yt=s,this.qYt=s):0!==this.JYt&&(s=Math.max(t-this.JYt,0)/1e3,s>.5&&(s=0),this.$Yt=s,this.qYt=nx.Yn(s,this.KYt,this.YYt)),this.JYt=t,this.XYt=this.qYt*this.LUt,this.ZYt.Bu(this.XYt),this.QYt.Bu(s*this.LUt),this.tKt.Bu(this.qYt);for(const[t,s]of this.sKt)s.Bu(this.qYt*t.HH());this.xYt&&this.xYt.Uqt(),t-this.iKt>=1e3&&(this.iKt+=1e3,t-this.iKt>=1e3&&(this.iKt=t),this.nKt=this.eKt,this.eKt=0,this.hKt=this.rKt,this.rKt=0,this.aKt=Math.min(this.oKt/1e3,1),this.oKt=0,this.xYt&&this.xYt.Bqt(),this.KXt.gHt(),this.aZ()&&rx.pQt())}$Ut(t,s){if(s){if(!this.sKt.has(t)){const s=nx.jn(nx.Qf);s.rd(this.ZYt),this.sKt.set(t,s)}}else this.sKt.delete(t)}qUt(t){const s=this.sKt.get(t);return s?s.Hs():this.BH()}async dQt(t){const s=this.UNt,e=this.xJ().SJ();await e.hit(),e.Pet(t,this.Ob()),e===t&&this.ibt.lit(),this.KXt.vHt(),this.tQt(),s.dispatchEvent(this.MKt.beforelayoutchange),nx.df.Pf(!0),await t.bet(e,this.Ob()),nx.df.Pf(!1),await t.Fet(!1),s.dispatchEvent(this.MKt.layoutchange),this.XJ(),this.BYt=!0,this.xX(),this.mZt()}XJ(){this.GYt=!0}Rqt(){return this.xYt?this.xYt.Rqt():null}Pqt(){return this.xYt?this.xYt.Pqt():null}Ob(){return this.xYt?this.xYt.Ob():null}Iz(){const t=this.xYt;if(!t||t.Iqt())return;const s=this.Ob(),e=s.VO(),i=e&&s.nb(),n=e&&s.dv();if(i&&s.IO(),!this.GYt&&!this.sqt())return void s.Qx();const r=this.gst.SJ();this.eKt++,s.wO();const h=this.aZ();h&&rx.oQt(),this.GYt=!1;let o=null;i&&(o=t.jqt().aF(),s.UO(o));let a=null;n&&(a=s.GN(2*(1+r.het())),s.IN(0,1)),this.T9()&&"low"===t.Rtt()?s.RA(t.wtt(),t.vtt()):s.PA(),this.mQt(this.Ob(),r),o&&s.WO(o),n&&(s.RN(),this.xYt.Hqt(a)),s.Yx(),h&&(rx.gQt(),rx.yQt()),t&&t.Jqt()}wit(t){return"low"===this.AJ().Rtt()||t.nb()&&(this.Ctt()||this.T9())}mQt(t,s){t.xv(),t.$A(),t.Hx(),t.BA(1,1,1,1),t.EO(null),t.zA(null),t.xO(this.T9()),this.Sf().dispatchEvent(this.MKt.beforerender),this.wit(t)&&s.yit(t);const e=s.fet();for(let i=1;i<e;++i)s.Mit(t,i),t.dv()&&t.wN();this.wit(t)||s.yit(t),s.bit(t),this.Sf().dispatchEvent(this.MKt.afterrender)}tZ(t,s,e){if(!this.kYt)return!1;const i=!this.LYt&&!this.ibt.NTt();let n=0;i&&(n=performance.now());const r=this.aZ();r&&this.I3(!1);const h=this.ibt.ITt(this.gst,t,s,e);if(i){const t=performance.now()-n;this.oKt+=t,r&&rx.SQt(t)}return r&&this.I3(!0),h}ikt(t,s,e){if(!this.fAt())return this.tZ(t,s,e);if(this.ATt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.LYt&&!this.ibt.NTt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.ibt.PTt(this.gst,t,s,e)}async n$(t,s,e){if(!this.fAt())return this.tZ(t,s,e);if(!this.kYt)return!1;if(this.ATt())return this.ibt.ETt(t,s,e);if(!this.SJ())return this.ibt.CTt(t,s,e);const i=performance.now(),n=this.ibt.PTt(this.gst,t,s,e);let r=n.next();for(;!r.done;)await this.GTt(r.value),r=n.next();return this.AH()||this.ibt.NTt()||(await this.ibt.OTt(),this.NYt&&!this.LYt&&this.FZt()),this.oKt+=performance.now()-i,r.value}nkt(t,s,e){const i=this.aZ();i&&this.I3(!1);const n=this.ibt.DTt(this.gst,t,s,e);return i&&this.I3(!0),n}rkt(t,s,e){return this.ibt.kTt(this.gst,t,s,e)}hkt(t){return this.zYt.Bu(t)}xTt(t){this.lYt.push(t)}bTt(){if(!this.lYt.length)throw new Error("layout stack empty");this.lYt.pop()}UJ(){return this.lYt.length?this.lYt.at(-1):this.SJ()}DH(t){return t&&-1!==t.HH()?this.qYt*t.HH():this.XYt}mrt(){return this.XYt}grt(){return this.qYt}LH(){return this.$Yt}HH(){return this.LUt}JH(t){(isNaN(t)||t<0)&&(t=0),this.LUt=t}hJ(t){this.KYt=Math.max(t,0)}rJ(){return this.KYt}lJ(t){this.YYt=Math.max(t,0)}aJ(){return this.YYt}qH(){return this.nKt}YH(){return this.hKt}ZH(){return this.aKt}wQt(){return this.HYt}BH(){return this.ZYt.Hs()}vQt(){return this.QYt.Hs()}zH(){return this.tKt.Hs()}VH(){return this.OYt}xQt(){return this.DYt}bQt(){return this.pYt}Wj(){return this.DXt}jj(){return this.kXt}qj(){return this.LXt}Jj(){return this.NXt}Yj(){return this.BXt}LJ(t){if(this.lKt)throw new Error("cannot call while loading state - wait until afterload event");return this.gYt.get(t)||null}SWt(t){if(this.lKt)throw new Error("cannot call while loading state - wait until afterload event");this.gYt.delete(t)}sit(){this.gYt.clear();for(const t of this.iYt)if(!t.N7())for(const s of t.lX())this.gYt.set(s.PK(),s)}fXt(){return"preview"===this.MXt}aZ(){return this.CXt}Q$(){return this.MXt}pXt(){return"cordova"===this.MXt}MQt(){return"Android"===nx.Ks.Zs&&("cordova"===this.MXt||"playable-ad-single-file"===this.MXt||"playable-ad-zip"===this.MXt||"instant-games"===this.MXt)}TQt(){return this.Q4}GQt(){return this.TXt}tq(){return this.GXt}_Qt(){return this._Xt}Nj(){return this.KXt}ALt(){return this.YXt.ALt()}OLt(){return this.YXt.OLt()}T9(){return this.bYt}IQt(){return this.Ob().sv(this.m9())}Zw(t){return this.Ob().Zw(t||this.m9())}CQt(){return this.BYt}cJ(t){t=!!t,this.TYt!==t&&(this.TYt=t,this.xJ().jit(),this.XJ())}fJ(){return this.TYt}RQt(t){if(!this.eYt.has(t)){const s=()=>this.PQt(t);this.eYt.set(t,s),t.Sf().addEventListener("animationframeimagechange",s)}const s=this.TS.SS(t);return s.AS()||s.DS().then(()=>this.XJ()),s}PQt(t){this.TS.bS(t)}tYt(t){const s=[];for(const e of t.XBt())for(const t of e.U0()){const e=t.J0();s.push({source:t,width:e.by(),height:e.Ty(),tag:t.o1()})}return{ES:s}}async sYt(t){const s=nx.jn(nx.jd),e=[],i=new Map;for(const n of t.XBt())for(const t of n.U0()){const n=t.J0().sNt();i.has(n)||(i.set(n,null),e.push(s.Bu(async()=>{const t=await n.I6();i.set(n,t)})))}await Promise.all(e);const n=[];for(const e of t.XBt())for(const t of e.U0())n.push(s.Bu(async()=>{const s=t.J0(),e=i.get(s.sNt()),n=await s.eNt(e);return{LS:await createImageBitmap(n)}}));const r=await Promise.all(n);for(const t of i.values())t instanceof ImageBitmap&&t.close&&t.close();return{ES:r}}EQt(t){this.uKt=t,this.cKt=!1}FQt(){this.uKt="",this.cKt=!0}AQt(t){this.fKt=t}rOt(t){this.yZ=t}OQt(){return this.dKt}iQt(){return!!(this.uKt||this.cKt||this.fKt||null!==this.yZ)}async nQt(){if(this.uKt&&(this.xX(),await this.DQt(this.uKt),this.kQt()),this.fKt&&(await this.LQt(this.fKt),this.kQt(),this.aZ()&&rx.NQt()),this.cKt){const t=await this.BQt();this.dKt=t,await this.n$(nx.a$.o$.h$.UQt,null),this.dKt="",this.kQt()}if(null!==this.yZ){this.xX();try{await this.VQt(this.yZ),this.dKt=this.yZ,await this.n$(nx.a$.o$.h$.WQt,null),this.dKt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.n$(nx.a$.o$.h$.zQt,null)}this.kQt()}}kQt(){this.uKt="",this.cKt=!1,this.fKt="",this.yZ=null}wq(){return this.pKt||(this.pKt=localforage.Me({name:"c3-localstorage-"+this.qj(),description:this.Wj()})),this.pKt}jQt(){return this.mKt||(this.mKt=localforage.Me({name:"c3-savegames-"+this.qj(),description:this.Wj()})),this.mKt}async DQt(t){const s=await this.BQt();try{await this.jQt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.dKt=s,await this.n$(nx.a$.o$.h$.UQt,null),this.dKt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.n$(nx.a$.o$.h$.HQt,null)}}async LQt(t){try{const s=await this.jQt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.VQt(s),this.dKt=s,await this.n$(nx.a$.o$.h$.WQt,null),this.dKt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.n$(nx.a$.o$.h$.zQt,null)}}async BQt(){const t={c3save:!0,version:1,rt:{time:this.BH(),timeRaw:this.vQt(),walltime:this.zH(),timescale:this.HH(),tickcount:this.VH(),next_uid:this.mYt,running_layout:this.SJ().H7(),start_time_offset:Date.now()-this.HYt},types:{},layouts:{},events:this.ibt.ust(),timelines:this.rot.ust(),user_script_data:null};for(const s of this.iYt)s.N7()||s.yUt()||(t.types[s.H7().toString()]=s.ust());for(const s of this.gst.TJ())t.layouts[s.H7().toString()]=s.ust();const s=this.JQt("save");return s.saveData=null,await this.Ket(s),t.user_script_data=s.saveData,JSON.stringify(t)}Het(){return this.lKt}async VQt(t){const s=this.xJ(),e=JSON.parse(t);if(e.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!e.c3save)throw new Error("not valid C3 save data");if(e.version>1)throw new Error("C3 save data from future version");this.hOt(),this.UNt.dispatchEvent(nx.jn(nx.Event,"beforeload"));for(const t of this.IZt())t.yK().yUt()||t.gnt();const i=e.rt;this.ZYt.Set(i.time),i.hasOwnProperty("timeRaw")&&this.QYt.Set(i.timeRaw),this.tKt.Set(i.walltime),this.LUt=i.timescale,this.OYt=i.tickcount,this.HYt=Date.now()-i.start_time_offset;const n=i.running_layout;this.lKt=!0;let r=!1;if(n!==this.SJ().H7()){const t=s.kit(n);if(!t)return;await this.dQt(t),r=!0}for(const[t,i]of Object.entries(e.layouts)){const e=parseInt(t,10),n=s.kit(e);n&&n.cst(i)}const h=new Set;for(const[t,s]of Object.entries(e.types)){const e=parseInt(t,10),i=this.x3(e);!i||i.N7()||i.yUt()||i.cst(s,h)}for(const t of this.gst.TJ())for(const s of t.ZX())s.fst();if(this.xX(),this.sit(),this.lKt=!1,r){for(const t of this.IZt())t.Jet();for(const[t,s]of Object.entries(e.types)){const e=parseInt(t,10),i=this.x3(e);!i||i.N7()||i.yUt()||i.bUt(s)}}this.mYt=i.next_uid,this.ibt.cst(e.events);for(const t of this.iYt)if(!t.N7()&&t.CK())for(const s of t.lX()){const e=s.FK();s.yVt();for(const i of t.vet().PX()){if(i===t)continue;const n=i.lX();if(e<0||e>=n.length)throw new Error("missing sibling instance");s.eit(n[e])}}this.rot.cst(e.timelines),s.zit(),s.jit();for(const t of h)t.PVt();this.oOt(),this.UNt.dispatchEvent(nx.jn(nx.Event,"afterload")),this.q5(this.JQt("afterload"));for(const[t,s]of Object.entries(e.types)){const s=parseInt(t,10),e=this.x3(s);e&&e.xUt()}const o=this.JQt("load");o.saveData=e.user_script_data,await this.Ket(o),this.XJ()}$Qt(t,s){return s.WJ().Uzt()-t.WJ().Uzt()}Cjt(t,s){t.WJ()&&(this.UKt.has(t)||(this.UKt.set(t,s),this.VKt.push(t)))}hOt(){this.UKt=new WeakMap,nx.wh(this.VKt),nx.mit.FWt()}oOt(t="full",s=null){this.VKt.sort(this.$Qt),s||(s={}),s.yWt=new Set;const e=this.VKt.length;for(const e of this.VKt)e.Snt(this.UKt.get(e),t,s);for(const e of this.VKt)e.DVt(this.UKt.get(e),t,s);if(this.hOt(),e){this.xX(),this.sit();for(const t of this.gst.TJ())for(const s of t.ZX())s.F7(),s.qJ()}}async qQt(t){const s=t.map(t=>new URL(t,location.href).toString());this.CKt.XQt(s)}YQt(t,s){this.CKt.KQt(t,s)}ZQt(t,s){this.CKt.QQt(t,s)}t0t(t,s,e,i){return this.CKt.t0t(t,s,e,null,null,i)}s0t(t,s,e,i){return this.CKt.s0t(t,s,e,i)}e0t(){return this.CKt.i0t()}DJ(t,s){this.Vc("runtime","invoke-download",{url:t,filename:s})}async sXt(t,s,e,i,n,r){if(i=i||s,n=n||e,this.Qj())return(await this.KJ("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:e,surfaceWidth:i,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,e,i,n);return r?await self.createImageBitmap(h,r):h}}async n0t(t){return this.Qj()?await this.KJ("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}r0t(){this.wKt||(this.wKt=!0,this.Vc("runtime","enable-device-orientation"))}h0t(){this.vKt||(this.vKt=!0,this.Vc("runtime","enable-device-motion"))}yJ(){return this.jYt()}o0t(t){this.jYt=t}FKt(){const t=this.Ob();return{fps:this.qH(),tps:this.YH(),cpu:this.ZH(),gpu:this.tJ(),layout:this.SJ()?this.SJ().Rc():"",renderer:t.nb()?t.qO():t.qB()}}ATt(){return!!this.aZ()&&rx.ATt()}GTt(t){return this.fAt()?rx.GTt(t):Promise.resolve()}rCt(){return!!this.fAt()&&rx.a0t()}l0t(t){this.RXt=!!t,this.u0t()}c0t(){return this.RXt}fAt(){return this.PXt}I3(t){t?this.EXt--:this.EXt++,this.u0t()}u0t(){this.PXt=this.aZ()&&this.RXt&&0===this.EXt}T_t(){return this.aZ()&&rx.T_t()}Ttt(){return this.aZ()&&this.Ob().VO()&&rx.Ttt()}async lQt(t){if(t)for(const s of t)await this.GTt(s)}cQt(t){return this.lQt(this.UNt.Rf(t))}CMt(t){return this.ibt.CMt(t.name,t.params)}QJ(t){if(this.Qj())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}Mq(){return this.kKt}a3(){return this.LKt}JQt(t){const s=nx.jn(nx.Event,t,!1);return s.runtime=this.kKt,s}QKt(){this.kKt=new self.Fj(this),this.TKt={pretick:this.JQt("pretick"),tick:this.JQt("tick"),tick2:this.JQt("tick2")}}eZt(){const t={};for(const s of this.iYt)t[s.sTt()]={value:s.Jq(),enumerable:!0,writable:!1};this.kKt.lH(t)}iZt(){const t={};for(const s of this.fH().aTt())t[s.sTt()]=s.eTt();this.kKt.uH(t)}CJ(){return this.BKt}Vq(t,s){this.NKt.set(t,s)}sY(t){return this.NKt.get(t)}J$(t){if(!(t instanceof self.Yq))throw new TypeError("expected IObjectClass");const s=this.sY(t);if(!(s&&s instanceof nx.RSt))throw new Error("invalid IObjectClass");return s}hX(t){if(!(t instanceof self.gK))throw new TypeError("expected IInstance");const s=this.sY(t);if(!(s&&s instanceof nx.Instance))throw new Error("invalid IInstance");return s}VJ(t){if(!(t instanceof self.e0))throw new TypeError("expected IWorldInstance");const s=this.sY(t);if(!(s&&s instanceof nx.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=nx.mXt.e_,self.C3_InitRuntime=(t,s)=>t.UUt(s)}{const lx=self._s;lx.RKt=class extends lx.Wn{constructor(t,s){super(),this.Nc=t,this.f0t=new Map,this.d0t=0,this.p0t=s.inputPort,s.outputPort.onmessage=t=>this.m0t(t),this.g0t=s.maxNumWorkers,this.y0t=1,this.S0t=!1,this.w0t=!1}i0t(){return this.g0t}XQt(t){this.p0t.postMessage({type:"_import_scripts",scripts:t})}KQt(t,s){this.p0t.postMessage({type:"_send_blob",blob:t,id:s})}QQt(t,s){this.p0t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}t0t(t,s,e,i,n,r){if(e||(e=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.d0t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:e},a=new Promise((t,s)=>{this.f0t.set(h,{resolve:t,progress:i,reject:s,v0t:!1,x0t:r})});return n&&n.Xf(()=>this.b0t(h)),this.p0t.postMessage(o,e),this.M0t(),a}s0t(t,s,e,i){if(e||(e=[]),"number"==typeof i&&(i=Math.floor(i))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:i,jobId:this.d0t++,params:s,transferables:e};this.p0t.postMessage(n,e)}b0t(t){const s=this.f0t.get(t);s&&(s.v0t=!0,s.resolve=null,s.progress=null,s.reject=null,this.p0t.postMessage({type:"_cancel",jobId:t}))}m0t(t){const s=t.data,e=s.type,i=s.jobId;switch(e){case"result":this.T0t(i,s.result);break;case"progress":this.G0t(i,s.progress);break;case"error":this._0t(i,s.error);break;case"ready":this.I0t();break;default:throw new Error(`unknown message from worker '${e}'`)}}T0t(t,s){const e=this.f0t.get(t);if(!e)throw new Error("invalid job ID");e.v0t||e.resolve(s),this.f0t.delete(t)}G0t(t,s){const e=this.f0t.get(t);if(!e)throw new Error("invalid job ID");!e.v0t&&e.progress&&e.progress(s)}_0t(t,s){const e=this.f0t.get(t);if(!e)throw new Error("invalid job ID");e.v0t||e.reject(s),this.f0t.delete(t)}I0t(){this.S0t&&(this.S0t=!1,this.y0t++,this.y0t<this.g0t?this.M0t():this.p0t.postMessage({type:"_no_more_workers"}))}C0t(){let t=0;const s=[...this.f0t.values()].sort((t,s)=>(t.x0t||1/0)-(s.x0t||1/0));for(const e of s)t<(e.x0t||1/0)&&t++;return t}async M0t(){if(!(this.y0t>=this.g0t||this.S0t||this.w0t||this.C0t()<=this.y0t))try{this.S0t=!0,(await this.Nc.KJ("runtime","create-job-worker")).outputPort.onmessage=t=>this.m0t(t)}catch(t){this.w0t=!0,this.S0t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.y0t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.gamma={Q$t:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump float gamma;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\ngl_FragColor = vec4(pow(front.rgb, vec3(gamma)), front.a);\n}",Z$t:"",Y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\ngamma : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(pow(front.rgb, vec3<f32>(shaderParams.gamma)), front.a);\nreturn output;\n}",Rb:!1,Eb:!1,mb:0,yb:0,wb:!1,bb:!1,Tb:!0,_b:!1,animated:!1,parameters:[["gamma",0,"float"]]},self.C3_Shaders.tint={Q$t:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 tintColor;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\ngl_FragColor = front * vec4(tintColor.r, tintColor.g, tintColor.b, 1.0);\n}",Z$t:"",Y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\ntintColor : vec3<f32>\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput {\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar output : FragmentOutput;\noutput.color = front * vec4<f32>(shaderParams.tintColor, 1.0);\nreturn output;\n}",Rb:!1,Eb:!1,mb:0,yb:0,wb:!1,bb:!1,Tb:!0,_b:!1,animated:!1,parameters:[["tintColor",0,"color"]]},self.C3_Shaders.lumblend={Q$t:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nprecision mediump float;\nvec3 rgb_to_hsl(vec3 color)\n{\nvec3 hsl = vec3(0.0, 0.0, 0.0);\nfloat fmin = min(min(color.r, color.g), color.b);\nfloat fmax = max(max(color.r, color.g), color.b);\nfloat delta = fmax - fmin;\nhsl.z = (fmax + fmin) / 2.0;\nif (delta == 0.0)\n{\nhsl.x = 0.0;\nhsl.y = 0.0;\n}\nelse\n{\nif (hsl.z < 0.5)\nhsl.y = delta / (fmax + fmin);\nelse\nhsl.y = delta / (2.0 - fmax - fmin);\nfloat dR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\nfloat dG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\nfloat dB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\nif (color.r == fmax)\nhsl.x = dB - dG;\nelse if (color.g == fmax)\nhsl.x = (1.0 / 3.0) + dR - dB;\nelse if (color.b == fmax)\nhsl.x = (2.0 / 3.0) + dG - dR;\nif (hsl.x < 0.0)\nhsl.x += 1.0;\nelse if (hsl.x > 1.0)\nhsl.x -= 1.0;\n}\nreturn hsl;\n}\nfloat hue_to_rgb(float f1, float f2, float hue)\n{\nif (hue < 0.0)\nhue += 1.0;\nelse if (hue > 1.0)\nhue -= 1.0;\nfloat ret;\nif ((6.0 * hue) < 1.0)\nret = f1 + (f2 - f1) * 6.0 * hue;\nelse if ((2.0 * hue) < 1.0)\nret = f2;\nelse if ((3.0 * hue) < 2.0)\nret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\nelse\nret = f1;\nreturn ret;\n}\nvec3 hsl_to_rgb(vec3 hsl)\n{\nvec3 rgb = vec3(hsl.z);\nif (hsl.y != 0.0)\n{\nfloat f2;\nif (hsl.z < 0.5)\nf2 = hsl.z * (1.0 + hsl.y);\nelse\nf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\nfloat f1 = 2.0 * hsl.z - f2;\nrgb.r = hue_to_rgb(f1, f2, hsl.x + (1.0 / 3.0));\nrgb.g = hue_to_rgb(f1, f2, hsl.x);\nrgb.b = hue_to_rgb(f1, f2, hsl.x - (1.0 / 3.0));\n}\nreturn rgb;\n}\nvoid main(void)\n{\nvec4 front = texture2D(samplerFront, vTex);\nvec3 fronthsl = rgb_to_hsl(front.rgb / front.a);\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nvec4 back = texture2D(samplerBack, mix(destStart, destEnd, tex));\nvec3 backhsl = rgb_to_hsl(back.rgb / back.a);\nfronthsl = hsl_to_rgb(vec3(backhsl.x, backhsl.y, fronthsl.z));\nfronthsl *= front.a;\ngl_FragColor = vec4(fronthsl.r, fronthsl.g, fronthsl.b, front.a) * back.a;\n}",Z$t:"",Y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERBACK_BINDING%% var samplerBack : sampler;\n%%TEXTUREBACK_BINDING%% var textureBack : texture_2d<f32>;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar fronthsl : vec3<f32> = c3_RGBtoHSL(front.rgb);\nvar back : vec4<f32> = c3_unpremultiply(textureSample(textureBack, samplerBack, c3_getBackUV(input.fragPos.xy, textureBack)));\nvar backhsl : vec3<f32> = c3_RGBtoHSL(back.rgb);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(\nc3_HSLtoRGB(vec3<f32>(backhsl.x, backhsl.y, fronthsl.z)) * front.a,\nfront.a\n) * back.a;\nreturn output;\n}",Rb:!0,Eb:!1,mb:0,yb:0,wb:!1,bb:!1,Tb:!1,_b:!1,animated:!1,parameters:[]},self.C3_Shaders.emboss={Q$t:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float intensity;\nuniform mediump vec2 pixelSize;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp vec3 color = vec3(0.5);\ncolor -= texture2D(samplerFront, vTex - pixelSize).rgb * 2.0;\ncolor += texture2D(samplerFront, vTex + pixelSize).rgb * 2.0;\ncolor = vec3(color.r * 0.299 + color.g * 0.587 + color.b * 0.114);\ngl_FragColor = mix(front, vec4(color * front.a, front.a), intensity);\n}",Z$t:"",Y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar pixelSize : vec2<f32> = c3_getPixelSize(textureFront);\nvar color : vec3<f32> = vec3<f32>(0.5)\n- textureSample(textureFront, samplerFront, input.fragUV - pixelSize).rgb * 2.0\n+ textureSample(textureFront, samplerFront, input.fragUV + pixelSize).rgb * 2.0;\ncolor = vec3<f32>(c3_grayscale(color));\nvar output : FragmentOutput;\noutput.color = mix(front, vec4<f32>(color * front.a, front.a), shaderParams.intensity);\nreturn output;\n}",Rb:!1,Eb:!1,mb:0,yb:0,wb:!1,bb:!1,Tb:!1,_b:!1,animated:!1,parameters:[["intensity",0,"percent"]]},self.C3_Shaders.glowhorizontal={Q$t:"varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelWidth = pixelSize.x;\nmediump float halfPixelWidth = pixelWidth / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\ngl_FragColor = mix(front, max(front, sum), intensity);\n}",Z$t:"",Y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelWidth : f32 = c3_getPixelSize(textureFront).x;\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar sum : vec4<f32> =\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 7.5, 0.0)) * 0.06 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 5.5, 0.0)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 3.5, 0.0)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 1.5, 0.0)) * 0.16 +\nfront * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 1.5, 0.0)) * 0.16 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 3.5, 0.0)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 5.5, 0.0)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 7.5, 0.0)) * 0.06;\nvar output : FragmentOutput;\noutput.color = mix(front, max(front, sum), shaderParams.intensity);\nreturn output;\n}",Rb:!1,Eb:!1,mb:8,yb:0,wb:!1,bb:!1,Tb:!1,_b:!1,animated:!1,parameters:[["intensity",0,"percent"]]},self.C3_Shaders.radialblur={Q$t:"precision mediump float;\nvarying vec2 vTex;\nuniform sampler2D samplerFront;\nuniform vec2 srcStart;\nuniform vec2 srcEnd;\nuniform float devicePixelRatio;\nuniform float layerScale;\nuniform float intensity;\nuniform float radius;\nvoid main(void)\n{\nvec2 dir = ((srcStart + srcEnd) / 2.0 - vTex) / (length(srcEnd - srcStart) / 2.0);\nfloat dist = sqrt(dir.x*dir.x + dir.y*dir.y);\ndir = dir/dist;\nvec4 front = texture2D(samplerFront, vTex);\nvec4 sum = front;\nfloat scaledRadius = radius * devicePixelRatio * layerScale;\nsum += texture2D(samplerFront, vTex + dir * -0.08 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * -0.05 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * -0.03 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * -0.02 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * -0.01 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * 0.01 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * 0.02 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * 0.03 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * 0.05 * scaledRadius);\nsum += texture2D(samplerFront, vTex + dir * 0.08 * scaledRadius);\nsum /= 11.0;\nfloat t = dist * 2.2;\nt = clamp(t, 0.0, 1.0);\ngl_FragColor = mix(front, mix(front, sum, t), intensity);\n}",Z$t:"",Y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nradius : f32,\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar dir : vec2<f32> = ((c3Params.srcStart + c3Params.srcEnd) / 2.0 - input.fragUV) / (length(c3Params.srcEnd - c3Params.srcStart) / 2.0);\nvar dist : f32 = length(dir);\ndir = dir / dist;\nvar scaledRadius = shaderParams.radius * c3Params.devicePixelRatio * c3Params.layerScale;\nvar sum : vec4<f32> =\nfront +\ntextureSample(textureFront, samplerFront, input.fragUV + dir * -0.08 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir * -0.05 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir * -0.03 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir * -0.02 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir * -0.01 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir *  0.01 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir *  0.02 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir *  0.03 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir *  0.05 * scaledRadius) +\ntextureSample(textureFront, samplerFront, input.fragUV + dir *  0.08 * scaledRadius);\nsum = sum / 11.0;\nvar t : f32 = clamp(dist * 2.2, 0.0, 1.0);\nvar output : FragmentOutput;\noutput.color = mix(front, mix(front, sum, t), shaderParams.intensity);\nreturn output;\n}",Rb:!1,Eb:!1,mb:50,yb:50,wb:!1,bb:!1,Tb:!1,_b:!1,animated:!1,parameters:[["radius",0,"percent"],["intensity",0,"percent"]]},self.C3_Shaders.glowvertical={Q$t:"varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelHeight = pixelSize.y;\nmediump float halfPixelHeight = pixelHeight / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\ngl_FragColor = mix(front, max(front, sum), intensity);\n}",Z$t:"",Y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelHeight : f32 = c3_getPixelSize(textureFront).y;\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar sum : vec4<f32> =\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 7.5)) * 0.06 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 5.5)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 3.5)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 1.5)) * 0.16 +\nfront * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 1.5)) * 0.16 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 3.5)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 5.5)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 7.5)) * 0.06;\nvar output : FragmentOutput;\noutput.color = mix(front, max(front, sum), shaderParams.intensity);\nreturn output;\n}",Rb:!1,Eb:!1,mb:0,yb:8,wb:!1,bb:!1,Tb:!1,_b:!1,animated:!1,parameters:[["intensity",0,"percent"]]};{let ux=function(t,s){const e=t[1],i=s[1];if("number"==typeof e&&"number"==typeof i)return e-i;{const t=""+e,s=""+i;return t<s?-1:t>s?1:0}};0;const cx=self._s;let fx=null,dx="",px="",mx=[],gx="",yx="",Sx="";const wx=cx.jn(cx.Qbt);cx.a$.o$=class extends cx.rDt{constructor(t){super(t),this.qbt=this.Nc.fH().G3(),this.Oxt=this.Nc.fH().GH(),this.R0t=0,this.P0t=0,this.E0t=new Map}Hn(){super.Hn()}XJ(){this.Nc.XJ()}tZ(t){this.Nc.tZ(t,null,null)}F0t(t,s){return fx&&t===dx&&s===px||(fx=new RegExp(t,s),dx=t,px=s),fx.lastIndex=0,fx}A0t(t,s,e){if(t===gx&&s===yx&&e===Sx)return mx;const i=this.F0t(s,e);return mx=t.match(i),gx=t,yx=s,Sx=e,mx}async O0t(t,s){if(!s.length)return;this.R0t+=s.length;const e=[];for(const i of s)e.push(t.Tet(i));await cx.Vh(e,()=>{this.P0t++}),this.P0t++,this.P0t===this.R0t&&(this.P0t=0,this.R0t=0,this.Nc.tZ(cx.a$.o$.h$.D0t,null,null))}X5(){return 0===this.R0t?1:this.P0t/this.R0t}k0t(t,s){for(const e of s)0===e.dX()&&t.Cet(e)}L0t(){return wx}N0t(t){const s=this.Nc.fH(),e=s.GH(),i=e.M3(),n=i.SH(),r=n.b3(),h=i.Obt(),o=e.T3(n),a=s.G3(),l=a.T3();if(l.Kbt(t),h)for(let e=0;e<t&&!l.O3();++e)s.R3(r),l.F3(e),n.P3(i,o),s.E3(r);else for(let s=0;s<t&&!l.O3();++s)l.F3(s),n.P3(i,o);return e.D3(),a.D3(),!1}*B0t(t){const s=this.Nc.fH(),e=s.GH(),i=e.M3(),n=i.SH(),r=n.b3(),h=i.Obt(),o=e.T3(n),a=s.G3(),l=a.T3();if(l.Kbt(t),h)for(let e=0;e<t&&!l.O3();++e)s.R3(r),l.F3(e),yield*n.gCt(i,o),s.E3(r);else for(let s=0;s<t&&!l.O3();++s)l.F3(s),yield*n.gCt(i,o);return e.D3(),a.D3(),!1}U0t(){const t=this.Nc.fH(),s=t.GH(),e=s.M3(),i=e.SH(),n=i.b3(),r=e.Obt(),h=s.T3(i),o=t.G3(),a=o.T3();if(r)for(let s=0;!a.O3();++s)t.R3(n),a.F3(s),i.P3(e,h)||a.u1(),t.E3(n);else for(let t=0;!a.O3();++t)a.F3(t),i.P3(e,h)||a.u1();return s.D3(),o.D3(),!1}*V0t(){const t=this.Nc.fH(),s=t.GH(),e=s.M3(),i=e.SH(),n=i.b3(),r=e.Obt(),h=s.T3(i),o=t.G3(),a=o.T3();if(r)for(let s=0;!a.O3();++s)t.R3(n),a.F3(s),(yield*i.gCt(e,h))||a.u1(),t.E3(n);else for(let t=0;!a.O3();++t)a.F3(t),(yield*i.gCt(e,h))||a.u1();return s.D3(),o.D3(),!1}W0t(t,s,e){const i=this.Nc.fH(),n=i.GH(),r=n.M3(),h=r.SH(),o=h.b3(),a=r.Obt(),l=n.T3(h),u=i.G3(),c=u.T3();if(c._3(t),c.Kbt(e),e<s)if(a)for(let t=s;t>=e&&!c.O3();--t)i.R3(o),c.F3(t),h.P3(r,l),i.E3(o);else for(let t=s;t>=e&&!c.O3();--t)c.F3(t),h.P3(r,l);else if(a)for(let t=s;t<=e&&!c.O3();++t)i.R3(o),c.F3(t),h.P3(r,l),i.E3(o);else for(let t=s;t<=e&&!c.O3();++t)c.F3(t),h.P3(r,l);return n.D3(),u.D3(),!1}*z0t(t,s,e){const i=this.Nc.fH(),n=i.GH(),r=n.M3(),h=r.SH(),o=h.b3(),a=r.Obt(),l=n.T3(h),u=i.G3(),c=u.T3();if(c._3(t),c.Kbt(e),e<s)if(a)for(let t=s;t>=e&&!c.O3();--t)i.R3(o),c.F3(t),yield*h.gCt(r,l),i.E3(o);else for(let t=s;t>=e&&!c.O3();--t)c.F3(t),yield*h.gCt(r,l);else if(a)for(let t=s;t<=e&&!c.O3();++t)i.R3(o),c.F3(t),yield*h.gCt(r,l),i.E3(o);else for(let t=s;t<=e&&!c.O3();++t)c.F3(t),yield*h.gCt(r,l);return n.D3(),u.D3(),!1}j0t(t){const s=t.uX(),e=s.lX();if(0===e.length)return!1;const i=this.Nc.fH(),n=i.GH(),r=n.M3(),h=r.SH(),o=h.b3(),a=r.Obt(),l=n.T3(h),u=i.G3(),c=u.T3(),f=t.CK(),d=wx.T3();if(cx.Th(d,e),c.Kbt(d.length),a)for(let s=0,e=d.length;s<e&&!c.O3();++s){i.R3(o);const e=d[s];t.uX().qxt(e),f&&e.P_t(),c.F3(s),h.P3(r,l),i.E3(o)}else{s.Hxt(!1);const t=s.Jxt();cx.wh(t),t.push(null);for(let s=0,e=d.length;s<e&&!c.O3();++s){const e=d[s];t[0]=e,f&&e.P_t(),c.F3(s),h.P3(r,l)}}return n.D3(),u.D3(),cx.wh(d),wx.D3(),!1}*H0t(t){const s=t.uX(),e=s.lX();if(0===e.length)return!1;const i=this.Nc.fH(),n=i.GH(),r=n.M3(),h=r.SH(),o=h.b3(),a=r.Obt(),l=n.T3(h),u=i.G3(),c=u.T3(),f=t.CK(),d=wx.T3();if(cx.Th(d,e),c.Kbt(d.length),a)for(let s=0,e=d.length;s<e&&!c.O3();++s){i.R3(o);const e=d[s];t.uX().qxt(e),f&&e.P_t(),c.F3(s),yield*h.gCt(r,l),i.E3(o)}else{s.Hxt(!1);const t=s.Jxt();cx.wh(t),t.push(null);for(let s=0,e=d.length;s<e&&!c.O3();++s){const e=d[s];t[0]=e,f&&e.P_t(),c.F3(s),yield*h.gCt(r,l)}}return n.D3(),u.D3(),cx.wh(d),wx.D3(),!1}J0t(t,s){const e=t.uX(),i=e.lX();if(0===i.length)return!1;const n=this.Nc.fH(),r=n.GH(),h=n.JMt(),o=r.M3(),a=o.SH(),l=a.b3(),u=o.Obt(),c=r.T3(a),f=n.G3(),d=f.T3(),p=t.CK(),m=wx.T3();cx.wh(m),d.Kbt(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.EEt(1,t)]);if(m.sort(ux),1===s&&m.reverse(),u)for(let s=0,e=m.length;s<e&&!d.O3();++s){n.R3(l);const e=m[s][0];t.uX().qxt(e),p&&e.P_t(),d.F3(s),a.P3(o,c),n.E3(l)}else{e.Hxt(!1);const t=e.Jxt();cx.wh(t),t.push(null);for(let s=0,e=m.length;s<e&&!d.O3();++s){const e=m[s][0];t[0]=e,p&&e.P_t(),d.F3(s),a.P3(o,c)}}return r.D3(),f.D3(),cx.wh(m),wx.D3(),!1}*$0t(t,s){const e=t.uX(),i=e.lX();if(0===i.length)return!1;const n=this.Nc.fH(),r=n.GH(),h=n.JMt(),o=r.M3(),a=o.SH(),l=a.b3(),u=o.Obt(),c=r.T3(a),f=n.G3(),d=f.T3(),p=t.CK(),m=wx.T3();cx.wh(m),d.Kbt(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.EEt(1,t)]);if(m.sort(ux),1===s&&m.reverse(),u)for(let s=0,e=m.length;s<e&&!d.O3();++s){n.R3(l);const e=m[s][0];t.uX().qxt(e),p&&e.P_t(),d.F3(s),yield*a.gCt(o,c),n.E3(l)}else{e.Hxt(!1);const t=e.Jxt();cx.wh(t),t.push(null);for(let s=0,e=m.length;s<e&&!d.O3();++s){const e=m[s][0];t[0]=e,p&&e.P_t(),d.F3(s),yield*a.gCt(o,c)}}return r.D3(),f.D3(),cx.wh(m),wx.D3(),!1}q0t(t,s){let e=this.E0t.get(t);return e||(s?(e={X0t:null,Y0t:new Map},this.E0t.set(t,e),e):null)}K0t(t,s,e,i,n){s.gH().FCt(e,s.xH()),i&&t.E3(n)}*Z0t(t,s,e,i,n){yield*s.gH().ACt(e,s.xH()),i&&t.E3(n)}}}{const vx=self._s;vx.a$.o$.SBt=class extends vx.Wn{constructor(t){super(),this._xt=t,this.Nc=t.m$(),this.$Dt=t.Zq()}PDt(){}Hn(){this._xt=null,this.Nc=null,this.$Dt=null}}}{const xx=self._s;xx.a$.o$.Instance=class extends xx.Wn{constructor(t,s){super(),this.ce=t,this._xt=this.ce.yK(),this.QDt=this._xt.oFt(),this.Nc=this.ce.m$()}Hn(){this.ce=null,this._xt=null,this.QDt=null,this.Nc=null}}}{const bx=self._s,Mx=[];bx.a$.o$.h$={Q0t:()=>!0,Qet:()=>!0,oit:()=>!0,VZt:()=>!0,WZt:()=>!0,AH(){return this.Nc.AH()},pIt(){const t=this.Nc.HMt();return!t.Rbt()&&!t.Ibt()},t1t(){const t=this.Nc.JMt().SEt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const e=this.Nc.VH();return t.set("TriggerOnce_lastTick",e),this.Nc.CQt()||s!==e-1},s1t(t){const s=this.Nc.JMt().SEt(),e=s.get("Every_lastTime")||0,i=this.Nc.BH();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return i>=e+n?(s.set("Every_lastTime",e+n),i>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",i),s.set("Every_seconds",t),!0):(i<e-.1&&s.set("Every_lastTime",i),!1)},PGt(t){const s=this.Nc.fH().fTt(t);return s&&s.PGt()},fXt(){return this.Nc.fXt()},he:()=>bx.Ks.he,xZt:()=>!0,r$:()=>!0,e1t:()=>!0,UQt:()=>!0,HQt:()=>!0,WQt:()=>!0,zQt:()=>!0,i1t(t){return!!this.Nc.LJ(t)},n1t(t){switch(t){case 0:return"browser"===bx.Ks.ne;case 1:return"iOS"===bx.Ks.Zs;case 2:return"Android"===bx.Ks.Zs;case 8:return"cordova"===bx.Ks.ne;case 9:return"scirra-arcade"===this.Nc.Q$();case 13:return"windows-uwp"===this.Nc.Q$();default:return!1}},r1t(t,s,e){return this.F0t(s,e).test(t)},h1t:(t,s,e)=>bx.compare(t,s,e),o1t:(t,s,e)=>t>=s&&t<=e,a1t:(t,s,e)=>bx.compare(t.Dct(),s,e),l1t:t=>!!t.Dct(),u1t(t,s){const e=this.Nc.BH();if(0===t){const t=this.Nc.JMt().SEt();return!t.get("CompareTime_executed")&&e>=s&&(t.set("CompareTime_executed",!0),!0)}return bx.compare(e,t,s)},c1t:t=>isNaN(t),IOt:(t,s,e)=>bx.rr(bx.Zn(t),bx.Zn(e))<=bx.Zn(s),COt:(t,s)=>bx.ar(bx.Zn(t),bx.Zn(s)),NFt(t,s,e){let i=bx.Zn(t),n=bx.Zn(s),r=bx.Zn(e);return bx.ar(r,n)?bx.ar(i,n)&&!bx.ar(i,r):!(!bx.ar(i,n)&&bx.ar(i,r))},f1t:(t,s)=>"number"==typeof t?0===s:1===s,d1t:t=>!!t,aGt(t){return t.toLowerCase()===this.Nc.fH().fGt()},p1t(t,s,e,i){if(!t)return!1;const n=this.L0t(),r=n.T3(),h=t.uX();bx.Th(r,h.lX()),h.Nxt()&&bx.wh(h.$xt());const o=this.Nc.JMt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.EEt(1,t),i=o.EEt(3,t),bx.compare(s,e,i)?++a:h.jxt(n)}bx.Sh(r,a),h.Xxt(r);const l=!!r.length;return bx.wh(r),n.D3(),t.GCt(),l},m1t(t,s){if(!t)return!1;const e=this.L0t(),i=e.T3(),n=t.uX();bx.Th(i,n.lX()),n.Nxt()&&bx.wh(n.$xt());const r=this.Nc.JMt();let h=0;for(let t=0,s=i.length;t<s;++t){const s=i[t];i[h]=s,r.EEt(1,t)?++h:n.jxt(s)}bx.Sh(i,h),n.Xxt(i);const o=!!i.length;return bx.wh(i),e.D3(),t.GCt(),o},g1t(t,s,e){if(!t)return!1;const i=t.uX(),n=i.lX();if(0===n.length)return!1;const r=this.Nc.JMt();let h=null,o=0;for(let t=0,i=n.length;t<i;++t){const i=n[t];e=r.EEt(2,t),(null===h||0===s&&e<o||1===s&&e>o)&&(o=e,h=i)}return i.tbt(h),t.GCt(),!0},y1t(t,s){if(!t)return!1;const e=t.uX(),i=e.lX();if((s=Math.floor(s))>=i.length)return!1;const n=i[s];return e.tbt(n),t.GCt(),!0},S1t(t){if(!t)return!1;const s=t.uX(),e=s.lX(),i=Math.floor(this.Nc.yJ()*e.length);if(i>=e.length)return!1;const n=e[i];return s.tbt(n),t.GCt(),!0},w1t:t=>!!t&&(!!t.dX()&&(t.uX().Hxt(!0),t.GCt(),!0)),v1t(t,s,e){if(!t)return!1;const i=t.uX(),n=i.lX(),r=this.Nc.SH().sbt(),h=this.Nc.JMt().dEt();i.Nxt()?(bx.Th(Mx,n),i.Lxt(),i.Hxt(!1)):r?(bx.Th(Mx,i.$xt()),bx.wh(i.$xt())):(bx.Th(Mx,i.Jxt()),bx.wh(i.Jxt()));for(let t=0,n=Mx.length;t<n;++t){const n=Mx[t];bx.xor(n.WJ().uQ(s,e),h)?i.zxt(n):i.jxt(n)}return t.GCt(),bx.xor(!!i.Jxt().length,h)},x1t(t){if(!t)return!1;const s=t.N7();let e=null;const i=this.Nc.oUt();for(let n=i.length-1;n>=0;--n){const r=i[n];if(s){if(r.yK().dFt(t)){e=r;break}}else if(r.yK()===t){e=r;break}}if(!e){const s=t.lX();s.length&&(e=s.at(-1))}return!!e&&(t.uX().tbt(e),t.GCt(),!0)},b1t(t){return this.Nc.fAt()?this.B0t(t):this.N0t(t)},M1t(){return this.Nc.fAt()?this.V0t():this.U0t()},T1t(t,s,e){return this.Nc.fAt()?this.z0t(t,s,e):this.W0t(t,s,e)},zd(t){return this.Nc.fAt()?this.H0t(t):this.j0t(t)},G1t(t,s,e){return this.Nc.fAt()?this.$0t(t,e):this.J0t(t,e)},_1t:t=>!!t&&t._Y(),I1t:t=>!!t&&t.OY(),C1t:t=>!!t&&t.EY(),R1t:t=>!!t&&!t.dX(),P1t:(t,s,e)=>!!t&&bx.compare(100*t.NA(),s,e),E1t(t){const s=this.Nc.SJ();return!!s&&s.oet(t)},D0t:()=>!0,F1t(){return this.R0t>0},A1t(t,s){const e=this.Nc.gVt();return!!e&&!!s&&!!e.CSt(t,s)}}}{let Tx=function(t,s){const e=t[0]-s[0];return 0!==e?e:t[1]-s[1]},Gx=function(t,s){return t[1]-s[1]};0;const _x=self._s,Ix=[],Cx=[],Rx=_x.jn(_x.Rect),Px=_x.jn(_x.Mo),Ex=[];_x.a$.o$.Gdt={O1t(t,s){t.yft(s)},D1t(t,s){t.Xe()&&"number"!=typeof s&&(s=parseFloat(s)),t.yft(t.Dct()+s)},k1t(t,s){t.Xe()&&t.yft(t.Dct()-s)},L1t(t,s){t.yft(!!s)},N1t(t){t.yft(!t.Dct())},B1t(t){t.yft(t.jMt())},U1t(t){this.Nc.fH().uTt(t)},V1t(t,s,e,i,n,r){if(!t||!s)return;const h=this.Nc.mX(t,s,e,i,n,r);if(!h)return;n&&s.gX(h);const o=this.Nc.fH();o.yX(!0),h.SX(),o.yX(!1);const a=new Map;h.oVt(a,t,n);for(const[t,s]of a)t.uX().Yxt(s)},W1t(t,s,e,i,n,r){if(!t||!s)return;const h=this.Nc._Zt(t);h&&_x.a$.o$.Gdt.V1t.call(this,h,s,e,i,n,r)},k7(t,s,e,i,n,r,h,o,a,l,u){if(!t)return;const c=this.Nc.UJ();let f=c;if(r){const t=this.Nc.xJ().Dit(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.zJ(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.zJ(o),!p))return;Rx.set(s,e,i,n);const m=f.k7(t,Rx,d,p,a,l,u);t.uX().Xxt(m),t.GCt()},z1t(){const t=this.qbt;t.jbt()&&t.Wbt().u1()},EGt(t,s){const e=this.Nc.fH().fTt(t);e&&(0===s?e.EGt(!1):1===s?e.EGt(!0):e.EGt(!e.PGt()))},j1t(t){this.Nc.JH(t)},H1t(t,s){if(s<0&&(s=0),!t)return;const e=t.uX().lX();for(const t of e)t.JH(s)},J1t(t){if(!t)return;const s=t.uX().lX();for(const t of s)t.NK()},dh(t,s){if(t<0)return;const e=this.Nc.fH().JTt();return s?e.YOt(t):e.KOt(t),!0},PH(t){return this.Nc.fH().JTt().ZOt(t),!0},$1t(){const t=this.Nc.fH();return t.JTt().QOt(t.oGt()),!0},CH(t){this.Nc.fH().CH(t)},async i$(t,s,e,i,n,r){const h=this.Nc.AJ();h&&(this.XJ(),await h.i$(0===t?"image/png":"image/jpeg",s/100,e,i,n,r),await this.Nc.n$(_x.a$.o$.h$.r$,null))},q1t(t,s){if(t<=0||s<=0)return;this.Nc.mqt(t,s),this.Nc.UJ().sst();const e=this.Nc.AJ();e&&("off"===e.aqt()||this.Nc.CZt(t,s),e.nE(e.v2(),e.b2(),!0),this.Nc.XJ())},X1t(t){const s=this.Nc.AJ();s&&"off"!==s.aqt()&&(s.bqt(0!==t?"high":"low"),s.nE(s.v2(),s.b2(),!0))},Qut(t){this.Nc.EQt(t)},Y1t(){this.Nc.FQt()},K1t(t){this.Nc.AQt(t)},Z1t(t){this.Nc.rOt(t)},Q1t(t){},t2t(){for(const t of this.Nc.xJ().TJ())t.git()},s2t(t){this.Nc.cJ(0!==t)},e2t(t,s){this.Nc.lJ(1/t),this.Nc.hJ(1/s)},i2t(t,s){this.Nc.hJ(t),this.Nc.lJ(s)},n2t(t){this.Nc.iJ(["vsync","unlimited-tick","unlimited-frame"][t])},r2t(t,s){if(!t)return;const e=t.uX().lX(),i=Ix,n=Cx,r=this.Nc.UJ(),h=t.N7(),o=t.qRt();for(let t=0,r=e.length;t<r;++t){const r=e[t],a=r.WJ();if(!a)continue;let l;l=h?r.ypt(s+r.yK().$Rt(o)):r.ypt(s),i.push([a.zJ().Ej(),a.jJ()]),n.push([r,l])}if(!i.length)return;i.sort(Tx),n.sort(Gx);let a=!1;for(let t=0,s=i.length;t<s;++t){const s=n[t][0],e=r.HJ(i[t][0]),h=i[t][1],o=e.JJ();o[h]!==s&&(o[h]=s,s.WJ().$J(e,!0),e.qJ(s),a=!0)}a&&this.Nc.XJ(),_x.wh(Ix),_x.wh(Cx)},W$(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.Nj().W$(t,s)},h2t(t){if(this.Nc.OS())return;const s=this.Nc.xJ();s._J()||s.IJ(t)},o2t(t){if(this.Nc.OS())return;const s=this.Nc.xJ();if(s._J())return;const e=s.Dit(t);e&&s.IJ(e)},a2t(t){if(this.Nc.OS())return;const s=this.Nc.xJ();if(s._J())return;const e=s.TJ(),i=e.indexOf(s.SJ());if(t&&0===i)return;if(!t&&i===e.length-1)return;const n=e[i+(t?-1:1)];s.IJ(n)},l2t(){if(this.Nc.OS())return;const t=this.Nc.xJ();t._J()||(t.IJ(t.SJ()),this.Nc.fH().gTt())},u2t(t,s){t&&t.TY(s)},c2t(t,s){t&&t.RY(s)},f2t(t,s){t&&t.FY(s)},d2t(t,s){t&&t.UA(s/100)},p2t(t,s){t&&t.DY(s)},m2t(t,s){t&&t.NY(s)},g2t(t,s){t&&t.BX(_x.Zn(+s))},y2t(t,s,e){t&&(t.iK(!0),t.VX(s),t.zX(e))},S2t(t){t&&t.iK(!1)},w2t(t,s,e){t&&t.g9(s/100,e/100)},v2t(t,s){t&&t.wM(+s)},x2t(t,s){t&&t.$Y(1===s)},b2t(t,s){if(!t)return;Px.Qo(s),Px.Yn();const e=t.eK();e.Ho(Px)||(e.ko(Px),this.XJ())},M2t(t,s){t&&t.YY(s)},T2t(t,s){t&&t.eM(s)},G2t(t,s,e){if(!t)return;const i=t.AX().zft(e);if(!i)return;const n=1===s;i.x_t()!==n&&(i.Jjt(n),t.G0(),this.Nc.XJ())},_2t(t,s,e,i){if(!t)return;const n=t.AX(),r=n.zft(s);if(!r)return;e=Math.floor(e);const h=r.nI().hI(e);h&&("color"===h?(Px.Qo(i),i=Px):"percent"===h&&(i/=100),n.I0(r.Ej(),e,i)&&r.x_t()&&this.Nc.XJ())},I2t(t,s){t&&t.QY(s)},C2t(t){this.Nc.UJ().LX(+t)},R2t(t){this.Nc.UJ().BX(_x.Zn(+t))},P2t(t,s){const e=this.Nc.UJ(),i=e.AX().zft(s);if(!i)return;const n=1===t;i.x_t()!==n&&(i.Jjt(n),e.G0(),this.Nc.XJ())},E2t(t,s,e){const i=this.Nc.UJ().AX(),n=i.zft(t);if(!n)return;s=Math.floor(s);const r=n.nI().hI(s);r&&("color"===r?(Px.Qo(e),e=Px):"percent"===r&&(e/=100),i.I0(n.Ej(),s,e)&&n.x_t()&&this.Nc.XJ())},F2t(t,s){this.Nc.UJ().uY(t/100,s/100)},A2t(t){const s=this.Nc.UJ();0===t?s.dY():s.pY()},O2t(t){this.Nc.UJ().VX(t)},D2t(t){this.Nc.UJ().zX(t)},k2t(t,s){const e=this.Nc.UJ();e.VX(t),e.zX(s)},L2t(t){if(!t)return;const s=t.tAt();if(!s)return;const e=s.WJ();if(!e)return;const i=this.Nc.UJ();i.VX(e.dM()),i.zX(e.gM())},eY(t,s,e){const i=this.Nc.UJ();try{i.eY(t,s,e)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},nY(t,s,e){if(!t)return;const i=this.Nc.UJ();try{i.nY(t,s,e)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},hY(t){t&&this.Nc.UJ().hY(t)},aY(){this.Nc.UJ().aY()},async N2t(t){const s=this.Nc.SJ();if(!s||!t||this.Nc.OS())return;const e=t.N7()?t.RX():[t];await this.O0t(s,e)},async B2t(t){await _x.a$.o$.Gdt.N2t.call(this,this.Nc._Zt(t))},U2t(t){const s=this.Nc.SJ();if(!s||!t)return;const e=t.N7()?t.RX():[t];this.k0t(s,e)},V2t(t){_x.a$.o$.Gdt.U2t.call(this,this.Nc._Zt(t))},W2t(){const t=this.Nc.SJ();if(!t)return;const s=t.xet();this.k0t(t,s)},async z2t(t){const s=this.Nc.SJ();t&&s&&!this.Nc.OS()&&await this.O0t(s,t.yet())},async j2t(t){const s=this.Nc.SJ(),e=this.Nc.xJ().Dit(t);e&&s&&!this.Nc.OS()&&await this.O0t(s,e.yet())},IH(t){const s=this.Oxt.TH();if(s)switch(s._H()){case 1:"number"==typeof t&&s.IH(t);break;case 2:"string"==typeof t&&s.IH(t);break;case 3:s.IH(t)}},H2t(t,s,e){const i=this.q0t(t.toLowerCase(),!0),n=i.Y0t,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=_x.Bh(n.values())||i.X0t;h&&0!==h.bH()!=(0!==e.bH())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,e)},J2t(t,s){const e=this.q0t(t.toLowerCase(),!0);e.X0t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const i=_x.Bh(e.Y0t.values())||e.X0t;i&&0!==i.bH()!=(0!==s.bH())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):e.X0t=s},$2t(t,s,e){const i=this.Nc,n=i.fAt()?Ex:null;e=Math.floor(e);const r=this.q0t(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.Y0t.get(s.toLowerCase());if(!h){if(!r.X0t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.X0t,e=0}if(!h._u())return n;if(0!==h.bH())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=i.fH(),a=o.SH(),l=a.yH(),u=l.length>0;u&&(h.xH()?o.R3(l):o.jTt(l));const c=[],f=o.LGt(a);if(f){const t=f.BGt();for(let s=e,i=t.length;s<i;++s)c.push(t[s].Dct())}const d=h.BGt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].jMt());return i.fAt()?this.Z0t(o,h,c,u,l):this.K0t(o,h,c,u,l)}}}{const Fx=self._s;Fx.a$.o$._dt={q2t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},C:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.yJ()*t:this.Nc.yJ()*(s-t)+t},FRt(...t){return t[Math.floor(this.Nc.yJ()*t.length)]},X2t:(t,...s)=>("number"!=typeof t&&(t=0),s[t=Fx.Yn(Math.floor(t),0,s.length-1)]),Y2t:()=>Math.PI,K2t:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),Z2t(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round((t+Number.EPSILON)*e)/e},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(Fx.Zn(t)),cos:t=>Math.cos(Fx.Zn(t)),tan:t=>Math.tan(Fx.Zn(t)),asin:t=>Fx.Qn(Math.asin(t)),acos:t=>Fx.Qn(Math.acos(t)),atan:t=>Fx.Qn(Math.atan(t)),exp:t=>Math.exp(t),Wt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let e=1,i=t.length;e<i;++e){let i=t[e];"number"==typeof i&&s<i&&(s=i)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let e=1,i=t.length;e<i;++e){let i=t[e];"number"==typeof i&&s>i&&(s=i)}return s},Yn:(t,s,e)=>Fx.Yn(t,s,e),vt:(t,s,e,i)=>Fx.er(t,s,e,i),angle:(t,s,e,i)=>Fx.Qn(Fx.nr(t,s,e,i)),_t:(t,s,e)=>Fx._t(t,s,e),pr:(t,s,e)=>Fx.pr(t,s,e),gr:(t,s,e,i)=>Fx.gr(t,s,e,i),yr:(t,s,e,i,n)=>Fx.yr(t,s,e,i,n),Sr:(t,s,e)=>Fx.Sr(t,s,e),Q2t:(t,s)=>Fx.Qn(Fx.rr(Fx.Zn(t),Fx.Zn(s))),t3t:(t,s,e)=>Fx.Qn(Fx.lr(Fx.Zn(t),Fx.Zn(s),e)),s3t:(t,s,e)=>Fx.Qn(Fx.hr(Fx.Zn(t),Fx.Zn(s),Fx.Zn(e))),e3t:(t,s,e)=>(t|=0)&~(1<<(s|=0))|(e=0!==e?1:0)<<s,i3t:(t,s)=>(t|=0)^1<<s,n3t:(t,s)=>(t|=0)&1<<(s|=0)?1:0,r3t:()=>"\n",h3t:t=>"string"==typeof t?t.toUpperCase():"",o3t:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,e)=>"string"!=typeof t?"":e<0?t.substr(s):t.substr(s,e),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",a3t(t,s,e){if("string"!=typeof t||"string"!=typeof e)return"";let i=t.split(e);return(s=Math.floor(s))<0||s>=i.length?"":i[s]},l3t:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Fx.$e(s),"i")):-1,u3t:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Fx.$e(s),"")):-1,replace:(t,s,e)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof e?t.replace(new RegExp(Fx.$e(s),"gi"),e):"string"==typeof t?t:"",c3t(t,...s){let e=t;for(let t=0,i=s.length;t<i;++t)e=e.replaceAll(`{${t}}`,s[t].toString());return e},f3t(t,s,e){const i=this.F0t(s,e);return t?t.search(i):-1},d3t(t,s,e,i){const n=this.F0t(s,e);return t?t.replace(n,i):""},p3t(t,s,e){const i=this.A0t(t.toString(),s,e);return i?i.length:0},m3t(t,s,e,i){i=Math.floor(i);const n=this.A0t(t.toString(),s,e);return!n||i<0||i>=n.length?"":n[i]},g3t(t,s){let e=t<0?"-":"";t<0&&(t=-t);const i=s-t.toString().length;return e+="0".repeat(Math.max(i,0)),e+t.toString()},y3t:t=>encodeURIComponent(t),S3t:t=>decodeURIComponent(t),OH(){return this.Nc.mrt()},w3t(){return this.Nc.grt()},v3t(){return this.Nc.HH()},x3t(){return(Date.now()-this.Nc.wQt())/1e3},b3t:()=>Date.now(),time(){return this.Nc.BH()},M3t(){return this.Nc.VH()},T3t(){return this.Nc.bQt()},$H(){return this.Nc.qH()},G3t(){return this.Nc.ZH()},_3t(){return this.Nc.tJ()},I3t(){return this.Nc.AJ().pq()},C3t(){return this.Nc.AJ().gq()},R3t(){return this.Nc.sH()},P3t(){return this.Nc.iH()},E3t(){return this.Nc.sH()},F3t(){return this.Nc.iH()},A3t(){return this.Nc.UJ().WX()},O3t(){return this.Nc.UJ().jX()},D3t(){return this.Nc.UJ().Rc()},k3t(){return this.Nc.UJ().NX()},L3t(){return Fx.Qn(this.Nc.UJ().UX())},N3t(){return this.Nc.UJ().by()},B3t(){return this.Nc.UJ().Ty()},U3t(){return 100*this.Nc.UJ().tet()},V3t(){return 100*this.Nc.UJ().eet()},W3t(t){const s=this.Nc.UJ().zJ(t);return s?s.l9().Za():0},z3t(t){const s=this.Nc.UJ().zJ(t);return s?s.l9().Qa():0},j3t(t){const s=this.Nc.UJ().zJ(t);return s?s.l9().tl():0},H3t(t){const s=this.Nc.UJ().zJ(t);return s?s.l9().sl():0},J3t(t){const s=this.Nc.UJ().zJ(t);return s?s.l9().width():0},$3t(t){const s=this.Nc.UJ().zJ(t);return s?s.l9().height():0},q3t(t){const s=this.Nc.UJ().zJ(t);if(s){const t=s.l9();return(t.Za()+t.tl())/2}return 0},X3t(t){const s=this.Nc.UJ().zJ(t);if(s){const t=s.l9();return(t.Qa()+t.sl())/2}return 0},Y3t(t,s,e){const i=this.Nc.UJ().zJ(t);return i?i.oK(s,e)[0]:0},K3t(t,s,e){const i=this.Nc.UJ().zJ(t);return i?i.oK(s,e)[1]:0},Z3t(t,s,e){const i=this.Nc.UJ().zJ(t);return i?i.lK(s,e)[0]:0},Q3t(t,s,e){const i=this.Nc.UJ().zJ(t);return i?i.lK(s,e)[1]:0},t4t(t,s,e,i){const n=this.Nc.UJ(),r=n.zJ(t),h=n.zJ(s);if(!r||!h||r===h)return e;const[o,a]=r.lK(e,i);return h.oK(o,a)[0]},s4t(t,s,e,i){const n=this.Nc.UJ(),r=n.zJ(t),h=n.zJ(s);if(!r||!h||r===h)return i;const[o,a]=r.lK(e,i);return h.oK(o,a)[1]},e4t(t){const s=this.Nc.UJ().zJ(t);return s?s.kY():0},i4t(t){const s=this.Nc.UJ().zJ(t);return s?Fx.Qn(s.UY()):0},n4t(t){const s=this.Nc.UJ().zJ(t);return s?100*s.NA():0},r4t(t){const s=this.Nc.UJ().zJ(t);return s?s.BY():0},h4t(t){const s=this.Nc.UJ().zJ(t);return s?s.WX():0},o4t(t){const s=this.Nc.UJ().zJ(t);return s?s.jX():0},a4t(t){const s=this.Nc.UJ().zJ(t);return s?100*s.zY():0},l4t(t){const s=this.Nc.UJ().zJ(t);return s?100*s.JY():0},u4t(t){const s=this.Nc.UJ().zJ(t);return s?s.SM():0},c4t(t){const s=this.Nc.UJ().zJ(t);return s?s.Ej():-1},f4t(){const t=this.Nc.AJ();return t?t.$qt():""},d4t(t){const s=this.qbt;if(!s.jbt())return 0;if(t){const e=s.Jbt(t);return e?e.Ej():0}return s.Wbt().Ej()},p4t(){return this.Nc.OQt()},m4t(t,s,...e){const i=this.q0t(t.toLowerCase(),!1);if(!i)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=i.Y0t.get(s.toLowerCase());if(!n){if(!i.X0t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=i.X0t}const r=n.bH(),h=n.pH();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n._u())return h;const o=this.Nc.fH(),a=o.SH().yH(),l=a.length>0;l&&(n.xH()?o.R3(a):o.jTt(a));const u=n.BGt();for(let t=e.length,s=u.length;t<s;++t)e.push(u[t].jMt());const c=n.gH(),f=c.vH(c.yH(),n.xH(),r,h,...e);return l&&o.E3(a),f},g4t(){return this.Nc.Dj().pJ()},y4t(){return this.X5()},rC(){return this.Nc.Pqt()?"webgpu":"webgl"},S4t(){return this.Nc.Pqt()?this.Nc.Pqt().qB():this.Nc.Rqt().qO()},w4t(){let t=this.Nc.Ob().ob();return Math.round(100*t/1048576)/100},v4t:(t,s,e)=>Fx._r(t,s,e),x4t:(t,s,e)=>Fx.Cr(t/100,s/100,e/100),b4t:(t,s,e,i)=>Fx.Ir(t/100,s/100,e/100,i/100),M4t:(t,s,e)=>Fx.Cr(t/255,s/255,e/255),T4t:(t,s,e,i)=>Fx.Ir(t/255,s/255,e/255,i/255),G4t(){return this.Nc.Wj()},_4t(){return this.Nc.jj()},I4t(){return this.Nc.Jj()},C4t(){return this.Nc.qj()},R4t(){return this.Nc.SH().ret().Rc()},P4t(){return this.Nc.SH().DIt()},E4t(){return this.Nc.Dj().O$().length},F4t(t){t=Math.floor(t);const s=this.Nc.Dj().O$();return t<0||t>=s.length?"":s[t].name}}}{const Ax=self._s;Ax.a$.Jft=class extends Ax.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const Ox=self._s,Dx=self.Ls,kx=[];Ox.a$.Jft.SBt=class extends Ox.JDt{constructor(t){super(t),this.cBt=t.XBt()}Hn(){Ox.wh(this.cBt),super.Hn()}PDt(){for(const t of this.cBt)t.fNt(this.Nc)}Met(t){const s={xT:this.Nc.OV()};return Promise.all(this.cBt.map(e=>e.dNt(t,s)))}Ret(){for(const t of this.cBt)t.pNt()}_et(){this.A4t()}A4t(){for(const t of this._xt.aX())t.o0().O4t()}TEt(t){Ox.a$.Jft.LOt(this,t)}aFt(t){kx.push({YDt:null,D4t:!1,tX:[]})}k4t(t,s,e){const i=kx.at(-1);i.YDt=t,i.D4t=e,i.tX.push(s)}lFt(t){const s=kx.pop(),e=s.YDt,i=s.D4t;if(!e)return;const n=new Map;for(const t of s.tX)t.oVt(n,e,i);for(const[t,s]of n)t.uX().Yxt(s)}L4t(t){const s=this.yK().tUt(t),e=this.m$();return s.mNt(0).J0().b4(e.Ob(),{xT:e.OV()}).then(()=>this.A4t()),s}N4t(t){for(const s of this._xt.aX())s.o0().B4t(t);this.yK().sUt(t)}U4t(t,s){const e=this._xt.ZBt(t);if(!e)throw new Error(`cannot find animation name '${t}'`);let i=e.wNt(s);i<0&&(i+=e.N0()+1);const n=Ox.lNt.cNt(this.m$());e.gNt(n,i);const r=this.m$();n.J0().b4(r.Ob(),{xT:r.OV()}).then(()=>this.A4t());for(const t of this._xt.aX())t.o0().V4t();return n}W4t(t,s){const e=this._xt.ZBt(t);if(!e)throw new Error(`cannot find animation name '${t}'`);if(1===e.N0())throw new Error(`cannot remove last frame from animation '${t}'`);let i=e.wNt(s);i<0&&(i+=e.N0()),e.yNt(i);for(const t of this._xt.aX())t.o0().V4t()}EDt(){return self.z4t}};const Lx=new WeakMap;self.z4t=class extends self.cX{constructor(t){super(t),Lx.set(this,t.oFt())}j4t(t){Dx.hi(t);const s=Lx.get(this).yK().ZBt(t);return s?s.vNt():null}H4t(){return Lx.get(this).yK().KBt().map(t=>t.vNt())}J4t(t){return Dx.hi(t),Lx.get(this).L4t(t).vNt()}$4t(t){Dx.hi(t),Lx.get(this).N4t(t)}q4t(t,s){if(Dx.hi(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Lx.get(this).U4t(t,s).V0()}X4t(t,s){if(Dx.hi(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Lx.get(this).W4t(t,s)}}}{const Nx=self._s,Bx=self.Ls,Ux=0,Vx=1,Wx=2,zx=3,jx=Nx.jn(Nx.Rect),Hx=Nx.jn(Nx.Cl),Jx=Nx.jn(Nx.Ca),$x=1,qx=2,Xx=4;Nx.a$.Jft.Instance=class extends Nx.Gkt{constructor(t,s){super(t);let e=!0,i="",n=0,r=!0;s&&(e=!!s[Ux],i=s[Vx],n=s[Wx],r=s[zx]),this.Y4t=this._xt.ZBt(i)||this._xt.XBt()[0],this.K4t=Nx.Yn(n,0,this.Y4t.N0()-1),this.Z4t=this.Y4t.mNt(this.K4t);const h=this.Z4t.J0();this.vk=h.kG(),this.Q4t=h.kE(),this.t5t=h.Lkt(),this.Rkt(),t.rVt(qx,!0),t.rVt($x,this.Y4t.R0()>=0),this.s5t=Math.abs(this.Y4t.R0()),this.e5t=this.Y4t.D0(),this.i5t=Nx.jn(Nx.Qf),this.n5t=0,this.r5t=0,this.h5t="",this.o5t=-1,this.a5t="",this.l5t=0;const o=this.WJ();this.u5t=o.$Z(),o.TY(e),o.lQ(r),o.DZ(this.Z4t.OZ()),o.NZ(this.Z4t.LZ()),o.ljt(this.Z4t.e1()),o.RZ(),1===this._xt.YBt()&&1===this._xt.XBt()[0].N0()||0===this.s5t||this.gkt()}Hn(){this.Y4t=null,this.Z4t=null,this.vk=null,this.i5t=null,super.Hn()}Akt(){return this.Z4t.J0()}but(){return!0}M6(){this.vk=null}Fkt(){this.O4t()}lT(t){const s=this.vk;if(null===s)return;t.zA(s);const e=this.WJ();e.KQ()?this.c5t(e,t):this.f5t(e,t)}f5t(t,s){let e=this.u5t;this.Nc.fJ()&&(e=t.sjt(e)),s.sO(e,this.t5t)}c5t(t,s){const e=t.vjt();if(t.bjt()){t.jZ(jx,Hx,!1);let s=Hx;this.Nc.fJ()&&(s=t.sjt(s)),e.iT(t.ZQ(),s,this.t5t),t.xjt(!1)}e.lT(s,t.WZ())}d5t(){return this.i5t.Hs()}p5t(){return this.ce.hVt(qx)}m5t(t){this.ce.rVt(qx,t)}g5t(){return this.ce.hVt($x)}y5t(t){this.ce.rVt($x,t)}S5t(){return this.ce.hVt(Xx)}w5t(t){this.ce.rVt(Xx,t)}yrt(){this.a5t&&this.v5t(),this.o5t>=0&&this.x5t();const t=this.s5t;if(!this.p5t()||0===t)return void this.tkt();const s=this.Nc.DH(this.ce);this.i5t.Bu(s);const e=this.d5t(),i=this.Z4t,n=i.$0()/t;if(e<this.n5t+n)return;const r=this.Y4t,h=this.e5t,o=r.N0(),a=r.A0(),l=r.E0(),u=r.L0();this.g5t()?this.K4t++:this.K4t--,this.n5t+=n,this.K4t>=o&&(u?(this.y5t(!1),this.K4t=o-2):l?this.K4t=h:(this.r5t++,this.r5t>=a?this.b5t(!1):this.K4t=h)),this.K4t<0&&(u?(this.K4t=1,this.y5t(!0),l||(this.r5t++,this.r5t>=a&&this.b5t(!0))):l?this.K4t=h:(this.r5t++,this.r5t>=a?this.b5t(!0):this.K4t=h)),this.K4t=Nx.Yn(this.K4t,0,o-1);const c=r.mNt(this.K4t);e>this.n5t+c.$0()/t&&(this.n5t=e),this.M5t(i,c)}b5t(t){this.K4t=t?0:this.Y4t.N0()-1,this.m5t(!1),this.h5t=this.Y4t.Rc(),this.w5t(!0),this.XDt("animationend",!1,{animationName:this.h5t}),this.tZ(Nx.a$.Jft.h$.T5t),this.tZ(Nx.a$.Jft.h$.G5t),this.w5t(!1),this.r5t=0}M5t(t,s,e){if(t===s)return;const i=this.WJ(),n=t.J0(),r=s.J0(),h=n.by(),o=n.Ty(),a=r.by(),l=r.Ty();e&&e.$ft?e.$ft(i,h,o,a,l):(h!==a&&i.ny(i.by()*(a/h)),o!==l&&i.hy(i.Ty()*(l/o))),i.DZ(s.OZ()),i.NZ(s.LZ()),i.ljt(s.e1()),i.RZ(),this.Z4t=s,this.vk=r.kG(),this.Q4t=r.kE(),this.t5t=r.Lkt();const u=this.N1().Uft();for(let e=0,i=u.length;e<i;++e)u[e].bLt(t,s);this.XDt("framechange",!1,{animationName:this.Y4t.Rc(),_5t:this.K4t}),this.tZ(Nx.a$.Jft.h$.I5t),this.Nc.XJ()}C5t(t){this.m5t(!0),this.n5t=this.d5t(),1===t&&0!==this.K4t&&(this.o5t=0,this.S5t()||this.x5t()),this.gkt()}R5t(t,s,e){this.a5t=t,this.l5t=s,this.gkt(),!e&&this.S5t()||this.v5t()}P5t(){return this.Y4t}E5t(){return this.a5t?this.a5t:this.Y4t.Rc()}B4t(t){Nx.Ki(t,this.E5t())&&this.R5t(this._xt.eUt().Rc(),1,!0)}F5t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this._xt.ZBt(this.E5t());if(!s)return;if(-1===(t=s.SNt(t)))return}isFinite(t)&&(this.o5t=t,this.S5t()||this.x5t())}V4t(){if(this.a5t||-1!==this.o5t)return;const t=this.Z4t,s=this.Y4t.mNt(Nx.Yn(this.K4t,0,this.Y4t.N0()-1));t!==s&&this.M5t(t,s),this.Y4t.N0()>1&&this.s5t>0&&this.gkt()}A5t(){return this.K4t}O5t(){return this.Z4t.o1()}D5t(t){this.s5t=Math.abs(t),this.y5t(t>=0),this.s5t>0&&this.gkt()}k5t(){return this.g5t()?this.s5t:-this.s5t}L5t(t){"string"==typeof t&&-1===(t=this.Y4t.SNt(t))||(t=Nx.Yn(Math.floor(t),0,this.Y4t.N0()-1),this.e5t=t)}N5t(){return this.e5t}v5t(t){const s=this.Z4t,e=this._xt.ZBt(this.a5t);if(this.a5t="",!e)return;if(e===this.Y4t&&this.p5t())return;this.Y4t=e,this.y5t(e.R0()>=0),this.s5t=Math.abs(e.R0()),this.e5t=e.D0(),this.K4t=Nx.Yn(this.K4t,0,this.Y4t.N0()-1),1===this.l5t&&(this.K4t=0),this.m5t(!0),this.n5t=this.d5t();const i=this.Y4t.mNt(this.K4t);this.M5t(s,i,t)}x5t(t){const s=this.Z4t,e=this.K4t;if(this.K4t=Nx.Yn(Math.floor(this.o5t),0,this.Y4t.N0()-1),this.o5t=-1,!t&&e===this.K4t)return;const i=this.Y4t.mNt(this.K4t);this.M5t(s,i),this.n5t=this.d5t()}O4t(){const t=this.Z4t.J0();this.vk=t.kG(),this.Q4t=t.kE(),this.t5t=t.Lkt(),this.WJ().xjt(!0)}kG(){return this.vk}kE(){return this.Q4t}Lkt(){return this.t5t}X0(){return this.Z4t.X0()}MFt(t){const s=this.Z4t,e=this.WJ();let i=null;if("string"==typeof t)i=s.t1(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");i=s.Q0(t-1)}let n=e.WZ();if(!i)return[e.dM(),e.gM(),n];if(Jx.m(i.ENt()),e.KQ()){const[t,s,i]=e.ZQ().gT(Jx.Aa(),Jx.Da());Jx.set(t,s),n+=i}return Jx.offset(-s.OZ(),-s.LZ()),Jx.scale(e.by(),e.Ty()),Jx.rotate(e.UX()),Jx.offset(e.dM(),e.gM()),[Jx.Aa(),Jx.Da(),n]}B5t(){return this.WJ().pjt().pu()}U5t(t){t=Math.floor(t);const s=this.WJ(),e=s.pjt(),i=e.pu();if(t===i&&(t=0),t<0||t>=i)return[0,0];const n=e.du();return[n[2*t+0]+s.dM(),n[2*t+1]+s.gM()]}vkt(){const t=Nx.a$.Jft.Gdt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.Y4t.Rc(),V5t:s=>this.bkt(t.W5t,s,0)},{name:s+".current-frame",value:this.K4t,V5t:s=>this.bkt(t.z5t,s)},{name:s+".is-playing",value:this.p5t(),V5t:s=>s?this.bkt(t.j5t,0):this.bkt(t.H5t)},{name:s+".speed",value:this.s5t,V5t:s=>this.bkt(t.J5t,s)},{name:s+".repeats",value:this.r5t,V5t:t=>this.r5t=t}]}]}_M(){const t={a:this.Y4t.H7()};0!==this.n5t&&(t.fs=this.n5t);const s=this.d5t();0!==s&&(t.at=s),0!==this.K4t&&(t.f=this.K4t),0!==this.s5t&&(t.cas=this.s5t),1!==this.r5t&&(t.ar=this.r5t),0!==this.e5t&&(t.rt=this.e5t),this.p5t()||(t.ap=this.p5t()),this.g5t()||(t.af=this.g5t());const e=this.WJ();return e.aQ()&&(t.ce=e.aQ()),t}IM(t){const s=this.yK().QBt(t.a);s&&(this.Y4t=s),this.n5t=t.hasOwnProperty("fs")?t.fs:0,this.i5t.Set(t.hasOwnProperty("at")?t.at:0);const e=t.hasOwnProperty("f")?t.f:0;this.K4t=Nx.Yn(e,0,this.Y4t.N0()-1),this.s5t=t.hasOwnProperty("cas")?t.cas:0,this.r5t=t.hasOwnProperty("ar")?t.ar:1;const i=t.hasOwnProperty("rt")?t.rt:0;this.e5t=Nx.Yn(i,0,this.Y4t.N0()-1),this.m5t(!t.hasOwnProperty("ap")||!!t.ap),this.y5t(!t.hasOwnProperty("af")||!!t.af);const n=this.Y4t.mNt(this.K4t);this.Z4t=n,this.O4t();const r=this.WJ();r.DZ(n.OZ()),r.NZ(n.LZ()),r.ljt(n.e1()),r.lQ(!!t.ce),this.p5t()&&this.gkt()}apt(t){const s=this.WJ();switch(t){case zx:return s.aQ();case Wx:return Nx.Yn(this.K4t,0,this.Y4t.N0()-1);case Vx:return this.Y4t.Rc()}}ppt(t,s,e){const i=this.WJ();switch(t){case zx:i.lQ(!!s);break;case Wx:{this.m5t(!1);const t=this.Y4t.N0()-1,i=s=Nx.Yn(s,0,t),n=this.Y4t.mNt(this.K4t),r=this.Y4t.mNt(i);this.M5t(n,r,e),this.K4t=Nx.Yn(i,0,t);break}case Vx:this.a5t=s,this.v5t(e),this.Y4t.N0()>1&&this.Y4t.R0()>0?this.gkt():this.tkt()}}EDt(){return self.$5t}};const Yx=new WeakMap,Kx=new Map([["current-frame",0],["beginning",1]]);self.$5t=class extends self.e0{constructor(){super(),Yx.set(this,self.gK.vK().o0())}q0(){return Yx.get(this).X0()}Y0(t){return this.K0(t)[0]}Z0(t){return this.K0(t)[1]}q5t(t){return this.K0(t)[2]}K0(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return Yx.get(this).MFt(t)}s1(){return Yx.get(this).B5t()}i1(t){return Bx.ei(t),Yx.get(this).U5t(t)[0]}h1(t){return Bx.ei(t),Yx.get(this).U5t(t)[1]}n1(t){return Bx.ei(t),Yx.get(this).U5t(t)}X5t(){Yx.get(this).m5t(!1)}Y5t(t="current-frame"){Bx.hi(t);const s=Kx.get(t);if(void 0===s)throw new Error("invalid mode");Yx.get(this).C5t(s)}K5t(t,s="beginning"){Bx.hi(t),Bx.hi(s);const e=Kx.get(s);if(void 0===e)throw new Error("invalid mode");const i=Yx.get(this);if(!i.yK().ZBt(t))throw new Error(`animation name "${t}" does not exist`);i.R5t(t,e)}j4t(t){Bx.hi(t);const s=Yx.get(this).yK().ZBt(t);return s?s.vNt():null}get animation(){return Yx.get(this).P5t().vNt()}get animationName(){return Yx.get(this).E5t()}set _5t(t){Bx.ei(t),Yx.get(this).F5t(t)}get _5t(){return Yx.get(this).A5t()}set Z5t(t){Bx.hi(t),Yx.get(this).F5t(t)}get Z5t(){return Yx.get(this).O5t()}set Q5t(t){Bx.ei(t),Yx.get(this).D5t(t)}get Q5t(){return Yx.get(this).k5t()}set t6t(t){Bx.ei(t),Yx.get(this).L5t(t)}get t6t(){return Yx.get(this).N5t()}get imageWidth(){return Yx.get(this).Akt().by()}get imageHeight(){return Yx.get(this).Akt().Ty()}s6t(){const t=Yx.get(this).Akt();return[t.by(),t.Ty()]}async e6t(t){Bx.Li(t,Blob);const s=Yx.get(this),e=s.m$(),i=s.Akt(),n=Nx.jn(Nx.DLt);if(n.XLt(e,t),await n.b4(e.Ob(),{xT:e.OV()}),s.Jn())return void n.Hn();i.YLt(n);const r=s.oFt();r.A4t(),r.yK().Sf().dispatchEvent(new Nx.Event("animationframeimagechange")),e.XJ()}i6t(t,s){Bx.hi(s),Yx.get(this).WJ().Kzt(!!t,s)}}}{const Zx=self._s;Zx.a$.Jft.h$={n6t(t){return Zx.Ki(this.E5t(),t)},r6t(t,s){return Zx.compare(this.K4t,t,s)},h6t(t,s){if("string"!=typeof s)return!1;const e=this.Z4t.o1();return Zx.compare(e.toLowerCase(),t,s.toLowerCase())},o6t(t,s){return Zx.compare(this.k5t(),t,s)},G5t(t){return Zx.Ki(this.h5t,t)},T5t:()=>!0,I5t:()=>!0,a6t(){return this.WJ().by()<0},l6t(){return this.WJ().Ty()<0},u6t:()=>!0,c6t:()=>!0,aQ(){return this.WJ().aQ()}}}{const Qx=self._s;Qx.a$.Jft.Gdt={f6t(t,s,e,i,n){if(!t||!s)return;const[r,h]=this.MFt(e),o=this.Nc.mX(t,s,r,h,i,n);if(!o)return;if(i&&s.gX(o),t.Zq().Fq()){const t=o.WJ();t.BX(this.WJ().UX()),t.RZ()}const a=this.Nc.fH();a.yX(!0),o.SX(),a.yX(!1),t!==this.Nc.qMt().yK()&&this.QDt.k4t(t,o,i)},H5t(){this.m5t(!1)},j5t(t){this.C5t(t)},W5t(t,s){this.R5t(t,s)},z5t(t){this.F5t(t)},J5t(t){this.D5t(t)},d6t(t){this.L5t(t)},p6t(t,s){try{0===t?this.oFt().L4t(s):this.oFt().N4t(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},m6t(t,s,e){try{0===t?this.oFt().U4t(s,e):this.oFt().W4t(s,e)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},g6t(t){const s=this.WJ(),e=s.by(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.ny(i),s.RZ())},y6t(t){const s=this.WJ(),e=s.Ty(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.hy(i),s.RZ())},LX(t){const s=this.Z4t.J0(),e=this.WJ(),i=e.by()<0?-1:1,n=e.Ty()<0?-1:1,r=s.by()*t*i,h=s.Ty()*t*n;e.by()===r&&e.Ty()===h||(e.nE(r,h),e.RZ())},async S6t(t,s,e){const i=this.Z4t.J0(),n=this.WJ(),r=this.Nc,h=this.QDt;if(i.W5()===t)return 0===s&&(n.nE(i.by(),i.Ty()),n.RZ()),void this.tZ(Qx.a$.Jft.h$.u6t);const o=Qx.jn(Qx.DLt);try{if(await o.qLt(r,t),!o.g6())throw new Error("image failed to load");if(this.Jn())return void o.Hn();await o.b4(r.Ob(),{xT:r.OV()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.tZ(Qx.a$.Jft.h$.c6t))}this.Jn()?o.Hn():(i.YLt(o),h.A4t(),h.yK().Sf().dispatchEvent(new Qx.Event("animationframeimagechange")),r.XJ(),0===s&&(n.nE(i.by(),i.Ty()),n.RZ()),await this.n$(Qx.a$.Jft.h$.u6t))},w6t(t){this.WJ().lQ(t)},Kzt(t,s){this.WJ().Kzt(0===t,s)},v6t(t){this.WJ().eM(t),this.Nc.XJ()}}}self._s.a$.Jft._dt={x6t(){return this.A5t()},b6t(){return this.O5t()},M6t(){return this.Y4t.N0()},T6t(){return this.Y4t.Rc()},G6t(){return this.k5t()},_6t(){return this.Y4t.R0()},I6t(t){return this.MFt(t)[0]},C6t(t){return this.MFt(t)[1]},R6t(t){return this.MFt(t)[2]},P6t(){return this.X0()},E6t(){return this.Akt().by()},F6t(){return this.Akt().Ty()},A6t(t){return this.U5t(t)[0]},O6t(t){return this.U5t(t)[1]},D6t(){return this.B5t()}};{const tb=self._s;tb.a$.k6t=class extends tb.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{let sb=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};0;const eb=self._s;eb.a$.k6t.SBt=class extends eb.JDt{constructor(t,s){super(t),this.ET="repeat",this.FT="repeat",s&&(this.ET=sb(s[0]),this.FT=sb(s[1]))}Hn(){super.Hn()}PDt(){this.J0().p$(this.Nc)}Met(t){return this.J0().b4(t,{xT:this.Nc.OV(),wT:this.ET,vT:this.FT})}Ret(){this.J0().TP()}L6t(){return this.ET}N6t(){return this.FT}}}{const ib=globalThis._s,nb=globalThis.Ls,rb=0,hb=4,ob=5,ab=6,lb=7,ub=8,cb=9,fb=10,db=11,pb=12,mb=13,gb=14,yb=ib.jn(ib.Rect),Sb=ib.jn(ib.Cl),wb=ib.jn(ib.Rect),vb=ib.jn(ib.Cl);ib.a$.k6t.Instance=class extends ib.Gkt{constructor(t,s){super(t),this.B6t=0,this.U6t=0,this.V6t=1,this.W6t=1,this.z6t=0,this.j6t=!1,this.H6t=0,this.J6t=0,this.$6t=0,this.q6t=0,this.X6t=0,this.Y6t=null,s&&(this.WJ().TY(!!s[rb]),this.B6t=s[hb],this.U6t=s[ob],this.V6t=s[ab],this.W6t=s[lb],this.z6t=ib.Zn(s[ub]),this.j6t=!!s[cb],this.H6t=s[fb],this.J6t=s[db],this.$6t=s[pb],this.q6t=s[mb],this.X6t=s[gb])}Hn(){this.K6t(),super.Hn()}K6t(){this.Y6t&&(this.Y6t.Hn(),this.Y6t=null)}Z6t(t,s,e){const i=this.Akt(),n=i.by(),r=i.Ty(),h=this.B6t/n,o=this.U6t/r,a=this.z6t;wb.set(0,0,t/(n*this.V6t),s/(r*this.W6t)),wb.offset(-h,-o),0===a?e.Xl(wb):e.Yl(wb,-a)}Q6t(t,s=!0){if(this.j6t){const s=this.Akt();t._v(),t.mO(s.by()*this.V6t,s.Ty()*this.W6t,this.H6t,this.J6t,this.$6t,this.q6t,this.X6t)}else s&&t.xv()}lT(t){const s=this.Akt(),e=s.kG();if(null===e)return;this.Q6t(t),t.zA(e);const i=s.by(),n=s.Ty();let r=this.B6t/i,h=this.U6t/n;0!==this.z6t||this.j6t||("repeat"===this.oFt().L6t()&&(r%=1),"repeat"===this.oFt().N6t()&&(h%=1));const o=this.WJ();wb.set(0,0,o.by()/(i*this.V6t),o.Ty()/(n*this.W6t)),wb.offset(-r,-h),o.KQ()?this.c5t(o,t):this.f5t(o,t)}f5t(t,s){let e=t.$Z();this.Nc.fJ()&&(e=t.sjt(e)),0===this.z6t?s.wx(e,wb):(vb.Yl(wb,-this.z6t),s.sO(e,vb))}c5t(t,s){const e=t.vjt();if(t.bjt()){t.jZ(yb,Sb,!1);let s=Sb;this.Nc.fJ()&&(s=t.sjt(s));let i=wb;0!==this.z6t&&(vb.Yl(wb,-this.z6t),i=vb),e.iT(t.ZQ(),s,i),t.xjt(!1)}e.lT(s,t.WZ())}Akt(){return this.Y6t||this._xt.J0()}but(){return!0}kG(){return this.Akt().kG()}t8t(){this.WJ().xjt(!0)}s8t(t){this.B6t!==t&&(this.B6t=t,this.Nc.XJ(),this.t8t())}e8t(){return this.B6t}i8t(t){this.U6t!==t&&(this.U6t=t,this.Nc.XJ(),this.t8t())}n8t(){return this.U6t}r8t(t){this.V6t!==t&&(this.V6t=t,this.Nc.XJ(),this.t8t())}h8t(){return this.V6t}o8t(t){this.W6t!==t&&(this.W6t=t,this.Nc.XJ(),this.t8t())}a8t(){return this.W6t}l8t(t){this.z6t!==t&&(this.z6t=t,this.Nc.XJ(),this.t8t())}u8t(){return this.z6t}c8t(t){t=!!t,this.j6t!==t&&(this.j6t=t,this.Nc.XJ())}f8t(){return this.j6t}d8t(t){this.H6t!==t&&(this.H6t=t,this.f8t()&&this.Nc.XJ())}p8t(){return this.H6t}m8t(t){this.J6t!==t&&(this.J6t=t,this.f8t()&&this.Nc.XJ())}g8t(){return this.J6t}y8t(t){this.$6t!==t&&(this.$6t=t,this.f8t()&&this.Nc.XJ())}S8t(){return this.$6t}w8t(t){this.q6t!==t&&(this.q6t=t,this.f8t()&&this.Nc.XJ())}v8t(){return this.q6t}x8t(t){this.X6t!==t&&(this.X6t=t,this.f8t()&&this.Nc.XJ())}b8t(){return this.X6t}_M(){const t={};return 0!==this.B6t&&(t.iox=this.B6t),0!==this.U6t&&(t.ioy=this.U6t),1!==this.V6t&&(t.isx=this.V6t),1!==this.W6t&&(t.isy=this.W6t),0!==this.z6t&&(t.ia=this.z6t),this.j6t&&(t.tr=!0),1!==this.H6t&&(t.trx=this.H6t),1!==this.J6t&&(t.try=this.J6t),1!==this.$6t&&(t.tra=this.$6t),.1!==this.q6t&&(t.trbmx=this.q6t),.1!==this.X6t&&(t.trbmy=this.X6t),t}IM(t){this.B6t=t.iox||0,this.U6t=t.ioy||0,this.V6t=t.hasOwnProperty("isx")?t.isx:1,this.W6t=t.hasOwnProperty("isy")?t.isy:1,this.z6t=t.ia||0,this.j6t=!!t.tr,this.H6t=t.hasOwnProperty("trx")?t.trx:1,this.J6t=t.hasOwnProperty("try")?t.try:1,this.$6t=t.hasOwnProperty("tra")?t.tra:1,this.q6t=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.X6t=t.hasOwnProperty("trbmy")?t.trbmy:.1}vkt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.e8t(),V5t:t=>this.s8t(t)},{name:t+".image-offset-y.name",value:this.n8t(),V5t:t=>this.i8t(t)},{name:t+".image-scale-x.name",value:100*this.h8t(),V5t:t=>this.r8t(t/100)},{name:t+".image-scale-y.name",value:100*this.a8t(),V5t:t=>this.o8t(t/100)},{name:t+".image-angle.name",value:ib.Qn(this.u8t()),V5t:t=>this.l8t(ib.Zn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.f8t(),V5t:t=>this.c8t(t)},{name:t+".x-random.name",value:100*this.p8t(),V5t:t=>this.d8t(t/100)},{name:t+".y-random.name",value:100*this.g8t(),V5t:t=>this.m8t(t/100)},{name:t+".angle-random.name",value:100*this.S8t(),V5t:t=>this.y8t(t/100)},{name:t+".blend-margin-x.name",value:100*this.v8t(),V5t:t=>this.w8t(t/100)},{name:t+".blend-margin-y.name",value:100*this.b8t(),V5t:t=>this.x8t(t/100)}]}]}apt(t){switch(t){case hb:return this.e8t();case ob:return this.n8t();case ab:return this.h8t();case lb:return this.a8t();case ub:return this.u8t();case cb:return this.f8t();case fb:return this.p8t();case db:return this.g8t();case pb:return this.S8t();case mb:return this.v8t();case gb:return this.b8t()}}ppt(t,s){switch(t){case hb:this.s8t(s);break;case ob:this.i8t(s);break;case ab:this.r8t(s);break;case lb:this.o8t(s);break;case ub:this.l8t(s);break;case cb:this.c8t(!!s);break;case fb:this.d8t(s);break;case db:this.m8t(s);break;case pb:this.y8t(s);break;case mb:this.w8t(s);break;case gb:this.x8t(s)}}EDt(){return globalThis.M8t}},globalThis.M8t=class extends globalThis.e0{#t;constructor(){super(),this.#t=globalThis.gK.vK().o0()}set T8t(t){nb.ei(t),this.#t.s8t(t)}get T8t(){return this.#t.e8t()}set G8t(t){nb.ei(t),this.#t.i8t(t)}get G8t(){return this.#t.n8t()}_8t(t,s){nb.ei(t),nb.ei(s);const e=this.#t;e.s8t(t),e.i8t(s)}I8t(){const t=this.#t;return[t.e8t(),t.n8t()]}set C8t(t){nb.ei(t),this.#t.r8t(t)}get C8t(){return this.#t.h8t()}set R8t(t){nb.ei(t),this.#t.o8t(t)}get R8t(){return this.#t.a8t()}P8t(t,s){nb.ei(t),nb.ei(s);const e=this.#t;e.r8t(t),e.o8t(s)}E8t(){const t=this.#t;return[t.h8t(),t.a8t()]}set F8t(t){nb.ei(t),this.#t.l8t(t)}get F8t(){return this.#t.u8t()}set A8t(t){nb.ei(t),this.#t.l8t(ib.Zn(t))}get A8t(){return ib.Qn(this.#t.u8t())}get imageWidth(){return this.#t.Akt().by()}get imageHeight(){return this.#t.Akt().Ty()}s6t(){const t=this.#t.Akt();return[t.by(),t.Ty()]}set O8t(t){this.#t.c8t(!!t)}get O8t(){return this.#t.f8t()}set D8t(t){nb.ei(t),this.#t.d8t(t)}get D8t(){return this.#t.p8t()}set k8t(t){nb.ei(t),this.#t.m8t(t)}get k8t(){return this.#t.g8t()}L8t(t,s){nb.ei(t),nb.ei(s);const e=this.#t;e.d8t(t),e.m8t(s)}N8t(){const t=this.#t;return[t.p8t(),t.g8t()]}set B8t(t){nb.ei(t),this.#t.y8t(t)}get B8t(){return this.#t.S8t()}set U8t(t){nb.ei(t),this.#t.w8t(t)}get U8t(){return this.#t.v8t()}set V8t(t){nb.ei(t),this.#t.x8t(t)}get V8t(){return this.#t.b8t()}W8t(t,s){nb.ei(t),nb.ei(s);const e=this.#t;e.w8t(t),e.x8t(s)}z8t(){const t=this.#t;return[t.v8t(),t.b8t()]}async j8t(t){nb.Li(t,Blob);const s=this.#t,e=s.m$(),i=ib.jn(ib.DLt);i.XLt(e,t),await i.b4(e.Ob(),{xT:e.OV(),wT:s.oFt().L6t(),vT:s.oFt().N6t()}),s.Jn()?i.Hn():(s.K6t(),s.Y6t=i,e.XJ())}}}self._s.a$.k6t.h$={u6t:()=>!0,c6t:()=>!0,H8t(){return this.f8t()}};{const xb=self._s;xb.a$.k6t.Gdt={J8t(t){this.s8t(t)},$8t(t){this.i8t(t)},q8t(t){this.r8t(t/100)},X8t(t){this.o8t(t/100)},Y8t(t){this.l8t(xb.Zn(t))},K8t(t){this.c8t(t)},Z8t(t,s){this.d8t(t/100),this.m8t(s/100)},Q8t(t){this.y8t(t/100)},t7t(t,s){this.w8t(t/100),this.x8t(s/100)},v6t(t){this.WJ().eM(t),this.Nc.XJ()},async S6t(t,s){if(this.Y6t&&this.Y6t.W5()===t)return;const e=this.Nc,i=xb.jn(xb.DLt);try{if(await i.qLt(e,t,!0),!i.g6())throw new Error("image failed to load");if(this.Jn())return i.Hn(),null;if(!await i.b4(e.Ob(),{xT:e.OV(),wT:this.oFt().L6t(),vT:this.oFt().N6t()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.tZ(xb.a$.k6t.h$.c6t))}this.Jn()?i.Hn():(this.K6t(),this.Y6t=i,e.XJ(),await this.n$(xb.a$.k6t.h$.u6t))}}}{const bb=self._s;bb.a$.k6t._dt={E6t(){return this.Akt().by()},F6t(){return this.Akt().Ty()},s7t(){return this.B6t},e7t(){return this.U6t},i7t(){return 100*this.V6t},n7t(){return 100*this.W6t},r7t(){return bb.Qn(this.z6t)},h7t(){return 100*this.p8t()},o7t(){return 100*this.g8t()},a7t(){return 100*this.S8t()},l7t(){return 100*this.v8t()},u7t(){return 100*this.b8t()}}}{const Mb=self._s;Mb.a$.Touch=class extends Mb.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{let Tb=function(){return Ib.Xq().o0()};0;const Gb=self._s,_b=self.Ls;Gb.a$.Touch.SBt=class extends Gb.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}EDt(){return self.c7t}};let Ib=null;self.c7t=class extends self.cX{constructor(t){super(t),Ib=t,t.m$().CJ().PJ=this}requestPermission(t){_b.hi(t);const s=Tb();if("orientation"===t)return s.f7t(0);if("motion"===t)return s.f7t(1);throw new Error("invalid type")}}}{const Cb=self._s,Rb="touch";Cb.a$.Touch.Instance=class extends Cb.KDt{constructor(t,s){super(t,Rb),this.d7t=new Map,this.p7t=!1,this.m7t=!1,this.g7t=0,this.y7t=0,this.S7t=0,this.w7t=0,this.v7t=0,this.x7t=0,this.b7t=0,this.M7t=0,this.T7t=0,this.G7t=0,this._7t=0,this.I7t=0,this.C7t=0,this.R7t=0,this.P7t=0,this.E7t=0,this.F7t=0,this.A7t=[],s&&(this.p7t=s[0]),this.okt("permission-result",t=>this.O7t(t));const e=this.m$().Sf();this.Yf=new Cb.$f(Cb.Vf.Jf(e,"pointerdown",t=>this.D7t(t.data)),Cb.Vf.Jf(e,"pointermove",t=>this.k7t(t.data)),Cb.Vf.Jf(e,"pointerup",t=>this.L7t(t.data,!1)),Cb.Vf.Jf(e,"pointercancel",t=>this.L7t(t.data,!0)),Cb.Vf.Jf(e,"deviceorientation",t=>this.N7t(t.data)),Cb.Vf.Jf(e,"deviceorientationabsolute",t=>this.B7t(t.data)),Cb.Vf.Jf(e,"devicemotion",t=>this.U7t(t.data)),Cb.Vf.Jf(e,"tick2",t=>this.ant()))}Hn(){this.d7t.clear(),super.Hn()}D7t(t){if("mouse"===t.pointerType){if(!this.p7t)return;this.m7t=!0}const s=t.pointerId;if(this.d7t.has(s))return;const e=t.pageX-this.Nc.rq(),i=t.pageY-this.Nc.oq(),n=performance.now(),r=this.d7t.size;this._7t=r,this.I7t=s;const h=Cb.jn(Cb.a$.Touch.V7t);h.UUt(n,e,i,s,r),this.d7t.set(s,h),this.tZ(Cb.a$.Touch.h$.W7t),this.tZ(Cb.a$.Touch.h$.z7t),this.R7t=e,this.P7t=i,this.F7t=0,this.tZ(Cb.a$.Touch.h$.j7t)}k7t(t){if("mouse"===t.pointerType&&!this.m7t)return;const s=this.d7t.get(t.pointerId);if(!s)return;const e=performance.now();if(e-s.uW()<2)return;const i=t.pageX-this.Nc.rq(),n=t.pageY-this.Nc.oq();s.q6(e,i,n,t.width,t.height,t.pressure)}L7t(t,s){if("mouse"===t.pointerType){if(!this.m7t)return;this.m7t=!1}const e=performance.now(),i=t.pointerId,n=this.d7t.get(i);if(n){if(this._7t=n.H7t(),this.I7t=n.j1(),!s){const s=t.pageX-this.Nc.rq(),e=t.pageY-this.Nc.oq();this.R7t=s,this.P7t=e,this.F7t=1,this.tZ(Cb.a$.Touch.h$.j7t)}if(this.tZ(Cb.a$.Touch.h$.J7t),this.tZ(Cb.a$.Touch.h$.$7t),!s){const t=n.q7t(e);"single-tap"===t?(this.tZ(Cb.a$.Touch.h$.X7t),this.R7t=n.dM(),this.P7t=n.gM(),this.tZ(Cb.a$.Touch.h$.Y7t)):"double-tap"===t&&(this.tZ(Cb.a$.Touch.h$.K7t),this.R7t=n.dM(),this.P7t=n.gM(),this.tZ(Cb.a$.Touch.h$.Z7t))}n.Hn(),this.d7t.delete(i)}}f7t(t){return this.ckt("request-permission",{type:t}),new Promise((s,e)=>{this.A7t.push({type:t,resolve:s,reject:e})})}O7t(t){const s=t.result,e=t.type;this.C7t=e;const i=this.A7t.filter(t=>t.type===e);for(const t of i)t.resolve(s?"granted":"denied");this.A7t=this.A7t.filter(t=>t.type!==e),s?(this.tZ(Cb.a$.Touch.h$.Q7t),0===e?this.Nc.r0t():this.Nc.h0t()):this.tZ(Cb.a$.Touch.h$.t9t)}N7t(t){"number"==typeof t.webkitCompassHeading?this.g7t=t.webkitCompassHeading:t.absolute&&(this.g7t=t.alpha),this.y7t=t.alpha,this.S7t=t.beta,this.w7t=t.gamma}B7t(t){this.g7t=t.alpha}U7t(t){const s=t.acceleration;s&&(this.v7t=s.x,this.x7t=s.y,this.b7t=s.z);const e=t.accelerationIncludingGravity;e&&(this.M7t=e.x,this.T7t=e.y,this.G7t=e.z)}ant(){const t=performance.now();let s=0;for(const e of this.d7t.values())e.uW()<=t-50&&e.s9t(t),e.e9t(t)&&(this._7t=e.H7t(),this.I7t=e.j1(),this.E7t=s,this.tZ(Cb.a$.Touch.h$.i9t),this.R7t=e.dM(),this.P7t=e.gM(),this.tZ(Cb.a$.Touch.h$.n9t),this.E7t=0),++s}r9t(t){t=Math.floor(t);for(const s of this.d7t.values()){if(0===t)return s;--t}return null}h9t(t,s){return t>=0&&s>=0&&t<this.Nc.RZt()&&s<this.Nc.PZt()}vkt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.d7t.values()].map(t=>({name:"$"+t.j1(),value:t.dM()+", "+t.gM()}))}]}}}{const Pb=self._s;Pb.a$.Touch.h$={z7t:()=>!0,$7t:()=>!0,o9t(){return this.d7t.size>0},j7t(t,s){return!!t&&s===this.F7t&&!!this.h9t(this.R7t,this.P7t)&&this.Nc.Nj().CHt(t,[[this.R7t,this.P7t]],!1)},a9t(t){if(!t)return!1;const s=this.Nc.JMt().dEt(),e=[...this.d7t.values()].filter(t=>this.h9t(t.dM(),t.gM())).map(t=>[t.dM(),t.gM()]);return Pb.xor(this.Nc.Nj().CHt(t,e,s),s)},l9t(t,s,e){const i=this.r9t(t);return!!i&&Pb.compare(i.R0(),s,e)},u9t:()=>!0,c9t:()=>!0,f9t(t,s,e){this.Nc.r0t();let i=0;return i=0===t?this.y7t:1===t?this.S7t:this.w7t,Pb.compare(i,s,e)},d9t(t,s,e){this.Nc.h0t();let i=0;return i=0===t?this.M7t:1===t?this.T7t:2===t?this.G7t:3===t?this.v7t:4===t?this.x7t:this.b7t,Pb.compare(i,s,e)},W7t(t){return(t=Math.floor(t))===this._7t},J7t(t){return(t=Math.floor(t))===this._7t},p9t(t){return t=Math.floor(t),this.d7t.size>=t+1},i9t:()=>!0,X7t:()=>!0,K7t:()=>!0,n9t(t){return!!t&&!!this.h9t(this.R7t,this.P7t)&&this.Nc.Nj().CHt(t,[[this.R7t,this.P7t]],!1)},Y7t(t){return!!t&&!!this.h9t(this.R7t,this.P7t)&&this.Nc.Nj().CHt(t,[[this.R7t,this.P7t]],!1)},Z7t(t){return!!t&&!!this.h9t(this.R7t,this.P7t)&&this.Nc.Nj().CHt(t,[[this.R7t,this.P7t]],!1)},Q7t(t){return this.C7t===t},t9t(t){return this.C7t===t}}}self._s.a$.Touch.Gdt={m9t(t){this.f7t(t)}};{const Eb=self._s;Eb.a$.Touch._dt={g9t(){return this.d7t.size},yOt(t){const s=this.r9t(this.E7t);return s?s.y9t(this.Nc.UJ(),t,!0):0},SOt(t){const s=this.r9t(this.E7t);return s?s.y9t(this.Nc.UJ(),t,!1):0},S9t(t,s){const e=this.r9t(t);return e?e.y9t(this.Nc.UJ(),s,!0):0},w9t(t,s){const e=this.r9t(t);return e?e.y9t(this.Nc.UJ(),s,!1):0},v9t(t,s){const e=this.d7t.get(t);return e?e.y9t(this.Nc.UJ(),s,!0):0},x9t(t,s){const e=this.d7t.get(t);return e?e.y9t(this.Nc.UJ(),s,!1):0},b9t(){const t=this.r9t(0);return t?t.dM():0},M9t(){const t=this.r9t(0);return t?t.gM():0},T9t(t){const s=this.r9t(t);return s?s.dM():0},G9t(t){const s=this.r9t(t);return s?s.gM():0},_9t(t){const s=this.d7t.get(t);return s?s.dM():0},I9t(t){const s=this.d7t.get(t);return s?s.gM():0},C9t(t){const s=this.r9t(t);return s?s.R0():0},R9t(t){const s=this.d7t.get(t);return s?s.R0():0},P9t(t){const s=this.r9t(t);return s?Eb.Qn(s.UX()):0},E9t(t){const s=this.d7t.get(t);return s?Eb.Qn(s.UX()):0},F9t(){return this.Nc.r0t(),this.g7t},A9t(){return this.Nc.r0t(),this.y7t},O9t(){return this.Nc.r0t(),this.S7t},D9t(){return this.Nc.r0t(),this.w7t},k9t(){return this.Nc.h0t(),this.M7t},L9t(){return this.Nc.h0t(),this.T7t},N9t(){return this.Nc.h0t(),this.G7t},B9t(){return this.Nc.h0t(),this.v7t},U9t(){return this.Nc.h0t(),this.x7t},V9t(){return this.Nc.h0t(),this.b7t},W9t(){return this._7t},z9t(){return this.I7t},j9t(t){const s=this.d7t.get(t);return s?s.by():0},H9t(t){const s=this.d7t.get(t);return s?s.Ty():0},J9t(t){const s=this.d7t.get(t);return s?s.$9t():0}}}{const Fb=self._s;let Ab=-1e3,Ob=-1e3,Db=-1e4;Fb.a$.Touch.V7t=class extends Fb.Wn{constructor(){super(),this.q9t=0,this.uC=0,this.HYt=0,this.oz=0,this.X9t=0,this.Y9t=0,this.K9t=0,this.Ra=0,this.Pa=0,this.Z9t=0,this.Q9t=0,this.Vy=0,this.Wy=0,this.tts=0,this.sts=!1,this.ets=!1}Hn(){}UUt(t,s,e,i,n){this.q9t=i,this.uC=n,this.oz=t,this.X9t=t,this.HYt=t,this.Y9t=s,this.K9t=e,this.Ra=s,this.Pa=e,this.Z9t=s,this.Q9t=e}q6(t,s,e,i,n,r){this.X9t=this.oz,this.oz=t,this.Z9t=this.Ra,this.Q9t=this.Pa,this.Ra=s,this.Pa=e,this.Vy=i,this.Wy=n,this.tts=r,!this.ets&&Fb.er(this.Y9t,this.K9t,this.Ra,this.Pa)>=15&&(this.ets=!0)}j1(){return this.q9t}H7t(){return this.uC}uW(){return this.oz}s9t(t){this.X9t=t}dM(){return this.Ra}gM(){return this.Pa}R0(){const t=Fb.er(this.Ra,this.Pa,this.Z9t,this.Q9t),s=(this.oz-this.X9t)/1e3;return s>0?t/s:0}UX(){return Fb.nr(this.Z9t,this.Q9t,this.Ra,this.Pa)}by(){return this.Vy}Ty(){return this.Wy}$9t(){return this.tts}e9t(t){return!this.sts&&t-this.HYt>=500&&!this.ets&&Fb.er(this.Y9t,this.K9t,this.Ra,this.Pa)<15&&(this.sts=!0,!0)}q7t(t){return this.sts?"":t-this.HYt<=333&&!this.ets&&Fb.er(this.Y9t,this.K9t,this.Ra,this.Pa)<15?t-Db<=666&&Fb.er(Ab,Ob,this.Ra,this.Pa)<25?(Ab=-1e3,Ob=-1e3,Db=-1e4,"double-tap"):(Ab=this.Ra,Ob=this.Pa,Db=t,"single-tap"):""}y9t(t,s,e){if(void 0===s)return t.HJ(0).nst(this.Ra,this.Pa)[e?0:1];{const i=t.zJ(s);return i?i.oK(this.Ra,this.Pa)[e?0:1]:0}}}}{const kb=self._s;kb.a$.Text=class extends kb.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const Lb=self._s;Lb.a$.Text.SBt=class extends Lb.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}Met(t){}Ret(){}}}{const Nb=self._s,Bb=self.Ls,Ub=[0,0,0],Vb=0,Wb=1,zb=2,jb=3,Hb=4,Jb=5,$b=6,qb=7,Xb=8,Yb=9,Kb=10,Zb=11,Qb=12,tM=13,sM=15,eM=["left","center","right"],iM=["top","center","bottom"],nM=["ltr","rtl"],rM=["word","cjk","character"],hM=new Nb.Rect,oM=new Nb.Cl,aM=new Nb.Mo,lM=Nb.jn(Nb.Ca),uM=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);Nb.a$.Text.Instance=class extends Nb.Gkt{constructor(t,s){if(super(t),this.Bc="",this.its=!0,this.nts="Arial",this.rts=12,this.hts=0,this.LR=!1,this.NR=!1,this.Kb=Nb.jn(Nb.Mo),this.jR=0,this.HR=0,this.qR="word",this.XR=0,this.ots="auto",this.ats=1,this.lts=null,this.uts="",this.cts=!1,this.fts=!1,this.dts=null,this.pts=-1,this.mts=-1,this.gts=0,this.yts=Nb.jn(Nb.$S.ub,this.Nc.Ob(),{timeout:5}),this.yts.IP=()=>this.Nc.XJ(),this.Sts=()=>this.wts(),this.vts=!1,this.xts=()=>this.bts(),s){this.Bc=s[Vb],this.its=!!s[Wb],this.nts=s[zb],this.rts=s[jb],this.hts=s[Hb],this.LR=!!s[Jb],this.NR=!!s[$b],this.jR=s[Xb],this.HR=s[Yb],this.qR=rM[s[Kb]],this.XR=s[Zb],this.Mts(this.Nc.x3(s[Qb]));const t=s[qb];this.Kb.Ro(t[0],t[1],t[2]),this.WJ().TY(s[tM]),this.fts=!!s[sM]}this.Tts(),this.Gts(),this.Nc.Sf().addEventListener("beforerender",this.xts)}Hn(){this.Nc.Sf().removeEventListener("beforerender",this.xts),this.xts=null,this.Mts(null),this._ts(),this.dts&&(this.dts.Hn(),this.dts=null),this.yts.Hn(),this.yts=null,super.Hn()}Tts(){const t=this.yts;t.Wc(this.Bc),t.PP(this.its),this.yts.RR()&&this.lts?this.yts.sy(this.m$().RQt(this.lts)):this.yts.sy(null),t.EP("nearest"!==this.Nc.OV()),t.FP(this.nts),t.kP(this.hts),t.NP(this.LR),t.UP(this.NR),t.iM(this.Kb),t.$P(eM[this.jR]),t.XP(iM[this.HR]),t.KP(this.qR),t.QP(nM[this.XR])}Its(){const t=this.WJ();this.yts.Wc(this.Bc),this.yts.AP(this.rts),this.yts.DP(t.Szt());const s=t.zJ();let e;"auto"===this.ots?(e=s.htt(t.WZ()),this.yts.eE(!1)):"fixed"===this.ots&&(e=this.ats,this.yts.eE(!0)),t.KQ()&&e!==this.yts.rE()&&t.xjt(!0),this.yts.nE(t.by(),t.Ty(),e)}Mts(t){t&&(t.N7()||t.Zq().constructor!==Nb.a$.Jft)||t!==this.lts&&(this.lts&&this.lts.Sf().removeEventListener("animationframeimagechange",this.Sts),this.lts=t,this.lts&&this.lts.Sf().addEventListener("animationframeimagechange",this.Sts),this.Tts(),this.cts=!1,this.Nc.XJ())}wts(){this.Nc.PQt(this.lts),this.Nc.XJ(),this.vts=!0}Gts(){if(this.fts){let t=this.Bc;this.its&&(t=Nb.dn.Dg(t)),this.dts?this.dts.Wc(t):this.dts=Nb.jn(Nb.Lc,this.Nc,t)}else this.dts&&(this.dts.Hn(),this.dts=null)}bts(){const t=this.WJ(),s=t.zJ(),e=t.bJ();t._Y()&&t.Ltt(s.rK(),e.ktt(),e.mY())&&(this.Its(),this.vts&&(this.vts=!1,this.yts.RR()&&this.lts&&this.yts.sy(this.m$().RQt(this.lts))),this.yts.kG())}lT(t){const s=this.yts.kG();if(!s)return;const e=this.WJ(),i=e.zJ();if(0===e.UX()&&0===i.UX()&&0===e.WZ()&&!e.KQ()&&i.M9()){const n=e.$Z(),[r,h]=i.dK(n.Nr(),n.Br()),[o,a]=i.dK(n.Wr(),n.zr()),l=r-Math.round(r),u=h-Math.round(h);hM.set(r,h,o,a),hM.offset(-l,-u),oM.Xl(hM);const[c,f]=t.hO(t.GO());t.nb()?this.Nc.AJ().E4(t,c,f):(t.fB(!0),oM.St(c,f)),t.zA(s),t.wx(oM,this.yts.kE()),t.nb()?i.A4(t):t.fB(!1)}else t.zA(s),e.KQ()?this.c5t(e,t):this.f5t(e,t)}f5t(t,s){let e=t.$Z();this.Nc.fJ()&&(e=this.Cts(e)),s.wx(e,this.yts.kE())}c5t(t,s){const e=t.vjt();if(t.bjt()){t.jZ(hM,oM,!1);let s=oM;this.Nc.fJ()&&(s=this.Cts(s)),e.iT(t.ZQ(),s,this.yts.kE()),t.xjt(!1)}e.lT(s,t.WZ())}Cts(t){const s=t.Nr()-Math.round(t.Nr()),e=t.Br()-Math.round(t.Br());return 0===s&&0===e?t:(oM.m(t),oM.offset(-s,-e),oM)}Okt(){const t=this.yts.kG();return t?[t.by(),t.Ty()]:[100,100]}Dkt(){return this.yts.kE()}Nkt(){return!1}_M(){const t={t:this.Bc,c:this.Kb.toJSON(),fn:this.nts,ps:this.rts};return this.its&&(t.bbc=this.its),0!==this.jR&&(t.ha=this.jR),0!==this.HR&&(t.va=this.HR),"word"!==this.qR&&(t.wr=this.qR),0!==this.hts&&(t.lho=this.hts),this.LR&&(t.b=this.LR),this.NR&&(t.i=this.NR),-1!==this.mts&&(t.tw={st:this.pts,en:this.mts,l:this.gts}),this.lts&&(t.ioc=this.lts.H7()),"fixed"===this.ots&&(t.fs=this.ats),t}IM(t){if(this._ts(),this.Bc=t.t,this.Kb.Sa(t.c),this.nts=t.fn,this.rts=t.ps,this.its=!!t.hasOwnProperty("bbc")&&t.bbc,this.jR=t.hasOwnProperty("ha")?t.ha:0,this.HR=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.qR="boolean"==typeof s?s?"word":"character":s}else this.qR="word";if(this.hts=t.hasOwnProperty("lho")?t.lho:0,this.LR=!!t.hasOwnProperty("b")&&t.b,this.NR=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.pts=s.st,this.mts=s.en,this.gts=s.l}if(t.hasOwnProperty("ioc")){const s=this.m$().x3(t.ioc);s&&this.Mts(s)}else this.Mts(null);t.hasOwnProperty("fs")?(this.ots="fixed",this.ats=t.fs):this.ots="auto",this.Tts(),this.Gts(),this.cts=!1,-1!==this.mts&&this.gkt()}apt(t){switch(t){case Vb:return this.sE();case Wb:return this.its;case zb:return this.Rts();case jb:return this.Pts();case Hb:return this.Ets();case Jb:return this.Fts();case $b:return this.Ats();case qb:return Ub[0]=this.Kb.Lo(),Ub[1]=this.Kb.No(),Ub[2]=this.Kb.Bo(),Ub;case Xb:return this.Ots();case Yb:return this.Dts();case Kb:return this.kts();case sM:return this.Lts()}}ppt(t,s){switch(t){case Vb:this.Nts(s);break;case Wb:if(this.its===!!s)return;this.its=!!s,this.Tts();break;case zb:this.Bts(s);break;case jb:this.Uts(s);break;case Hb:this.Vts(s);break;case Jb:this.Wts(s);break;case $b:this.zts(s);break;case qb:const t=this.Kb,e=s;if(t.Lo()===e[0]&&t.No()===e[1]&&t.Bo()===e[2])return;this.Kb.Ro(e[0],e[1],e[2]),this.Tts();break;case Xb:this.jts(s);break;case Yb:this.Hts(s);break;case Kb:this.Jts(s)}}xkt(t,s,e,i){0===s&&0===e&&0===i||t!==qb||(this.Kb.Po(s,e,i),this.Tts())}Nts(t){this.Bc!==t&&(this.Bc=t,this.Gts(),this.cts=!1,this.Nc.XJ())}sE(){return this.Bc}$ts(t,s){this.Nts(t),this.Its(),this.pts=this.Nc.zH(),this.mts=this.pts+s/this.N1().kK(),this.gts=this.yts.lE(),this.yts.WP(0),this.gkt()}_ts(){this.pts=-1,this.mts=-1,this.gts=0,this.yts.WP(-1),this.tkt()}qts(){-1!==this.mts&&(this._ts(),this.tZ(Nb.a$.Text.h$.Xts),this.Nc.XJ())}Bts(t){this.nts!==t&&(this.nts=t,this.yts.FP(t),this.Nc.XJ())}Rts(){return this.nts}Wts(t){t=!!t,this.LR!==t&&(this.LR=t,this.yts.NP(t),this.Nc.XJ())}Fts(){return this.LR}zts(t){t=!!t,this.NR!==t&&(this.NR=t,this.yts.UP(t),this.Nc.XJ())}Ats(){return this.NR}Uts(t){this.rts!==t&&(this.rts=t,this.Nc.XJ())}Pts(){return this.rts}Yts(t){this.Kb.Ho(t)||(this.Kb.ko(t),this.yts.iM(this.Kb),this.Nc.XJ())}Kts(){return this.Kb}Vts(t){this.hts!==t&&(this.hts=t,this.Tts(),this.Nc.XJ())}Ets(){return this.hts}jts(t){this.jR!==t&&(this.jR=t,this.Tts(),this.Nc.XJ())}Ots(){return this.jR}Hts(t){this.HR!==t&&(this.HR=t,this.Tts(),this.Nc.XJ())}Dts(){return this.HR}Zts(t){this.Jts(rM[t])}Jts(t){this.qR!==t&&(this.qR=t,this.Tts(),this.Nc.XJ())}kts(){return this.qR}Qts(t){this.XR!==t&&(this.XR=t,this.Tts(),this.Nc.XJ())}tss(){return this.XR}sss(t){this.fts=!!t,this.Gts()}Lts(){return this.fts}ess(t){this.ots!==t&&(this.ots=t,this.Nc.XJ())}iss(){return this.ots}nss(t){this.ats!==t&&(this.ats=t,"fixed"===this.ots&&this.Nc.XJ())}rss(){return this.ats}hss(){return this.Its(),this.yts.hE()}oss(){return this.Its(),this.yts.aE()}ass(t,s){this.Its();const e=this.WJ();lM.set(t-e.dM(),s-e.gM()),lM.rotate(-e.UX()),lM.offset(e.by()*e.OZ(),e.Ty()*e.LZ()),lM.St(e.by(),e.Ty()),lM.scale(this.yts.by(),this.yts.Ty());const i=this.yts.cE(lM.Aa(),lM.Da());if(i){const t=i.eS("tag");if(t)return t.Rg}return""}lss(t,s,e){const i=this.ass(s,e);return i&&Nb.Ki(t,i)}uss(t,s){this.Its(),s=Math.floor(s);const e=this.yts.dE(t,s);if(!e)return null;const i=this.WJ(),n=this.yts.HP(),r=e.Ky(),h=e.Qy()-(e.Ty()-e._y())*n,o=e.by()*n/this.yts.by()*i.by(),a=e.Ty()*n/this.yts.Ty()*i.Ty();return lM.set(r,h),lM.St(this.yts.by(),this.yts.Ty()),lM.scale(i.by(),i.Ty()),lM.offset(-i.by()*i.OZ(),-i.Ty()*i.LZ()),lM.rotate(i.UX()),lM.offset(i.dM(),i.gM()),{x:lM.Aa(),y:lM.Da(),width:o,height:a}}css(t){return this.Its(),this.yts.pE(t)}fss(t){let s=uM.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}dss(t,s){let e=uM.get(t);if(null===e)return"";switch(e||(e="span"),t){case"color":return`<${e} style="color: ${s}">`;case"font":return`<${e} style="font-family: '${s}'">`;case"opacity":return`<${e} style="opacity: ${s}%">`;case"size":return`<${e} style="font-size: ${s}pt">`;case"background":return`<${e} style="background-color: ${s}">`;case"hide":return`<${e} style="visibility: hidden">`;case"class":return`<${e} class="${s}">`;case"tag":return`<${e} data-tag="${s}">`;default:return`<${e}>`}}async pss(){if(this.cts)return this.uts;const t=new Nb.dn(this.Bc,{pg:!0}).Ig(),s=new Map;let e='<span class="c3-text"';const i=[];i.push(`font-family: '${this.Rts()}';`),this.Fts()&&i.push("font-weight: bold;"),this.Ats()&&i.push("font-style: italic;"),"character"===this.kts()&&i.push("word-break: break-all;"),e+=` style="${i.join(" ")}">`;const n=this.lts?this.m$().RQt(this.lts):null;if(this.lts){const e=Nb.jn(Nb.jd),i=[],r=new Map;for(const s of t)if(s.wy()){const t=s.aS(n);if(t){const s=t.zS().J0().sNt();if(r.has(s))continue;r.set(s,null),i.push(e.Bu(async()=>{const t=await s.I6();r.set(s,t)}))}}await Promise.all(i);const h=[];for(const i of t)if(i.wy()){const t=i.aS(n);if(t){const i=t.zS(),n=i.J0().sNt();h.push(e.Bu(async()=>{const e=await i.J0().iNt(r.get(n));s.set(t,e)}))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const i of t){const t=i.nS();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),e+=this.fss(s));for(const[s,i]of t)r.has(s)||(r.set(s,i),e+=this.dss(s,i));if(i.zg()&&(e+=Nb.Rm(Nb.Im(i.Jg().join("")),"\n","<br>")),i.wy()&&n){const r=i.aS(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Nc.OV()&&s.push("image-rendering: pixelated"),e+=`<img class="c3-text-icon" data-icon="${i.oS()}" width="${r.by()}" height="${r.Ty()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)e+=this.fss(t);return e+="</span>",this.uts=e,this.cts=!0,this.uts}yrt(){const t=this.Nc.zH();if(t>=this.mts)this._ts(),this.tZ(Nb.a$.Text.h$.Xts),this.Nc.XJ();else{let s=Nb.mr(this.pts,this.mts,t,0,this.gts);s=Math.floor(s),s!==this.yts.zP()&&(this.yts.WP(s),this.Nc.XJ())}}vkt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.sE(),V5t:t=>this.Nts(t)},{name:t+".properties.font.name",value:this.Rts(),V5t:t=>this.Bts(t)},{name:t+".properties.size.name",value:this.Pts(),V5t:t=>this.Uts(t)},{name:t+".properties.line-height.name",value:this.Ets(),V5t:t=>this.Vts(t)},{name:t+".properties.bold.name",value:this.Fts(),V5t:t=>this.Wts(t)},{name:t+".properties.italic.name",value:this.Ats(),V5t:t=>this.zts(t)},{name:t+".debugger.text-width",value:this.hss()},{name:t+".debugger.text-height",value:this.oss()}]}]}EDt(){return self.mss}};const cM=new WeakMap,fM=new Map([["left",0],["center",1],["right",2]]),dM=new Map([["top",0],["center",1],["bottom",2]]),pM=["ltr","rtl"];self.mss=class extends self.e0{constructor(){super(),cM.set(this,self.gK.vK().o0())}get text(){return cM.get(this).sE()}set text(t){Bb.hi(t);const s=cM.get(this);s._ts(),s.Nts(t)}gss(t,s){Bb.hi(t),Bb.ei(s);const e=cM.get(this);e._ts(),e.$ts(t,s)}yss(){cM.get(this).qts()}set D4(t){Bb.hi(t),cM.get(this).Bts(t)}get D4(){return cM.get(this).Rts()}set N4(t){cM.get(this).Wts(t)}get N4(){return cM.get(this).Fts()}set B4(t){cM.get(this).zts(t)}get B4(){return cM.get(this).Ats()}set L4(t){Bb.ei(t),cM.get(this).Uts(t)}get L4(){return cM.get(this).Pts()}set Sss(t){if(Bb.Mi(t),t.length<3)throw new Error("expected 3 elements");aM.Ro(t[0],t[1],t[2]),cM.get(this).Yts(aM)}get Sss(){const t=cM.get(this).Kts();return[t.Lo(),t.No(),t.Bo()]}set lineHeight(t){Bb.ei(t),cM.get(this).Vts(t)}get lineHeight(){return cM.get(this).Ets()}set W4(t){Bb.hi(t);const s=fM.get(t);if(void 0===s)throw new Error("invalid mode");cM.get(this).jts(s)}get W4(){return eM[cM.get(this).Ots()]}set verticalAlign(t){Bb.hi(t);const s=dM.get(t);if(void 0===s)throw new Error("invalid mode");cM.get(this).Hts(s)}get verticalAlign(){return iM[cM.get(this).Dts()]}set z4(t){if(!rM.includes(t))throw new Error("invalid mode");cM.get(this).Jts(t)}get z4(){return cM.get(this).kts()}set j4(t){Bb.hi(t);const s=pM.indexOf(t);if(-1===s)throw new Error("invalid text direction");cM.get(this).Qts(s)}get j4(){return pM[cM.get(this).tss()]}set wss(t){cM.get(this).sss(!!t)}get wss(){return cM.get(this).Lts()}vss(t){Bb.ei(t);const s=cM.get(this);s.ess("fixed"),s.nss(t)}xss(){cM.get(this).ess("auto")}get q4(){return cM.get(this).hss()}get X4(){return cM.get(this).oss()}bss(){const t=cM.get(this);return[t.hss(),t.oss()]}Mss(t,s,e){return Bb.hi(t),Bb.ei(s),Bb.ei(e),cM.get(this).lss(t,s,e)}Tss(t,s){return Bb.ei(t),Bb.ei(s),cM.get(this).ass(t,s)}Gss(t,s=0){return Bb.hi(t),Bb.ei(s),cM.get(this).uss(t,s)}_ss(t){return Bb.hi(t),cM.get(this).css(t)}Iss(t){const s=cM.get(this),e=s.m$().J$(t);s.Mts(e)}Css(){return cM.get(this).pss()}}}{const mM=self._s;mM.a$.Text.h$={Rss(t,s){return s?this.Bc===t:mM.Ki(this.Bc,t)},Pss(){return-1!==this.mts},Xts:()=>!0,Ess(t,s,e){return this.lss(t,s,e)}}}{const gM=self._s,yM=gM.jn(gM.Mo);gM.a$.Text.Gdt={Wc(t){this._ts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.Nts(t.toString())},Fss(t){this._ts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.Nts(this.Bc+t)},Ass(t,s){this._ts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.$ts(t.toString(),s)},Oss(t,s){let e=!1,i=!1;switch(s){case 1:e=!0;break;case 2:i=!0;break;case 3:e=!0,i=!0}t===this.nts&&e===this.LR&&i===this.NR||(this.Bts(t),this.Wts(e),this.zts(i))},AP(t){this.Uts(t)},Dss(t){yM.Qo(t),yM.Yn(),this.Yts(yM)},kss(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},v6t(t){this.WJ().eM(t),this.Nc.XJ()},Lss(){this.qts()},kP(t){this.Vts(t)},Nss(t){this.jts(t)},Bss(t){this.Hts(t)},Uss(t){this.Zts(t)},QP(t){this.Qts(t)},Vss(t){this.Mts(t)},Wss(){return this.pss()},zss(t){this.sss(t)},jss(t,s){this.ess(["auto","fixed"][t]),this.nss(s)}}}{const SM=self._s;SM.a$.Text._dt={Text(){return this.Bc},Hss(){return this.its?SM.dn.Dg(this.Bc):this.Bc},Jss(){return this.nts},$ss(){return this.rts},qss(){return this.hss()},Xss(){return this.oss()},Yss(){return this.hts},Kss(t,s){return this.ass(t,s)},Zss(t){return this.css(t)},Qss(t,s){const e=this.uss(t,s);return e?e.x:0},tes(t,s){const e=this.uss(t,s);return e?e.y:0},ses(t,s){const e=this.uss(t,s);return e?e.width:0},ees(t,s){const e=this.uss(t,s);return e?e.height:0},ies(){return this.uts}}}{const wM=self._s;wM.a$.nes=class extends wM.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const vM=self._s;vM.a$.nes.SBt=class extends vM.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){this.J0().p$(this.Nc)}Met(t){return this.J0().b4(t,{xT:this.Nc.OV()})}Ret(){this.J0().TP()}}}{let xM=function(t){return qM.get(t).res()};0;const bM=self._s,MM=self.Ls,TM=0,GM=1,_M=2,IM=3,CM=4,RM=5,PM=6,EM=7,FM=8,AM=9,OM=10,DM=11,kM=12,LM=13,NM=14,BM=15,UM=16,VM=17,WM=18,zM=19,jM=20,HM=0,JM=1,$M=bM.jn(bM.Rect);bM.a$.nes.Instance=class extends bM.Gkt{constructor(t,s){super(t),this.hes=!0;const e=bM.jn(self.oes);this.aes=e,e.les=()=>this.ues(),this.ces=null,this.fes=(t,s,e,i,n,r)=>this.des(t,s,e,i,n,r),this.pes=t=>this.mes(t),this.ges=!0;let i=!0;s&&(e.yes(s[TM]),e.Ses(bM.Zn(s[GM])),e.wes(s[_M]?"one-shot":"continuous-spray"),this.ves(this.Nc.x3(s[IM])),i=s[CM],e.xes(s[RM]),e.bes(s[PM]),e.Mes(s[EM]/100),e.Tes(s[FM]),e.Ges(s[AM]),e._es(s[OM]),e.Ies(s[DM]),e.Ces(s[kM]),e.Res(s[LM]),e.Pes(s[NM]),e.Ees(s[BM]),e.Fes(s[UM]),e.Aes(s[VM]),e.Oes(s[WM]),e.Des(s[zM]),e.kes(s[jM])),this.Les(),this.ces&&(this.ges=!1),"one-shot"===e.Nes()?e.Bes():e.Ues(!0);const n=this.WJ();n.TY(i),n.ijt(!0),this.ce.Sf().addEventListener("bboxchange",()=>{n.ejt(this.aes.HZ())}),this.m$().Ob().dv()&&n.$zt(),this.ynt=t=>this.Snt(t),this.m$().Sf().addEventListener("afterload",this.ynt),this.gkt()}Hn(){this.m$().Sf().removeEventListener("afterload",this.ynt),this.ynt=null,this.aes.Hn(),this.aes=null,this.fes=null,this.pes=null,super.Hn()}res(){return this.aes}Ves(t){this.aes.yes(t),"one-shot"===this.aes.Nes()&&this.hes&&this.aes.Wes(t)}ves(t){t===this.yK()&&(t=null),t!==this.ces&&(this.ces=t,this.aes.zes=t?t=>this.jes(t):null,this.ces||(this.ges=!0))}Les(){const t=this.aes,s=this.WJ();t.Hes(s.NA()),t.s2t(this.Nc.fJ()),t.Jes(s.dM()),t.$es(s.gM()),t.qes(s.UX()),t.Xes(Math.abs(s.Szt()))}ues(){this.Nc.MK(this.ce)}lT(t){if(!this.ges)return;const s=this._xt.J0(),e=s.kG();if(!e)return;const i=this.WJ(),n=i.zJ(),r=$M;this.Nc.AJ().Xqt()?r.set(-1/0,-1/0,1/0,1/0):n.G9()?n.est(i.WZ(),r):n.c9(i.WZ(),r),t.zA(e);const h=n.f9(i.WZ());this.aes.Yes(n.mK()*h),this.aes.lT(t,s.Lkt(),r,n.G9())}_M(){const t=this.aes;return{r:t.Kes(),sc:t.Zes(),st:t.Nes(),isp:t.Qes(),isz:t.tis(),io:t.sis(),gr:t.eis(),xr:t.iis(),yr:t.nis(),spr:t.ris(),szr:t.his(),grnd:t.ois(),acc:t.ais(),g:t.lis(),lar:t.uis(),lsr:t.cis(),lor:t.fis(),dm:t.dis(),to:t.pis(),s:t.mis(),pcc:t.gis(),ft:this.hes,soc:this.ces?this.ces.H7():null,p:t.yis().map(t=>t.toJSON())}}IM(t,s){const e=this.aes;if(e.yes(t.r),e.Ses(t.sc),e.wes(t.st),e.xes(t.isp),e.bes(t.isz),e.Mes(t.io),e.Tes(t.gr),e.Ges(t.xr),e._es(t.yr),e.Ies(t.spr),e.Ces(t.szr),e.Res(t.grnd),e.Pes(t.acc),e.Ees(t.g),e.Fes(t.lar),e.Aes(t.lsr),e.Oes(t.lor),e.Des(t.dm),e.kes(t.to),e.Ues(t.s),e.Sis(t.pcc),this.hes=t.ft,t.hasOwnProperty("soc")){const s=this.m$().x3(t.soc);s&&this.ves(s)}const i=t.p;e.Wes(i.length,!1);const n=e.yis();for(let t=0,s=n.length;t<s;++t)n[t].Sa(i[t]);"state"===s&&this.ces&&(e.wis(),e.vis(this))}Snt(){const t=this.aes;t.wis(),t.vis(this);const s=t.yis();for(let t=0,e=s.length;t<e;++t){const e=s[t],i=e.xis();if(!i)continue;const n=i.WJ();if(!n)continue;const r=n.N1();if(!r)continue;const h=e.bis(),o=r.PK();if(("number"!=typeof h||"number"!=typeof o||h!==o)&&"number"==typeof h){const t=this.m$(),s=t.LJ(h);s&&t.MK(s)}}}yrt(){const t=this.Nc.DH(this.ce);this.Les(),this.hes&&"one-shot"===this.aes.Nes()&&this.aes.Mis(),this.aes.yrt(t),this.aes.mis()&&this.Nc.XJ(),this.WJ().RZ(),this.hes=!1}Tis(t){const s=1/60;for(this.hes&&"one-shot"===this.aes.Nes()&&this.aes.Mis();t>0;)this.aes.yrt(s),t-=s;this.aes.mis()&&this.Nc.XJ(),this.WJ().RZ(),this.hes=!1}jes(t,s){let e;"number"==typeof s&&(e=this.Nc.LJ(s)),e&&e.yK()!==this.ces&&(e=null),e||(e=this.Nc.mX(this.ces,this.WJ().zJ(),t.dM(),t.gM()));const i=e.WJ();return i.nE(t.Au(),t.Au()),i.BX(t.UX()),i.UA(t.NA()),i.ZZ(this.WJ().KZ()),i.RZ(),i.hQ(this.N1(),!0),e.qet(),t.Gis(this.fes),t._is(this.pes),e}des(t,s,e,i,n,r){if(t.D2())return;const h=t.WJ();h.FZ(s,e),h.nE(h.by()+i,h.Ty()+i),h.BX(h.UX()+n),h.UA(h.NA()+r),h.RZ()}mes(t){t.D2()||this.Nc.MK(t)}apt(t){const s=this.aes;switch(t){case TM:return s.Kes();case GM:return bM.Qn(s.Zes());case _M:return"one-shot"===s.Nes()?JM:HM;case RM:return s.Qes();case PM:return s.tis();case EM:return 100*s.sis();case FM:return s.eis();case AM:return s.iis();case OM:return s.nis();case DM:return s.ris();case kM:return s.his();case LM:return s.ois();case NM:return s.ais();case BM:return s.lis();case UM:return s.uis();case VM:return s.cis();case WM:return s.fis();case zM:return s.dis();case jM:return s.pis()}}ppt(t,s){const e=this.aes;switch(t){case TM:e.yes(s);break;case GM:e.Ses(bM.Zn(s));break;case _M:e.wes(s?"one-shot":"continuous-spray");break;case RM:e.xes(s);break;case PM:e.bes(s);break;case EM:e.Mes(s/100);break;case FM:e.Tes(s);break;case AM:e.Ges(s);break;case OM:e._es(s);break;case DM:e.Ies(s);break;case kM:e.Ces(s);break;case LM:e.Res(s);break;case NM:e.Pes(s);break;case BM:e.Ees(s);break;case UM:e.Fes(s);break;case VM:e.Aes(s);break;case WM:e.Oes(s);break;case zM:e.Des(s);break;case jM:e.kes(s)}}vkt(){const t="plugins.particles",s=t+".properties",e=t+".debugger",i=this.aes;return[{title:t+".name",properties:[{name:e+".particle-count",value:i.Iis()},{name:s+".type.name",value:[s+".type.items."+i.Nes()]},{name:e+".is-spraying",value:i.mis(),V5t:t=>i.Ues(t)},{name:s+".rate.name",value:i.Kes(),V5t:t=>i.yes(t)},{name:s+".spray-cone.name",value:bM.Qn(i.Zes()),V5t:t=>i.Ses(bM.Zn(t))},{name:s+".speed.name",value:i.Qes(),V5t:t=>i.xes(t)},{name:s+".size.name",value:i.tis(),V5t:t=>i.bes(t)},{name:s+".opacity.name",value:i.sis(),V5t:t=>i.Mes(t)},{name:s+".grow-rate.name",value:i.eis(),V5t:t=>i.Tes(t)},{name:s+".x-randomiser.name",value:i.iis(),V5t:t=>i.Ges(t)},{name:s+".y-randomiser.name",value:i.nis(),V5t:t=>i._es(t)},{name:s+".initial-speed-randomiser.name",value:i.ris(),V5t:t=>i.Ies(t)},{name:s+".size-randomiser.name",value:i.his(),V5t:t=>i.Ces(t)},{name:s+".grow-rate-randomiser.name",value:i.ois(),V5t:t=>i.Res(t)},{name:s+".acceleration.name",value:i.ais(),V5t:t=>i.Pes(t)},{name:s+".gravity.name",value:i.lis(),V5t:t=>i.Ees(t)},{name:s+".angle-randomiser.name",value:i.uis(),V5t:t=>i.Fes(t)},{name:s+".life-speed-randomiser.name",value:i.cis(),V5t:t=>i.Aes(t)},{name:s+".opacity-randomiser.name",value:i.fis(),V5t:t=>i.Oes(t)},{name:s+".timeout.name",value:i.pis(),V5t:t=>i.kes(t)}]}]}EDt(){return self.Cis}};const qM=new WeakMap;self.Cis=class extends self.e0{constructor(){super(),qM.set(this,self.gK.vK().o0())}set Ris(t){xM(this).Ues(!!t)}get Ris(){return xM(this).mis()}set rate(t){MM.ei(t),qM.get(this).Ves(t)}get rate(){return xM(this).Kes()}set Pis(t){MM.ei(t),xM(this).Ses(t)}get Pis(){return xM(this).Zes()}set Eis(t){MM.ei(t),xM(this).xes(t)}get Eis(){return xM(this).Qes()}set Fis(t){MM.ei(t),xM(this).bes(t)}get Fis(){return xM(this).tis()}set Ais(t){MM.ei(t),xM(this).Mes(t)}get Ais(){return xM(this).sis()}set Ois(t){MM.ei(t),xM(this).Ges(t)}get Ois(){return xM(this).iis()}set Dis(t){MM.ei(t),xM(this)._es(t)}get Dis(){return xM(this).nis()}set kis(t){MM.ei(t),xM(this).Ies(t)}get kis(){return xM(this).ris()}set Lis(t){MM.ei(t),xM(this).Ces(t)}get Lis(){return xM(this).his()}set Nis(t){MM.ei(t),xM(this).Tes(t)}get Nis(){return xM(this).eis()}set Bis(t){MM.ei(t),xM(this).Res(t)}get Bis(){return xM(this).ois()}set acceleration(t){MM.ei(t),xM(this).Pes(t)}get acceleration(){return xM(this).ais()}set Uis(t){MM.ei(t),xM(this).Ees(t)}get Uis(){return xM(this).lis()}set Vis(t){MM.ei(t),xM(this).Fes(t)}get Vis(){return xM(this).uis()}set Wis(t){MM.ei(t),xM(this).Aes(t)}get Wis(){return xM(this).cis()}set zis(t){MM.ei(t),xM(this).Oes(t)}get zis(){return xM(this).fis()}set timeout(t){MM.ei(t),xM(this).kes(t)}get timeout(){return xM(this).pis()}jis(t){MM.ei(t),qM.get(this).Tis(t)}His(t){const s=qM.get(this);t?s.ves(s.m$().J$(t)):s.ves(null)}}}self._s.a$.nes.h$={mis(){return this.aes.mis()}};{const XM=self._s;XM.a$.nes.Gdt={Ues(t){this.aes.Ues(0!==t)},yes(t){this.Ves(t)},Jis(t){this.ves(t)},$is(){this.ves(null)},Ses(t){this.aes.Ses(XM.Zn(t))},xes(t){this.aes.xes(t)},bes(t){this.aes.bes(t)},Mes(t){this.aes.Mes(t/100)},Tes(t){this.aes.Tes(t)},qis(t){this.aes.Ges(t)},Xis(t){this.aes._es(t)},Yis(t){this.aes.Ies(t)},Kis(t){this.aes.Ces(t)},Zis(t){this.aes.Res(t)},Qis(t){this.aes.Pes(t)},Ees(t){this.aes.Ees(t)},tns(t){this.aes.Fes(t)},sns(t){this.aes.Aes(t)},ens(t){this.aes.Oes(t)},kes(t){this.aes.kes(t)},ins(t){this.Tis(t)},v6t(t){this.WJ().eM(t),this.Nc.XJ()}}}{const YM=self._s;YM.a$.nes._dt={nns(){return this.aes.Iis()},rns(){return this.aes.Kes()},hns(){return YM.Qn(this.aes.Zes())},ons(){return this.aes.Qes()},ans(){return this.aes.tis()},lns(){return 100*this.aes.sis()},uns(){return this.aes.eis()},cns(){return this.aes.iis()},fns(){return this.aes.nis()},pns(){return this.aes.his()},mns(){return this.aes.ris()},gns(){return this.aes.ois()},yns(){return this.aes.ais()},Sns(){return this.aes.lis()},wns(){return this.aes.uis()},vns(){return this.aes.cis()},xns(){return this.aes.fis()},bns(){return this.aes.pis()}}}{const KM=self._s,ZM=[],QM=new Set(["continuous-spray","one-shot"]),tT=["fade-to-invisible","timeout-expired","particle-stopped"],sT=KM.jn(KM.Rect);self.oes=class{constructor(){this.Mns=0,this.Tns=0,this.Gns="continuous-spray",this._ns=!1,this.Ins=0,this.Cns=!1,this.Rns=0,this.Pns=0,this.Ens=0,this.Fns=0,this.Ans=0,this.Ons=1,this.Dns=0,this.kns=0,this.Lns=0,this.Nns=0,this.Bns=0,this.Uns=0,this.Vns=0,this.Wns=0,this.zns=0,this.jns=0,this.Hns=0,this.Jns=0,this.$ns=0,this.kf=0,this.qns=0,this.Xns=1,this.les=null,this.zes=null,this.Yns=[],this.WWt=new KM.Rect,this.Kb=new KM.Mo,this.nz=globalThis.devicePixelRatio||1}Hn(){this.Uf(),KM.wh(this.Yns),this.Yns=null,this.les=null,this.zes=null,this.WWt=null,this.Kb=null}Uf(){const t=this.Yns;for(let s=0,e=t.length;s<e;++s)t[s].KAt();KM.Fn(ZM,t),KM.wh(t),ZM.length>1e3&&KM.Sh(ZM,1e3),this._ns=!1}Bes(){for(let t=0,s=this.Mns;t<s;++t)this.Kns();this.Yns.length&&(this._ns=!0)}Kns(t=!0){let s=null;return ZM.length?(s=ZM.pop(),s.Zns(this)):s=KM.jn(self.Qns,this),this.Yns.push(s),t?s.UUt(this.zes):s.UUt(),s}Mis(){const t=this.Yns,s=this.zes;for(let e=0,i=t.length;e<i;++e)t[e].UUt(s)}wis(){const t=this.Yns,s=this.zes;for(let e=0,i=t.length;e<i;++e)t[e].trs(s)}vis(t){const s=this.Yns;for(let e=0,i=s.length;e<i;++e){const i=s[e],n=i.xis();if(n){const s=n.WJ();s.pM(i.dM()),s.yM(i.gM()),s.nE(i.Au(),i.Au()),s.UA(i.NA()),s.BX(i.UX()),s.ZZ(t.WJ().KZ()),s.RZ()}}}Wes(t,s=!0){const e=this.Yns;if(t<e.length){const s=e.length-t;for(let t=0;t<s;++t){const t=e.pop();t.KAt(),ZM.push(t)}ZM.length>1e3&&KM.Sh(ZM,1e3)}else if(t>e.length){const i=t-e.length;for(let t=0;t<i;++t)this.Kns(s)}}yis(){return this.Yns}Iis(){return this.Yns.length}yrt(t){this.srs(t),this.ers(t),this.irs()}srs(t){if("continuous-spray"===this.Gns&&this._ns){this.qns+=t*this.Mns;const s=Math.floor(this.qns);this.qns-=s;for(let t=0;t<s;++t)this.Kns()}}Sis(t){this.qns=t}gis(){return this.qns}ers(t){const s=this.WWt;s.set(this.Rns,this.Pns,this.Rns,this.Pns);const e=this.Yns;let i=0;for(let n=0,r=e.length;n<r;++n){const r=e[n];e[i]=r,r.yrt(t),r.x_t()?(++i,s._l(r.HZ())):(r.KAt(),ZM.push(r))}KM.Sh(e,i),ZM.length>1e3&&KM.Sh(ZM,1e3)}irs(){"one-shot"===this.Gns&&0===this.Yns.length&&this._ns&&(this.les&&this.les(),this._ns=!1)}lT(t,s,e,i){this.nz=globalThis.devicePixelRatio||1,sT.set(s.Nr(),s.Br(),s.Wr(),s.zr()),t.oO(sT),this.Kb.m(t.WA());const n=this.Yns;for(let r=0,h=n.length;r<h;++r){const h=n[r];e.bl(h.HZ())&&h.lT(t,s,i)}t.aO()}WA(){return this.Kb}yes(t){this.Mns=+t}Kes(){return this.Mns}Ses(t){this.Tns=+t}Zes(){return this.Tns}wes(t){if(!QM.has(t))throw new Error("invalid spray type");this.Gns=t}Nes(){return this.Gns}Ues(t){this._ns=!!t}mis(){return this._ns}Hes(t){this.Ins=+t}nrs(){return this.Ins}s2t(t){this.Cns=!!t}rrs(){return this.Cns}Jes(t){this.Rns=+t}hrs(){return this.Rns}$es(t){this.Pns=+t}ors(){return this.Pns}qes(t){this.Ens=+t}ars(){return this.Ens}xes(t){this.Fns=+t}Qes(){return this.Fns}bes(t){this.Ans=+t}tis(){return this.Ans}Xes(t){this.Ons=+t}lrs(){return this.Ons}Mes(t){this.Dns=+t}sis(){return this.Dns}Tes(t){this.kns=+t}eis(){return this.kns}Ges(t){this.Lns=+t}iis(){return this.Lns}_es(t){this.Nns=+t}nis(){return this.Nns}Ies(t){this.Bns=+t}ris(){return this.Bns}Ces(t){this.Uns=+t}his(){return this.Uns}Res(t){this.Vns=+t}ois(){return this.Vns}Pes(t){this.Wns=+t}ais(){return this.Wns}Ees(t){this.zns=+t}lis(){return this.zns}Fes(t){this.jns=+t}uis(){return this.jns}Aes(t){this.Hns=+t}cis(){return this.Hns}Oes(t){this.Jns=+t}fis(){return this.Jns}urs(t){let s=tT.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.$ns=s}Des(t){this.urs(tT[t])}crs(){return tT[this.$ns]}dis(){return this.$ns}kes(t){this.kf=+t}pis(){return this.kf}Yes(t){this.Xns=+t}frs(){return this.Xns}HZ(){return this.WWt}yq(){return this.nz}}}{let eT=function(t){return Math.random()*t-t/2};0;const iT=self._s,nT=(self.oes,new iT.Cl),rT=new iT.Mo;let hT=!1;self.Qns=class{constructor(t){this.drs=t,this.Nf=!1,this.Ra=0,this.Pa=0,this.rNt=0,this.C8=0,this.prs=1,this.mrs=0,this.grs=0,this.yU=0,this.yrs=0,this.Srs=0,this.wrs=0,this.uu=new iT.Rect,this.vrs=null,this.xrs=NaN,this.brs=null,this.Mrs=null}Zns(t){this.drs=t}UUt(t){const s=this.drs;this.Nf=!0,this.Ra=s.hrs()+eT(s.iis()),this.Pa=s.ors()+eT(s.nis()),this.rNt=s.Qes()+eT(s.ris()),this.C8=s.ars()+eT(s.Zes()),this.prs=s.sis(),this.mrs=this.prs,this.yU=(s.tis()+eT(s.his()))*s.lrs(),this.yrs=this.yU/2,this.grs=s.eis()+eT(s.ois()),this.Srs=0,this.wrs=0,this.Trs(),t?this.vrs||(this.vrs=t(this)):(this.vrs=null,this.brs=null,this.Mrs=null)}trs(t){t?this.vrs&&!this.vrs.D2()||(this.vrs=t(this,this.xrs)):(this.vrs=null,this.brs=null,this.Mrs=null)}Gis(t){this.brs=t}_is(t){this.Mrs=t}KAt(){const t=this.Mrs;t&&t(this.vrs),this.vrs=null,this.brs=null,this.Mrs=null}toJSON(){let t;return this.vrs&&this.vrs.WJ()&&(t=this.vrs.WJ().N1().PK()),[this.Ra,this.Pa,this.rNt,this.C8,this.prs,this.grs,this.yU,this.Srs,this.wrs,t]}Sa(t){this.Ra=t[0],this.Pa=t[1],this.rNt=t[2],this.C8=t[3],this.prs=t[4],this.mrs=this.prs,this.grs=t[5],this.yU=t[6],this.Srs=t[7],this.wrs=t[8],this.xrs=t[9],this.yrs=this.yU/2,this.Trs()}yrt(t){const s=this.drs,e=this.rNt*t,i=this.C8,n=Math.cos(i)*e,r=Math.sin(i)*e+this.Srs*t;this.Ra+=n,this.Pa+=r;const h=this.grs*t;this.yU+=h,this.yrs=this.yU/2,this.rNt+=s.ais()*t,this.Srs+=s.lis()*t,this.wrs+=t,this.Trs();const o=s.uis(),a=s.cis(),l=s.fis();let u=0;0!==o&&(u=eT(o*t),this.C8+=u),0!==a&&(this.rNt+=eT(a*t)),0!==l&&(this.prs=iT.Yn(this.prs+eT(l*t),0,1));const c=this.yU>=1&&(2===s.dis()?this.rNt>0:this.wrs<s.pis()),f=this.brs;if(f&&c){let t=s.nrs()*this.prs;0===s.dis()&&(t*=1-this.wrs/s.pis());const e=t-this.mrs;this.mrs=t,f(this.vrs,n,r,h,u,e)}this.Nf=c}x_t(){return this.Nf}HZ(){return this.uu}Trs(){const t=this.Ra,s=this.Pa,e=this.yrs;this.uu.set(t-e,s-e,t+e,s+e)}lT(t,s,e){if(this.vrs)return;const i=this.drs;let n=i.nrs()*this.prs;if(0===i.dis()&&(n*=1-this.wrs/i.pis()),n<=0)return;const r=this.yU,h=r*i.frs()*i.yq();if(h<1)return;let o=this.Ra,a=this.Pa;i.rrs()&&(o=o+.5|0,a=a+.5|0),t.dv()?t.lO(o,a,r,n):e||h>t.JO()||h<t.HO()?(rT.m(i.WA()),rT.Yo(n),t.iM(rT),hT=!0,nT.Xl(this.uu),t.sO(nT,s)):(hT&&(t.iM(i.WA()),hT=!1),t.lO(o,a,h,n))}xis(){return this.vrs}bis(){return this.xrs}dM(){return this.Ra}gM(){return this.Pa}Au(){return this.yU}UX(){return this.C8}NA(){return this.prs}}}{const oT=self._s;oT.a$.Keyboard=class extends oT.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{let aT=function(){return uT.Xq().o0()};0;const lT=self._s;self.Ls,lT.a$.Keyboard.SBt=class extends lT.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}EDt(){return self.Grs}};let uT=null;self.Grs=class extends self.cX{constructor(t){super(t),uT=t,t.m$().CJ().keyboard=this}_rs(t){const s=aT();if("string"==typeof t)return s.Irs(t);if("number"==typeof t)return s.Crs(t);throw new TypeError("expected string or number")}}}{const cT=self._s,fT="keyboard";cT.a$.Keyboard.Instance=class extends cT.KDt{constructor(t,s){super(t,fT),this.Rrs=new Set,this.Prs=new Set,this.Ers=0,this.Frs="",this.Ars="",this.Ors=!1;const e=this.m$().Sf();this.Yf=new cT.$f(cT.Vf.Jf(e,"keydown",t=>this.Drs(t.data)),cT.Vf.Jf(e,"keyup",t=>this.krs(t.data)),cT.Vf.Jf(e,"window-blur",()=>this.Lrs()),cT.Vf.Jf(e,"keyboard-blur",()=>this.Lrs())),this.Nc.s$(this.fM())}Hn(){super.Hn()}async fM(){const t=await this.ukt("init");this.Ors=t.isKeyboardLockSupported}Drs(t){const s=t.which,e=t.code||s.toString(),i=t.key;this.Rrs.has(e)||(this.Rrs.add(e),this.Prs.add(s),this.Frs=e,this.Ers=s,this.Ars=i,this.tZ(cT.a$.Keyboard.h$.Nrs),this.tZ(cT.a$.Keyboard.h$.Brs),this.tZ(cT.a$.Keyboard.h$.Urs),this.tZ(cT.a$.Keyboard.h$.Vrs))}krs(t){const s=t.which,e=t.code||s.toString(),i=t.key;this.Rrs.delete(e),this.Prs.delete(s),this.Frs=e,this.Ers=s,this.Ars=i,this.tZ(cT.a$.Keyboard.h$.Wrs),this.tZ(cT.a$.Keyboard.h$.zrs),this.tZ(cT.a$.Keyboard.h$.jrs),this.tZ(cT.a$.Keyboard.h$.Hrs)}Lrs(){for(const t of this.Prs)this.Prs.delete(t),this.Ers=t,this.tZ(cT.a$.Keyboard.h$.Wrs),this.tZ(cT.a$.Keyboard.h$.zrs),this.tZ(cT.a$.Keyboard.h$.Hrs);this.Rrs.clear()}Irs(t){return this.Rrs.has(t)}Crs(t){return this.Prs.has(t)}_M(){return{tk:this.Ers,tkk:this.Ars}}IM(t){this.Ers=t.tk,t.hasOwnProperty("tkk")&&(this.Ars=t.tkk)}vkt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.Ers},{name:t+".debugger.last-key-string",value:cT.a$.Keyboard._dt.Jrs(this.Ers)},{name:t+".debugger.last-typed-key",value:this.Ars}]}]}}}{const dT=self._s,pT=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];dT.a$.Keyboard.h$={Irs(t){return this.Prs.has(t)},Brs(t){return this.Ers===t},Nrs:()=>!0,Wrs:()=>!0,zrs(t){return this.Ers===t},Crs(t){return t=Math.floor(t),this.Prs.has(t)},Vrs(t){return this.Ers===t},Hrs(t){return this.Ers===t},Urs(t){const s=pT[t];return this.Frs===s},jrs(t){const s=pT[t];return this.Frs===s},$rs(t){const s=pT[t];return this.Rrs.has(s)},qrs(){return this.Ors},Xrs:()=>!0,Yrs:()=>!0}}{const mT=self._s;mT.a$.Keyboard.Gdt={async Krs(t){if(!this.Ors)return;let s=[];t&&(s=t.split(",")),(await this.ukt("lock-keyboard",{keysArr:s})).isOk?this.tZ(mT.a$.Keyboard.h$.Xrs):this.tZ(mT.a$.Keyboard.h$.Yrs)},Zrs(){this.Ors&&this.ukt("unlock-keyboard")}}}{let gT=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};self._s.a$.Keyboard._dt={Qrs(){return this.Ers},Jrs:t=>gT(t),ths(){return this.Ars}}}{const yT=self._s;yT.a$.shs=class extends yT.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{let ST=function(){return xT.Xq().o0()};0;const wT=self._s,vT=self.Ls;wT.a$.shs.SBt=class extends wT.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}EDt(){return self.ehs}};let xT=null;self.ehs=class extends self.cX{constructor(t){super(t),xT=t,t.m$().CJ().RJ=this}ihs(t){return ST().nhs(t)[0]}rhs(t){return ST().nhs(t)[1]}hhs(t){return ST().nhs(t)}ohs(t){return ST().ahs(t)}lhs(t){vT.hi(t),ST().uhs(t)}chs(t){const s=ST(),e=s.m$().J$(t);s.fhs(e)}}}{const bT=self._s,MT="mouse";let TT=null;bT.a$.shs.Instance=class extends bT.KDt{constructor(t,s){super(t,MT),this.dhs=[!1,!1,!1,!1,!1],this.phs=0,this.mhs=0,this.ghs=0,this.F7t=0,this.yhs=0,this.Shs=0,this.whs=0,this.vhs=0,this.xhs=!1,this.bhs=0,this.Mhs=0,this.akt([["pointer-lock-change",t=>this.Ths(t)],["pointer-lock-error",t=>this.Ghs(t)]]);const e=this.m$().Sf();this.Yf=new bT.$f(bT.Vf.Jf(e,"pointermove",t=>this.k7t(t.data)),bT.Vf.Jf(e,"pointerdown",t=>this.D7t(t.data)),bT.Vf.Jf(e,"pointerup",t=>this.L7t(t.data)),bT.Vf.Jf(e,"dblclick",t=>this._hs(t.data)),bT.Vf.Jf(e,"wheel",t=>this.Ihs(t.data)),bT.Vf.Jf(e,"window-blur",()=>this.OKt()))}Hn(){super.Hn()}D7t(t){"mouse"===t.pointerType&&(this.phs=t.pageX-this.Nc.rq(),this.mhs=t.pageY-this.Nc.oq(),this.Chs(t.lastButtons,t.buttons))}k7t(t){this.bhs=t.movementX,this.Mhs=t.movementY,this.tZ(bT.a$.shs.h$.Rhs),this.bhs=0,this.Mhs=0,"mouse"===t.pointerType&&(this.phs=t.pageX-this.Nc.rq(),this.mhs=t.pageY-this.Nc.oq(),this.Chs(t.lastButtons,t.buttons))}L7t(t){"mouse"===t.pointerType&&this.Chs(t.lastButtons,t.buttons)}Chs(t,s){this.Phs(t,s,1,0),this.Phs(t,s,4,1),this.Phs(t,s,2,2),this.Phs(t,s,8,3),this.Phs(t,s,16,4)}Phs(t,s,e,i){!(t&e)&&s&e?this.Ehs(i):t&e&&!(s&e)&&this.Fhs(i)}Ehs(t){this.dhs[t]=!0,this.tZ(bT.a$.shs.h$.Ahs),this.ghs=t,this.F7t=0,this.tZ(bT.a$.shs.h$.Ohs),this.tZ(bT.a$.shs.h$.Dhs)}Fhs(t){this.dhs[t]&&(this.dhs[t]=!1,this.ghs=t,this.tZ(bT.a$.shs.h$.khs))}_hs(t){this.ghs=t.button,this.F7t=1,this.tZ(bT.a$.shs.h$.Ohs),this.tZ(bT.a$.shs.h$.Dhs)}Ihs(t){this.yhs=t.deltaY<0?1:0,this.Shs=t.deltaX,this.whs=t.deltaY,this.vhs=t.deltaZ,this.tZ(bT.a$.shs.h$.Lhs)}OKt(){for(let t=0,s=this.dhs.length;t<s;++t){if(!this.dhs[t])return;this.dhs[t]=!1,this.ghs=t,this.tZ(bT.a$.shs.h$.khs)}}nhs(t){const s=this.Nc.SJ(),e=this.phs,i=this.mhs;if(void 0===t)return s.HJ(0).nst(e,i);{const n=s.zJ(t);return n?n.oK(e,i):[0,0]}}ahs(t){return t=Math.floor(t),!!this.dhs[t]}Nhs(){return this.phs>=0&&this.mhs>=0&&this.phs<this.Nc.RZt()&&this.mhs<this.Nc.PZt()}uhs(t){TT!==t&&(TT=t,this.lkt("cursor",t))}async fhs(t){if(bT.Ks.he||!t)return;const s=t.tAt();if(!s)return;const e=s.WJ(),i=s.Akt();if(!e||!i)return;if(TT===i)return;TT=i;const n=`url(${await i.iNt()}) ${Math.round(e.OZ()*i.by())} ${Math.round(e.LZ()*i.Ty())}, auto`;this.lkt("cursor",n)}Ths(t){this.Bhs(t["has-pointer-lock"])}Ghs(t){this.Bhs(t["has-pointer-lock"]),this.tZ(bT.a$.shs.h$.Uhs)}Bhs(t){this.xhs!==t&&(this.xhs=t,this.xhs?this.tZ(bT.a$.shs.h$.Vhs):this.tZ(bT.a$.shs.h$.Whs))}vkt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.phs+","+this.mhs},{name:t+".debugger.left-button",value:this.dhs[0]},{name:t+".debugger.middle-button",value:this.dhs[1]},{name:t+".debugger.right-button",value:this.dhs[2]},{name:t+".debugger.button-4",value:this.dhs[3]},{name:t+".debugger.button-5",value:this.dhs[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Nc.SJ().KX().map(t=>({name:"$"+t.Rc(),value:t.oK(this.phs,this.mhs).join(", ")}))}]}}}{const GT=self._s;GT.a$.shs.h$={Ohs(t,s){return this.ghs===t&&this.F7t===s},Ahs:()=>!0,zhs(t){return this.dhs[t]},khs(t){return this.ghs===t},jhs(t){const s=this.Nc.JMt().dEt(),e=[];return this.Nhs()&&e.push([this.phs,this.mhs]),GT.xor(this.Nc.Nj().CHt(t,e,s),s)},Dhs(t,s,e){if(t!==this.ghs||s!==this.F7t)return!1;if(!this.Nhs())return!1;const i=this.phs,n=this.mhs;return this.Nc.Nj().CHt(e,[[i,n]],!1)},Lhs(t){return 2===t||this.yhs===t},Vhs:()=>!0,Whs:()=>!0,Uhs:()=>!0,Hhs(){return this.xhs},Rhs:()=>!0}}{const _T=self._s,IT=["auto","pointer","text","crosshair","move","help","wait","none"],CT=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];_T.a$.shs.Gdt={Jhs(t){this.uhs(IT[t])},$hs(t){this.uhs(CT[t])},qhs(t){this.fhs(t)},Xhs(t){this.ckt("request-pointer-lock",{unadjustedMovement:t})},Yhs(){this.lkt("release-pointer-lock")}}}self._s.a$.shs._dt={yOt(t){return this.nhs(t)[0]},SOt(t){return this.nhs(t)[1]},b9t(){return this.phs},M9t(){return this.mhs},Khs(){return this.bhs},Zhs(){return this.Mhs},Qhs(){return this.Shs},tos(){return this.whs},sos(){return this.vhs}};{const RT=self._s;RT.a$.eos=class extends RT.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const PT=self._s;PT.a$.eos.SBt=class extends PT.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{let ET=function(t,s,e){if(s<t.length)FT.Sh(t,s);else if(s>t.length)if("function"==typeof e)for(let i=t.length;i<s;++i)t.push(e());else for(let i=t.length;i<s;++i)t.push(e)};0;const FT=self._s,AT=self.Ls,OT=self.gK;FT.a$.eos.Instance=class extends FT.KDt{constructor(t,s){super(t),this.ios=10,this.nos=1,this.ros=1,this.Lu=null,this.hos=[],this.oos=[],this.aos=[],this.los=-1,s&&(this.ios=s[0],this.nos=s[1],this.ros=s[2]),this.Lu=FT.bo(this.ios,()=>FT.bo(this.nos,()=>FT.bo(this.ros,0)))}Hn(){this.Lu=null,super.Hn()}uos(t,s,e){return t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t>=0&&t<this.ios&&s>=0&&s<this.nos&&e>=0&&e<this.ros?this.Lu[t][s][e]:0}Set(t,s,e,i){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t>=0&&t<this.ios&&s>=0&&s<this.nos&&e>=0&&e<this.ros&&(this.Lu[t][s][e]=i)}nE(t,s,e){if(t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),t<0&&(t=0),s<0&&(s=0),e<0&&(e=0),this.ios===t&&this.nos===s&&this.ros===e)return;this.ios=t,this.nos=s,this.ros=e;const i=this.Lu;ET(i,t,()=>FT.bo(s,()=>FT.bo(e,0)));for(let n=0;n<t;++n){ET(i[n],s,()=>FT.bo(e,0));for(let t=0;t<s;++t)ET(i[n][t],e,0)}}by(){return this.ios}Ty(){return this.nos}Wtt(){return this.ros}fos(t,s,e,i,n){for(;s>0;){const r=Math.floor(this.Nc.yJ()*s);if(--s,0===t){const t=this.uos(s,i,n),e=this.uos(r,i,n);this.Set(s,i,n,e),this.Set(r,i,n,t)}else if(1===t){const t=this.uos(e,s,n),i=this.uos(e,r,n);this.Set(e,s,n,i),this.Set(e,r,n,t)}else if(2===t){const t=this.uos(e,i,s),n=this.uos(e,i,r);this.Set(e,i,s,n),this.Set(e,i,r,t)}}}vkt(){const t="plugins.arr.debugger",s="plugins.arr.properties",e=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.ios,V5t:t=>this.nE(t,this.nos,this.ros)},{name:s+".height.name",value:this.nos,V5t:t=>this.nE(this.ios,t,this.ros)},{name:s+".depth.name",value:this.ros,V5t:t=>this.nE(this.ios,this.nos,t)},{name:s+".elements.name",value:this.ios*this.nos*this.ros}]}],i=[];if(1===this.nos&&1===this.ros)for(let t=0;t<this.ios;++t)i.push({name:"$"+t,value:this.Lu[t][0][0],V5t:s=>this.Lu[t][0][0]=s});else for(let t=0;t<this.ios;++t)i.push({name:"$"+t,value:this.Lu[t].toString()});return i.length&&e.push({title:t+".array-data.title",properties:i}),e}dos(){return JSON.stringify({c2array:!0,size:[this.ios,this.nos,this.ros],data:this.Lu})}_M(){return{size:[this.ios,this.nos,this.ros],data:this.Lu}}IM(t){const s=t.size;this.ios=s[0],this.nos=s[1],this.ros=s[2],this.Lu=t.data}pos(){return this.los>=0&&this.los<this.hos.length?this.hos[this.los]:0}mos(){return this.los>=0&&this.los<this.oos.length?this.oos[this.los]:0}gos(){return this.los>=0&&this.los<this.aos.length?this.aos[this.los]:0}EDt(){return self.yos}};const DT=new WeakMap;self.yos=class extends OT{constructor(){super(),DT.set(this,OT.vK().o0())}get width(){return DT.get(this).by()}get height(){return DT.get(this).Ty()}get depth(){return DT.get(this).Wtt()}kX(t,s=1,e=1){AT.ei(t),AT.ei(s),AT.ei(e),DT.get(this).nE(t,s,e)}Sos(t,s=0,e=0){return AT.ei(t),AT.ei(s),AT.ei(e),DT.get(this).uos(t,s,e)}wos(t,s,e=0,i=0){if(AT.ei(s),AT.ei(e),AT.ei(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");DT.get(this).Set(s,e,i,t)}}}{let kT=function(t,s,e,i,n,r){t.R3(e),r.yK().uX().tbt(r.N1()),s.P3(i,n),t.E3(e)};0;const LT=self._s;LT.a$.eos.h$={mFt(t,s,e){return LT.compare(this.uos(t,0,0),s,e)},vos(t,s,e,i){return LT.compare(this.uos(t,s,0),e,i)},xos(t,s,e,i,n){return LT.compare(this.uos(t,s,e),i,n)},bos(t){const s=this.Nc,e=s.fH(),i=s.SH(),n=i.b3(),r=s.GH(),h=r.M3(),o=r.T3(i),a=++this.los,l=this.hos,u=this.oos,c=this.aos,f=this.ios,d=this.nos,p=this.ros;if(a===this.hos.length?(l.push(0),u.push(0),c.push(0)):(l[a]=0,u[a]=0,c[a]=0),s.I3(!1),0===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)for(let r=0;r<p;++r)l[a]=t,u[a]=s,c[a]=r,kT(e,i,n,h,o,this);else if(1===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)l[a]=t,u[a]=s,kT(e,i,n,h,o,this);else for(let t=0;t<f;++t)l[a]=t,kT(e,i,n,h,o,this);return s.I3(!0),this.los--,r.D3(),!1},Mos(t,s){return LT.compare(this.uos(this.pos(),this.mos(),this.gos()),t,s)},Tos(t){const s=this.ios,e=this.nos,i=this.ros,n=this.Lu;for(let r=0;r<s;++r)for(let s=0;s<e;++s)for(let e=0;e<i;++e)if(n[r][s][e]===t)return!0;return!1},Pu(){return 0===this.ios||0===this.nos||0===this.ros},Gos(t,s,e){let i=0;switch(t){case 0:i=this.ios;break;case 1:i=this.nos;break;case 2:i=this.ros}return LT.compare(i,s,e)}}}{let NT=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const e=t.toString(),i=s.toString();return e<i?-1:e>i?1:0}};0;const BT=self._s;BT.a$.eos.Gdt={Ru(t){const s=this.ios,e=this.nos,i=this.ros,n=this.Lu;for(let r=0;r<s;++r)for(let s=0;s<e;++s)for(let e=0;e<i;++e)n[r][s][e]=t},nE(t,s,e){this.nE(t,s,e)},pM(t,s){this.Set(t,0,0,s)},PZ(t,s,e){this.Set(t,s,0,e)},_os(t,s,e,i){this.Set(t,s,e,i)},T3(t,s,e){const i=this.ios,n=this.nos,r=this.ros,h=this.Lu;if(0===e){const e=BT.bo(n,()=>BT.bo(r,s));0===t?h.push(e):h.unshift(e),this.ios++}else if(1===e){for(let e=0;e<i;++e){const i=BT.bo(r,s);0===t?h[e].push(i):h[e].unshift(i)}this.nos++}else{for(let e=0;e<i;++e)for(let i=0;i<n;++i)0===t?h[e][i].push(s):h[e][i].unshift(s);this.ros++}},D3(t,s){const e=this.ios,i=this.nos,n=this.ros,r=this.Lu;if(0===s){if(0===e)return;0===t?r.pop():r.shift(),this.ios--}else if(1===s){if(0===i)return;for(let s=0;s<e;++s)0===t?r[s].pop():r[s].shift();this.nos--}else{if(0===n)return;for(let s=0;s<e;++s)for(let e=0;e<i;++e)0===t?r[s][e].pop():r[s][e].shift();this.ros--}},Ios(t){const s=this.ios,e=this.nos,i=this.ros,n=this.Lu;if(0!==s&&0!==e&&0!==i)if(0===t)n.reverse();else if(1===t)for(let t=0;t<s;++t)n[t].reverse();else for(let t=0;t<s;++t)for(let s=0;s<e;++s)n[t][s].reverse()},Cos(t){const s=this.ios,e=this.nos,i=this.ros,n=this.Lu;if(0!==s&&0!==e&&0!==i)if(0===t)n.sort((t,s)=>NT(t[0][0],s[0][0]));else if(1===t)for(let t=0;t<s;++t)n[t].sort((t,s)=>NT(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<e;++s)n[t][s].sort(NT)},Ros(t){const s=this.ios,e=this.nos,i=this.ros,n=this.Lu;if(0!==s&&0!==e&&0!==i)if(0===t)n.sort((t,s)=>{for(let i=0;i<e;++i){const e=NT(t[i][0],s[i][0]);if(0!==e)return e}return 0});else if(1===t)for(let t=0;t<e;++t){const e=[];for(let i=0;i<s;++i)e.push(n[i][t]);e.sort((t,s)=>NT(t[0],s[0]));for(let i=0;i<s;++i)n[i][t]=e[i]}else if(2===t){const t=[];for(let s=0;s<e;++s)t.push(s);t.sort((t,e)=>{for(let i=0;i<s;++i){const s=NT(n[i][t],n[i][e]);if(0!==s)return s}return 0});for(let e=0;e<s;++e){let s=[];for(const i of t)s.push(n[e][i]);n[e]=s}}else if(3===t)for(let t=0;t<s;++t)n[t].sort((t,s)=>NT(t[0],s[0]));else for(let t=0;t<s;++t)for(let s=0;s<e;++s)n[t][s].sort(NT)},Pos(t){const s=this.ios,e=this.nos,i=this.ros;if(0!==s&&0!==e&&0!==i)if(0===t)for(let n=0;n<e;++n)for(let e=0;e<i;++e)this.fos(t,s,0,n,e);else if(1===t)for(let n=0;n<s;++n)for(let s=0;s<i;++s)this.fos(t,e,n,0,s);else for(let n=0;n<s;++n)for(let s=0;s<e;++s)this.fos(t,i,n,s,0)},Eu(t,s){if((t=Math.floor(t))<0)return;const e=this.ios,i=this.nos,n=this.ros,r=this.Lu;if(0===s){if(t>=e)return;r.splice(t,1),this.ios--}else if(1===s){if(t>=i)return;for(let s=0;s<e;++s)r[s].splice(t,1);this.nos--}else{if(t>=n)return;for(let s=0;s<e;++s)for(let e=0;e<i;++e)r[s][e].splice(t,1);this.ros--}},L6(t,s,e){if((s=Math.floor(s))<0)return;const i=this.ios,n=this.nos,r=this.ros,h=this.Lu;if(0===e){if(s>i)return;h.splice(s,0,BT.bo(n,()=>BT.bo(r,t))),this.ios++}else if(1===e){if(s>n)return;for(let e=0;e<i;++e)h[e].splice(s,0,BT.bo(r,t));this.nos++}else{if(s>r)return;for(let e=0;e<i;++e)for(let i=0;i<n;++i)h[e][i].splice(s,0,t);this.ros++}},Eos(t,s,e){const i=t.split(s);this.nE(i.length,1,1);for(let t=0,s=i.length;t<s;++t){let s=i[t];0===e?String(Number(s))===s&&(s=Number(s)):2===e&&(s=Number(s)),this.Set(t,0,0,s)}},Fos(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(!s.c2array)return void console.warn("[Array] Attempted to load JSON that does not appear to be Construct array data - no data loaded");const e=s.size;this.ios=e[0],this.nos=e[1],this.ros=e[2],this.Lu=s.data},Aos(t){const s=URL.createObjectURL(new Blob([this.dos()],{type:"application/json"}));this.Nc.DJ(s,t)}}}self._s.a$.eos._dt={uos(t,s,e){return this.uos(t,s||0,e||0)},wOt(){return this.ios},vOt(){return this.nos},Oos(){return this.ros},Dos(){return this.pos()},kos(){return this.mos()},Los(){return this.gos()},Nos(){return this.uos(this.pos(),this.mos(),this.gos())},Ud(){return this.uos(0,0,0)},Bos(){return this.uos(this.ios-1,0,0)},Uos(t){const s=this.Lu;for(let e=0,i=this.ios;e<i;++e)if(s[e][0][0]===t)return e;return-1},Vos(t){const s=this.Lu;for(let e=this.ios-1;e>=0;--e)if(s[e][0][0]===t)return e;return-1},Wos(t){let s=[];for(let t=0;t<this.ios;++t)s.push(this.uos(t,0,0));return s.join(t)},lOt(){return this.dos()}};{const UT=self._s;UT.a$.zos=class extends UT.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const VT=self._s;VT.a$.zos.SBt=class extends VT.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const WT=self._s;WT.a$.zos.Instance=class extends WT.KDt{constructor(t,s){super(t),this.jos="",this.Hos=0,this.Jos="",this.$os=0,this.kf=-1,this.qos=new Map,this.Xos=null,this.Yos="",this.Kos=!1}Hn(){super.Hn()}async Zos(t,s,e){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,e),this.Jos=t,await this.n$(WT.a$.zos.h$.Qos),this.Jos=t,await this.n$(WT.a$.zos.h$.tas)}async sas(t){this.Jos=t,await this.n$(WT.a$.zos.h$.eas),this.Jos=t,await this.n$(WT.a$.zos.h$.ias)}async nas(t,s){s.lengthComputable&&(this.$os=s.loaded/s.total,this.Jos=t,await this.n$(WT.a$.zos.h$.ras))}async oas(t,s){s.lengthComputable&&(this.$os=s.loaded/s.total,this.Jos=t,await this.n$(WT.a$.zos.h$.aas))}las(t,s,e){this.Zos(t,s,e)}uas(t,s,e,i){return new Promise(n=>{const r=e=>{this.las(t,s,e),n()},h=this.Xos;this.Xos=null;try{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(this.jos=h?"":(o.responseText||"").replace(/\r\n/g,"\n"),this.Hos=o.status,o.status>=400)this.Zos(t,s,o.status+o.statusText);else{const s=this.jos.length||h&&o.response instanceof ArrayBuffer;(0!==o.status||s)&&(h&&h.cas(o.response),this.sas(t))}n()}},o.onerror=r,o.ontimeout=r,o.onabort=r,o.onprogress=s=>this.nas(t,s),o.upload.onprogress=s=>this.oas(t,s),o.open(e,s),this.kf>=0&&void 0!==o.timeout&&(o.timeout=this.kf),o.responseType=h?"arraybuffer":"text",i&&!this.qos.has("Content-Type")&&("string"!=typeof i?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[t,s]of this.qos)try{o.setRequestHeader(t,s)}catch(e){console.error(`[Construct] AJAX: Failed to set header '${t}: ${s}': `,e)}if(this.qos.clear(),this.Yos){try{o.overrideMimeType(this.Yos)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.Yos=""}this.Kos&&(o.withCredentials=!0,this.Kos=!1),i?o.send(i):o.send()}catch(t){r(t)}})}vkt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.Hos},{name:t+".last-data",value:this.jos}]}]}_M(){return{lastData:this.jos,lastStatusCode:this.Hos}}IM(t){this.jos=t.lastData,this.Hos=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.Jos="",this.$os=0}}}{const zT=self._s;zT.a$.zos.h$={ias(t){return zT.Ki(this.Jos,t)},eas:()=>!0,tas(t){return zT.Ki(this.Jos,t)},Qos:()=>!0,ras(t){return zT.Ki(this.Jos,t)},aas(t){return zT.Ki(this.Jos,t)}}}self._s.a$.zos.Gdt={async Request(t,s){await this.uas(t,s,"GET",null)},async fas(t,s){await this.uas(t,s,"GET",null)},async das(t,s,e,i){await this.uas(t,s,i,e)},async pas(t,s,e,i){if(!e)return;const n=e.tAt(this.ce);if(!n)return;const r=n.o0().mas();await this.uas(t,s,i,r)},kes(t){this.kf=1e3*t},gas(t,s){this.qos.set(t,s)},yas(t){if(!t)return;const s=t.tAt(this.ce);s&&(this.Xos=s.o0())},Sas(t){this.Yos=t},was(t){this.Kos=!!t}},self._s.a$.zos._dt={vas(){return this.jos},xas(){return this.Hos},bas(){return this.$os},Tag(){return this.Jos}};{const jT=self._s;jT.a$.Mas=class extends jT.rDt{constructor(t){super(t)}Hn(){super.Hn()}},jT.a$.Mas.Tas=-2147483648,jT.a$.Mas.Gas=1073741824,jT.a$.Mas._as=536870912,jT.a$.Mas.Ias=3758096384,jT.a$.Mas.Cas=536870911}{const HT=self._s,JT=HT.a$.Mas.Tas,$T=HT.a$.Mas.Gas,qT=HT.a$.Mas._as,XT=HT.a$.Mas.Cas;HT.a$.Mas.SBt=class extends HT.JDt{constructor(t){super(t),this.Ras=[],this.Pas=!1,this.Eas=0,this.Fas=[],this.Aas=null}Hn(){this.Aas.clear(),this.Aas=null,super.Hn()}PDt(){this.J0().p$(this.Nc)}Met(t){return this.J0().b4(t,{xT:this.Nc.OV()})}Ret(){this.J0().TP()}_et(){for(const t of this.yK().aX())t.o0().Oas()}qDt(t,s,e){this.Eas=s;for(const s of t)if(s){const t=s[0],e=!!s[1];this.Ras.push({ezt:t,use:e,Das:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.Ras.push(null);for(const t of e){const s=t[0],e=t[1],i=t[2];this.Fas.push({name:s,type:e,kas:i})}}Las(t,s){this.Pas=!1,this.Nas(t,s)}Nas(t,s){if(!this.Pas){this.Pas=!0;for(let e=0,i=this.Ras.length;e<i;++e)this.Ras[e]&&(this.Bas(e,t,s,!1,!1,!1),this.Bas(e,t,s,!1,!1,!0),this.Bas(e,t,s,!1,!0,!1),this.Bas(e,t,s,!1,!0,!0),this.Bas(e,t,s,!0,!1,!1),this.Bas(e,t,s,!0,!1,!0),this.Bas(e,t,s,!0,!0,!1),this.Bas(e,t,s,!0,!0,!0))}}Bas(t,s,e,i,n,r){if(t<0||t>=this.Ras.length)return;const h=this.Ras[t];if(!h)return;const o=HT.jn(HT.au,h.ezt,h.use);o.transform(s,e,0),r&&o.ru(),i&&o.eu(s/2),n&&o.nu(e/2),h.Das[i?1:0][n?1:0][r?1:0]=null,h.Das[i?1:0][n?1:0][r?1:0]=o}Uas(t){if(-1===t)return null;const s=t&XT;if(s<0||s>=this.Ras.length)return null;const e=this.Ras[s];if(!e)return null;const i=t&JT?1:0,n=t&$T?1:0,r=t&qT?1:0;return e.Das[i][n][r]}Vas(t){return!t||t._u()}Was(){return this.Eas}zas(t){this.Aas||(this.Aas=new Map);const s=this.Aas.get(t);if("number"==typeof s&&s>=0)return this.Fas[s];for(let s=0;s<this.Fas.length;s++)if(this.Fas[s].name===t)return this.Aas.set(t,s),this.Fas[s]}}}{let YT=function(t){const s=[],e=t.split(",");for(let t=0,i=e.length;t<i;++t){const i=e[t],n=i.indexOf("x");if(n>-1){let t=parseInt(i.substring(0,n),10);const e=i.substring(n+1);let r=parseInt(e,10);for(e.includes("h")&&(r|=hG),e.includes("v")&&(r|=oG),e.includes("d")&&(r|=aG);t>0;--t)s.push(r)}else{let t=parseInt(i,10);i.includes("h")&&(t|=hG),i.includes("v")&&(t|=oG),i.includes("d")&&(t|=aG),s.push(t)}}return s};0;const KT=self._s,ZT=self.Ls,QT=0,tG=1,sG=2,eG=3,iG=4,nG=5,rG=6,hG=KT.a$.Mas.Tas,oG=KT.a$.Mas.Gas,aG=KT.a$.Mas._as,lG=KT.a$.Mas.Ias,uG=KT.a$.Mas.Cas,cG=KT.jn(KT.Rect),fG=KT.jn(KT.Rect),dG=KT.jn(KT.Rect);KT.a$.Mas.Instance=class extends KT.Gkt{constructor(t,s){super(t);const e=this.WJ();this.jas=32,this.Has=32,this.Jas=0,this.$as=0,this.qas=0,this.Xas=0,this.Yas=0,this.Kas=0,this.Zas=e.by(),this.Qas=e.Ty(),this.V6=0,this.W6=0,this.tls=[],this.sls=new Map,this.els=!0,this.Y6t=null,s&&(e.TY(s[QT]),this.jas=Math.max(s[tG],1),this.Has=Math.max(s[sG],1),this.Jas=s[eG],this.$as=s[iG],this.qas=s[nG],this.Xas=s[rG]),this.V6=Math.ceil(this.Nc.sH()/this.jas),this.W6=Math.ceil(this.Nc.iH()/this.Has),this.QDt.Nas(this.jas,this.Has),this.ils=null}Hn(){this.K6t(),KT.wh(this.tls),this.tls=null,this.sls.clear(),this.sls=null,super.Hn()}K6t(){this.Y6t&&(this.Y6t.Hn(),this.Y6t=null)}qDt(t,s,e){this.Yas=s,this.Kas=e,this.nls(!0),this.rls(t),this.hls()}nls(t){const[s,e]=this.ols();if(s<=this.Yas&&e<=this.Kas&&!t)return;let i=0,n=0;t?(i=Math.ceil(this.Kas/this.W6),n=Math.ceil(this.Yas/this.V6)):(i=this.tls.length,n=Math.ceil(this.Yas/this.V6),e>this.Kas&&(this.Kas=e,i=Math.ceil(this.Kas/this.W6)),s>this.Yas&&(this.Yas=s,n=Math.ceil(this.Yas/this.V6)),this.als(),this.lls(),this.Nc.XJ());const r=this.tls;if(r.length<i)for(let t=r.length;t<i;++t)r.push([]);for(let t=0;t<i;++t){const s=r[t];for(let e=s.length;e<n;++e)s.push(KT.jn(KT.a$.Mas.uls,this,e,t))}}rls(t){const s=YT(t);let e=0;const i=this.Yas,n=this.V6,r=this.W6;for(let t=0,h=this.Kas;t<h;++t)for(let h=0;h<i;++h){const i=s[e++],o=this.cls(h,t);o&&o.fls(h%n,t%r,i)}}dls(){let t="";if(this.Yas<=0||this.Kas<=0)return t;let s=1,e=this.pls(0,0);const[i,n]=this.ols();let r=-1,h=!1,o=!1,a=!1;for(let l=0;l<n;++l)for(let n=0===l?1:0;n<i;++n){const i=this.pls(n,l);i===e?++s:(-1===e?(r=-1,h=!1,o=!1,a=!1):(r=e&uG,h=0!==(e&hG),o=0!==(e&oG),a=0!==(e&aG)),t+=1===s?""+r:s+"x"+r,h&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t+=",",s=1,e=i)}return-1===e?(r=-1,h=!1,o=!1,a=!1):(r=e&uG,h=0!==(e&hG),o=0!==(e&oG),a=0!==(e&aG)),t+=1===s?""+r:s+"x"+r,h&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t}als(){const t=this.tls;for(let s=0,e=t.length;s<e;++s){const e=t[s];for(let t=0,s=e.length;t<s;++t)e[t].mls()}this.els=!0}hls(){if(!this.els)return;this.els=!1;const t=this.tls;for(let s=0,e=t.length;s<e;++s){const e=t[s];for(let t=0,s=e.length;t<s;++t)e[t].gls()}}yls(){this.els=!0,this.lls(),this.Nc.XJ()}lls(){this.WJ().yjt(!0)}cls(t,s){if(t<0||s<0)return null;const e=Math.floor(s/this.W6);if(e>=this.tls.length)return null;const i=this.tls[e],n=Math.floor(t/this.V6);return n>=i.length?null:i[n]}Sls(t,s){if(t<0||s<0||s>=this.tls.length)return null;const e=this.tls[s];return t>=e.length?null:e[t]}pls(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.Yas||s>=this.Kas)return-1;const e=this.cls(t,s);return e?e.wls()[s%this.W6][t%this.V6]:-1}fls(t,s,e){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.Yas||s>=this.Kas)return;if(-1!==e&&(e&uG)>this.Was())return;const i=this.cls(t,s);i&&i.fls(t%this.V6,s%this.W6,e)}Was(){return this.QDt.Was()}vls(t){return Math.floor((t-this.WJ().dM())/(this.V6*this.jas))}xls(t){return Math.floor((t-this.WJ().gM())/(this.W6*this.Has))}bls(t){return Math.floor((t-this.WJ().dM())/this.jas)}Mls(t){return Math.floor((t-this.WJ().gM())/this.Has)}Tls(){return this.Yas}Gls(){return this.Kas}_ls(){return Math.floor(this.WJ().by()/this.Ils())}Cls(){return Math.floor(this.WJ().Ty()/this.Rls())}ols(){const t=this.WJ();return[Math.floor(t.by()/this.Ils()),Math.floor(t.Ty()/this.Rls())]}Ils(){return this.jas}Rls(){return this.Has}Pls(){return this.V6}Els(){return this.W6}GHt(t,s){const e=this.vls(t.Za()),i=this.xls(t.Qa()),n=this.vls(t.tl()),r=this.xls(t.sl());for(let t=e;t<=n;++t)for(let e=i;e<=r;++e){const i=this.Sls(t,e);i&&(i.gls(),KT.Fn(s,i.Fls()))}}Ukt(t,s){const e=this.bls(t),i=this.Mls(s),n=this.pls(e,i);if(-1===n)return!1;const r=this.QDt.Uas(n);if(!r)return!0;if(!this.QDt.Vas(r))return!1;const h=this.WJ();return t-=Math.floor((t-h.dM())/this.jas)*this.jas+h.dM(),s-=Math.floor((s-h.gM())/this.Has)*this.Has+h.gM(),r.Tl(t,s)}Als(t){const s=this.tls;for(let e=0,i=s.length;e<i;++e){const i=s[e];for(let s=0,e=i.length;s<e;++s){const e=i[s];e.gls(),KT.Fn(t,e.Fls())}}}Akt(){return this.Y6t||this._xt.J0()}Ols(t){const s=this.sls,e=s.get(t);if(e)return e;const i=t&uG,n=0!==(t&hG),r=0!==(t&oG),h=0!==(t&aG),o=this.Akt(),a=o.by(),l=this.jas,u=this.Jas,c=this.qas,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=i%d,m=Math.floor(i/d),g=o.KLt()+this.Jas+(this.jas+this.qas)*p,y=o.ZLt()+this.$as+(this.Has+this.Xas)*m;cG.ja(g,y,this.jas,this.Has),cG.St(o.QLt(),o.tNt());const S=KT.jn(KT.Cl);return S.Xl(cG),h&&S.ru(),n&&S.eu(),r&&S.nu(),S.offset(p,m),s.set(t,S),S}Oas(){this.sls.clear(),this.als()}lT(t){const s=this.Akt(),e=s.kG();if(!e)return;cG.m(s.kE()),cG.offsetLeft(this.Jas/e.by()),cG.offsetTop(this.$as/e.Ty()),t.Gv(),t.pO(cG,e.by(),e.Ty(),this.jas,this.Has,this.qas,this.Xas),t.zA(e);const i=this.WJ(),n=i.zJ();i.by()===this.Zas&&i.Ty()===this.Qas||(this.lls(),this.als(),this.Zas=i.by(),this.Qas=i.Ty());let r=i.dM(),h=i.gM();this.Nc.fJ()&&(r=Math.round(r),h=Math.round(h));const o=this.V6*this.jas,a=this.W6*this.Has,l=i.WZ(),u=fG;if(n.G9()){u.set(-1/0,-1/0,1/0,1/0);const s=dG,e=n.Btt();for(const i of this.tls)for(const n of i)n.Dls(s),e.hw(s.Za(),s.Qa(),l,s.tl(),s.sl(),l)&&(n.gls(),n.lT(t,u,r,h))}else{n.c9(l,u);const s=Math.floor((u.Za()-r)/o),e=Math.floor((u.tl()-r)/o),i=Math.floor((u.Qa()-h)/a),c=Math.floor((u.sl()-h)/a);for(let n=s;n<=e;++n)for(let s=i;s<=c;++s){const e=this.Sls(n,s);e&&(e.gls(),e.lT(t,u,r,h))}}}_M(){this.nls();const[t,s]=this.ols();return{tw:this.jas,th:this.Has,tox:this.Jas,toy:this.$as,tsx:this.qas,tsy:this.Xas,w:t,h:s,d:this.dls()}}IM(t){this.jas=t.tw,this.Has=t.th,this.Jas=t.tox,this.$as=t.toy,this.qas=t.tsx,this.Xas=t.tsy,this.Yas=t.w,this.Kas=t.h,this.nls(!0),this.rls(t.d),this.lls(),this.als()}dos(){this.nls();const[t,s]=this.ols();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.dls()})}kls(t){switch(t){case 0:default:return 0;case 1:return hG;case 2:return oG;case 3:return hG|aG;case 4:return hG|oG;case 5:return oG|aG;case 6:return hG|oG|aG;case 7:return aG}}apt(t){switch(t){case tG:return this.jas;case sG:return this.Has;case eG:return this.Jas;case iG:return this.$as;case nG:return this.qas;case rG:return this.Xas}}ppt(t,s){switch(t){case tG:if(this.jas===s)return;this.jas=Math.max(s,1),this.V6=Math.ceil(this.Nc.sH()/this.jas),this.QDt.Las(),this.Lls();break;case sG:if(this.Has===s)return;this.Has=Math.max(s,1),this.W6=Math.ceil(this.Nc.iH()/this.Has),this.QDt.Las(),this.Lls();break;case eG:if(this.Jas===s)return;this.Jas=s,this.Lls();break;case iG:if(this.$as===s)return;this.$as=s,this.Lls();break;case nG:if(this.qas===s)return;this.qas=s,this.Lls();break;case rG:if(this.Xas===s)return;this.Xas=s,this.Lls()}}Lls(){this.sls.clear(),this.als(),this.hls()}EDt(){return mG}};const pG=new WeakMap,mG=self.Nls=class extends self.e0{constructor(){super(),pG.set(this,self.gK.vK().o0())}get Bls(){return pG.get(this).Tls()}get Uls(){return pG.get(this).Gls()}Vls(){const t=pG.get(this);return[t.Tls(),t.Gls()]}get Wls(){return pG.get(this)._ls()}get zls(){return pG.get(this).Cls()}jls(){const t=pG.get(this);return[t._ls(),t.Cls()]}get Hls(){return pG.get(this).Ils()}get Jls(){return pG.get(this).Rls()}$ls(){const t=pG.get(this);return[t.Ils(),t.Rls()]}qls(t,s){return ZT.ei(t),ZT.ei(s),pG.get(this).pls(t,s)}Xls(t,s,e){ZT.ei(t),ZT.ei(s),ZT.ei(e);const i=pG.get(this);i.nls(),i.fls(t,s,e)}async j8t(t){ZT.Li(t,Blob);const s=pG.get(this),e=s.m$(),i=KT.jn(KT.DLt);i.XLt(e,t),await i.b4(e.Ob(),{xT:e.OV()}),s.Jn()?i.Hn():(s.K6t(),s.Y6t=i,s.sls.clear(),s.als(),e.XJ())}};mG.Tas=hG,mG.Gas=oG,mG._as=aG,mG.Ias=lG,mG.Cas=uG}{const gG=self._s,yG=gG.a$.Mas.Ias,SG=gG.a$.Mas.Cas;gG.a$.Mas.h$={Yls(t,s,e,i){let n=this.pls(t,s);return-1!==n&&(n&=SG),gG.compare(n,e,i)},Kls(t,s,e){const i=this.pls(t,s);let n=0;return-1!==i&&(n=i&yG),n===this.kls(e)},u6t:()=>!0,c6t:()=>!0,Zls(t){return this.ils||(this.ils=new gG.a$.Mas.Qls(this,this.QDt)),this.ils.Zls(t)}}}{const wG=self._s,vG=wG.a$.Mas.Cas;wG.a$.Mas.Gdt={tus(t,s){this.nls(),this.fls(t,s,-1)},sus(t,s,e,i){this.nls(),this.fls(t,s,e&vG|this.kls(i))},eus(t,s,e){const i=this.pls(t,s);-1!==i&&(this.nls(),this.fls(t,s,i&vG|this.kls(e)))},ius(t,s,e,i){const n=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),h=Math.floor(Math.min(t+e,this.Yas)),o=Math.floor(Math.min(s+i,this.Kas));for(let t=r;t<o;++t)for(let s=n;s<h;++s)this.fls(s,t,-1)},nus(t,s,e,i,n,r){this.nls();const h=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+e,this.Yas)),l=Math.floor(Math.min(s+i,this.Kas)),u=n&vG|this.kls(r);for(let t=o;t<l;++t)for(let s=h;s<a;++s)this.fls(s,t,u)},rus(t,s,e,i,n){this.nls();const r=Math.floor(Math.max(t,0)),h=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+e,this.Yas)),a=Math.floor(Math.min(s+i,this.Kas)),l=this.kls(n);for(let t=h;t<a;++t)for(let s=r;s<o;++s){const e=this.pls(s,t);-1!==e&&this.fls(s,t,e&vG|l)}},hus(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.Yas=s.width,this.Kas=s.height,this.nls(!0),this.rls(s.data),this.als(),this.lls()):console.error("[Construct] Unrecognized JSON data format")},Aos(t){const s=URL.createObjectURL(new Blob([this.dos()],{type:"application/json"}));this.Nc.DJ(s,t)},async S6t(t,s){if(this.Y6t&&this.Y6t.W5()===t)return;const e=this.Nc,i=wG.jn(wG.DLt);try{if(await i.qLt(e,t),!i.g6())throw new Error("image failed to load");if(this.Jn())return i.Hn(),null;if(!await i.b4(e.Ob(),{xT:e.OV()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.tZ(wG.a$.Mas.h$.c6t))}this.Jn()?i.Hn():(this.K6t(),this.Y6t=i,e.XJ(),this.sls.clear(),this.als(),await this.n$(wG.a$.Mas.h$.u6t))},v6t(t){t>=2&&t++,this.WJ().eM(t),this.Nc.XJ()},ous(t,s,e){if(this.nls(),this.ils||(this.ils=new wG.a$.Mas.Qls(this,this.QDt)),this.ils.Zls(e))switch(this.ils.aus(e)){case 0:case 1:this.ils.lus(t,s,e);break;case 2:this.ils.uus(t,s,e)}},cus(t,s,e,i,n,r,h){this.nls(),this.ils||(this.ils=new wG.a$.Mas.Qls(this,this.QDt)),this.ils.Zls(e)&&2===this.ils.aus(e)&&this.ils.uus(t,s,e,i,n,r,h)},fus(t,s,e){if(this.nls(),this.ils||(this.ils=new wG.a$.Mas.Qls(this,this.QDt)),this.ils.Zls(e))switch(this.ils.aus(e)){case 0:case 1:this.ils.dus(t,s,e);break;case 2:this.ils.pus(t,s,e)}},mus(t,s,e,i,n,r){this.nls(),this.ils||(this.ils=new wG.a$.Mas.Qls(this,this.QDt)),this.ils.Zls(e)&&2===this.ils.aus(e)&&this.ils.pus(t,s,e,i,n,r)},gus(t,s,e,i,n,r,h){wG.a$.Mas.Gdt.cus.call(this,t,s,e,i,n,r,h)},yus(t,s,e,i,n,r){wG.a$.Mas.Gdt.mus.call(this,t,s,e,i,n,r)},Sus(t,s,e){wG.a$.Mas.Gdt.ous.call(this,t,s,e)},wus(t,s,e){wG.a$.Mas.Gdt.fus.call(this,t,s,e)}}}{const xG=self._s,bG=xG.a$.Mas.Cas;xG.a$.Mas._dt={vus(t,s){const e=this.pls(t,s);return-1===e?-1:e&bG},xus(t){return this.bls(t)},bus(t){return this.Mls(t)},Mus(t){return t*this.jas+this.WJ().dM()+this.jas/2},Tus(t){return t*this.Has+this.WJ().gM()+this.Has/2},Gus(t){const s=this.WJ().dM();return Math.floor((t-s)/this.jas)*this.jas+s+this.jas/2},_us(t){const s=this.WJ().gM();return Math.floor((t-s)/this.Has)*this.Has+s+this.Has/2},Ius(){return this.dos()},Cus(){return this.Ils()},Rus(){return this.Rls()},Pus(){return this._ls()},Eus(){return this.Cls()},Fus(t){return this.ils||(this.ils=new xG.a$.Mas.Qls(this,this.QDt)),this.ils.Zls(t)&&2===this.ils.aus(t)?this.ils.Aus(t):0},Ous(t){return this.ils||(this.ils=new xG.a$.Mas.Qls(this,this.QDt)),this.ils.Zls(t)&&2===this.ils.aus(t)?this.ils.Dus(t):0}}}{const MG=self._s,TG=MG.a$.Mas.Tas,GG=MG.a$.Mas.Gas,_G=MG.a$.Mas._as,IG=MG.a$.Mas.Cas,CG=MG.jn(MG.Rect),RG=MG.jn(MG.Cl);MG.a$.Mas.kus=class extends MG.Wn{constructor(){super(),this.Uc=-1,this.Lus=-1,this.Nus=!1,this.Bus=!1,this.Uus=!1,this.Vus=MG.jn(MG.Rect),this.Wus=null}q6(t,s,e,i,n,r,h,o){this.Uc=t,this.Lus=t&IG,this.Nus=0!==(t&TG),this.Bus=0!==(t&GG),this.Uus=0!==(t&_G),this.Vus.ja(i*s+r,n*e+h,s,e),this.Wus=o.Ols(this.Uc)}lT(t,s,e,i,n){CG.m(this.Vus),CG.offset(e,i),CG.bl(s)&&(RG.Xl(CG),t.sO(RG,this.Wus))}}}{const PG=self._s;PG.a$.Mas.zus=class extends PG.Wn{constructor(){super(),this.Uc=-1,this.jus=null,this.Vus=PG.jn(PG.Rect)}q6(t,s,e,i,n,r,h,o){this.Uc=t,this.jus=s,this.Vus.ja(n*e+h,r*i+o,e,i)}Hus(t){this.Vus.qa(this.Vus.tl()+t)}Jus(){return this.Uc}$us(){return!!this.jus}IHt(){return this.jus}_Ht(){return this.Vus}}}{const EG=self._s;EG.a$.Mas.Cas;EG.a$.Mas.uls=class extends EG.Wn{constructor(t,s,e){super();const i=t.Pls(),n=t.Els();this.IUt=t,this.Ra=s,this.Pa=e,this.Ua=this.Ra*i*t.Ils(),this.Va=this.Pa*n*t.Rls(),this.qus=[],this.Xus=[],this.Yus=[],this.Kus=!1;for(let t=0;t<n;++t){const t=new Int32Array(i);t.fill(-1),this.qus.push(t)}}Ru(){const t=this.IUt.Pls(),s=this.IUt.Els(),e=this.qus;if(e.length<s)for(let i=e.length;i<s;++i)e.push(new Int32Array(t));else e.length>s&&EG.Sh(e,s);for(let s=0,i=e.length;s<i;++s){let i=e[s];i.length!==t&&(i=new Int32Array(t),e[s]=i),i.fill(-1)}}Dls(t){const s=this.IUt,e=s.WJ(),i=s.Pls()*s.Ils(),n=s.Els()*s.Rls(),r=e.dM()+this.Ua,h=e.gM()+this.Va;t.set(r,h,r+i,h+n)}mls(){this.Kus=!1}gls(){if(this.Kus)return;const t=this.IUt,s=t.oFt(),e=t.WJ(),i=t.Ils(),n=t.Rls(),r=t.Pls(),h=t.Els(),o=this.Ua,a=this.Va;if(i<=0||n<=0)return;let l=Math.min(t.Tls(),Math.floor(e.by()/i)),u=Math.min(t.Gls(),Math.floor(e.Ty()/n));l-=o/i,u-=a/n,l>r&&(l=r),u>h&&(u=h);const c=this.qus,f=this.Xus;let d=0;for(let s=0;s<u;++s){const e=c[s];for(let r=0;r<l;++r){const h=e[r];if(-1===h)continue;let l=null;d<f.length?l=f[d]:(l=EG.jn(EG.a$.Mas.kus),f.push(l)),l.q6(h,i,n,r,s,o,a,t),++d}}d<f.length&&EG.Sh(f,d);let p=null,m=!1;const g=this.Yus;EG.wh(g);for(let t=0;t<u;++t){const e=c[t];for(let r=0;r<l;++r){const h=e[r],l=s.Uas(h),u=s.Vas(l);-1!==h&&u?!p||l||m?(p&&g.push(p),p=EG.jn(EG.a$.Mas.zus),p.q6(h,l,i,n,r,t,o,a),m=!!l):p.Hus(i):p&&(g.push(p),p=null,m=!1)}p&&(g.push(p),p=null,m=!1)}let y=g.length;for(let t=0;t<y;++t){const s=g[t];if(s.$us())continue;const e=s._Ht();for(let s=t+1;s<y;++s){const t=g[s],i=t._Ht();i.Qa()<e.sl()||i.Qa()>e.sl()||i.tl()>e.tl()||i.Za()>e.Za()||t.$us()||i.Za()===e.Za()&&i.tl()===e.tl()&&(g.splice(s,1),--y,e.Xa(e.sl()+n),--s)}}this.Kus=!0}fls(t,s,e){this.qus[s][t]!==e&&(this.qus[s][t]=e,this.Kus=!1,this.IUt.yls())}wls(){return this.qus}Fls(){return this.Yus}lT(t,s,e,i){const n=this.IUt,r=this.Xus;for(let h=0,o=r.length;h<o;++h)r[h].lT(t,s,e,i,n)}}}{const FG=self._s,AG=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);FG.a$.Mas.Qls=class{constructor(t,s){this.IUt=t,this.QDt=s,this.Zus=[null,null,null],this.Qus=[FG.a$.Mas.tcs,FG.a$.Mas.scs,FG.a$.Mas.ecs],this.ics=new FG._c}get ncs(){return AG}get rcs(){return-999}get hcs(){return-998}get ocs(){return-1}get acs(){return 0}get lcs(){return 1}ucs(){return this.IUt}oFt(){return this.QDt}ccs(){return this.ics}Aus(t){return this.Zls(t)?this.fcs(t):0}Dus(t){return this.Zls(t)?this.dcs(t):0}lus(t,s,e){this.Zls(e)&&(this.pcs(e,0),this.mcs(t,s,this.gcs(t,s,e)))}dus(t,s,e){this.Zls(e)&&(this.pcs(e,1),this.ycs(t,s),this.mcs(t,s,this.gcs(t,s,e)))}uus(t,s,e,i,n,r,h){this.Zls(e)&&(this.pcs(e,0),this.Scs(t,s,e,this.gcs(t,s,e),i,n,r,h,0))}pus(t,s,e,i,n,r){this.Zls(e)&&(this.pcs(e,1),this.Scs(t,s,e,this.gcs(t,s,e),i,n,r,0,1))}aus(t){return this.wcs(t)}Zls(t){return!!this.oFt().zas(t)}vcs(t,s){return this.ucs().pls(t,s)}xcs(t,s,e){this.ucs().fls(t,s,e)}ycs(t,s){this.ucs().fls(t,s,-1)}mcs(t,s,e){e&&(this.xcs(t-1,s-1,e[0][0]),this.xcs(t,s-1,e[1][0]),this.xcs(t+1,s-1,e[2][0]),this.xcs(t-1,s,e[0][1]),this.xcs(t,s,e[1][1]),this.xcs(t+1,s,e[2][1]),this.xcs(t-1,s+1,e[0][2]),this.xcs(t,s+1,e[1][2]),this.xcs(t+1,s+1,e[2][2]))}Scs(t,s,e,i,n=!1,r=!1,h=0,o=0,a=0){if(!i)return;const l=(i=this.bcs(i,e,n,r,h,o,a))[0].length,u=i.length;for(let e=0;e<u;e++)for(let n=0;n<l;n++)if(i[e][n]!==this.rcs)switch(o){case 0:i[e][n]===this.ocs?this.ycs(t+n,s+e):this.xcs(t+n,s+e,i[e][n]);break;case 1:-1!==i[e][n]&&this.xcs(t+n,s+e,i[e][n])}}wcs(t){return this.oFt().zas(t).type}Mcs(t){const s=this.wcs(t);this.Zus[s]||(this.Zus[s]=new this.Qus[s](this))}pcs(t,s){this.Mcs(t);const e=this.wcs(t);this.Zus[e]&&this.Zus[e].Tcs(s)}Gcs(t){this.Mcs(t);const s=this.wcs(t);if(this.Zus[s])return this.Zus[s]._cs()}gcs(t,s,e){this.Mcs(e);const i=this.oFt().zas(e);if(this.Zus[i.type])return this.Zus[i.type].Ics(t,s,i)}bcs(t,s,e=!1,i=!1,n=0,r=0,h=0){this.Mcs(s);const o=this.oFt().zas(s);if(this.Zus[o.type])return this.Zus[o.type].Ccs(t,e,i,n,r,h)}fcs(t){this.Mcs(t);const s=this.oFt().zas(t);if(this.Zus[s.type])return this.Zus[s.type].Aus(s)}dcs(t){this.Mcs(t);const s=this.oFt().zas(t);if(this.Zus[s.type])return this.Zus[s.type].Dus(s)}}}self._s.a$.Mas.Rcs=class{constructor(t){this.Wp=t}Pcs(t,s,e){const i=this.Wp.vcs(t,s);return!!this.Ecs(i,!0,i,e)}Ecs(t,s,e,i){return t===this.Wp.ocs?0:s&&t===this.Wp.hcs?1:s&&i&&!this.Fcs(e,i)?0:1}Acs(t,s,e,i){const n=i.kas[t];if(!n.length)return this.Wp.ocs;if(1===n.length)return n[0][0];const r=this.Wp.vcs(s,e);if(this.Ecs(r)&&n.some(t=>r===t[0]))return r;const h=this.Wp.ccs();h.Ru();for(let[t,s]of n)t>this.Wp.ucs().Was()||("number"!=typeof s&&(s=1),h.Ac(s,t));return h.Ec()}Fcs(t,s){for(const e of s.kas)for(const[s]of e)if(s===t)return!0;return!1}};{const OG=self._s;OG.a$.Mas.tcs=class{constructor(t){this.Wp=t,this.Ocs=new OG.a$.Mas.Rcs(t),this.Dcs=t.acs}Tcs(t){this.Dcs=t}_cs(){return this.Dcs}Aus(t){return 0}Dus(t){return 0}Ccs(t,s=!1,e=!1,i=0,n=0,r=0){return t}Ics(t,s,e){return this.kcs(t,s,e)}kcs(t,s,e){const i=this.Dcs===this.Wp.acs?this.Lcs(t,s,void 0,e):this.Wp.ocs,n=this.Ncs(t,s-1,"s",e),r=this.Ncs(t-1,s,"e",e),h=this.Ncs(t+1,s,"w",e),o=this.Ncs(t,s+1,"n",e),a=this.Wp.ncs;return a[0][0]=this.Wp.rcs,a[1][0]=this.Bcs(n,t,s-1,e),a[2][0]=this.Wp.rcs,a[0][1]=this.Bcs(r,t-1,s,e),a[1][1]=this.Bcs(i,t,s,e),a[2][1]=this.Bcs(h,t+1,s,e),a[0][2]=this.Wp.rcs,a[1][2]=this.Bcs(o,t,s+1,e),a[2][2]=this.Wp.rcs,a}Ncs(t,s,e,i){return this.Ocs.Pcs(t,s,i)?this.Lcs(t,s,e,i):this.Wp.rcs}Lcs(t,s,e,i){this.Dcs===this.Wp.lcs&&(e=void 0);const n=this.Wp.vcs(t,s-1),r=this.Wp.vcs(t-1,s),h=this.Wp.vcs(t+1,s),o=this.Wp.vcs(t,s+1),a="n"===e?this.Wp.hcs:n,l="w"===e?this.Wp.hcs:r,u="e"===e?this.Wp.hcs:h,c="s"===e?this.Wp.hcs:o;return 1*this.Ocs.Ecs(a,!0,n,i)+2*this.Ocs.Ecs(l,!0,r,i)+4*this.Ocs.Ecs(u,!0,h,i)+8*this.Ocs.Ecs(c,!0,o,i)}Bcs(t,s,e,i){return t===this.Wp.rcs||t===this.Wp.ocs?t:this.Ocs.Acs(t,s,e,i)}}}{const DG=self._s,kG=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);DG.a$.Mas.scs=class{constructor(t){this.Wp=t,this.Ocs=new DG.a$.Mas.Rcs(t),this.Dcs=t.acs}Tcs(t){this.Dcs=t}_cs(){return this.Dcs}Aus(t){return 0}Dus(t){return 0}Ccs(t,s=!1,e=!1,i=0,n=0,r=0){return t}Ics(t,s,e){return this.Ucs(t,s,e)}Ucs(t,s,e){const i=this.Dcs===this.Wp.acs?this.Vcs(t,s,void 0,e):this.Wp.ocs,n=this.Wcs(t-1,s-1,"se",e),r=this.Wcs(t,s-1,"s",e),h=this.Wcs(t+1,s-1,"sw",e),o=this.Wcs(t-1,s,"e",e),a=this.Wcs(t+1,s,"w",e),l=this.Wcs(t-1,s+1,"ne",e),u=this.Wcs(t,s+1,"n",e),c=this.Wcs(t+1,s+1,"nw",e),f=this.Wp.ncs;return f[0][0]=this.zcs(n,t-1,s-1,e),f[1][0]=this.zcs(r,t,s-1,e),f[2][0]=this.zcs(h,t+1,s-1,e),f[0][1]=this.zcs(o,t-1,s,e),f[1][1]=this.zcs(i,t,s,e),f[2][1]=this.zcs(a,t+1,s,e),f[0][2]=this.zcs(l,t-1,s+1,e),f[1][2]=this.zcs(u,t,s+1,e),f[2][2]=this.zcs(c,t+1,s+1,e),f}Wcs(t,s,e,i){return this.Ocs.Pcs(t,s,i)?this.Vcs(t,s,e,i):this.Wp.rcs}Vcs(t,s,e,i){this.Dcs===this.Wp.lcs&&(e=void 0);const n=this.Wp.vcs(t,s-1),r=this.Wp.vcs(t-1,s),h=this.Wp.vcs(t+1,s),o=this.Wp.vcs(t,s+1),a=this.Wp.vcs(t-1,s-1),l=this.Wp.vcs(t+1,s-1),u=this.Wp.vcs(t-1,s+1),c=this.Wp.vcs(t+1,s+1),f="n"===e?this.Wp.hcs:n,d="w"===e?this.Wp.hcs:r,p="e"===e?this.Wp.hcs:h,m="s"===e?this.Wp.hcs:o,g="nw"===e?this.Wp.hcs:a,y="ne"===e?this.Wp.hcs:l,S="sw"===e?this.Wp.hcs:u,w="se"===e?this.Wp.hcs:c,v=this.Ocs.Ecs(f,!0,n,i),x=this.Ocs.Ecs(d,!0,r,i),b=this.Ocs.Ecs(p,!0,h,i),M=this.Ocs.Ecs(m,!0,o,i);return 1*(v&&x?this.Ocs.Ecs(g,!0,a,i):0)+2*v+4*(v&&b?this.Ocs.Ecs(y,!0,l,i):0)+8*x+16*b+32*(M&&x?this.Ocs.Ecs(S,!0,u,i):0)+64*M+128*(M&&b?this.Ocs.Ecs(w,!0,c,i):0)}zcs(t,s,e,i){return t===this.Wp.rcs||t===this.Wp.ocs?t:this.Ocs.Acs(kG.get(t),s,e,i)}}}self._s.a$.Mas.ecs=class{constructor(t){this.Wp=t,this.Dcs=t.acs,this.jcs=0,this.Hcs=0,this.Jcs=0,this.$cs=0,this.qcs=0,this.Xcs=0}Tcs(t){this.Dcs=t}_cs(){return this.Dcs}Aus(t){return t.kas[0].length}Dus(t){return t.kas.length}Ccs(t,s=!1,e=!1,i=0,n=0,r=0){switch(t=this.Ycs(0,0,i,t),this.$cs=this.jcs,this.qcs=this.Hcs,this.Xcs=this.Jcs,this.Jcs&&(t=this.Kcs(t)),this.jcs&&(t=this.Zcs(t,r===this.Wp.acs)),this.Hcs&&(t=this.Qcs(t,r===this.Wp.acs)),t=this.Ycs(s?1:0,e?1:0,0,t),i){case 0:this.$cs=this.jcs,this.qcs=this.Hcs;break;case 1:this.$cs=1^this.jcs,this.qcs=this.Hcs;break;case 2:this.$cs=1^this.jcs,this.qcs=1^this.Hcs;break;case 3:this.$cs=this.jcs,this.qcs=1^this.Hcs}return this.jcs&&(t=this.Zcs(t,r===this.Wp.acs)),this.Hcs&&(t=this.Qcs(t,r===this.Wp.acs)),t}Ics(t,s,e){const i=e.kas[0].length,n=e.kas.length,r=Array.from({length:n},()=>new Array(i).fill(this.Wp.ocs)),h=this.Wp.ccs();h.Ru();for(let t=0;t<n;t++)for(let s=0;s<i;s++){const i=e.kas[t][s];switch(this.Dcs){case this.Wp.acs:if(1===i.length){const e=i[0][0];if(e>this.Wp.ucs().Was())continue;r[t][s]=e}else{for(let[t,s]of i)t>this.Wp.ucs().Was()||("number"!=typeof s&&(s=1),h.Ac(s,t));r[t][s]=h.Ec()}break;case this.Wp.lcs:e.kas[t][s][0][0]===this.Wp.ocs?r[t][s]=this.Wp.rcs:r[t][s]=this.Wp.ocs}}return r}Ycs(t,s,e,i){switch(e){case 0:this.jcs=t,this.Hcs=s,this.Jcs=0;break;case 1:this.jcs=1^s,this.Hcs=t,this.Jcs=1;break;case 2:this.jcs=1^t,this.Hcs=1^s,this.Jcs=0;break;case 3:this.jcs=s,this.Hcs=1^t,this.Jcs=1}return i}tfs(t){if(t===this.Wp.rcs||t===this.Wp.ocs)return t;const s=globalThis.Nls;let e=t&s.Cas;return this.Xcs&&(e|=s._as),this.$cs&&(e|=s.Tas),this.qcs&&(e|=s.Gas),e}Zcs(t,s){for(let s=0;s<t.length;s++)t[s].reverse();if(s){let s=t[0].length,e=t.length;for(let i=0;i<e;i++)for(let e=0;e<s;e++){const s=this.tfs(t[i][e]);t[i][e]=s}}return t}Qcs(t,s){if(t.reverse(),s){let s=t[0].length,e=t.length;for(let i=0;i<e;i++)for(let e=0;e<s;e++){const s=this.tfs(t[i][e]);t[i][e]=s}}return t}Kcs(t){let s=[],e=t.length,i=t[0].length;for(let n=0;n<i;n++){let i=[];for(let s=0;s<e;s++)i.push(t[s][n]);s.push(i)}return s}};{const LG=self._s,NG=[];LG.a$.Audio=class extends LG.rDt{constructor(t){super(t)}sfs(t){NG.push(t)}static async efs(){await Promise.all(NG),LG.wh(NG)}Hn(){super.Hn()}}}{let BG=function(){return zG.Xq().o0()},UG=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};0;const VG=self._s,WG=self.Ls;VG.a$.Audio.SBt=class extends VG.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}EDt(){return self.ifs}};let zG=null;self.ifs=class extends self.cX{constructor(t){super(t),zG=t}get nfs(){return UG().GetAudioContextExtern()}get rfs(){return UG().GetDestinationNodeExtern()}get hfs(){return BG().ofs()}set hfs(t){BG().afs(t)}get lfs(){return BG().ufs()}set lfs(t){WG.ei(t),BG().cfs(t)}ffs(){BG().dfs()}}}{const jG=self._s,HG="audio",JG=["interactive","balanced","playback"];jG.a$.Audio.Instance=class extends jG.KDt{constructor(t,s){super(t,HG),this.pfs=0,this.mfs=0,this.gfs=[],this.yfs=!0,this.Sfs=0,this.wfs=0,this.vfs=!1,this.xfs=1,this.bfs=1,this.Mfs=[this.Nc.p9()/2,this.Nc.m9()/2,600],this.Tfs=[0,0,-1],this.Gfs=[0,1,0],this._fs=600,this.Ifs=1e4,this.Cfs=1,this.Rfs=null,this.Pfs=-1,this.Efs=1,this.Ffs=!1,this.Afs=0,this.Ofs="suspended",this.Dfs=0,this.kfs=new Map,this.Lfs=0,this.Nfs=0,this.Bfs=new Map,this.Ufs=new Map;let e="interactive";s&&(this.Sfs=s[0],this.wfs=s[1],this.vfs=s[2],e=JG[s[3]],this.yfs=s[4],this.xfs=s[5],this.bfs=s[6],this.Mfs[2]=s[7],this._fs=s[8],this.Ifs=s[9],this.Cfs=s[10]),this.Vfs=[],this.Wfs=[],this.zfs=[],this.akt([["state",t=>this.jfs(t)],["audiocontext-state",t=>this.Hfs(t)],["fxstate",t=>this.Jfs(t)],["trigger",t=>this.$fs(t)],["buffer-metadata",t=>this.qfs(t)]]);const i=this.m$().Sf();this.Yf=new jG.$f(jG.Vf.Jf(i,"instancedestroy",t=>this.Xfs(t.S0)),jG.Vf.Jf(i,"afterload",()=>this.Snt()),jG.Vf.Jf(i,"suspend",()=>this.Yfs()),jG.Vf.Jf(i,"resume",()=>this.Kfs()));const n=this.Nc.Q$(),r="Safari"===jG.Ks.te,h=this.Nc.GQt()||"macos-wkwebview"===n,o="playable-ad-single-file"===n,a="cordova"===n&&"Android"===jG.Ks.Zs,l=r||h||o||a;this.Nc.s$(this.ukt("create-audio-context",{preloadList:this.Nc.Dj().o6().map(t=>({originalUrl:t.a6,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.Sfs,latencyHint:e,panningModel:this.xfs,distanceModel:this.bfs,refDistance:this._fs,maxDistance:this.Ifs,rolloffFactor:this.Cfs,listenerPos:this.Mfs,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.Afs=t.sampleRate,this.Ofs=t.audioContextState,this.Dfs=t.outputLatency})),this.gkt()}Hn(){this.Rfs=null,super.Hn()}Zfs(t){return this.yfs?t.split(" ").filter(t=>!!t):t?[t]:[]}Qfs(t,s){for(const e of s){let s=!1;for(const i of t)if(jG.Ki(i,e)){s=!0;break}if(!s)return!1}return!0}tds(t,s){return this.Qfs(t,this.Zfs(s))}sfs(t){this.Zq().sfs(t)}Xfs(t){this.Rfs===t&&(this.Rfs=null)}sds(t){return Math.pow(10,t/20)}eds(t){const s=this.sds(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}ids(t){return Math.log(t)/Math.log(10)*20}nds(t){return this.ids(Math.max(Math.min(t,1),0))}rds(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.pfs:this.mfs,this.pfs=0,this.mfs=0,{hds:t,ods:s}}Yfs(){this.vfs||this.lkt("set-suspended",{isSuspended:!0})}Kfs(){this.vfs||this.lkt("set-suspended",{isSuspended:!1})}jfs(t){const s=t.tickCount;this.Dfs=t.outputLatency;const e=this.Vfs.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder));this.Vfs=t.audioInstances,this.zfs=t.analysers,e.length>0&&jG.Fn(this.Vfs,e)}qfs(t){this.Bfs.set(t.originalUrl,{duration:t.duration})}Hfs(t){this.Ofs=t.audioContextState}Ddt(){return this.Nc.sqt()?"running":this.Ofs}Jfs(t){this.Wfs=t.fxstate}ads(t){const s=this.Zfs(t);for(const t of this.Vfs)if(this.Qfs(t.tags,s))return t;return null}lds(t){const s=this.Zfs(t);return this.Vfs.some(t=>this.Qfs(t.tags,s)&&t.isPlaying)}uds(t,s,e,i,n){if(this.lds(s))return null;const r=this.Bfs.get(t),h={tags:this.Zfs(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:e,isLooping:i,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.Vfs.push(h),h}cds(t){const s=this.Zfs(t);for(const t of this.Vfs)this.Qfs(t.tags,s)&&(t.isPlaying=!1)}async $fs(t){const s=t.type;this.gfs=t.tags;const e=t.aiid;if("ended"===s){for(const t of this.Vfs)if(t.aiid===e){t.isPlaying=!1;break}await this.n$(jG.a$.Audio.h$.fds)}else"fade-ended"===s&&await this.n$(jG.a$.Audio.h$.dds)}pds(t){return this.tds(this.gfs,t)}yrt(){const t={timeScale:this.Nc.HH(),gameTime:this.Nc.vQt(),instPans:this.mds(),tickCount:this.Nc.xQt()};if(this.Rfs){const s=this.Rfs.WJ();this.Mfs[0]=s.dM(),this.Mfs[1]=s.gM(),t.listenerPos=this.Mfs,t.listenerOrientation=[...this.Tfs,...this.Gfs]}this.lkt("tick",t)}gds(t,s,e,i,n){if(0===e)return[t,s];const r=Math.sin(e),h=Math.cos(e),o=(t-=i)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=i,s+=n]}mds(){return this.Vfs.filter(t=>-1!==t.uid).map(t=>this.Nc.LJ(t.uid)).filter(t=>t).map(t=>{const s=t.WJ(),e=s.zJ().UX(),[i,n]=this.gds(s.dM(),s.gM(),-e,this.Mfs[0],this.Mfs[1]);return{uid:t.PK(),x:i,y:n,z:s.WZ(),angle:s.UX()-e}})}yds(t,s){for(const e of this.zfs)if(e.index===s&&jG.Ki(e.tag,t))return e;return null}Sds(t){for(const s of this.Zfs(t)){const t=s.toLowerCase();this.kfs.set(t,(this.kfs.get(t)||0)+1)}}ofs(){return this.Ffs}afs(t){t=!!t,this.Ffs!==t&&(this.Ffs=t,this.lkt("set-silent",{isSilent:t}))}ufs(){return this.Efs}cfs(t){this.Efs!==t&&(this.Efs=t,this.lkt("set-master-volume",{vol:t}))}dfs(){this.lkt("stop-all");for(const t of this.Vfs)t.isPlaying=!1}wds(t){return!(t.hasOwnProperty("placeholder")||3===this.wfs||t.isMusic&&1===this.wfs||!t.isMusic&&2===this.wfs)}_M(){return{isSilent:this.Ffs,masterVolume:this.Efs,listenerZ:this.Mfs[2],listenerForwardVec:this.Tfs,listenerUpVec:this.Gfs,listenerUid:this.Rfs?this.Rfs.PK():-1,remoteUrls:[...this.Ufs.entries()],playing:this.Vfs.filter(t=>this.wds(t)),effects:this.Wfs,analysers:this.zfs}}IM(t){if(this.Ffs=t.isSilent,this.Efs=t.masterVolume,this.Mfs[2]=t.listenerZ,this.Rfs=null,this.Pfs=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.Tfs=t.listenerForwardVec:this.Tfs=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.Gfs=t.listenerUpVec:this.Gfs=[0,1,0],this.Ufs.clear(),t.remoteUrls)for(const[s,e]of t.remoteUrls)this.Ufs.set(s,e);this.Vfs=t.playing;for(const t of this.Vfs)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.Wfs=t.effects,this.zfs=t.analysers}Snt(){if(-1!==this.Pfs&&(this.Rfs=this.Nc.LJ(this.Pfs),this.Pfs=-1,this.Rfs)){const t=this.Rfs.WJ();this.Mfs[0]=t.dM(),this.Mfs[1]=t.gM()}for(const t of this.Vfs){const s=this.Nc.Dj().h6(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.Wfs))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Nc.Dj().h6(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.lkt("load-state",{saveLoadMode:this.wfs,timeScale:this.Nc.HH(),gameTime:this.Nc.vQt(),listenerPos:this.Mfs,listenerOrientation:[...this.Tfs,...this.Gfs],isSilent:this.Ffs,masterVolume:this.Efs,playing:this.Vfs.filter(t=>null!==t.bufferUrl),effects:this.Wfs})}vkt(){const t=[];for(const[s,e]of Object.entries(this.Wfs))t.push({name:"$"+s,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.Vfs.length},...this.Vfs.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self._s.a$.Audio.h$={fds(t){return this.pds(t)},dds(t){return this.pds(t)},vds(){return this.Nfs===this.Lfs},xds:()=>!0,bds(){return this.ofs()},Mds(){for(const t of this.Vfs)if(t.isPlaying)return!0;return!1},Tds(t){return this.lds(t)}};{const $G=self._s,qG=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];$G.a$.Audio.Gdt={Play(t,s,e,i,n){const r=$G.a$.Audio.Gdt.Gds.call(this,t,s,e,i,n);return this.sfs(r),r},kdt(t,s,e,i){$G.a$.Audio.Gdt.Gds.call(this,t,0,s,0,e,i)},async Gds(t,s,e,i,n,r){if(this.Ffs)return;const h=t[1],o=this.Nc.Dj().h6(t[0]);if(!o)return;const{hds:a,ods:l}=this.rds(),u=this.uds(t[0],n,h,0!==s,this.eds(e));try{await this.ukt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.Zfs(n),isLooping:0!==s,vol:this.eds(e),stereoPan:$G.Yn(i/100,-1,1),pos:r||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.xQt())}},async _ds(t,s,e,i,n,r,h,o,a,l,u){if(this.Ffs)return;const c=t[1],f=this.Nc.Dj().h6(t[0]);if(!f)return;const{hds:d,ods:p}=this.rds(),m=this.uds(t[0],u,c,0!==s,this.eds(e));try{await this.ukt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.Zfs(u),isLooping:0!==s,vol:this.eds(e),pos:0,off:d,trueClock:p,panning:{x:i,y:n,z:r,angle:$G.Zn(h),innerAngle:$G.Zn(o),outerAngle:$G.Zn(a),outerGain:this.eds(l)}})}finally{m&&(m.placeholder=this.Nc.xQt())}},async Ids(t,s,e,i,n,r,h,o){if(this.Ffs)return;if(!i)return;const a=i.tAt();if(!a||!a.WJ())return;const l=a.WJ(),u=l.zJ().UX(),[c,f]=this.gds(l.dM(),l.gM(),-u,this.Mfs[0],this.Mfs[1]),d=t[1],p=this.Nc.Dj().h6(t[0]);if(!p)return;const{hds:m,ods:g}=this.rds(),y=this.uds(t[0],o,d,0!==s,this.eds(e));try{await this.ukt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.Zfs(o),isLooping:0!==s,vol:this.eds(e),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.WZ(),angle:l.UX()-u,innerAngle:$G.Zn(n),outerAngle:$G.Zn(r),outerGain:this.eds(h),uid:a.PK()}})}finally{y&&(y.placeholder=this.Nc.xQt())}},async Cds(t,s,e,i,n,r){if(this.Ffs)return;const h=1===t,o=this.Nc.Dj().h6(s)||this.Ufs.get(s.toLowerCase());if(!o)return;const{hds:a,ods:l}=this.rds(),u=this.uds(s,r,h,0!==e,this.eds(i));try{await this.ukt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.Zfs(r),isLooping:0!==e,vol:this.eds(i),stereoPan:$G.Yn(n/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.xQt())}},async Rds(t,s,e,i,n,r,h,o,a,l,u,c){if(this.Ffs)return;const f=1===t,d=this.Nc.Dj().h6(s)||this.Ufs.get(s.toLowerCase());if(!d)return;const{hds:p,ods:m}=this.rds(),g=this.uds(s,c,f,0!==e,this.eds(i));try{await this.ukt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.Zfs(c),isLooping:0!==e,vol:this.eds(i),pos:0,off:p,trueClock:m,panning:{x:n,y:r,z:h,angle:$G.Zn(o),innerAngle:$G.Zn(a),outerAngle:$G.Zn(l),outerGain:this.eds(u)}})}finally{g&&(g.placeholder=this.Nc.xQt())}},async Pds(t,s,e,i,n,r,h,o,a){if(this.Ffs)return;if(this.Ffs)return;if(!n)return;const l=n.tAt();if(!l||!l.WJ())return;const u=l.WJ(),c=u.zJ().UX(),[f,d]=this.gds(u.dM(),u.gM(),-c,this.Mfs[0],this.Mfs[1]),p=1===t,m=this.Nc.Dj().h6(s)||this.Ufs.get(s.toLowerCase());if(!m)return;const{hds:g,ods:y}=this.rds(),S=this.uds(s,a,p,0!==e,this.eds(i));try{await this.ukt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.Zfs(a),isLooping:0!==e,vol:this.eds(i),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.WZ(),angle:u.UX()-c,innerAngle:$G.Zn(r),outerAngle:$G.Zn(h),outerGain:this.eds(o),uid:l.PK()}})}finally{S&&(S.placeholder=this.Nc.xQt())}},Eds(t,s){this.lkt("set-looping",{tags:this.Zfs(t),isLooping:0===s})},Fds(t,s){this.lkt("set-muted",{tags:this.Zfs(t),isMuted:0===s})},Adt(t,s){this.lkt("set-volume",{tags:this.Zfs(t),vol:this.eds(s)})},Ads(t,s,e,i){this.lkt("fade-volume",{tags:this.Zfs(t),vol:this.eds(s),duration:e,stopOnEnd:0===i})},Ods(t,s){this.lkt("set-stereo-pan",{tags:this.Zfs(t),p:$G.Yn(s/100,-1,1)})},async Dds(t){const s=t[1],e=this.Nc.Dj().h6(t[0]);e&&(this.Lfs++,await this.ukt("preload",{originalUrl:t[0],url:e.url,type:e.type,isMusic:s}),this.Nfs++)},async kds(t,s){const e=1===t,i=this.Nc.Dj().h6(s)||this.Ufs.get(s.toLowerCase());i&&(this.Lfs++,await this.ukt("preload",{originalUrl:s,url:i.url,type:i.type,isMusic:e}),this.Nfs++)},M1(t,s){this.lkt("set-playback-rate",{tags:this.Zfs(t),rate:Math.max(s,0)})},u1(t){this.cds(t),this.lkt("stop",{tags:this.Zfs(t)})},Lds(){this.dfs()},Nds(t,s){this.lkt("set-paused",{tags:this.Zfs(t),paused:0===s})},Bds(t,s){this.lkt("seek",{tags:this.Zfs(t),pos:s})},Uds(t){2===t&&(t=this.ofs()?1:0),this.afs(0===t)},Vds(t){const s=this.eds(t);this.cfs(s)},Wds(t,s,e,i,n,r,h){const o=qG[s];this.Sds(t),this.lkt("add-effect",{type:"filter",tags:this.Zfs(t),params:[o,e,i,n,r,$G.Yn(h/100,0,1)]})},zds(t,s,e,i){this.Sds(t),this.lkt("add-effect",{type:"delay",tags:this.Zfs(t),params:[s,this.eds(e),$G.Yn(i/100,0,1)]})},jds(t,s,e,i,n,r){this.Sds(t),this.lkt("add-effect",{type:"flanger",tags:this.Zfs(t),params:[s/1e3,e/1e3,i,n/100,$G.Yn(r/100,0,1)]})},Hds(t,s,e,i,n,r,h){this.Sds(t),this.lkt("add-effect",{type:"phaser",tags:this.Zfs(t),params:[s,e,i,n,r,$G.Yn(h/100,0,1)]})},Jds(t,s,e,i){const n=this.Nc.Dj().h6(s[0]);n&&(this.Sds(t),this.lkt("add-effect",{type:"convolution",tags:this.Zfs(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===e,$G.Yn(i/100,0,1)]}))},$ds(t,s){this.Sds(t),this.lkt("add-effect",{type:"gain",tags:this.Zfs(t),params:[this.eds(s)]})},qds(t,s){this.Sds(t),this.lkt("add-effect",{type:"stereopan",tags:this.Zfs(t),params:[$G.Yn(s/100,-1,1)]})},Xds(t){this.Sds(t),this.lkt("add-effect",{type:"gain",tags:this.Zfs(t),params:[0]})},Yds(t,s,e){this.Sds(t),this.lkt("add-effect",{type:"tremolo",tags:this.Zfs(t),params:[s,$G.Yn(e/100,0,1)]})},Kds(t,s,e){this.Sds(t),this.lkt("add-effect",{type:"ringmod",tags:this.Zfs(t),params:[s,$G.Yn(e/100,0,1)]})},Zds(t,s,e,i,n,r){this.Sds(t),this.lkt("add-effect",{type:"distortion",tags:this.Zfs(t),params:[this.sds(s),this.sds(e),i,this.sds(n),$G.Yn(r/100,0,1)]})},Qds(t,s,e,i,n,r){this.Sds(t),this.lkt("add-effect",{type:"compressor",tags:this.Zfs(t),params:[s,e,i,n/1e3,r/1e3]})},tps(t,s,e){this.Sds(t),this.lkt("add-effect",{type:"analyser",tags:this.Zfs(t),params:[s,e]})},sps(t){const s=this.Zfs(t);for(const t of s)this.kfs.set(t.toLowerCase(),0);this.lkt("remove-effects",{tags:s}),this.Wfs={}},I0(t,s,e,i,n,r){this.lkt("set-effect-param",{tags:this.Zfs(t),index:Math.floor(s),param:e,value:i,ramp:n,time:r})},eps(t){if(!t)return;const s=t.tAt();s&&s.WJ()&&(this.Rfs=s)},ips(t){this.Mfs[2]=t},nps(t,s,e,i,n,r){this.Tfs[0]=t,this.Tfs[1]=s,this.Tfs[2]=-e,this.Gfs[0]=i,this.Gfs[1]=n,this.Gfs[2]=-r},rps(t){this.pfs=Math.max(t,0),this.mfs=Math.max(t-performance.now()/1e3,0)},hps(t){const s=t[1],e=this.Nc.Dj().h6(t[0]);e&&this.lkt("unload",{url:e.url,type:e.type,isMusic:s})},ops(t,s){const e=1===t,i=this.Nc.Dj().h6(s)||this.Ufs.get(s.toLowerCase());i&&this.lkt("unload",{url:i.url,type:i.type,isMusic:e})},aps(){this.lkt("unload-all")},lps(t,s,e){this.Ufs.set(e.toLowerCase(),{url:t,type:s})}}}{const XG=self._s;XG.a$.Audio._dt={ups(t){const s=this.ads(t);return s?s.duration:0},Rdt(t){const s=this.ads(t);return s?s.playbackTime:0},Odt(t){const s=this.ads(t);return s?s.playbackRate:0},Pdt(t){const s=this.ads(t);return s?this.nds(s.volume):0},cps(){return this.nds(this.ufs())},fps(t){return this.kfs.get(t.toLowerCase())||0},dps(t,s){const e=this.yds(t,Math.floor(s));return e?e.binCount:0},pps(t,s,e){const i=this.yds(t,Math.floor(s));return i?(e=Math.floor(e))<0||e>=i.binCount?0:i.freqBins[e]:0},mps(t,s){const e=this.yds(t,Math.floor(s));return e?e.peak:0},gps(t,s){const e=this.yds(t,Math.floor(s));return e?e.rms:0},yps(){return this.Afs},Sps:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,wps(){return this.Dfs},vps(t,s){return 0==(t=XG.Yn(+t,0,100)/100)?-1/0:t<.1?this.nds(XG._t(0,this.eds(s),10*t)):XG._t(s,0,(t-.1)/.9)}}}{const YG=self._s;YG.a$.xps=class extends YG.rDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const KG=self._s;KG.a$.xps.SBt=class extends KG.JDt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const ZG=self._s,QG="localstorage";ZG.a$.xps.Instance=class extends ZG.KDt{constructor(t,s){super(t,QG),this.bps="",this.KI="",this.Mps=[],this.Tps="",this.Gps=!1,this._ps=0,this.Ips=0,this.Cps=!1,s&&(this.Cps=s[0]);const e=this.Nc.wq();this.Sq=null,this.Cps?this.Sq=e.Me({Te:!0}):this.Sq=e,this.Rps=new Map,this.Pps=!1,this.Nc.s$(this.fM())}async fM(){const t=await Promise.race([this.ukt("init"),ZG.dh(3e3)]);t&&(this.Gps=t.isPersistent)}Hn(){super.Hn()}async Eps(t){this.Tps=this.Fps(t),await this.n$(ZG.a$.xps.h$.tas)}Fps(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}vkt(){return this.Pps||this.Aps(),[{title:"plugins.localstorage.name",properties:[...this.Rps.entries()].map(t=>({name:"$"+t[0],value:t[1],V5t:s=>this.Sq.setItem(t[0],s)}))}]}async Aps(){this.Pps=!0;try{const t=await this.Sq.keys();t.sort((t,s)=>{const e=t.toLowerCase(),i=s.toLowerCase();return e<i?-1:i<e?1:0});const s=await Promise.all(t.map(t=>this.Sq.getItem(t)));this.Rps.clear();for(let e=0,i=t.length;e<i;++e)this.Rps.set(t[e],s[e])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.Pps=!1}}}}{const t_=self._s;t_.a$.xps.h$={Ops(t){return this.bps===t},Dps:()=>!0,kps(t){return this.bps===t},Lps:()=>!0,Nps(t){return this.bps===t},Bps:()=>!0,Ups:()=>!0,Vps:()=>!0,tas:()=>!0,Wps(t){return this.bps===t},zps(t){return this.bps===t},jps(t,s){return t_.compare(this.bps,t,s)},Hps(t,s){return t_.compare(this.KI,t,s)},Jps(){return this.Ips>0},$ps(){return this._ps>0},qps:()=>!0,Xps:()=>!0,Yps(){return this.Gps}}}{let s_=function(t){return"string"==typeof t||"number"==typeof t};0;const e_=self._s;e_.a$.xps.Gdt={async Kps(t,s){this.Ips++;try{const e=await this.Sq.setItem(t,s);await this.hkt(async()=>{this.bps=t,this.KI=e,await this.n$(e_.a$.xps.h$.Dps),await this.n$(e_.a$.xps.h$.Ops)})}catch(t){await this.Eps(t)}finally{this.Ips--,0===this.Ips&&await this.n$(e_.a$.xps.h$.qps)}},async Zps(t,s){if(!s)return;const e=s.tAt(this.ce);if(!e)return;const i=e.o0();if(!i)return;const n=i.mas();this.Ips++;try{await this.Sq.setItem(t,n),await this.hkt(async()=>{this.bps=t,this.KI="",await this.n$(e_.a$.xps.h$.Dps),await this.n$(e_.a$.xps.h$.Ops)})}catch(t){await this.Eps(t)}finally{this.Ips--,0===this.Ips&&await this.n$(e_.a$.xps.h$.qps)}},async Qps(t){this._ps++;try{const s=await this.Sq.getItem(t);await this.hkt(async()=>{this.bps=t,this.KI=s_(s)?s:"",await this.n$(e_.a$.xps.h$.Lps),await this.n$(e_.a$.xps.h$.kps)})}catch(t){await this.Eps(t)}finally{this._ps--,0===this._ps&&await this.n$(e_.a$.xps.h$.Xps)}},async tms(t,s){if(!s)return;const e=s.tAt(this.ce);if(!e)return;const i=e.o0();this._ps++;try{let s=await this.Sq.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.hkt(async()=>{this.KI="",this.bps=t,i.cas(s),await this.n$(e_.a$.xps.h$.Lps),await this.n$(e_.a$.xps.h$.kps)})}catch(t){await this.Eps(t)}finally{this._ps--,0===this._ps&&await this.n$(e_.a$.xps.h$.Xps)}},async sms(t){try{const s=await this.Sq.getItem(t);await this.hkt(async()=>{this.bps=t,null==s?(this.KI="",await this.n$(e_.a$.xps.h$.zps)):(this.KI=s_(s)?s:"",await this.n$(e_.a$.xps.h$.Wps))})}catch(t){await this.Eps(t)}},async Oc(t){try{await this.Sq.removeItem(t),await this.hkt(async()=>{this.bps=t,this.KI="",await this.n$(e_.a$.xps.h$.Bps),await this.n$(e_.a$.xps.h$.Nps)})}catch(t){await this.Eps(t)}},async ems(){try{await this.Sq.clear(),await this.hkt(async()=>{this.bps="",this.KI="",e_.wh(this.Mps),await this.n$(e_.a$.xps.h$.Ups)})}catch(t){await this.Eps(t)}},async ims(){try{const t=await this.Sq.keys();await this.hkt(async()=>{this.Mps=t,await this.n$(e_.a$.xps.h$.Vps)})}catch(t){await this.Eps(t)}},async nms(){const t=await this.ukt("request-persistent");t.isOk&&(this.Gps=t.isPersistent)},rms(t){if(!this.Cps)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.Sq.be(new Map(s.items))}}}self._s.a$.xps._dt={hms(){return this.KI},oms(){return this.bps},ams(){return this.Mps.length},lms(t){return(t=Math.floor(t))<0||t>=this.Mps.length?"":this.Mps[t]},ums(){return this.Tps},cms(){return this.Cps?JSON.stringify({"is-c3-storage":!0,items:[...this.Sq.xe()]}):""}};{const i_=self._s;i_.oyt.hyt=class extends i_.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const n_=self._s;n_.oyt.hyt.SBt=class extends n_.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const r_=self._s,h_=r_.oyt.hyt,o_=0;h_.Instance=class extends r_.mLt{constructor(t,s){super(t),this.fms=!1,this.fu=!0,s&&(this.fms=!1,this.fu=!!s[o_]),this.dms=new Map,this.pms=[],this.mms=new Map,this.gms=null,this.yms=null,this.Sms=null,this.wms=null,this.vms="",this.xms=[],this.ynt=t=>this.Snt(),this.m$().Sf().addEventListener("afterload",this.ynt)}Hn(){this.m$().Sf().removeEventListener("afterload",this.ynt),this.ynt=null,this.gms&&(this.bms(this.gms),this.gms=null),this.Mms(),this.Tms=null,this.Gms(),this.pms=null,this._ms(),this.mms=null,this.xms=null,super.Hn()}Eyt(t){this.xms.push(t)}Fyt(){this.xms.pop()}Ims(){return this.xms[this.xms.length-1]}kOt(t){this.fu=!!t,t?this.mms&&this.mms.size&&this.Skt():this.skt();for(const s of this.Cms())t?this.Rms(s)&&s.c1():((s.IsPlaying()||s.Iat())&&this.Pms(s),s.u1());t&&this.Gms()}_u(){return this.fu}Pms(t){this.pms.push(t)}Rms(t){return this.pms.includes(t)}Gms(){r_.wh(this.pms)}Ems(){return this.gms}Xlt(){const t=this.w0();return!!t&&!t.D2()}Fms(t,s,e=!1){const i=s?this.Ams(s,e):this.Cms(e);if(i&&i.length)for(const s of i)if(s.f1(t))return s}Oms(t,s){for(const e of this.dms.values())for(const i of e)if(!i.a1()&&i.f1(t)&&s(i))return!0;for(const e of this.mms.values())for(const i of e)if(!i.a1()&&i.f1(t)&&s(i))return!0;return!1}Dms(t){for(const s of this.dms.values())for(const e of s)if(!e.a1()&&t(e))return!0;for(const s of this.mms.values())for(const e of s)if(!e.a1()&&t(e))return!0;return!1}kms(t,s){return this.Fms(t,s,!0)}*Lms(t,s,e=!1){const i=s?this.Ams(s,e):this.Cms(e);if(i&&i.length)for(const s of i)s.f1(t)&&(yield s)}*Nms(t,s){yield*this.Lms(t,s,!0)}Ams(t,s){if(s){let s=this.dms.get(t),e=this.mms.get(t);return s||(s=[]),e||(e=[]),s.concat(e).filter(t=>t).filter(t=>!t.a1())}{let s=this.dms.get(t);return s||(s=[]),s.filter(t=>t).filter(t=>!t.a1())}}Cms(t){if(t){const t=[...this.dms.values()].flat(),s=[...this.mms.values()].flat();return t.concat(s).filter(t=>t).filter(t=>!t.a1())}return[...this.dms.values()].flat().filter(t=>t).filter(t=>!t.a1())}Bms(){return this.Cms(!0)}_M(t="full"){return{s:!1,e:!!this.fu,at:this.Ums(),dt:this.Vms(),wt:this.Wms(),ft:this.zms()}}IM(t,s="full"){t&&(this.yms=t.at,this.Sms=t.dt,this.wms=t.wt,this.vms=t.ft,this.fms=!1,this.fu=!!t.e,"state"===s&&this.Snt())}Snt(){const t=this.m$().Hot();if(this.jms(this.yms,this.dms,t),this.Sms){r_.wh(this.pms);for(const s of this.Sms)this.Hms(this.pms,s,t)}this.jms(this.wms,this.mms,t),this.gms=this.Jms(this.vms,t),this.fu?this.mms&&this.mms.size&&this.Skt():this.skt()}jms(t,s,e){if(t)for(const i in t){let n=s.get(i);n?r_.wh(n):n=[];const r=t[i];for(const t of r)if(this.Hms(n,t.name,e))this.$ms(t.name,t,e);else{const s=r_.emt.Dyt({runtime:this.m$(),json:t});r_.emt.dut(s,this.w0().PK()),s.gyt(t=>this.qms(t)),s.pyt(this),e.Znt(s),this.Hms(n,s,e)}s.set(i,n)}}Jms(t,s){return s.Xnt(t)}Hms(t,s,e){if("string"!=typeof s)return!!t.push(s);{const i=this.Jms(s,e);if(i)return!!t.push(i)}return!1}$ms(t,s,e){if("string"==typeof t){const i=this.Jms(t,e);i&&(i.cst(s),r_.emt.dut(i,this.w0().PK()),r_.emt.pyt(i,this))}else t.cst(s),r_.emt.dut(t,this.w0().PK()),r_.emt.pyt(t,this)}Ums(){const t={};for(const[s,e]of this.dms)t[s]=e.filter(t=>!t.a1()).map(t=>t.ust());return t}Vms(){return this.pms.filter(t=>!t.a1()).map(t=>t.Rc())}Wms(){const t={};for(const[s,e]of this.mms)t[s]=e.map(t=>t.ust());return t}zms(){return this.gms?this.gms.Rc():""}mkt(){this._ms()}Xms(t){const s=h_.Kms.Yms(t.uut,t.jyt,t.Hyt,t.zyt,t.Uyt,this.w0()),e=h_.Qms.Zms(t.uut);h_.Qms.tgs(e)||this.sgs(t.uut);const i=r_.emt.Dyt({runtime:this.m$(),id:e,tags:t.tags,time:t.time,S0:this.w0(),Nyt:!!t.Nyt,loop:!!t.loop,Byt:!!t.Byt,F0:t.F0,Lyt:t.Lyt,kyt:s});return i.gyt(t=>this.qms(t)),i.pyt(this),this.egs(i,t.uut),i}igs(t){const s=t.j1();if(this.dms.has(s)){const e=this.dms.get(s);if(e){const s=e.indexOf(t);-1!==s&&e.splice(s,1)}}}O1(t,s=!1){this.igs(t),t.a1()||this.ngs(t)||(t.u1(s),this.rgs(t))}sgs(t,s=!1){if(r_.Ye(t)){const e=h_.Qms.Zms(t);if(!this.dms.has(e))return;const i=this.dms.get(e),n=this.Ems();for(const t of i)t!==n&&(t.a1()||this.ngs(t)||(t.u1(s),t.Hn()));r_.wh(i)}else{const t=this.Ems();for(const e of this.Cms())e!==t&&(e.a1()||this.ngs(e)||(e.u1(s),e.Hn()));for(const t of this.dms.keys())r_.wh(this.dms.get(t)),this.dms.delete(t);this.dms.clear()}}bms(t){this.O1(t,!0)}Mms(){this.sgs(NaN,!0)}apt(t){if(t===o_)return this.fu}ppt(t,s){t===o_&&(this.fu=!!s)}hgs(t){const s=t.N1().Uft();for(const t of s){const s=t.y0();if(s.BBt()===this.constructor)return s}}tZ(t,s,e,i){return this.Nc?super.tZ(t):s.tZ(t,e,i)}qms(t){let s,e;if(this.gms=t,h_.h$.ogs(t),this.m$())s=this.ce,e=this.Nc,this.tZ(h_.h$.ags),this.tZ(h_.h$.lgs),this.O1(t);else{if(s=t.N1(),!s)return;if(s&&s.D2())return;e=s.m$();const i=this.hgs(t);this.tZ(h_.h$.ags,e,s,i),this.tZ(h_.h$.lgs,e,s,i),t.u1()}this.gms=null,h_.h$.ogs(null),t.U1()&&e.MK(s)}egs(t,s){const e=h_.Qms.Zms(s);this.dms.has(e)||this.dms.set(e,[]),this.dms.get(e).push(t)}rgs(t){const s=t.j1();this.mms.has(s)||this.mms.set(s,[]),this.mms.get(s).push(t),this.wkt()||this.Skt()}ngs(t){const s=t.j1();return!!this.mms.has(s)&&this.mms.get(s).includes(t)}_ms(){if(this.mms.size){for(const t of this.mms.values()){for(const s of t)s.a1()||s.Hn();r_.wh(t)}this.mms.clear(),this.wkt()&&this.skt()}}vkt(){return[{title:"$"+this.y0().Rc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this._u(),V5t:t=>this.kOt(t)}]}]}EDt(){return self.ugs}}}{const a_=self._s;let l_=null;a_.oyt.hyt.h$={Iyt:()=>!0,Cyt(t){const s=this.Ims();return!!s&&s.f1(t)},Ryt(t){const s=this.Ims();return!!s&&(s.hat()===t||2===t)},Pyt(t,s){const e=this.Ims();return!!e&&(e.hat()===s||2===s)&&e.f1(t)},ryt(t){return this.Ims().f1(t)},ayt:()=>!0,ogs(t){l_=t},ags:t=>l_.f1(t),lgs:()=>!0,IsPlaying(t){return this.Oms(t,a_.emt.IsPlaying)},Mds(){return this.Dms(a_.emt.IsPlaying)},R1(t){return this.Oms(t,a_.emt.R1)},cgs(){return this.Dms(a_.emt.R1)},L0(t,s){return 0===s?this.Oms(t,a_.emt.Ayt):1===s&&this.Oms(t,a_.emt.Oyt)},fgs(t){return 0===t?this.Dms(a_.emt.Ayt):1===t&&this.Dms(a_.emt.Oyt)}}}{const u_=self._s,c_=self.Wu,f_=u_.oyt.hyt;f_.Gdt={kOt(t){this.kOt(!!t)},async dgs(...t){if(!this._u()||!this.Xlt())return;const s=this.Xms(f_.mgs.pgs(this,...t));s.Play()&&await s._1()},async ggs(...t){if(!this._u()||!this.Xlt())return;const s=this.Xms(f_.mgs.ygs(this,...t));s.Play()&&await s._1()},async Sgs(...t){if(!this._u()||!this.Xlt())return;const s=this.Xms(f_.mgs.wgs(this,...t));s.Play()&&await s._1()},vgs(t){if(this._u()&&this.Xlt())for(const s of this.Lms(t))s.u1()},xgs(){if(this._u()&&this.Xlt())for(const t of this.Cms())t.u1()},bgs(t){if(this._u()&&this.Xlt())for(const s of this.Lms(t))s.c1()},Mgs(){if(this._u()&&this.Xlt())for(const t of this.Cms())t.c1()},Tgs(t){if(this._u()&&this.Xlt())for(const s of this.Lms(t))this.O1(s)},Ggs(){if(this._u()&&this.Xlt())for(const t of this.Cms())this.O1(t)},_gs(t,s,e){if(!this._u()||!this.Xlt())return;const i=u_.oyt.hyt.Qms.Igs(s);for(const s of this.Lms(t))s.xyt([i]),s.byt(e,i)},Cgs(t,s,e,i){if(!this._u()||!this.Xlt())return;const n=u_.oyt.hyt.Qms.Rgs(s);for(const s of this.Lms(t))s.xyt(n),s.byt(e,n[0]),s.byt(i,n[1])},Pgs(t,s){if(this._u()&&this.Xlt())for(const e of this.Lms(t,"value"))e.wyt(s,"value")},Egs(t,s){if(this._u()&&this.Xlt())for(const e of this.Lms(t,"value"))e.xyt(["value"]),e.byt(s,"value")},Fgs(t,s){if(!this._u()||!this.Xlt())return;const e=c_.oc(s);for(const s of this.Lms(t))s.L1(e)},Ags(t){if(!this._u()||!this.Xlt())return;const s=c_.oc(t);for(const t of this.Cms())t.L1(s)},Ogs(t,s){if(this._u()&&this.Xlt())for(const e of this.Lms(t))e.d1(s)},Dgs(t){if(this._u()&&this.Xlt())for(const s of this.Cms())s.d1(t)},kgs(t,s){if(this._u()&&this.Xlt())for(const e of this.Lms(t))e.M1(s)},Lgs(t){if(this._u()&&this.Xlt())for(const s of this.Cms())s.M1(t)},Ngs(t,s){if(this._u()&&this.Xlt())for(const e of this.Lms(t))e.V1(!!s)},Bgs(t){if(this._u()&&this.Xlt())for(const s of this.Cms())s.V1(!!t)}}}self._s.oyt.hyt._dt={Ugs(t){const s=this.kms(t);return s?s.uW():0},bas(t){const s=this.kms(t);return s?s.uW()/s.g1():0},Odt(t){const s=this.kms(t);return s?s.T1():0},Vgs(t){const s=this.kms(t,"value");return s?s.J1("value").H1():0},JAt(){let t=this.Ems();return t?t.cat():(t=this.Ims(),t?t.cat():"")}};{const d_=self._s,p_=self.Wu,m_=["position","size","scale"],g_=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],y_=["value"],S_=[].concat(m_).concat(g_).concat(y_),w_={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},v_=Object.assign({},S_.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),w_);d_.oyt.hyt.Qms=class{constructor(){}static Wgs(){return[...p_.Yu()]}static oc(t){return[...p_.Yu()][t]}static Zms(t){return S_[t]}static zgs(t){return S_.indexOf(t)}static jgs(t){return m_[t]}static Igs(t){return g_[t]}static Hgs(t){return y_[t]}static Jgs(t){return w_[t]}static Rgs(t){return d_.ri(t)?v_[t]:v_[S_[t]]}static $gs(t){return!!w_[t]}static qgs(t){return"offsetColor"===t}static Xgs(t){return"offsetAngle"===t}static Ygs(t){return"offsetOpacity"===t}static tgs(t){return"value"===t}}}{const x_=self._s,b_=x_.oyt.hyt,M_=new Map;b_.Kms=class{constructor(){}static Yms(t,s,e,i,n,r){0===M_.size&&this.Kgs();const h=b_.Qgs.Zgs(t);let o=M_.get(h);return x_.Ye(t)&&(t=b_.Qms.Zms(t)),this.tys(o,t,s,e,i,n,r)}static sys(t,s){return x_.oyt.hyt.Yms(t).eys(s)}static Kgs(){const t=b_.Qgs,s=b_.iys;this.nys(t.rys,this.hys,s.oys),this.nys(t.COLOR,this.ays,s.lys),this.nys(t.uys,this.cys,s.fys),this.nys(t.dys,this.pys,s.oys),this.nys(t.mys,this.gys,s.oys)}static nys(t,s,e){M_.set(t,this.yys(t,s,e))}static yys(t,s,e){return{name:t,Sys:s,eys:e}}static tys(t,s,e,i,n,r,h){return t.Sys(s,t.eys(e),t.eys(i),n,r,h)}static hys(t,s,e,i,n,r){return b_.Qms.Jgs(t).map((t,r)=>({Vyt:"world-instance",uut:t,type:"float",valueType:"numeric",jyt:s[r],Hyt:e[r],zyt:b_.Qms.oc(i),Uyt:n}))}static ays(t,s,e,i,n,r){return x_.a$.Text&&r.Zq()instanceof x_.a$.Text?{Vyt:"plugin",Wyt:[7],uut:"color",type:"color",valueType:"color",jyt:s,Hyt:e,zyt:b_.Qms.oc(i),Uyt:n}:{Vyt:"world-instance",uut:t,type:"color",valueType:"color",jyt:s,Hyt:e,zyt:b_.Qms.oc(i),Uyt:n}}static cys(t,s,e,i,n,r){return{Vyt:"world-instance",uut:t,type:"angle",valueType:"angle",jyt:s,Hyt:e,zyt:b_.Qms.oc(i),Uyt:n}}static gys(t,s,e,i,n,r){return{Vyt:"world-instance",uut:t,type:"float",valueType:"numeric",jyt:s,Hyt:e,zyt:b_.Qms.oc(i),Uyt:n}}static pys(t,s,e,i,n,r){return{Vyt:"value",uut:t,type:"float",valueType:"numeric",jyt:s,Hyt:e,zyt:b_.Qms.oc(i),Uyt:n}}}}{const T_=self._s,G_=T_.oyt.hyt,__={Uyt:"absolute"},I_=Object.assign({},__,{tags:"",uut:"",time:0,zyt:0,Nyt:0,loop:!1,Byt:!1,F0:1}),C_=Object.assign({},I_,{Lyt:"current-state",jyt:0,Hyt:0}),R_=Object.assign({},I_,{Lyt:"current-state",jyt:[0,0],Hyt:[0,0]}),P_=Object.assign({},I_,{Lyt:"current-state",jyt:[0,0,0],Hyt:[0,0,0]}),E_=Object.assign({},C_,{Lyt:"start-value"});G_.mgs=class{constructor(){}static wys(t,s,e,i,n,r,h,o){t.tags=s,t.time=e,t.zyt=i,t.Nyt=n,t.loop=r,t.Byt=h,t.F0=o}static pgs(t,s,e,i,n,r,h,o,a,l){const u="string"==typeof e?e:G_.Qms.Igs(e),c=G_.Qms.qgs(u)?P_:C_;return this.wys(c,s,n,r,h,o,a,l),G_.Qms.qgs(u)?(P_.Hyt[0]=T_.Rr(i),P_.Hyt[1]=T_.Pr(i),P_.Hyt[2]=T_.Er(i),P_.uut=G_.Qms.zgs(u)):G_.Qms.Ygs(u)?C_.Hyt=i/100:C_.Hyt=i,c.uut=G_.Qms.zgs(u),c}static ygs(t,s,e,i,n,r,h,o,a,l,u){this.wys(R_,s,r,h,o,a,l,u);const c="string"==typeof e?e:G_.Qms.jgs(e);return R_.Hyt[0]=i,R_.Hyt[1]=n,R_.uut=G_.Qms.zgs(c),R_}static wgs(t,s,e,i,n,r,h,o,a,l){return this.wys(E_,s,n,r,h,o,a,l),E_.jyt=e,E_.Hyt=i,E_.uut=G_.Qms.zgs("value"),E_}}}{const F_=self._s,A_=F_.oyt.hyt,O_=[];A_.Qgs=class{constructor(){}static Zgs(t){if(0===O_.length){const t=O_;t.push({fF:A_.Qms.$gs,result:this.rys}),t.push({fF:A_.Qms.qgs,result:this.COLOR}),t.push({fF:A_.Qms.Xgs,result:this.uys}),t.push({fF:A_.Qms.tgs,result:this.dys}),t.push({fF:()=>!0,result:this.mys})}F_.Ye(t)&&(t=F_.oyt.hyt.Qms.Zms(t));for(const s of O_)if(s.fF(t))return s.result}static get rys(){return"pair"}static get COLOR(){return"color"}static get uys(){return"angle"}static get dys(){return"value"}static get mys(){return"other"}}}{const D_=self._s;D_.oyt.hyt.iys=class{constructor(){}static fys(t){const s=D_.Zn(parseFloat(t));return D_.Kn(s)}static lys(t){return t.slice(0)}static oys(t){return t}}}{let k_=function(t){B_.hi(t);const s=V_.Hu(t);let e;if(e=s?V_.ac(s,null):V_.ac(t,null),-1===e)throw new Error(`invalid ease name '${t}'`);return e},L_=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};0;const N_=self._s,B_=self.Ls,U_=self.f0,V_=self.Wu,W_=N_.oyt.hyt,z_=new WeakMap,j_=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),H_={tags:"",vys:!1,loop:!1,Byt:!1,F0:1,jyt:0},J_={A1:k_};self.ugs=class extends U_{constructor(){super(),z_.set(this,U_.vK().o0())}xys(t,s,e,i,n){const r=z_.get(this);if(!r._u()||!r.Xlt())return null;const h=j_.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?B_.Ke(s):(B_.Mi(s),"two"===h.type?(B_.Ke(s[0]),B_.Ke(s[1])):"color"===h.type&&(B_.Ke(s[0]),B_.Ke(s[1]),B_.Ke(s[2]))),"angle"===t?s=N_.Qn(s):"opacity"===t?s*=100:"color"===t&&(s=N_.Cr(s[0],s[1],s[2]));const o=k_(i);let a;if(B_.ei(e),n=Object.assign({},H_,n),"value"===h.type&&B_.Ke(n.jyt),L_(n.tags,!0),"one"===h.type||"color"===h.type?a=r.Xms(W_.mgs.pgs(r,n.tags,h.name,s,e,o,!!n.vys,!!n.loop,!!n.Byt,n.F0)):"two"===h.type?a=r.Xms(W_.mgs.ygs(r,n.tags,h.name,s[0],s[1],e,o,!!n.vys,!!n.loop,!!n.Byt,n.F0)):"value"===h.type&&(a=r.Xms(W_.mgs.wgs(r,n.tags,n.jyt,s,e,o,!!n.vys,!!n.loop,!!n.Byt,n.F0))),a.pyt(r.yLt().o0()),!a.Play())throw new Error("failed to start tween");return a.Jyt(r,J_)}*bys(){const t=z_.get(this);for(const s of t.Cms())yield s.Jyt(t,J_)}*Mys(t){L_(t);const s=z_.get(this);for(const e of s.Lms(t))yield e.Jyt(s,J_)}get isEnabled(){return z_.get(this)._u()}set isEnabled(t){z_.get(this).kOt(t)}}}{const $_=self._s;$_.oyt.Tys=class extends $_.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const q_=self._s;q_.oyt.Tys.SBt=class extends q_.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const X_=self._s,Y_=self.Ls,K_=self.f0,Z_=0,Q_=1,tI=2,sI=3,eI=4,iI=5,nI=6;X_.oyt.Tys.Instance=class extends X_.mLt{constructor(t,s){super(t);const e=this.WJ();this.rNt=0,this.Gys=0,this.Go=0,this._ys=!1,this.Iys=!1,this.Cys=!1,this.jCt=!0,this.Rys=0,this.Pys=0,this.Z9t=e.dM(),this.Q9t=e.gM(),this.Eys=e.UX(),this.Fys=0,this.Ays=Math.min(Math.abs(e.by()),Math.abs(e.Ty())/2),this.Oys=!1,s&&(this.rNt=s[Z_],this.Gys=s[Q_],this.Go=s[tI],this._ys=!!s[sI],this.Iys=!!s[eI],this.Cys=!!s[iI],this.jCt=!!s[nI]);const i=e.UX();this.Rys=Math.cos(i)*this.rNt,this.Pys=Math.sin(i)*this.rNt,this.jCt&&(this.gkt(),this._ys&&this.vLt())}Hn(){super.Hn()}_M(){const t={dx:this.Rys,dy:this.Pys,lx:this.Z9t,ly:this.Q9t,lka:this.Eys,t:this.Fys};return 0!==this.Gys&&(t.acc=this.Gys),0!==this.Go&&(t.g=this.Go),this.Cys&&(t.st=this.Cys),this.jCt||(t.e=this.jCt),this._ys&&(t.bos=this._ys),this.Iys&&(t.sa=this.Iys),t}IM(t){this.Rys=t.dx,this.Pys=t.dy,this.Z9t=t.lx,this.Q9t=t.ly,this.Eys=t.lka,this.Fys=t.t,this.Gys=t.hasOwnProperty("acc")?t.acc:0,this.Go=t.hasOwnProperty("g")?t.g:0,this.Cys=!!t.hasOwnProperty("st")&&t.st,this._ys=!!t.hasOwnProperty("bos")&&t.bos,this.Iys=!!t.hasOwnProperty("sa")&&t.sa,this.BAt(!t.hasOwnProperty("e")||t.e)}yrt(){if(!this.jCt)return;const t=this.Nc.DH(this.ce),s=this.ce.WJ();if(s.UX()!==this.Eys){const t=s.UX();if(this.Iys){const s=X_.er(0,0,this.Rys,this.Pys);this.Rys=Math.cos(t)*s,this.Pys=Math.sin(t)*s}this.Eys=t}let e=0,i=0;if(0!==this.Gys){let n=X_.er(0,0,this.Rys,this.Pys),r=0;r=0===this.Rys&&0===this.Pys?s.UX():X_.nr(0,0,this.Rys,this.Pys),n+=this.Gys*t,e=Math.cos(r)*this.Gys,i=Math.sin(r)*this.Gys,n<0&&(n=0,e=0,i=0),this.Rys=Math.cos(r)*n,this.Pys=Math.sin(r)*n}if(0!==this.Go&&(this.Pys+=this.Go*t,i+=this.Go),this.Z9t=s.dM(),this.Q9t=s.gM(),0!==this.Rys||0!==this.Pys){const n=this.Rys*t+.5*e*t*t,r=this.Pys*t+.5*i*t*t,h=X_.er(0,0,n,r);if(this.Dys(n,r,h),this.Fys+=h,this.Iys&&(0!==n||0!==r)){const t=X_.nr(0,0,n,r);s.BX(t),this.Eys=s.UX()}s.RZ()}}Dys(t,s,e){const i=this.WJ();if(!this.Cys||e<=this.Ays)return i.FZ(t,s),i.RZ(),void(this.Cys&&this.tZ(X_.oyt.Tys.h$.kys));this.Oys=!1;const n=i.dM(),r=i.gM(),h=n+t,o=r+s,a=X_.nr(0,0,t,s),l=Math.cos(a)*this.Ays,u=Math.sin(a)*this.Ays,c=Math.floor(e/this.Ays);for(let t=1;t<=c;++t)if(i.PZ(n+l*t,r+u*t),i.RZ(),this.tZ(X_.oyt.Tys.h$.kys),this.ce.D2()||this.Oys)return;i.PZ(h,o),i.RZ(),this.tZ(X_.oyt.Tys.h$.kys)}wLt(){if(!this.jCt||!this._ys||0===this.Rys&&0===this.Pys)return;const t=this.Nc.DH(this.ce),s=this.ce.WJ(),e=this.Nc.Nj(),i=e.U$(this.ce);if(i){e.wHt(this.ce,i);const n=X_.er(0,0,this.Rys,this.Pys),r=e.VHt(this.ce,this.Z9t,this.Q9t);this.Rys=Math.cos(r)*n,this.Pys=Math.sin(r)*n,s.FZ(this.Rys*t,this.Pys*t),s.RZ(),this.Iys&&(s.BX(r),this.Eys=s.UX(),s.RZ()),e.LHt(this.ce,this.Rys/n,this.Pys/n,Math.max(2.5*n*t,30))||e.UHt(this.ce,100)}}apt(t){switch(t){case Z_:return this.Lys();case Q_:return this.Nys();case tI:return this.Bys();case eI:return this.Iys;case iI:return this.Cys;case nI:return this.VAt()}}ppt(t,s){switch(t){case Z_:this.Uys(s);break;case Q_:this.Gys=s;break;case tI:this.Go=s;break;case eI:this.Iys=!!s;break;case iI:this.Cys=!!s;break;case nI:this.BAt(!!s)}}Uys(t){const s=X_.nr(0,0,this.Rys,this.Pys);this.Rys=Math.cos(s)*t,this.Pys=Math.sin(s)*t}Lys(){return X_.Tr(X_.er(0,0,this.Rys,this.Pys),6)}Vys(t){this.Gys=t}Nys(){return this.Gys}Wys(t){this.Go=t}Bys(){return this.Go}zys(t){const s=X_.er(0,0,this.Rys,this.Pys);this.Rys=Math.cos(t)*s,this.Pys=Math.sin(t)*s}jys(){return X_.nr(0,0,this.Rys,this.Pys)}Hys(t){t=!!t,this._ys!==t&&(this._ys=t,this.jCt&&(this._ys?this.vLt():this.gLt()))}Jys(){return this._ys}$ys(t){this.Fys=t}qys(){return this.Fys}BAt(t){this.jCt=!!t,this.jCt?(this.gkt(),this._ys&&this.vLt()):(this.tkt(),this.gLt())}VAt(){return this.jCt}vkt(){const t="behaviors.bullet";return[{title:"$"+this.y0().Rc(),properties:[{name:t+".debugger.vector-x",value:this.Rys,V5t:t=>this.Rys=t},{name:t+".debugger.vector-y",value:this.Pys,V5t:t=>this.Pys=t},{name:t+".properties.speed.name",value:this.Lys(),V5t:t=>this.Uys(t)},{name:t+".debugger.angle-of-motion",value:X_.Qn(this.jys())},{name:t+".properties.gravity.name",value:this.Bys(),V5t:t=>this.Wys(t)},{name:t+".properties.acceleration.name",value:this.Nys(),V5t:t=>this.Vys(t)},{name:t+".debugger.distance-travelled",value:this.qys()},{name:t+".properties.enabled.name",value:this.VAt(),V5t:t=>this.BAt(t)}]}]}EDt(){return self.Xys}};const rI=new WeakMap;self.Xys=class extends K_{constructor(){super(),rI.set(this,K_.vK().o0())}get speed(){return rI.get(this).Lys()}set speed(t){Y_.ei(t),rI.get(this).Uys(t)}get acceleration(){return rI.get(this).Nys()}set acceleration(t){Y_.ei(t),rI.get(this).Vys(t)}get Uis(){return rI.get(this).Bys()}set Uis(t){Y_.ei(t),rI.get(this).Wys(t)}get Yys(){return rI.get(this).jys()}set Yys(t){Y_.ei(t),rI.get(this).zys(t)}get Kys(){return rI.get(this).Jys()}set Kys(t){rI.get(this).Hys(!!t)}get Zys(){return rI.get(this).qys()}set Zys(t){Y_.ei(t),rI.get(this).$ys(t)}get isEnabled(){return rI.get(this).VAt()}set isEnabled(t){rI.get(this).BAt(t)}}}{const hI=self._s;hI.oyt.Tys.h$={Qys(t,s){const e=Math.hypot(this.Rys,this.Pys);return hI.compare(e,t,s)},tSs(t,s){return hI.compare(this.qys(),t,s)},kys:()=>!0,_u(){return this.VAt()}}}{const oI=self._s;oI.oyt.Tys.Gdt={sSs(t){this.Uys(t)},Pes(t){this.Vys(t)},Ees(t){this.Wys(t)},eSs(t){this.zys(oI.Zn(t))},Mz(t){if(!t)return;const s=t.tAt(this.ce);if(!s)return;const e=this.ce.WJ(),i=this.Nc.Nj(),n=this.Nc.DH(this.ce),r=oI.er(0,0,this.Rys,this.Pys),h=i.VHt(this.ce,this.Z9t,this.Q9t,s);this.Rys=Math.cos(h)*r,this.Pys=Math.sin(h)*r,e.FZ(this.Rys*n,this.Pys*n),e.RZ(),this.Iys&&(e.BX(h),this.Eys=e.UX(),e.RZ()),0!==r&&(this._ys?i.LHt(this.ce,this.Rys/r,this.Pys/r,Math.max(2.5*r*n,30))||i.UHt(this.ce,100):i.kHt(this.ce,this.Rys/r,this.Pys/r,Math.max(2.5*r*n,30),s))},iSs(t){this.Hys(t)},nSs(t){this.$ys(t)},kOt(t){this.BAt(t)},rSs(){this.Oys=!0}}}{const aI=self._s;aI.oyt.Tys._dt={hSs(){return this.Lys()},oSs(){return this.Nys()},aSs(){return aI.Qn(this.jys())},lSs(){return this.qys()},Sns(){return this.Bys()}}}{const lI=self._s;lI.oyt.wrap=class extends lI.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const uI=self._s;uI.oyt.wrap.SBt=class extends uI.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const cI=self._s,fI=0,dI=new cI.Rect;cI.oyt.wrap.Instance=class extends cI.mLt{constructor(t,s){super(t),this.Dcs=0,s&&(this.Dcs=s[fI]),this.gkt()}Hn(){super.Hn()}_M(){return{m:this.Dcs}}IM(t){this.Dcs=t.m}yrt(){const t=this.ce.WJ(),s=t.zJ(),e=s.bJ(),i=t.HZ();0===this.Dcs?dI.set(0,0,e.by(),e.Ty()):dI.m(s.rK());let n=!1;i.tl()<dI.Za()?(t.pM(dI.tl()-1+(t.dM()-i.Za())),t.RZ(),n=!0):i.Za()>dI.tl()?(t.pM(dI.Za()+1-(i.tl()-t.dM())),t.RZ(),n=!0):i.sl()<dI.Qa()?(t.yM(dI.sl()-1+(t.gM()-i.Qa())),t.RZ(),n=!0):i.Qa()>dI.sl()&&(t.yM(dI.Qa()+1-(i.sl()-t.gM())),t.RZ(),n=!0),n&&this.tZ(cI.oyt.wrap.h$.uSs)}apt(t){if(t===fI)return this.Dcs}ppt(t,s){t===fI&&(this.Dcs=s)}}}self._s.oyt.wrap.h$={uSs:()=>!0},self._s.oyt.wrap.Gdt={},self._s.oyt.wrap._dt={};{const pI=self._s;pI.oyt.cSs=class extends pI.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const mI=self._s;mI.oyt.cSs.SBt=class extends mI.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const gI=self._s,yI=self.Ls,SI=self.f0,wI=0,vI=1,xI=2;gI.oyt.cSs.Instance=class extends gI.mLt{constructor(t,s){super(t),this.rNt=0,this.Wns=0,this.jCt=!0,s&&(this.rNt=gI.Zn(s[wI]),this.Wns=gI.Zn(s[vI]),this.jCt=s[xI]),this.jCt&&this.gkt()}Hn(){super.Hn()}Uys(t){this.rNt=t}Lys(){return this.rNt}Vys(t){this.Wns=t}Nys(){return this.Wns}_M(){return{s:this.rNt,a:this.Wns,e:this.jCt}}IM(t){this.rNt=t.s,this.Wns=t.a,this.BAt(t.e)}yrt(){if(!this.jCt)return;const t=this.Nc.DH(this.ce);if(0!==t&&(0!==this.Wns&&(this.rNt+=this.Wns*t),0!==this.rNt)){const s=this.ce.WJ();s.BX(s.UX()+this.rNt*t),s.RZ()}}apt(t){switch(t){case wI:return gI.Qn(this.Lys());case vI:return gI.Qn(this.Nys());case xI:return this.VAt()}}ppt(t,s){switch(t){case wI:this.Uys(gI.Zn(s));break;case vI:this.Vys(gI.Zn(s));break;case xI:this.BAt(s)}}BAt(t){this.jCt=!!t,this.jCt?this.gkt():this.tkt()}VAt(){return this.jCt}vkt(){const t="behaviors.rotate";return[{title:"$"+this.y0().Rc(),properties:[{name:t+".properties.speed.name",value:gI.Qn(this.Lys()),V5t:t=>this.Uys(gI.Zn(t))},{name:t+".properties.acceleration.name",value:gI.Qn(this.Nys()),V5t:t=>this.Vys(gI.Zn(t))},{name:t+".properties.enabled.name",value:this.VAt(),V5t:t=>this.BAt(t)}]}]}EDt(){return self.fSs}};const bI=new WeakMap;self.fSs=class extends SI{constructor(){super(),bI.set(this,SI.vK().o0())}set speed(t){yI.ei(t),bI.get(this).Uys(t)}get speed(){return bI.get(this).Lys()}set acceleration(t){yI.ei(t),bI.get(this).Vys(t)}get acceleration(){return bI.get(this).Nys()}get isEnabled(){return bI.get(this).VAt()}set isEnabled(t){bI.get(this).BAt(t)}}}self._s.oyt.cSs.h$={_u(){return this.VAt()}};{const MI=self._s;MI.oyt.cSs.Gdt={sSs(t){this.Uys(MI.Zn(t))},Pes(t){this.Vys(MI.Zn(t))},kOt(t){this.BAt(t)}}}{const TI=self._s;TI.oyt.cSs._dt={hSs(){return TI.Qn(this.Lys())},oSs(){return TI.Qn(this.Nys())}}}{const GI=self._s;GI.oyt.dSs=class extends GI.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const _I=self._s;_I.oyt.dSs.SBt=class extends _I.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const II=self._s,CI=self.Ls,RI=self.f0,PI=0,EI=1,FI=2,AI=3,OI=4,DI=5,kI=6,LI=7,NI=8,BI=0,UI=1,VI=2,WI=3,zI=4,jI=5,HI=6,JI=7,$I=8,qI=9,XI=0,YI=1,KI=2,ZI=3,QI=4,tC=2*Math.PI,sC=Math.PI/2,eC=3*Math.PI/2,iC=[0,1,8,3,4,2,5,6,9,7];II.oyt.dSs.Instance=class extends II.mLt{constructor(t,s){super(t),this.pSs=0,this.mSs=0,this.gSs=0,this.ySs=0,this.SSs=0,this.jCt=!0,this.wSs=0,this.vSs=0,this.xSs=0,this.bSs=0,this.MSs=0,this.TSs=0,this.mRt=0,this.GSs=0,this._Ss=0,this.ISs=0,this.CSs=0,s&&(this.mSs=iC[s[PI]],this.gSs=s[EI],this.bSs=this.Nc.yJ()*s[AI],this.wSs=s[FI],this.ySs=s[FI],this.ySs+=this.bSs,this.vSs=s[OI],0!==this.ySs&&(this.MSs=this.Nc.yJ()*s[DI],this.pSs=s[OI]/this.ySs*tC,this.pSs+=this.MSs/this.ySs*tC),this.TSs=this.Nc.yJ()*s[LI],this.xSs=s[kI],this.SSs=s[kI],this.SSs+=this.TSs,this.jCt=!!s[NI]),this.mSs===jI&&(this.SSs=II.Zn(this.SSs)),this.UUt(),this.jCt&&this.gkt()}Hn(){super.Hn()}_M(){return{i:this.pSs,e:this.jCt,mv:this.mSs,w:this.gSs,p:this.ySs,mag:this.SSs,iv:this.mRt,iv2:this.GSs,r:this.CSs,lkv:this._Ss,lkv2:this.ISs}}IM(t){this.pSs=t.i,this.BAt(t.e),this.mSs=t.mv,this.gSs=t.w,this.ySs=t.p,this.SSs=t.mag,this.mRt=t.iv,this.GSs=t.iv2,this.CSs=t.r,this._Ss=t.lkv,this.ISs=t.lkv2}UUt(){const t=this.ce.WJ();switch(this.mSs){case BI:this.mRt=t.dM();break;case UI:this.mRt=t.gM();break;case VI:this.mRt=t.by(),this.CSs=t.Ty()/t.by();break;case WI:this.mRt=t.by();break;case zI:this.mRt=t.Ty();break;case jI:this.mRt=t.UX();break;case HI:this.mRt=t.NA();break;case JI:this.mRt=0;break;case $I:this.mRt=t.dM(),this.GSs=t.gM();break;case qI:this.mRt=t.SM()}this._Ss=this.mRt,this.ISs=this.GSs}RSs(t){switch(t%=tC,this.gSs){case XI:return Math.sin(t);case YI:return t<=sC?t/sC:t<=eC?1-2*(t-sC)/Math.PI:(t-eC)/sC-1;case KI:return 2*t/tC-1;case ZI:return-2*t/tC+1;case QI:return t<Math.PI?-1:1}return 0}yrt(){const t=this.Nc.DH(this.ce);this.jCt&&0!==t&&(0===this.ySs?this.pSs=0:this.pSs=(this.pSs+t/this.ySs*tC)%tC,this.PSs())}PSs(){const t=this.ce.WJ();switch(this.mSs){case BI:t.dM()!==this._Ss&&(this.mRt+=t.dM()-this._Ss),t.pM(this.mRt+this.RSs(this.pSs)*this.SSs),this._Ss=t.dM();break;case UI:t.gM()!==this._Ss&&(this.mRt+=t.gM()-this._Ss),t.yM(this.mRt+this.RSs(this.pSs)*this.SSs),this._Ss=t.gM();break;case VI:t.ny(this.mRt+this.RSs(this.pSs)*this.SSs),t.hy(t.by()*this.CSs);break;case WI:t.ny(this.mRt+this.RSs(this.pSs)*this.SSs);break;case zI:t.hy(this.mRt+this.RSs(this.pSs)*this.SSs);break;case jI:t.UX()!==this._Ss&&(this.mRt=II.Kn(this.mRt+(t.UX()-this._Ss))),t.BX(this.mRt+this.RSs(this.pSs)*this.SSs),this._Ss=t.UX();break;case HI:t.UA(this.mRt+this.RSs(this.pSs)*this.SSs/100);break;case $I:t.dM()!==this._Ss&&(this.mRt+=t.dM()-this._Ss),t.gM()!==this.ISs&&(this.GSs+=t.gM()-this.ISs),t.pM(this.mRt+Math.cos(t.UX())*this.RSs(this.pSs)*this.SSs),t.yM(this.GSs+Math.sin(t.UX())*this.RSs(this.pSs)*this.SSs),this._Ss=t.dM(),this.ISs=t.gM();break;case qI:t.wM(this.mRt+this.RSs(this.pSs)*this.SSs)}t.RZ()}ESs(t,s){}FSs(t){this.ySs=t}ASs(){return this.ySs}OSs(t){this.SSs=t}DSs(t){5===this.mSs&&(t=II.Zn(t)),this.OSs(t)}kSs(){return this.SSs}LSs(){let t=this.kSs();return 5===this.mSs&&(t=II.Qn(t)),t}NSs(t){5===this.mSs&&5!==t&&(this.SSs=II.Qn(this.SSs)),this.mSs=t,this.UUt()}BSs(){return this.mSs}USs(t){this.gSs=t}VSs(){return this.gSs}WSs(t){this.pSs=II.Yn(t,0,2*Math.PI),this.PSs()}zSs(){return this.pSs}BAt(t){this.jCt=!!t,this.jCt?this.gkt():this.tkt()}VAt(){return this.jCt}apt(t){switch(t){case PI:return this.mSs;case EI:return this.gSs;case FI:return this.wSs;case kI:return this.xSs;case NI:return this.jCt}}ppt(t,s){switch(t){case PI:this.mSs=iC[s],this.UUt();break;case EI:this.gSs=s;break;case FI:this.wSs=s,this.ySs=this.wSs+this.bSs,this.jCt||(0!==this.ySs?(this.pSs=this.vSs/this.ySs*tC,this.pSs+=this.MSs/this.ySs*tC):this.pSs=0);break;case kI:this.xSs=s,this.SSs=this.xSs+this.TSs,this.mSs===jI&&(this.SSs=II.Zn(this.SSs));break;case NI:this.jCt=!!s}}vkt(){const t="behaviors.sin";return[{title:"$"+this.y0().Rc(),properties:[{name:t+".properties.enabled.name",value:this.VAt(),V5t:t=>this.BAt(t)},{name:t+".properties.period.name",value:this.ASs(),V5t:t=>this.FSs(t)},{name:t+".properties.magnitude.name",value:this.LSs(),V5t:t=>this.DSs(t)},{name:t+".debugger.value",value:this.RSs(this.zSs())*this.LSs()}]}]}EDt(){return self.jSs}};const nC=new WeakMap,rC=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],hC=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.jSs=class extends RI{constructor(){super(),nC.set(this,RI.vK().o0())}set HSs(t){CI.ei(t),nC.get(this).FSs(t)}get HSs(){return nC.get(this).ASs()}set JSs(t){CI.ei(t),nC.get(this).OSs(t)}get JSs(){return nC.get(this).kSs()}set $Ss(t){nC.get(this).WSs(t)}get $Ss(){return nC.get(this).zSs()}set qSs(t){CI.hi(t);const s=rC.indexOf(t);if(-1===s)throw new Error("invalid movement");nC.get(this).NSs(s)}get qSs(){return rC[nC.get(this).BSs()]}set XSs(t){CI.hi(t);const s=hC.indexOf(t);if(-1===s)throw new Error("invalid wave");nC.get(this).USs(s)}get XSs(){return hC[nC.get(this).VSs()]}get value(){const t=nC.get(this);return t.RSs(t.zSs())*t.kSs()}YSs(){nC.get(this).UUt()}set isEnabled(t){nC.get(this).BAt(!!t)}get isEnabled(){return nC.get(this).VAt()}}}{const oC=self._s;oC.oyt.dSs.h$={_u(){return this.VAt()},KSs(t){return this.BSs()===t},ZSs(t,s){return oC.compare(this.ASs(),t,s)},QSs(t,s){return oC.compare(this.LSs(),t,s)},tws(t){return this.VSs()===t}}}self._s.oyt.dSs.Gdt={kOt(t){this.BAt(0!==t)},sws(t){this.FSs(t)},ews(t){this.DSs(t)},iws(t){this.NSs(t)},nws(t){this.gSs=t},rws(t){const s=2*Math.PI;this.WSs(t*s%s)},hws(){this.UUt()}},self._s.oyt.dSs._dt={ows(){return this.zSs()/(2*Math.PI)},aws(){return this.ASs()},lws(){return this.LSs()},Vgs(){return this.RSs(this.zSs())*this.LSs()}};{const aC=self._s;aC.oyt.uws=class extends aC.aLt{constructor(t){super(t);const s=this.Nc.Sf();this.Yf=new aC.$f(aC.Vf.Jf(s,"pointerdown",t=>this.D7t(t.data)),aC.Vf.Jf(s,"pointermove",t=>this.k7t(t.data)),aC.Vf.Jf(s,"pointerup",t=>this.L7t(t.data,!1)),aC.Vf.Jf(s,"pointercancel",t=>this.L7t(t.data,!0)))}Hn(){this.Yf.Hn(),this.Yf=null,super.Hn()}D7t(t){"mouse"===t.pointerType&&0!==t.button||this.cws(t.pointerId.toString(),t.pageX-this.Nc.rq(),t.pageY-this.Nc.oq())}k7t(t){1&t.lastButtons&&!(1&t.buttons)?this.fws(t.pointerId.toString()):this.dws(t.pointerId.toString(),t.pageX-this.Nc.rq(),t.pageY-this.Nc.oq())}L7t(t,s){"mouse"===t.pointerType&&0!==t.button||this.fws(t.pointerId.toString())}async cws(t,s,e){const i=this.lX();let n=null,r=null,h=0,o=0;for(const t of i){const i=t.TVt(aC.oyt.uws);if(!i._u()||i.pws()||t.D2())continue;const a=t.WJ(),l=a.zJ(),[u,c]=l.oK(s,e,a.WZ());if(!l.OY()||!a.uQ(u,c))continue;if(!n){n=t,r=i,h=u,o=c;continue}const f=n.WJ();(l.Ej()>f.zJ().Ej()||l.Ej()===f.zJ().Ej()&&a.jJ()>f.jJ())&&(n=t,r=i,h=u,o=c)}n&&await r.mws(t,h,o)}dws(t,s,e){const i=this.lX();for(const n of i){const i=n.TVt(aC.oyt.uws);if(!i._u()||!i.pws()||i.pws()&&i.gws()!==t)continue;const r=n.WJ(),h=r.zJ(),[o,a]=h.oK(s,e,r.WZ());i.yws(o,a)}}async fws(t){const s=this.lX();for(const e of s){const s=e.TVt(aC.oyt.uws);s.pws()&&s.gws()===t&&await s.Sws()}}}}{const lC=self._s;lC.oyt.uws.SBt=class extends lC.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const uC=self._s,cC=(self.Ls,self.f0),fC=0,dC=1;uC.oyt.uws.Instance=class extends uC.mLt{constructor(t,s){super(t),this.wws=!1,this.Rys=0,this.Pys=0,this.vws="<none>",this.xws=0,this.jCt=!0,s&&(this.xws=s[fC],this.jCt=s[dC])}Hn(){super.Hn()}_M(){return{a:this.xws,e:this.jCt}}IM(t){this.xws=t.a,this.jCt=t.e,this.wws=!1}BAt(t){this.jCt=!!t,this.jCt||(this.wws=!1)}_u(){return this.jCt}bws(t){this.xws=t}Mws(){return this.xws}Tws(){this.wws&&this.Sws()}pws(){return this.wws}gws(){return this.vws}async mws(t,s,e){const i=this.WJ();this.Rys=s-i.dM(),this.Pys=e-i.gM(),this.wws=!0,this.vws=t,this.XDt("dragstart"),await this.n$(uC.oyt.uws.h$.Gws)}yws(t,s){const e=this.WJ(),i=t-this.Rys,n=s-this.Pys;0===this.xws?e.dM()===i&&e.gM()===n||(e.PZ(i,n),e.RZ()):1===this.xws?e.dM()!==i&&(e.pM(i),e.RZ()):2===this.xws&&e.gM()!==n&&(e.yM(n),e.RZ())}async Sws(){this.wws=!1,this.XDt("drop"),await this.n$(uC.oyt.uws.h$._ws)}apt(t){switch(t){case fC:return this.Mws();case dC:return this._u()}}ppt(t,s){switch(t){case fC:this.bws(s);break;case dC:this.BAt(!!s)}}vkt(){const t="behaviors.dragndrop",s=t+".properties.axes";let e="";return 0===this.xws?e=s+".items.both":1===this.xws?e=s+".items.horizontal-only":2===this.xws&&(e=s+".items.vertical-only"),[{title:"$"+this.y0().Rc(),properties:[{name:t+".debugger.is-dragging",value:this.pws()},{name:s+".name",value:[e]},{name:t+".properties.enabled.name",value:this._u(),V5t:t=>this.BAt(t)}]}]}EDt(){return self.Iws}};const pC=new WeakMap,mC=["both","horizontal","vertical"];self.Iws=class extends cC{constructor(){super(),pC.set(this,cC.vK().o0())}set axes(t){const s=mC.indexOf(t);if(-1===s)throw new Error("invalid axes");pC.get(this).bws(s)}get axes(){return mC[pC.get(this).Mws()]}drop(){pC.get(this).Tws()}get Cws(){return pC.get(this).pws()}get isEnabled(){return pC.get(this)._u()}set isEnabled(t){pC.get(this).BAt(t)}}}self._s.oyt.uws.h$={pws(){return this.pws()},Gws:()=>!0,_ws:()=>!0,_u(){return this._u()}},self._s.oyt.uws.Gdt={kOt(t){this.BAt(!!t)},Rws(t){this.bws(t)},Pws(){this.Tws()}},self._s.oyt.uws._dt={};{const gC=self._s;gC.oyt.Ews=class extends gC.aLt{constructor(t){super(t),this.Fws=0,this.Aws=0,this.Ows=0,this.Dws=0}Hn(){super.Hn()}kws(t){this.Fws=t}Lws(){return this.Fws}Nws(t){this.Aws=t}Bws(){return this.Aws}Uws(t){this.Ows=t}Vws(){return this.Ows}Wws(t){this.Dws=t}zws(){return this.Dws}}}{const yC=self._s;yC.oyt.Ews.SBt=class extends yC.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const SC=self._s,wC=0;SC.oyt.Ews.Instance=class extends SC.mLt{constructor(t,s){super(t),this.jCt=!0,s&&(this.jCt=s[wC]),this.jCt&&this.Skt()}Hn(){super.Hn()}_M(){const t=this.p0();return{e:this.jCt,smg:t.Lws(),ss:t.Bws(),se:t.Vws(),smd:t.zws()}}IM(t){const s=this.p0();s.kws(t.smg),s.Nws(t.ss),s.Uws(t.se),s.Wws(t.smd),this.jCt=t.e,this.jCt?this.Skt():this.skt()}BAt(t){this.jCt=!!t,this.jCt?this.Skt():this.skt()}_u(){return this.jCt}mkt(){if(!this._u())return;this.Nc.DH(this.ce);const t=this.p0(),s=t.lX();let e=0,i=0,n=0;for(const t of s){const s=t.MVt(SC.oyt.Ews);if(!s||!s.o0()._u())continue;const r=t.WJ();e+=r.dM(),i+=r.gM(),++n}const r=this.ce.WJ().bJ(),h=this.Nc.BH();let o=0,a=0;if(h>=t.Bws()&&h<t.Vws()){let s=t.Lws()*Math.min(this.Nc.HH(),1);0===t.zws()&&(s*=1-(h-t.Bws())/(t.Vws()-t.Bws()));const e=this.Nc.yJ()*Math.PI*2,i=this.Nc.yJ()*s;o=Math.cos(e)*i,a=Math.sin(e)*i}r.VX(e/n+o),r.zX(i/n+a)}apt(t){if(t===wC)return this.jCt}ppt(t,s){t===wC&&(this.jCt=!!s,this.jCt?this.Skt():this.skt())}vkt(){return[{title:"$"+this.y0().Rc(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this._u(),V5t:t=>this.BAt(t)}]}]}}}self._s.oyt.Ews.h$={_u(){return this._u()}},self._s.oyt.Ews.Gdt={jws(t,s,e){const i=this.p0();i.kws(t),i.Nws(this.Nc.BH()),i.Uws(this.Nc.BH()+s),i.Wws(e)},kOt(t){this.BAt(0!==t)}},self._s.oyt.Ews._dt={};{const vC=self._s;vC.oyt.Hws=class extends vC.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const xC=self._s;xC.oyt.Hws.SBt=class extends xC.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const bC=self._s,MC=self.Ls,TC=self.f0,GC=0,_C=1,IC=2,CC=3,RC=4,PC=5,EC=6;bC.oyt.Hws.Instance=class extends bC.mLt{constructor(t,s){super(t),this.Jws=200,this.Gys=600,this.$ws=600,this.qws=0,this.Iys=!0,this.Xws=!1,this.jCt=!0,this.rNt=0,this.Yws=this.WJ().UX(),this.Kws=[],s&&(this.Jws=s[GC],this.Gys=s[_C],this.$ws=s[IC],this.qws=bC.Zn(s[CC]),this.Iys=s[RC],this.Xws=s[PC],this.jCt=s[EC]),this.Zws=null,this.Qws=NaN,this.tvs=NaN,this.svs=NaN,this.evs=[0,0],this.ivs={iht:this.evs}}Hn(){this.Zws&&(this.Zws.Hn(),this.Zws=null),this.Qws=NaN,this.tvs=NaN,this.svs=NaN,this.evs=null,this.ivs=null,super.Hn()}_M(){return{ms:this.Jws,acc:this.Gys,dec:this.$ws,rs:this.qws,sa:this.Iys,sos:this.Xws,s:this.rNt,ma:this.Yws,wp:this.Kws.map(t=>({x:t.x,y:t.y})),e:this.jCt}}IM(t){this.Jws=t.ms,this.Gys=t.acc,this.$ws=t.dec,this.qws=t.rs,this.Iys=t.sa,this.Xws=t.sos,this.rNt=t.s,this.Yws=t.ma,this.Kws=t.wp.map(t=>({x:t.x,y:t.y})),this.BAt(t.e),this.jCt&&this.Kws.length>0&&this.gkt()}nvs(t,s,e,i){e&&bC.wh(this.Kws),this.Kws.push({x:t,y:s,qd:i}),this.jCt&&this.gkt()}rvs(){return this.Kws.length}hvs(t){return(t=Math.floor(t))<0||t>=this.Kws.length?0:this.Kws[t].x}ovs(t){return(t=Math.floor(t))<0||t>=this.Kws.length?0:this.Kws[t].y}avs(){return this.Kws.length>0}lvs(){bC.wh(this.Kws),this.rNt=0,this.tkt()}uvs(){return this.Kws.length>0?this.Kws[0].x:0}cvs(){return this.Kws.length>0?this.Kws[0].y:0}fvs(){if(this.Kws.length>0){const t=this.Kws[0];if(t.qd)return t.qd.dvs}return!1}pvs(){if(this.Kws.length>0){const t=this.Kws[0];if(t.qd)return t.qd.dvs&&t.qd.mvs}return!1}gvs(){if(this.Kws.length>0){const t=this.Kws[0];if(t.qd)return t.qd.yvs}return NaN}Uys(t){this.avs()&&(this.rNt=Math.min(t,this.Jws))}Lys(){return this.rNt}Svs(t){this.Jws=Math.max(t,0),this.Uys(this.rNt)}wvs(){return this.Jws}vvs(){return 0!==this.qws}yrt(){if(!this.jCt||!this.avs())return;const t=this.Nc.DH(this.ce),s=this.ce.WJ(),e=s.dM(),i=s.gM(),n=s.UX();let r=this.rNt,h=this.Jws;const o=this.Gys,a=this.$ws,l=this.uvs(),u=this.cvs(),c=bC.nr(e,i,l,u);let f=!1;if(a>0&&1===this.Kws.length){const t=.5*r*r/a*1.0001;if(f=bC.ir(e,i,l,u)<=t*t,f){const t=bC.er(e,i,l,u);r=Math.sqrt(2*a*t),h=r,this.rNt=r}}if(this.vvs()){const t=bC.rr(this.Yws,c);if(t>Number.EPSILON){const e=t/this.qws,i=bC.er(s.dM(),s.gM(),l,u)/(2*Math.sin(t))*t;h=Math.min(h,bC.Yn(i/e,0,this.Jws))}}let d=f?-a:o;const p=Math.min(r*t+.5*d*t*t,h*t);if(f){if(a>0&&(this.rNt=Math.max(this.rNt-a*t,0),0===this.rNt))return void this.xvs(s,l,u)}else this.rNt=0===o?h:Math.min(this.rNt+o*t,h);if(bC.ir(s.dM(),s.gM(),l,u)<=p*p)this.xvs(s,l,u);else{if(this.vvs()?this.Yws=bC.hr(this.Yws,c,this.qws*t):this.Yws=c,s.FZ(Math.cos(this.Yws)*p,Math.sin(this.Yws)*p),this.Iys){const t=this.fvs(),e=this.pvs();if(t&&!e){const t=bC.er(this.Qws,this.tvs,s.dM(),s.gM())/bC.er(this.Qws,this.tvs,l,u);s.BX(bC.lr(this.svs,this.gvs(),t))}else s.BX(this.Yws),this.Qws=NaN,this.tvs=NaN,this.svs=NaN}s.RZ(),this.bvs(e,i,n)}}xvs(t,s,e){t.PZ(s,e);const i=this.Kws[0];i.qd&&i.qd.dvs?(this.Qws=i.x,this.tvs=i.y,this.svs=i.qd.yvs,this.Iys&&t.BX(this.svs)):(this.Qws=NaN,this.tvs=NaN,this.svs=NaN),t.RZ(),this.Kws.shift(),0===this.Kws.length&&(this.Zws&&(this.Zws.Hn(),this.Zws=null,this.Qws=NaN,this.tvs=NaN,this.svs=NaN),this.rNt=0,this.tkt()),this.XDt("arrived"),this.tZ(bC.oyt.Hws.h$.Mvs)}bvs(t,s,e){const i=this.Nc.Nj();if(this.Xws&&i.U$(this.ce)){this.lvs();const n=this.ce.WJ(),r=n.dM(),h=n.gM(),o=bC.nr(r,h,t,s),a=bC.er(r,h,t,s);i.LHt(this.ce,Math.cos(o),Math.sin(o),Math.max(a,1))||(n.PZ(t,s),n.BX(e),n.RZ()),this.XDt("hitsolid"),this.tZ(bC.oyt.Hws.h$.Tvs)}}Gvs(){return this.Iys}_vs(t){this.Iys=!!t}zys(t){if(this.Yws=t,this.jCt&&this.Iys&&!this.avs()){const t=this.WJ();t.BX(this.Yws),t.RZ()}}jys(){return this.Yws}Vys(t){this.Gys=Math.max(t,0)}Nys(){return this.Gys}Ivs(t){this.$ws=Math.max(t,0)}Cvs(){return this.$ws}Rvs(t){this.qws=Math.max(t,0)}Pvs(){return this.qws}Evs(t){this.Xws=!!t}Fvs(){return this.Xws}BAt(t){t=!!t,this.jCt!==t&&(this.jCt=t,this.jCt&&this.avs()?this.gkt():this.tkt())}VAt(){return this.jCt}apt(t){switch(t){case GC:return this.wvs();case _C:return this.Nys();case IC:return this.Cvs();case CC:return bC.Qn(this.Pvs());case RC:return this.Gvs();case PC:return this.Fvs();case EC:return this.VAt()}}ppt(t,s){switch(t){case GC:this.Svs(s);break;case _C:this.Vys(s);break;case IC:this.Ivs(s);break;case CC:this.Rvs(bC.Zn(s));break;case RC:this._vs(s);break;case PC:this.Evs(s);break;case EC:this.BAt(s)}}vkt(){const t="behaviors.moveto";return[{title:"$"+this.y0().Rc(),properties:[{name:t+".debugger.speed",value:this.Lys(),V5t:t=>this.Uys(t)},{name:t+".debugger.angle-of-motion",value:bC.Qn(this.jys()),V5t:t=>this.Yws=bC.Zn(t)},{name:t+".debugger.target-x",value:this.uvs()},{name:t+".debugger.target-y",value:this.cvs()},{name:t+".debugger.waypoint-count",value:this.rvs()},{name:t+".properties.max-speed.name",value:this.wvs(),V5t:t=>this.Svs(t)},{name:t+".properties.acceleration.name",value:this.Nys(),V5t:t=>this.Vys(t)},{name:t+".properties.deceleration.name",value:this.Cvs(),V5t:t=>this.Ivs(t)},{name:t+".properties.rotate-speed.name",value:bC.Qn(this.Pvs()),V5t:t=>this.Rvs(bC.Zn(t))},{name:t+".properties.enabled.name",value:this.VAt(),V5t:t=>this.BAt(t)}]}]}EDt(){return self.Avs}};const FC=new WeakMap;self.Avs=class extends TC{constructor(){super(),FC.set(this,TC.vK().o0())}Ovs(t,s,e=!0){MC.ei(t),MC.ei(s),FC.get(this).nvs(t,s,!!e)}Dvs(){return FC.get(this).uvs()}kvs(){return FC.get(this).cvs()}Lvs(){const t=FC.get(this);return[t.uvs(),t.cvs()]}Nvs(){return FC.get(this).rvs()}Bvs(t){return MC.ei(t),FC.get(this).hvs(t)}Uvs(t){return MC.ei(t),FC.get(this).ovs(t)}Vvs(t){MC.ei(t);const s=FC.get(this);return[s.hvs(t),s.ovs(t)]}stop(){FC.get(this).lvs()}get Wvs(){return FC.get(this).avs()}get speed(){return FC.get(this).Lys()}set speed(t){MC.ei(t),FC.get(this).Uys(t)}get zvs(){return FC.get(this).wvs()}set zvs(t){MC.ei(t),FC.get(this).Svs(t)}get acceleration(){return FC.get(this).Nys()}set acceleration(t){MC.ei(t),FC.get(this).Vys(t)}get jvs(){return FC.get(this).Cvs()}set jvs(t){MC.ei(t),FC.get(this).Ivs(t)}get Yys(){return FC.get(this).jys()}set Yys(t){MC.ei(t),FC.get(this).zys(t)}get Hvs(){return FC.get(this).Pvs()}set Hvs(t){MC.ei(t),FC.get(this).Rvs(t)}get Jvs(){return FC.get(this).Fvs()}set Jvs(t){FC.get(this).Evs(t)}get isEnabled(){return FC.get(this).VAt()}set isEnabled(t){FC.get(this).BAt(t)}}}{const AC=self._s;AC.oyt.Hws.h$={$vs(){return this.avs()},Qys(t,s){return AC.compare(this.Lys(),t,s)},_u(){return this.VAt()},Mvs:()=>!0,Tvs:()=>!0}}{const OC=self._s,DC=25;OC.oyt.Hws.Gdt={qvs(t,s,e){this.nvs(t,s,0===e)},Xvs(t,s,e){if(!t)return;const i=t.oX(this.ce);if(!i||!i.WJ())return;const[n,r]=i.MFt(s);this.nvs(n,r,0===e)},Yvs(t){const s=this.ce.TVt(OC.oyt.Kvs);if(!s)return;const e=s.Zvs();if(0!==e.length)for(let s=0,i=e.length;s<i;++s){const i=e[s];this.nvs(i.x,i.y,0===s&&0===t)}},Qvs(t,s,e){const i=OC.jn(OC.Nrt,t,s);if(!i.Zrt())return void i.Hn();i.tht(this.ce.WJ());let n=!0;for(const t of i.Qrt())switch(t.oI()){case"line":{const s=t.dM(),i=t.gM();this.nvs(s,i,n&&0===e),n=!1;break}case"cubic-bezier":for(let s=0;s<=t.Jht();s++){const i=s*t.$ht(),r=t.Map(i),h=r[0],o=r[1],a=this.hvs(this.rvs()-1),l=this.ovs(this.rvs()-1);!n&&OC.Ye(a)&&OC.Ye(l)&&OC.ir(a,l,h,o)<DC||(this.nvs(h,o,n&&0===e,{dvs:!0,mvs:n,yvs:Math.atan2(o-l,h-a)}),n=!1)}}this.Zws=i},txs(t,s,e){const i=this.Nc.Hot().qnt(t);i&&OC.oyt.Hws.Gdt.Qvs.call(this,i,s,e)},u1(){this.lvs()},sxs(t){this.zys(OC.Zn(t))},sSs(t){this.Uys(t)},exs(t){this.Svs(t)},Pes(t){this.Vys(t)},ixs(t){this.Ivs(t)},nxs(t){this.Rvs(OC.Zn(t))},rxs(t){this.Evs(t)},kOt(t){this.BAt(t)}}}{const kC=self._s;kC.oyt.Hws._dt={hSs(){return this.Lys()},hxs(){return this.wvs()},oSs(){return this.Nys()},oxs(){return this.Cvs()},axs(){return kC.Qn(this.jys())},lxs(){return kC.Qn(this.Pvs())},uxs(){return this.uvs()},cxs(){return this.cvs()},fxs(){return this.rvs()},dxs(t){return this.hvs(t)},pxs(t){return this.ovs(t)}}}{const LC=self._s;LC.oyt.ILt=class extends LC.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const NC=self._s;NC.oyt.ILt.SBt=class extends NC.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const BC=self._s,UC=self.Ls,VC=self.f0,WC=0,zC=1,jC=new Set;BC.oyt.ILt.Instance=class extends BC.mLt{constructor(t,s){super(t),this.kOt(!0),s&&(this.kOt(s[WC]),this.lat(s[zC]))}Hn(){super.Hn()}kOt(t){this.ce.tVt(!!t)}_u(){return this.ce.QUt()}lat(t){const s=this.ce.SEt();if(!t.trim())return void s.delete("solidTags");let e=s.get("solidTags");e||(e=new Set,s.set("solidTags",e)),e.clear();for(const s of t.split(" "))s&&e.add(s.toLowerCase())}G1(){return this.ce.SEt().get("solidTags")||jC}mxs(){return[...this.G1()].join(" ")}_M(){return{e:this._u()}}IM(t){this.kOt(t.e)}apt(t){if(t===WC)return this._u()}ppt(t,s){t===WC&&this.kOt(s)}vkt(){return[{title:"$"+this.y0().Rc(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this._u(),V5t:t=>this.kOt(t)},{name:"behaviors.solid.properties.tags.name",value:this.mxs(),V5t:t=>this.lat(t)}]}]}EDt(){return self.gxs}};const HC=new WeakMap;self.gxs=class extends VC{constructor(){super(),HC.set(this,VC.vK().o0())}set isEnabled(t){HC.get(this).kOt(!!t)}get isEnabled(){return HC.get(this)._u()}set tags(t){UC.hi(t),HC.get(this).lat(t)}get tags(){return HC.get(this).mxs()}}}self._s.oyt.ILt.h$={_u(){return this._u()}},self._s.oyt.ILt.Gdt={kOt(t){this.kOt(t)},lat(t){this.lat(t)}},self._s.oyt.ILt._dt={};{const JC=self._s;JC.oyt.yxs=class extends JC.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const $C=self._s;$C.oyt.yxs.SBt=class extends $C.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const qC=self._s,XC=self.Ls,YC=self.f0;qC.oyt.yxs.Instance=class extends qC.mLt{constructor(t,s){super(t),this.Sxs=0,this.wxs=0,this.vxs=0,this.xxs=0,this.bxs=0,this.gkt()}Hn(){super.Hn()}Mxs(t,s,e){this.Sxs=t,this.wxs=s,this.vxs=1,this.xxs=s,this.bxs=e,this.ce.WJ().TY(!1),this.Nc.XJ()}Txs(){this.bxs=0,this.ce.WJ().TY(!0),this.Nc.XJ()}Gxs(){return this.bxs>0}_M(){return{on:this.Sxs,off:this.wxs,s:this.vxs,stl:this.xxs,tl:this.bxs}}IM(t){this.Sxs=t.on,this.wxs=t.off,this.vxs=t.s,this.xxs=t.stl,this.bxs=null===t.tl?1/0:t.tl}yrt(){if(this.bxs<=0)return;const t=this.Nc.DH(this.ce);if(this.bxs-=t,this.bxs<=0)return this.bxs=0,this.ce.WJ().TY(!0),this.Nc.XJ(),this.XDt("flashend"),this.ikt(qC.oyt.yxs.h$._xs);this.xxs-=t,this.xxs<=0&&(0===this.vxs?(this.ce.WJ().TY(!1),this.vxs=1,this.xxs+=this.wxs):(this.ce.WJ().TY(!0),this.vxs=0,this.xxs+=this.Sxs),this.Nc.XJ())}vkt(){const t="behaviors.flash.debugger";return[{title:"$"+this.y0().Rc(),properties:[{name:t+".on-time",value:this.Sxs,V5t:t=>this.Sxs=t},{name:t+".off-time",value:this.wxs,V5t:t=>this.wxs=t},{name:t+".is-flashing",value:this.bxs>0},{name:t+".time-left",value:this.bxs}]}]}EDt(){return self.Ixs}};const KC=new WeakMap;self.Ixs=class extends YC{constructor(){super(),KC.set(this,YC.vK().o0())}Cxs(t,s,e){XC.ei(t),XC.ei(s),XC.ei(e),KC.get(this).Mxs(t,s,e)}stop(){KC.get(this).Txs()}get Rxs(){return KC.get(this).Gxs()}}}self._s.oyt.yxs.h$={Pxs(){return this.Gxs()},_xs:()=>!0},self._s.oyt.yxs.Gdt={yxs(t,s,e){this.Mxs(t,s,e)},Exs(){this.Txs()}},self._s.oyt.yxs._dt={};{const ZC=self._s;ZC.oyt.Fxs=class extends ZC.aLt{constructor(t){super(t)}Hn(){super.Hn()}}}{const QC=self._s;QC.oyt.Fxs.SBt=class extends QC.dLt{constructor(t){super(t)}Hn(){super.Hn()}PDt(){}}}{const tR=self._s,sR=(self.Ls,self.f0),eR=0,iR=1,nR=2,rR=3,hR=4;tR.oyt.Fxs.Instance=class extends tR.mLt{constructor(t,s){super(t),this.Axs=2,this.Oxs=2,this.Dxs=0,this.kxs=0,this.jCt=!0;const e=this.ce.WJ().HZ();this.Lxs=e.Za(),this.Nxs=e.Qa(),this.Bxs=this.Nc.sH()-e.Za(),this.Uxs=this.Nc.iH()-e.Qa(),this.Vxs=this.Nc.sH()-e.tl(),this.Wxs=this.Nc.iH()-e.sl(),s&&(this.Axs=s[eR],this.Oxs=s[iR],this.Dxs=s[nR],this.kxs=s[rR],this.jCt=!!s[hR]);const i=this.Nc.Sf();this.Yf=new tR.$f(tR.Vf.Jf(i,"layoutchange",()=>this.zxs())),this.jCt&&this.gkt()}Hn(){super.Hn()}_M(){return{xl:this.Lxs,yt:this.Nxs,xr:this.Bxs,yb:this.Uxs,rd:this.Vxs,bd:this.Wxs,al:this.Axs,at:this.Oxs,ar:this.Dxs,ab:this.kxs,e:this.jCt}}IM(t){this.Lxs=t.xl,this.Nxs=t.yt,this.Bxs=t.xr,this.Uxs=t.yb,this.Vxs=t.rd,this.Wxs=t.bd,this.Axs=t.al,this.Oxs=t.at,this.Dxs=t.ar,this.kxs=t.ab,this.jCt=t.e,this.jCt?this.gkt():this.tkt()}BAt(t){if(this.jCt&&!t)this.jCt=!1,this.tkt();else if(!this.jCt&&t){const t=this.ce.WJ().HZ();this.Lxs=t.Za(),this.Nxs=t.Qa(),this.Bxs=this.Nc.sH()-t.Za(),this.Uxs=this.Nc.iH()-t.Qa(),this.Vxs=this.Nc.sH()-t.tl(),this.Wxs=this.Nc.iH()-t.sl(),this.jCt=!0,this.gkt()}}VAt(){return this.jCt}nLt(){if(!this.jCt)return;const t=this.ce.WJ(),s=t.zJ().rK();if(0===this.Axs){const e=s.Za()+this.Lxs-t.HZ().Za();0!==e&&(t.Mpt(e),t.RZ())}else if(1===this.Axs){const e=s.tl()-this.Bxs-t.HZ().Za();0!==e&&(t.Mpt(e),t.RZ())}if(0===this.Oxs){const e=s.Qa()+this.Nxs-t.HZ().Qa();0!==e&&(t.Tpt(e),t.RZ())}else if(1===this.Oxs){const e=s.sl()-this.Uxs-t.HZ().Qa();0!==e&&(t.Tpt(e),t.RZ())}if(1===this.Dxs){const e=s.tl()-this.Vxs-t.HZ().tl();0!==e&&(t.Mpt(t.OZ()*e),t.ny(Math.max(t.by()+e),0),t.RZ(),this.Vxs=s.tl()-t.HZ().tl())}if(1===this.kxs){const e=s.sl()-this.Wxs-t.HZ().sl();0!==e&&(t.Tpt(t.LZ()*e),t.hy(Math.max(t.Ty()+e,0)),t.RZ(),this.Wxs=s.sl()-t.HZ().sl())}}yrt(){this.nLt()}zxs(){this.nLt()}apt(t){switch(t){case eR:return this.Axs;case iR:return this.Oxs;case nR:return this.Dxs;case rR:return this.kxs;case hR:return this.jCt}}ppt(t,s){switch(t){case eR:this.Axs=s;break;case iR:this.Oxs=s;break;case nR:this.Dxs=s;break;case rR:this.kxs=s;break;case hR:this.jCt=!!s,this.jCt?this.gkt():this.tkt()}}vkt(){return[{title:"$"+this.y0().Rc(),properties:[{name:"behaviors.anchor.properties.enabled.name",value:this.VAt(),V5t:t=>this.BAt(t)}]}]}EDt(){return self.jxs}};const oR=new WeakMap;self.jxs=class extends sR{constructor(){super(),oR.set(this,sR.vK().o0())}get isEnabled(){return oR.get(this).VAt()}set isEnabled(t){oR.get(this).BAt(t)}}}self._s.oyt.Fxs.h$={_u(){return this.VAt()}},self._s.oyt.Fxs.Gdt={kOt(t){this.BAt(0!==t)}},self._s.oyt.Fxs._dt={};{let aR=function(t,s){return"number"==typeof t&&"number"==typeof s},lR=function(t,s){return aR(t,s)?t+s:t},uR=function(t,s){return aR(t,s)?t-s:t},cR=function(t,s){return aR(t,s)?t*s:t},fR=function(t,s){return aR(t,s)?t/s:t},dR=function(t,s){return aR(t,s)?t%s:t},pR=function(t,s){return aR(t,s)?Math.pow(t,s):t},mR=function(t,s){if("string"==typeof t||"string"==typeof s){let e,i;return e="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,i="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,e+i}return t&&s?1:0},gR=function(t,s){return aR(t,s)?t||s?1:0:t};0;const yR=self._s;self.nPt=[t=>{const s=t.pPt(0).ORt(),e=t.pPt(1).iPt();return()=>Math.round(s(2,15)*e.Dct())},t=>{const s=t.pPt(0);return()=>s.jRt()},()=>1,t=>{const s=t.pPt(0).ORt(),e=t.pPt(1).iPt();return()=>Math.round(s(1,1.5))*e.Dct()},t=>{const s=t.pPt(0).ORt(),e=t.pPt(1).iPt();return()=>Math.round(s(10,15))*e.Dct()},()=>"",t=>{const s=t.pPt(0),e=t.pPt(1);return()=>Math.round(s.jRt()*e.jRt())},()=>"8",t=>{const s=t.pPt(0);return()=>s.URt()},t=>{const s=t.pPt(0).ORt();return()=>s(0,1,2,3,4)},()=>"",t=>{const s=t.pPt(0).ORt();return()=>s()},()=>0,()=>.1,()=>1881,()=>"0",t=>{const s=t.pPt(0);return()=>s.URt()+15},t=>{const s=t.pPt(0);return()=>s.URt()-15},()=>"",()=>.07,()=>"",()=>2,()=>.2,()=>"",t=>{const s=t.pPt(0);return()=>-1*s.JRt()},()=>"",t=>{const s=t.pPt(0);return()=>s.URt(1)},t=>{const s=t.pPt(0).ORt(),e=t.pPt(1),i=t.pPt(2);return()=>s(e.URt(),i.URt(1))},t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3);return()=>yR.Qn(yR.nr(s.URt(),e.URt(),i.URt(2),n.URt(2)))},t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3);return()=>yR.Qn(yR.nr(s.URt(2),e.URt(2),i.URt(),n.URt()))+180},t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3);return()=>yR.Qn(yR.nr(s.URt(2),e.URt(2),i.URt(),n.URt()))},()=>"1",()=>3,()=>5,t=>{const s=t.pPt(0);return()=>s.URt()-25},()=>.3,t=>{const s=t.pPt(0);return()=>s.JRt()},()=>"",()=>"",()=>"",()=>4,()=>"",()=>"",()=>"4",t=>{const s=t.pPt(0),e=t.pPt(1).ORt();return()=>s.ZRt()+e(-60,60)},()=>"",()=>"2",()=>"3",t=>{const s=t.pPt(0),e=t.pPt(1).ORt();return()=>s.ZRt()-30+15*e()},()=>7,()=>"2",t=>{const s=t.pPt(0).iPt();return()=>s.Dct()-15},()=>"",t=>{const s=t.pPt(0).iPt();return()=>s.Dct()},()=>"2",()=>"",()=>61.686903,()=>59.91098,()=>-61.686903,()=>29.528199,()=>44.131819,()=>-29.528199,()=>33.756396,()=>58.479391,()=>-33.756396,()=>79.403096,()=>78.622082,()=>-79.403096,()=>45.381629,()=>73.323211,()=>-45.381629,()=>42.343821,()=>62.905841,()=>-42.343821,()=>38.513291,()=>64.537412,()=>-38.513291,()=>53.651097,()=>81.512825,()=>-53.651097,t=>{const s=t.pPt(0).iPt(),e=t.pPt(1).iPt();return()=>mR(mR(s.Dct(),"/"),e.Dct())},t=>{const s=t.pPt(0);return()=>s.JRt()-5},()=>"",()=>360,()=>"7",t=>{const s=t.pPt(0).iPt(),e=t.pPt(1).iPt();return()=>s.Dct()*e.Dct()},t=>{const s=t.pPt(0).iPt(),e=t.pPt(1).iPt();return()=>s.Dct()/e.Dct()*399},()=>"",()=>"",()=>"",()=>"",()=>"",()=>"",()=>"",()=>10,()=>"",t=>{const s=t.pPt(0);return()=>s.URt()+25},()=>.05,()=>"",()=>.03,()=>11,()=>160,()=>100,()=>"",t=>{const s=t.pPt(0);return()=>s.URt()-100},()=>.5,t=>{const s=t.pPt(0);return()=>s.URt()+100},t=>{const s=t.pPt(0);return()=>s.URt()+200},()=>"",()=>"",t=>{const s=t.pPt(0).iPt();return()=>Math.round(1.5*s.Dct())},t=>{const s=t.pPt(0);return()=>s.URt()-450},()=>40,()=>"",()=>41,()=>39,()=>"",()=>"",()=>65.850548,()=>"",()=>15,t=>{const s=t.pPt(0).ORt();return()=>s(1,2)},t=>{const s=t.pPt(0),e=t.pPt(1);return()=>s.JRt()/e.JRt()*30},t=>{const s=t.pPt(0).iPt();return()=>2*s.Dct()},t=>{const s=t.pPt(0).iPt();return()=>4*s.Dct()},t=>{const s=t.pPt(0).iPt();return()=>6*s.Dct()},t=>{const s=t.pPt(0).iPt();return()=>8*s.Dct()},t=>{const s=t.pPt(0);return()=>s.URt()-50},t=>{const s=t.pPt(0),e=t.pPt(1);return()=>s.jRt()/e.jRt()*64.189162},t=>{const s=t.pPt(0);return()=>s.URt()+2e3},()=>"",t=>{const s=t.pPt(0).iPt();return()=>s.Dct()/2},t=>{const s=t.pPt(0).iPt();return()=>12*s.Dct()},t=>{const s=t.pPt(0).iPt();return()=>1.3*s.Dct()},t=>{const s=t.pPt(0).iPt();return()=>1.4*s.Dct()},t=>{const s=t.pPt(0).iPt();return()=>1.8*s.Dct()},()=>350,t=>{const s=t.pPt(0).iPt();return()=>.7*s.Dct()},()=>"",()=>"",t=>{const s=t.pPt(0).ORt();return()=>s("","")},()=>"",()=>8,t=>{const s=t.pPt(0).ORt();return()=>s("","","")},()=>"",t=>{const s=t.pPt(0).ORt();return()=>s("","","","")},()=>"",()=>20,t=>{const s=t.pPt(0).ORt();return()=>s("","","","","")},()=>"",()=>30,t=>{const s=t.pPt(0).ORt();return()=>s("","","","","","")},()=>"",()=>35,t=>{const s=t.pPt(0).ORt();return()=>s("","","","","","","")},()=>"",t=>{const s=t.pPt(0).ORt();return()=>s("","","","","","","","")},()=>"",()=>45,t=>{const s=t.pPt(0).ORt();return()=>s("","","","","","","","","")},()=>"",()=>50,t=>{const s=t.pPt(0).ORt();return()=>s("","","","","","","","","","1")},()=>"1",()=>55,t=>{const s=t.pPt(0).ORt();return()=>s("","","","","","","","","","1","2")},()=>"2",()=>60,t=>{const s=t.pPt(0).ORt();return()=>s("","","","","","","","","","1","2","")},()=>"",()=>65,t=>{const s=t.pPt(0).ORt();return()=>s("","","","","","","","","","1","2","","3")},()=>"3",t=>{const s=t.pPt(0).ORt();return()=>s(-.5)},t=>{const s=t.pPt(0);return()=>s.URt()-200},()=>42,()=>.039,t=>{const s=t.pPt(0).iPt();return()=>s.Dct()/.7},t=>{const s=t.pPt(0).ORt();return()=>s(34,35,36)},t=>{const s=t.pPt(0);return()=>-1*s.URt()},t=>{const s=t.pPt(0),e=t.pPt(1).ORt();return()=>s.URt()+e(-86,86)},()=>.7,()=>1e3,()=>64,()=>500,()=>-717706215031807,()=>-0x6141850617ff,()=>223.9,()=>309.9,()=>"",t=>{const s=t.pPt(0);return()=>s.URt()-115},()=>"",()=>6,()=>"",()=>9,t=>{const s=t.pPt(0);return()=>s.URt(2)},()=>"",()=>"",()=>"",t=>{const s=t.pPt(0).ORt();return()=>Math.round(s(1,145))},()=>150,()=>"",()=>2500,()=>"",t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3);return()=>yR.Qn(yR.nr(s.URt(),e.URt(),i.URt(),n.URt()))+90},t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3);return()=>yR.er(s.URt(),e.URt(),i.URt(),n.URt())},()=>25,()=>1.2,t=>{const s=t.pPt(0).ORt();return()=>s()-100},t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},t=>{const s=t.pPt(0).iPt();return()=>s.Dct()-10},t=>{const s=t.pPt(0).ORt(),e=t.pPt(1),i=t.pPt(2);return()=>s(e.URt(2),i.URt(3))},t=>{const s=t.pPt(0).ORt(),e=t.pPt(1),i=t.pPt(2);return()=>s(e.URt(4),i.URt(5))},()=>.015,t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2);return()=>mR("",s.URt(e.jRt(),i.jRt(),0))},()=>70,()=>1.5,t=>{const s=t.pPt(0).ORt();return()=>Math.round(s(1,1,2,2,3))},()=>.4,t=>{const s=t.pPt(0).ORt();return()=>Math.round(s(10,30))},t=>{const s=t.pPt(0).ORt();return()=>Math.round(s(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,2,2,3,3,4,4,5,6,7))},t=>{const s=t.pPt(0);return()=>s.URt()-150},t=>{const s=t.pPt(0).iPt();return()=>Math.round(s.Dct()/8)},t=>{const s=t.pPt(0).iPt();return()=>Math.round(s.Dct()/12)},t=>{const s=t.pPt(0).iPt();return()=>Math.round(s.Dct()/10)},()=>12,()=>13,()=>14,()=>16,()=>17,()=>18,()=>19,t=>{const s=t.pPt(0);return()=>s.URt()-31},t=>{const s=t.pPt(0).iPt(),e=t.pPt(1);return()=>s.Dct()-e.URt()},t=>{const s=t.pPt(0);return()=>s.URt()+40},t=>{const s=t.pPt(0).iPt(),e=t.pPt(1).iPt();return()=>Math.round(s.Dct()+e.Dct()/2)},t=>{const s=t.pPt(0).iPt();return()=>mR("-",s.Dct())},()=>270,()=>-65.845881,()=>174.268796,()=>18.8,()=>65.845881,()=>340,t=>{const s=t.pPt(0);return()=>s.JRt()-15},t=>{const s=t.pPt(0);return()=>s.JRt()-45},()=>"",t=>{const s=t.pPt(0);return()=>s.JRt()+15},()=>120,()=>36,()=>34,t=>{const s=t.pPt(0).iPt();return()=>Math.round(s.Dct()/3)},t=>{const s=t.pPt(0).iPt();return()=>Math.round(s.Dct()/2)},()=>68.643299,()=>-68.643299,t=>{const s=t.pPt(0);return()=>s.jRt()+5},t=>{const s=t.pPt(0);return()=>s.jRt()-5},t=>{const s=t.pPt(0),e=t.pPt(1).iPt(),i=t.pPt(2).ORt();return()=>s.URt()+e.Dct()*i()},t=>{const s=t.pPt(0);return()=>s.URt()-843},t=>{const s=t.pPt(0),e=t.pPt(1).ORt();return()=>s.URt()+Math.round(e(-25,25))},()=>399,t=>{const s=t.pPt(0);return()=>s.URt()+3},t=>{const s=t.pPt(0).iPt(),e=t.pPt(1).iPt();return()=>Math.round(s.Dct()*e.Dct())},()=>318,()=>-1943,()=>"",()=>-244,()=>1571,()=>-1014,()=>"",()=>4.1,()=>1212,()=>-1212,()=>7.4,t=>{const s=t.pPt(0).ORt();return()=>s(0,1,2,0,1,2,0,1,2,3,4,5,3,4,5,6,7,8)},()=>"",()=>341,t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3);return()=>yR.Qn(yR.nr(s.URt(),e.URt(),i.URt(),n.URt()))},t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3);return()=>yR.Qn(yR.nr(s.URt(),e.URt(),i.URt(),n.URt()))+180},t=>{const s=t.pPt(0).ORt();return()=>Math.round(s(1,19))},t=>{const s=t.pPt(0);return()=>s.URt(3)},t=>{const s=t.pPt(0);return()=>s.URt(4)},()=>625,()=>242,t=>{const s=t.pPt(0),e=t.pPt(1).ORt();return()=>s.URt()+e(-400,400)},t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3),r=t.pPt(4),h=t.pPt(5),o=t.pPt(6);return()=>yR.Yn(s.URt(),e.URt()-i.URt()/2+n.URt()/2,r.URt()+h.URt()/2-o.URt()/2)},t=>{const s=t.pPt(0),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3),r=t.pPt(4),h=t.pPt(5);return()=>yR._t(s.jRt(),e.jRt(),(i.URt()-(n.URt()-r.URt()/2))/h.URt())},t=>{const s=t.pPt(0),e=t.pPt(1).iPt();return()=>yR._t(s.URt(),e.Dct(),.1)},t=>{const s=t.pPt(0).ORt(),e=t.pPt(1),i=t.pPt(2),n=t.pPt(3),r=t.pPt(4),h=t.pPt(5),o=t.pPt(6);return()=>yR.Yn(s(),e.URt()-i.URt()/2+n.URt()/2,r.URt()+h.URt()/2-o.URt()/2)},t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3","4","5")},t=>{const s=t.pPt(0).ORt();return()=>s("6","7")},t=>{const s=t.pPt(0).iPt(),e=t.pPt(1).ORt();return()=>s.Dct()+e(-25,25)},()=>"6",t=>{const s=t.pPt(0);return()=>s.jRt()/3},()=>"",t=>{const s=t.pPt(0).iPt();return()=>s.Dct()-5},()=>"",()=>"",()=>"1",()=>"1",()=>"2",t=>{const s=t.pPt(0).ORt();return()=>s("","2")},t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},()=>"",t=>{const s=t.pPt(0).ORt();return()=>s("11","12","13")},t=>{const s=t.pPt(0).ORt();return()=>s("21","22")},t=>{const s=t.pPt(0).ORt();return()=>s("31","32")},t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},()=>"",()=>"",t=>{const s=t.pPt(0).ORt();return()=>s("1","2")},t=>{const s=t.pPt(0).ORt();return()=>s("1","2")},t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},()=>"",()=>"",t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},()=>"",()=>"",()=>"2",()=>"",()=>"",()=>"",()=>"",()=>"",t=>{const s=t.pPt(0);return()=>s.URt()+50},t=>{const s=t.pPt(0),e=t.pPt(1);return()=>s.JRt()/e.JRt()*64.189162},()=>"",()=>"",()=>"2",()=>"",()=>"",t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},t=>{const s=t.pPt(0).iPt();return()=>s.Dct()+10},()=>"",t=>{const s=t.pPt(0).ORt();return()=>s("1","2","3")},()=>"",()=>"",()=>225,t=>{const s=t.pPt(0);return()=>s.JRt()/3},()=>-67.804952,()=>67.804952,()=>72.804952,()=>-72.804952,()=>-1e3,()=>-1e4,()=>"",()=>"1",()=>""]}var _t=self._s;self.tZt=function(){return[_t.a$.Jft,_t.oyt.hyt,_t.a$.k6t,_t.oyt.Tys,_t.oyt.wrap,_t.oyt.cSs,_t.oyt.dSs,_t.a$.Touch,_t.oyt.uws,_t.oyt.Ews,_t.oyt.Hws,_t.a$.Text,_t.a$.nes,_t.oyt.ILt,_t.a$.Keyboard,_t.a$.shs,_t.a$.eos,_t.a$.zos,_t.oyt.yxs,_t.a$.Mas,_t.oyt.Fxs,_t.a$.Audio,_t.a$.xps,_t.a$.o$.h$.zd,_t.a$.Jft.Gdt.TAt,_t.a$.o$.Gdt.$1t,_t.a$.Jft.Gdt.KAt,_t.a$.Jft.h$.zAt,_t.a$.o$.h$.t1t,_t.a$.Jft.Gdt.tOt,_t.a$.o$._dt.random,_t.a$.o$.h$.p1t,_t.a$.Jft.h$.wAt,_t.a$.Jft.h$.WAt,_t.a$.Jft.h$.n6t,_t.a$.o$.h$.G1t,_t.a$.Jft._dt.BOt,_t.a$.Jft.Gdt.z5t,_t.a$.o$._dt.FRt,_t.a$.Text.Gdt.Wc,_t.a$.zos.h$.ias,_t.a$.eos.Gdt.Fos,_t.a$.zos._dt.vas,_t.a$.Jft.h$.r6t,_t.a$.o$.h$.Qet,_t.a$.zos.Gdt.fas,_t.a$.Jft.Gdt.H5t,_t.a$.o$.Gdt.dh,_t.a$.Jft.Gdt.pM,_t.a$.o$.Gdt.L1t,_t.oyt.uws.h$.pws,_t.a$.Jft.Gdt.TY,_t.a$.Jft.Gdt.W5t,_t.a$.Jft.Gdt.yM,_t.a$.Jft._dt.SOt,_t.a$.Touch.h$.j7t,_t.oyt.uws.h$._ws,_t.oyt.hyt.Gdt.dgs,_t.oyt.Ews.Gdt.jws,_t.oyt.hyt.h$.ags,_t.a$.Jft.Gdt.f6t,_t.a$.nes.h$.ZAt,_t.a$.nes.Gdt.KAt,_t.a$.Jft.h$.dAt,_t.a$.Jft.Gdt.g6t,_t.a$.Jft.Gdt.iOt,_t.a$.Jft.h$.gAt,_t.a$.Jft.h$.I5t,_t.a$.o$.h$.S1t,_t.a$.Jft.Gdt.vFt,_t.a$.Jft._dt.I6t,_t.a$.Jft._dt.C6t,_t.oyt.Hws.Gdt.qvs,_t.a$.Jft.Gdt.j5t,_t.a$.Jft.h$.a6t,_t.a$.Jft._dt.yOt,_t.oyt.Tys.Gdt.eSs,_t.oyt.Tys.Gdt.kOt,_t.a$.Jft.Gdt.BX,_t.oyt.dSs.Gdt.kOt,_t.oyt.Hws.Gdt.u1,_t.oyt.Hws.Gdt.Xvs,_t.a$.Jft.h$.G5t,_t.a$.Jft.Gdt.eOt,_t.a$.Jft.Gdt.oAt,_t.a$.Jft.h$.cAt,_t.oyt.Hws.h$.Mvs,_t.a$.Jft.h$.ZAt,_t.a$.Jft.h$.QAt,_t.a$.o$.h$.s1t,_t.a$.Jft.Gdt.sOt,_t.oyt.Tys._dt.aSs,_t.a$.o$.h$.b1t,_t.a$.o$._dt.d4t,_t.oyt.Hws.h$.$vs,_t.oyt.dSs.Gdt.sws,_t.oyt.dSs.Gdt.ews,_t.a$.nes.Gdt.iOt,_t.a$.nes.Gdt.vFt,_t.a$.o$.Gdt.D1t,_t.a$.o$.h$.pIt,_t.a$.Touch.h$.a9t,_t.a$.o$.h$.l1t,_t.a$.o$.Gdt.V1t,_t.a$.Touch._dt.yOt,_t.a$.Touch._dt.SOt,_t.a$.Audio.Gdt.Cds,_t.a$.o$.Gdt.k1t,_t.a$.Jft.Gdt.YFt,_t.a$.Jft.h$.hAt,_t.oyt.hyt.Gdt.ggs,_t.a$.o$.h$.Q0t,_t.a$.Text.h$.gAt,_t.a$.Jft.h$.RFt,_t.a$.o$.Gdt.O1t,_t.a$.Jft.Gdt.xQ,_t.a$.Jft.h$.gFt,_t.oyt.uws.Gdt.Pws,_t.a$.Jft.h$.qFt,_t.a$.Touch.h$.z7t,_t.a$.o$.h$.a1t,_t.a$.Text.Gdt.tOt,_t.a$.Jft.Gdt.hy,_t.oyt.uws.Gdt.kOt,_t.a$.Jft.h$.TQ,_t.a$.Touch.h$.$7t,_t.a$.Jft.Gdt.ny,_t.a$.Touch.h$.o9t,_t.a$.o$.h$.PGt,_t.a$.Text.Gdt.TY,_t.a$.nes.h$.zAt,_t.a$.Jft._dt.wOt,_t.a$.Jft.h$.wFt,_t.a$.Keyboard.h$.Brs,_t.a$.Text.Gdt.Dss,_t.a$.nes.Gdt.BX,_t.a$.Jft.Gdt.UA,_t.oyt.Hws.Gdt.exs,_t.oyt.Hws.Gdt.sSs,_t.a$.Jft.Gdt.zFt,_t.a$.k6t.Gdt.iOt,_t.a$.Jft.h$._Y,_t.oyt.cSs.Gdt.sSs,_t.a$.Jft._dt.x6t,_t.a$.k6t.h$.zAt,_t.a$.Jft.Gdt.nOt,_t.a$.o$.Gdt.N1t,_t.a$.eos._dt.uos,_t.a$.Text.Gdt.pM,_t.a$.Text.h$.zAt,_t.a$.Text.h$.WAt,_t.a$.Text.Gdt.iOt,_t.a$.Text.Gdt.KAt,_t.a$.Text.Gdt.AP,_t.oyt.yxs.Gdt.yxs,_t.a$.Text._dt.SOt,_t.a$.Jft.h$.T5t,_t.a$.k6t.Gdt.TY,_t.a$.k6t.Gdt.pM,_t.a$.k6t._dt.yOt,_t.a$.k6t.Gdt.ny,_t.a$.k6t._dt.SOt,_t.a$.Jft.Gdt.nE,_t.a$.k6t.Gdt.yM,_t.a$.o$._dt.OH,_t.a$.k6t.h$.gFt,_t.a$.k6t.h$._Y,_t.a$.Jft.h$.CFt,_t.a$.Jft._dt.vOt,_t.a$.k6t._dt.vOt,_t.a$.k6t.h$.RFt,_t.a$.k6t.Gdt.hy,_t.a$.shs.h$.Ohs,_t.a$.k6t.Gdt.vFt,_t.oyt.cSs.h$._u,_t.oyt.cSs.Gdt.kOt,_t.a$.Jft.Gdt.KFt,_t.a$.nes.Gdt.yM,_t.a$.Jft.h$.yFt,_t.a$.nes.h$.yFt,_t.a$.nes.Gdt.yes,_t.a$.Jft.Gdt.J5t,_t.a$.shs.h$.jhs,_t.a$.shs.Gdt.$hs,_t.a$.Jft._dt.cOt,_t.a$.Audio.Gdt.u1,_t.a$.Audio.h$.Tds,_t.a$.Audio.Gdt.Play,_t.a$.o$.h$.x1t,_t.a$.Audio.Gdt.Adt,_t.a$.o$.Gdt.o2t,_t.a$.o$.Gdt.U1t,_t.a$.o$.Gdt.l2t,_t.a$.xps.Gdt.ems,_t.a$.o$.Gdt.Qut,_t.a$.xps.Gdt.Kps,_t.a$.xps.Gdt.sms,_t.a$.xps.h$.Wps,_t.a$.o$.Gdt.K1t,_t.a$.xps.h$.zps]},self.bZt=[{Hxs:0},{Jxs:0},{$xs:0},{qxs:0},{Xxs:0},{Yxs:0},{Kxs:0},{Zxs:0},{Qxs:0},{tbs:0},{sbs:0},{ebs:0},{ibs:0},{nbs:0},{rbs:0},{hbs:0},{obs:0},{lbs:0},{ubs:0},{cbs:0},{fbs:0},{dbs:0},{pbs:0},{mbs:0},{gbs:0},{ybs:0},{Sbs:0},{wbs:0},{vbs:0},{xbs:0},{bbs:0},{Mbs:0},{Tbs:0},{Gbs:0},{_bs:0},{Ibs:0},{Cbs:0},{Rbs:0},{Pbs:0},{Ebs:0},{Fbs:0},{Abs:0},{Obs:0},{Dbs:0},{kbs:0},{Lbs:0},{Nbs:0},{Bbs:0},{Ubs:0},{Vbs:0},{Wbs:0},{zbs:0},{jbs:0},{Hbs:0},{Jbs:0},{$bs:0},{qbs:0},{Xbs:0},{Ybs:0},{Kbs:0},{Zbs:0},{Qbs:0},{tMs:0},{sMs:0},{eMs:0},{iMs:0},{nMs:0},{rMs:0},{hMs:0},{oMs:0},{aMs:0},{lMs:0},{uMs:0},{cMs:0},{fMs:0},{dMs:0},{pMs:0},{mMs:0},{gMs:0},{yMs:0},{SMs:0},{wMs:0},{vMs:0},{xMs:0},{bMs:0},{MMs:0},{TMs:0},{GMs:0},{_Ms:0},{IMs:0},{CMs:0},{RMs:0},{PMs:0},{EMs:0},{FMs:0},{AMs:0},{OMs:0},{DMs:0},{kMs:0},{LMs:0},{NMs:0},{BMs:0},{UMs:0},{VMs:0},{WMs:0},{zMs:0},{jMs:0},{HMs:0},{JMs:0},{$Ms:0},{qMs:0},{XMs:0},{YMs:0},{KMs:0},{ZMs:0},{QMs:0},{tTs:0},{sTs:0},{eTs:0},{iTs:0},{nTs:0},{rTs:0},{hTs:0},{oTs:0},{aTs:0},{lTs:0},{uTs:0},{cTs:0},{fTs:0},{dTs:0},{pTs:0},{mTs:0},{gTs:0},{yTs:0},{STs:0},{wTs:0},{vTs:0},{xTs:0},{bTs:0},{MTs:0},{TTs:0},{GTs:0},{_Ts:0},{ITs:0},{CTs:0},{RTs:0},{PTs:0},{ETs:0},{FTs:0},{ATs:0},{OTs:0},{DTs:0},{kTs:0},{LTs:0},{NTs:0},{BTs:0},{UTs:0},{VTs:0},{WTs:0},{zTs:0},{jTs:0},{HTs:0},{JTs:0},{$Ts:0},{qTs:0},{XTs:0},{YTs:0},{KTs:0},{ZTs:0},{QTs:0},{tGs:0},{sGs:0},{eGs:0},{iGs:0},{nGs:0},{rGs:0},{hGs:0},{oGs:0},{aGs:0},{lGs:0},{uGs:0},{cGs:0},{fGs:0},{dGs:0},{pGs:0},{mGs:0},{gGs:0},{yGs:0},{SGs:0},{wGs:0},{vGs:0},{xGs:0},{bGs:0},{MGs:0},{TGs:0},{GGs:0},{_Gs:0},{IGs:0},{CGs:0},{RGs:0},{PGs:0},{EGs:0},{FGs:0},{AGs:0},{OGs:0},{DGs:0},{kGs:0},{LGs:0},{NGs:0},{BGs:0},{UGs:0},{VGs:0},{WGs:0},{zGs:0},{jGs:0},{HGs:0},{JGs:0},{$Gs:0},{qGs:0},{XGs:0},{YGs:0},{KGs:0},{ZGs:0},{QGs:0},{t_s:0},{s_s:0},{e_s:0},{i_s:0},{n_s:0},{r_s:0},{h_s:0},{o_s:0},{a_s:0},{l_s:0},{u_s:0},{c_s:0},{f_s:0},{d_s:0},{p_s:0},{m_s:0},{g_s:0},{y_s:0},{S_s:0},{w_s:0},{v_s:0},{x_s:0},{b_s:0},{M_s:0},{T_s:0},{G_s:0},{__s:0},{I_s:0},{C_s:0},{R_s:0},{P_s:0},{E_s:0},{F_s:0},{A_s:0},{O_s:0},{D_s:0},{k_s:0},{L_s:0},{N_s:0},{B_s:0},{U_s:0},{V_s:0},{W_s:0},{z_s:0},{j_s:0},{H_s:0},{J_s:0},{$_s:0},{q_s:0},{X_s:0},{Y_s:0},{K_s:0},{Z_s:0},{Q_s:0},{tIs:0},{sIs:0},{eIs:0},{iIs:0},{zos:0},{nIs:0},{rIs:0},{hIs:0},{oIs:0},{aIs:0},{lIs:0},{uIs:0},{cIs:0},{fIs:0},{dIs:0},{pIs:0},{mIs:0},{gIs:0},{yIs:0},{SIs:0},{wIs:0},{vIs:0},{xIs:0},{bIs:0},{MIs:0},{TIs:0},{GIs:0},{_Is:0},{IIs:0},{CIs:0},{RIs:0},{PIs:0},{EIs:0},{FIs:0},{AIs:0},{OIs:0},{DIs:0},{kIs:0},{LIs:0},{NIs:0},{BIs:0},{UIs:0},{VIs:0},{WIs:0},{zIs:0},{jIs:0},{HIs:0},{JIs:0},{$Is:0},{qIs:0},{XIs:0},{YIs:0},{KIs:0},{ZIs:0},{QIs:0},{tCs:0},{sCs:0},{eCs:0},{iCs:0},{nCs:0},{rCs:0},{hCs:0},{oCs:0},{aCs:0},{lCs:0},{uCs:0},{cCs:0},{fCs:0},{dCs:0},{pCs:0},{mCs:0},{gCs:0},{yCs:0},{SCs:0},{wCs:0},{vCs:0},{xCs:0},{bCs:0},{MCs:0},{TCs:0},{GCs:0},{_Cs:0},{ICs:0},{CCs:0},{RCs:0},{PCs:0},{ECs:0},{FCs:0},{ACs:0},{OCs:0},{DCs:0},{kCs:0},{LCs:0},{NCs:0},{BCs:0},{UCs:0},{VCs:0},{WCs:0},{zCs:0},{jCs:0},{HCs:0},{JCs:0},{$Cs:0},{qCs:0},{XCs:0},{YCs:0},{KCs:0},{ZCs:0},{QCs:0},{tRs:0},{sRs:0},{eRs:0},{iRs:0},{nRs:0},{rRs:0},{hRs:0},{oRs:0},{aRs:0},{lRs:0},{uRs:0},{cRs:0},{fRs:0},{dRs:0},{pRs:0},{mRs:0},{gRs:0},{yRs:0},{SRs:0},{wRs:0},{vRs:0},{xRs:0},{bRs:0},{MRs:0},{TRs:0},{GRs:0},{_Rs:0},{IRs:0},{CRs:0},{RRs:0},{PRs:0},{ERs:0},{FRs:0},{ARs:0},{ORs:0},{DRs:0},{kRs:0},{LRs:0},{NRs:0},{BRs:0},{URs:0},{VRs:0},{WRs:0},{zRs:0},{jRs:0},{HRs:0},{JRs:0},{$Rs:0},{qRs:0},{XRs:0},{YRs:0},{KRs:0},{ZRs:0},{QRs:0},{tPs:0},{sPs:0},{ePs:0},{iPs:0},{nPs:0},{rPs:0},{hPs:0},{oPs:0},{aPs:0},{lPs:0},{uPs:0},{cPs:0},{fPs:0},{dPs:0},{pPs:0},{mPs:0},{gPs:0},{yPs:0},{SPs:0},{wPs:0},{vPs:0},{xPs:0},{bPs:0},{MPs:0},{TPs:0},{GPs:0},{_Ps:0},{IPs:0},{CPs:0},{RPs:0},{PPs:0},{EPs:0},{FPs:0},{APs:0},{OPs:0},{DPs:0},{kPs:0},{LPs:0},{NPs:0},{BPs:0},{UPs:0},{VPs:0},{WPs:0},{zPs:0},{jPs:0},{HPs:0},{JPs:0},{$Ps:0},{qPs:0},{XPs:0},{YPs:0},{KPs:0},{ZPs:0},{QPs:0},{tEs:0},{sEs:0},{eEs:0},{iEs:0},{nEs:0},{rEs:0},{hEs:0},{oEs:0},{aEs:0},{lEs:0},{uEs:0},{cEs:0},{fEs:0},{dEs:0},{pEs:0},{mEs:0},{gEs:0},{yEs:0},{SEs:0},{wEs:0},{vEs:0},{xEs:0},{bEs:0},{MEs:0},{TEs:0},{GEs:0},{_Es:0},{IEs:0},{CEs:0},{REs:0},{PEs:0},{EEs:0},{FEs:0},{AEs:0},{OEs:0},{DEs:0},{kEs:0},{LEs:0},{NEs:0},{BEs:0},{UEs:0},{VEs:0},{WEs:0},{zEs:0},{jEs:0},{HEs:0},{JEs:0},{$Es:0},{qEs:0},{XEs:0},{YEs:0},{KEs:0},{ZEs:0},{QEs:0},{tFs:0},{sFs:0},{eFs:0},{iFs:0},{nFs:0},{rFs:0},{hFs:0},{oFs:0},{aFs:0},{lFs:0},{uFs:0},{cFs:0},{fFs:0},{dFs:0},{pFs:0},{mFs:0},{gFs:0},{yFs:0},{SFs:0},{wFs:0},{vFs:0},{xFs:0},{bFs:0},{MFs:0},{TFs:0},{GFs:0},{_Fs:0},{IFs:0},{CFs:0},{RFs:0},{PFs:0},{EFs:0},{FFs:0},{AFs:0},{OFs:0},{DFs:0},{kFs:0},{LFs:0},{NFs:0},{BFs:0},{UFs:0}],self.VFs={qxs:class extends self.$5t{},Xxs:class extends self.M8t{},Yxs:class extends self.M8t{},Zxs:class extends self.M8t{},Qxs:class extends self.$5t{},tbs:class extends self.$5t{},nbs:class extends self.$5t{},rbs:class extends self.$5t{},ubs:class extends self.$5t{},cbs:class extends self.$5t{},pbs:class extends self.$5t{},mbs:class extends self.$5t{},vbs:class extends self.$5t{},Mbs:class extends self.$5t{},Vbs:class extends self.$5t{},rMs:class extends self.gK{},sbs:class extends self.$5t{},hMs:class extends self.$5t{},oMs:class extends self.$5t{},aMs:class extends self.$5t{},lMs:class extends self.$5t{},cMs:class extends self.$5t{},fMs:class extends self.$5t{},dMs:class extends self.$5t{},pMs:class extends self.$5t{},mMs:class extends self.$5t{},yMs:class extends self.$5t{},SMs:class extends self.$5t{},wMs:class extends self.$5t{},vMs:class extends self.$5t{},xMs:class extends self.$5t{},bMs:class extends self.$5t{},TMs:class extends self.$5t{},RMs:class extends self.$5t{},BMs:class extends self.$5t{},UMs:class extends self.$5t{},VMs:class extends self.$5t{},JMs:class extends self.$5t{},$Ms:class extends self.$5t{},mTs:class extends self.$5t{},gTs:class extends self.mss{},iTs:class extends self.mss{},STs:class extends self.$5t{},wTs:class extends self.mss{},vTs:class extends self.$5t{},bTs:class extends self.$5t{},MTs:class extends self.$5t{},TTs:class extends self.$5t{},GTs:class extends self.$5t{},gbs:class extends self.$5t{},CTs:class extends self.$5t{},RTs:class extends self.$5t{},PTs:class extends self.$5t{},gMs:class extends self.$5t{},ETs:class extends self.$5t{},FTs:class extends self.$5t{},DTs:class extends self.Cis{},kTs:class extends self.$5t{},LTs:class extends self.$5t{},BTs:class extends self.$5t{},UTs:class extends self.$5t{},VTs:class extends self.$5t{},WTs:class extends self.mss{},zTs:class extends self.$5t{},jTs:class extends self.Cis{},HTs:class extends self.$5t{},JTs:class extends self.mss{},oGs:class extends self.$5t{},aGs:class extends self.$5t{},lGs:class extends self.$5t{},uGs:class extends self.$5t{},cGs:class extends self.$5t{},fGs:class extends self.$5t{},dGs:class extends self.$5t{},pGs:class extends self.$5t{},mGs:class extends self.$5t{},gGs:class extends self.$5t{},yGs:class extends self.$5t{},SGs:class extends self.$5t{},wGs:class extends self.$5t{},vGs:class extends self.$5t{},xGs:class extends self.$5t{},MGs:class extends self.$5t{},TGs:class extends self.$5t{},GGs:class extends self.$5t{},IGs:class extends self.$5t{},CGs:class extends self.$5t{},RGs:class extends self.$5t{},OGs:class extends self.$5t{},DGs:class extends self.$5t{},NGs:class extends self.$5t{},BGs:class extends self.$5t{},UGs:class extends self.$5t{},zGs:class extends self.$5t{},oTs:class extends self.mss{},aTs:class extends self.mss{},lTs:class extends self.mss{},rTs:class extends self.mss{},jGs:class extends self.mss{},hTs:class extends self.mss{},HGs:class extends self.$5t{},JGs:class extends self.Cis{},$Gs:class extends self.Cis{},qGs:class extends self.$5t{},YGs:class extends self.$5t{},KGs:class extends self.mss{},ZGs:class extends self.mss{},QGs:class extends self.$5t{},t_s:class extends self.$5t{},s_s:class extends self.$5t{},e_s:class extends self.mss{},VGs:class extends self.mss{},i_s:class extends self.mss{},n_s:class extends self.$5t{},r_s:class extends self.gK{},h_s:class extends self.mss{},o_s:class extends self.$5t{},l_s:class extends self.$5t{},c_s:class extends self.$5t{},f_s:class extends self.$5t{},d_s:class extends self.$5t{},p_s:class extends self.$5t{},m_s:class extends self.$5t{},g_s:class extends self.$5t{},y_s:class extends self.$5t{},S_s:class extends self.$5t{},w_s:class extends self.$5t{},T_s:class extends self.$5t{},G_s:class extends self.$5t{},__s:class extends self.$5t{},fbs:class extends self.$5t{},I_s:class extends self.$5t{},C_s:class extends self.$5t{},R_s:class extends self.$5t{},P_s:class extends self.$5t{},E_s:class extends self.$5t{},F_s:class extends self.$5t{},O_s:class extends self.$5t{},D_s:class extends self.$5t{},k_s:class extends self.$5t{},L_s:class extends self.$5t{},N_s:class extends self.gK{},B_s:class extends self.$5t{},U_s:class extends self.$5t{},V_s:class extends self.$5t{},W_s:class extends self.$5t{},z_s:class extends self.$5t{},j_s:class extends self.$5t{},H_s:class extends self.$5t{},q_s:class extends self.$5t{},Q_s:class extends self.$5t{},tIs:class extends self.$5t{},sIs:class extends self.$5t{},eIs:class extends self.$5t{},iIs:class extends self.yos{},zos:class extends self.gK{},hIs:class extends self.mss{},oIs:class extends self.Cis{},lIs:class extends self.mss{},uIs:class extends self.$5t{},cIs:class extends self.M8t{},fIs:class extends self.$5t{},dIs:class extends self.Cis{},pIs:class extends self.Cis{},_Ts:class extends self.$5t{},mIs:class extends self.$5t{},SIs:class extends self.$5t{},wIs:class extends self.$5t{},vIs:class extends self.$5t{},xIs:class extends self.mss{},bIs:class extends self.$5t{},MIs:class extends self.$5t{},TIs:class extends self.$5t{},GIs:class extends self.$5t{},_Is:class extends self.$5t{},IIs:class extends self.$5t{},CIs:class extends self.$5t{},RIs:class extends self.$5t{},EIs:class extends self.$5t{},FIs:class extends self.$5t{},AIs:class extends self.Cis{},OIs:class extends self.Cis{},kIs:class extends self.$5t{},LIs:class extends self.$5t{},NIs:class extends self.mss{},BIs:class extends self.mss{},UIs:class extends self.Cis{},VIs:class extends self.$5t{},WIs:class extends self.$5t{},zIs:class extends self.mss{},jIs:class extends self.$5t{},$Is:class extends self.$5t{},qIs:class extends self.$5t{},KIs:class extends self.$5t{},ZIs:class extends self.$5t{},QIs:class extends self.$5t{},tCs:class extends self.$5t{},sCs:class extends self.$5t{},eCs:class extends self.$5t{},iCs:class extends self.$5t{},nCs:class extends self.M8t{},rCs:class extends self.M8t{},hCs:class extends self.$5t{},oCs:class extends self.$5t{},aCs:class extends self.$5t{},lCs:class extends self.$5t{},uCs:class extends self.$5t{},cCs:class extends self.$5t{},fCs:class extends self.$5t{},dCs:class extends self.$5t{},pCs:class extends self.M8t{},mCs:class extends self.$5t{},yCs:class extends self.$5t{},SCs:class extends self.$5t{},wCs:class extends self.$5t{},vCs:class extends self.mss{},xCs:class extends self.$5t{},bCs:class extends self.$5t{},MCs:class extends self.$5t{},TCs:class extends self.$5t{},GCs:class extends self.$5t{},_Cs:class extends self.$5t{},ICs:class extends self.$5t{},CCs:class extends self.$5t{},RCs:class extends self.$5t{},PCs:class extends self.$5t{},ECs:class extends self.M8t{},FCs:class extends self.M8t{},ACs:class extends self.M8t{},OCs:class extends self.M8t{},DCs:class extends self.M8t{},kCs:class extends self.$5t{},LCs:class extends self.Nls{},NCs:class extends self.M8t{},BCs:class extends self.$5t{},UCs:class extends self.$5t{},VCs:class extends self.$5t{},WCs:class extends self.$5t{},zCs:class extends self.$5t{},jCs:class extends self.$5t{},HCs:class extends self.$5t{},JCs:class extends self.$5t{},$Cs:class extends self.$5t{},qCs:class extends self.$5t{},XCs:class extends self.$5t{},YCs:class extends self.$5t{},KCs:class extends self.$5t{},ZCs:class extends self.$5t{},QCs:class extends self.$5t{},tRs:class extends self.$5t{},sRs:class extends self.$5t{},eRs:class extends self.Cis{},iRs:class extends self.$5t{},nRs:class extends self.$5t{},rRs:class extends self.mss{},hRs:class extends self.mss{},aRs:class extends self.$5t{},tTs:class extends self.$5t{},lRs:class extends self.Cis{},uRs:class extends self.$5t{},cRs:class extends self.mss{},dRs:class extends self.$5t{},pRs:class extends self.$5t{},mRs:class extends self.$5t{},wRs:class extends self.$5t{},vRs:class extends self.$5t{},xRs:class extends self.$5t{},bRs:class extends self.$5t{},MRs:class extends self.$5t{},TRs:class extends self.$5t{},GRs:class extends self.$5t{},_Rs:class extends self.Cis{},IRs:class extends self.Cis{},CRs:class extends self.$5t{},RRs:class extends self.$5t{},PRs:class extends self.$5t{},ERs:class extends self.mss{},FRs:class extends self.gK{},ARs:class extends self.$5t{},ORs:class extends self.$5t{},DRs:class extends self.Cis{},kRs:class extends self.$5t{},LRs:class extends self.$5t{},NRs:class extends self.$5t{},BRs:class extends self.$5t{},URs:class extends self.$5t{},VRs:class extends self.$5t{},WRs:class extends self.$5t{},zRs:class extends self.$5t{},jRs:class extends self.$5t{},HRs:class extends self.Nls{},JRs:class extends self.M8t{},$Rs:class extends self.M8t{},qRs:class extends self.$5t{},YRs:class extends self.$5t{},KRs:class extends self.$5t{},ZRs:class extends self.$5t{},QRs:class extends self.$5t{},tPs:class extends self.gK{},sPs:class extends self.$5t{},Kxs:class extends self.$5t{},fTs:class extends self.$5t{},ePs:class extends self.$5t{},iPs:class extends self.$5t{},PGs:class extends self.$5t{},nPs:class extends self.$5t{},rPs:class extends self.M8t{},hPs:class extends self.$5t{},oPs:class extends self.$5t{},aPs:class extends self.$5t{},lPs:class extends self.$5t{},uPs:class extends self.mss{},cPs:class extends self.$5t{},fPs:class extends self.$5t{},dPs:class extends self.$5t{},pPs:class extends self.$5t{},mPs:class extends self.$5t{},yPs:class extends self.$5t{},SPs:class extends self.$5t{},hGs:class extends self.$5t{},wPs:class extends self.$5t{},vPs:class extends self.$5t{},xPs:class extends self.$5t{},bPs:class extends self.M8t{},MPs:class extends self.$5t{},TPs:class extends self.Cis{},GPs:class extends self.Cis{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/